function mp(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var im={exports:{}},Si={},om={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),pp=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),jp=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),vp=Symbol.for("react.suspense"),wp=Symbol.for("react.memo"),kp=Symbol.for("react.lazy"),$x=Symbol.iterator;function Sp(t){return t===null||typeof t!="object"?null:(t=$x&&t[$x]||t["@@iterator"],typeof t=="function"?t:null)}var cm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dm=Object.assign,xm={};function Qa(t,s,r){this.props=t,this.context=s,this.refs=xm,this.updater=r||cm}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function um(){}um.prototype=Qa.prototype;function Bc(t,s,r){this.props=t,this.context=s,this.refs=xm,this.updater=r||cm}var Vc=Bc.prototype=new um;Vc.constructor=Bc;dm(Vc,Qa.prototype);Vc.isPureReactComponent=!0;var Ax=Array.isArray,mm=Object.prototype.hasOwnProperty,Wc={current:null},hm={key:!0,ref:!0,__self:!0,__source:!0};function pm(t,s,r){var a,n={},l=null,i=null;if(s!=null)for(a in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)mm.call(s,a)&&!hm.hasOwnProperty(a)&&(n[a]=s[a]);var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){for(var c=Array(d),m=0;m<d;m++)c[m]=arguments[m+2];n.children=c}if(t&&t.defaultProps)for(a in d=t.defaultProps,d)n[a]===void 0&&(n[a]=d[a]);return{$$typeof:sl,type:t,key:l,ref:i,props:n,_owner:Wc.current}}function Cp(t,s){return{$$typeof:sl,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===sl}function Tp(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Dx=/\/+/g;function Xi(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Tp(""+t.key):s.toString(36)}function Dl(t,s,r,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case sl:case pp:i=!0}}if(i)return i=t,n=n(i),t=a===""?"."+Xi(i,0):a,Ax(n)?(r="",t!=null&&(r=t.replace(Dx,"$&/")+"/"),Dl(n,s,r,"",function(m){return m})):n!=null&&(Yc(n)&&(n=Cp(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Dx,"$&/")+"/")+t)),s.push(n)),1;if(i=0,a=a===""?".":a+":",Ax(t))for(var d=0;d<t.length;d++){l=t[d];var c=a+Xi(l,d);i+=Dl(l,s,r,c,n)}else if(c=Sp(t),typeof c=="function")for(t=c.call(t),d=0;!(l=t.next()).done;)l=l.value,c=a+Xi(l,d++),i+=Dl(l,s,r,c,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function xl(t,s,r){if(t==null)return t;var a=[],n=0;return Dl(t,a,"","",function(l){return s.call(r,l,n++)}),a}function Ep(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var hs={current:null},Il={transition:null},Pp={ReactCurrentDispatcher:hs,ReactCurrentBatchConfig:Il,ReactCurrentOwner:Wc};function gm(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:xl,forEach:function(t,s,r){xl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return xl(t,function(){s++}),s},toArray:function(t){return xl(t,function(s){return s})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=Qa;tt.Fragment=gp;tt.Profiler=yp;tt.PureComponent=Bc;tt.StrictMode=fp;tt.Suspense=vp;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pp;tt.act=gm;tt.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=dm({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Wc.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(c in s)mm.call(s,c)&&!hm.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&d!==void 0?d[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){d=Array(c);for(var m=0;m<c;m++)d[m]=arguments[m+2];a.children=d}return{$$typeof:sl,type:t.type,key:n,ref:l,props:a,_owner:i}};tt.createContext=function(t){return t={$$typeof:jp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bp,_context:t},t.Consumer=t};tt.createElement=pm;tt.createFactory=function(t){var s=pm.bind(null,t);return s.type=t,s};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:Np,render:t}};tt.isValidElement=Yc;tt.lazy=function(t){return{$$typeof:kp,_payload:{_status:-1,_result:t},_init:Ep}};tt.memo=function(t,s){return{$$typeof:wp,type:t,compare:s===void 0?null:s}};tt.startTransition=function(t){var s=Il.transition;Il.transition={};try{t()}finally{Il.transition=s}};tt.unstable_act=gm;tt.useCallback=function(t,s){return hs.current.useCallback(t,s)};tt.useContext=function(t){return hs.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return hs.current.useDeferredValue(t)};tt.useEffect=function(t,s){return hs.current.useEffect(t,s)};tt.useId=function(){return hs.current.useId()};tt.useImperativeHandle=function(t,s,r){return hs.current.useImperativeHandle(t,s,r)};tt.useInsertionEffect=function(t,s){return hs.current.useInsertionEffect(t,s)};tt.useLayoutEffect=function(t,s){return hs.current.useLayoutEffect(t,s)};tt.useMemo=function(t,s){return hs.current.useMemo(t,s)};tt.useReducer=function(t,s,r){return hs.current.useReducer(t,s,r)};tt.useRef=function(t){return hs.current.useRef(t)};tt.useState=function(t){return hs.current.useState(t)};tt.useSyncExternalStore=function(t,s,r){return hs.current.useSyncExternalStore(t,s,r)};tt.useTransition=function(){return hs.current.useTransition()};tt.version="18.3.1";om.exports=tt;var o=om.exports;const fm=hp(o),$p=mp({__proto__:null,default:fm},[o]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=o,Dp=Symbol.for("react.element"),Ip=Symbol.for("react.fragment"),Mp=Object.prototype.hasOwnProperty,Lp=Ap.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Up={key:!0,ref:!0,__self:!0,__source:!0};function ym(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)Mp.call(s,a)&&!Up.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Dp,type:t,key:l,ref:i,props:n,_owner:Lp.current}}Si.Fragment=Ip;Si.jsx=ym;Si.jsxs=ym;im.exports=Si;var e=im.exports,Mo={},bm={exports:{}},As={},jm={exports:{}},Nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(O,q){var T=O.length;O.push(q);e:for(;0<T;){var j=T-1>>>1,Z=O[j];if(0<n(Z,q))O[j]=q,O[T]=Z,T=j;else break e}}function r(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var q=O[0],T=O.pop();if(T!==q){O[0]=T;e:for(var j=0,Z=O.length,I=Z>>>1;j<I;){var ce=2*(j+1)-1,J=O[ce],le=ce+1,xe=O[le];if(0>n(J,T))le<Z&&0>n(xe,J)?(O[j]=xe,O[le]=T,j=le):(O[j]=J,O[ce]=T,j=ce);else if(le<Z&&0>n(xe,T))O[j]=xe,O[le]=T,j=le;else break e}}return q}function n(O,q){var T=O.sortIndex-q.sortIndex;return T!==0?T:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,d=i.now();t.unstable_now=function(){return i.now()-d}}var c=[],m=[],b=1,f=null,u=3,v=!1,k=!1,N=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(O){for(var q=r(m);q!==null;){if(q.callback===null)a(m);else if(q.startTime<=O)a(m),q.sortIndex=q.expirationTime,s(c,q);else break;q=r(m)}}function x(O){if(N=!1,h(O),!k)if(r(c)!==null)k=!0,D(w);else{var q=r(m);q!==null&&re(x,q.startTime-O)}}function w(O,q){k=!1,N&&(N=!1,p(B),B=-1),v=!0;var T=u;try{for(h(q),f=r(c);f!==null&&(!(f.expirationTime>q)||O&&!ee());){var j=f.callback;if(typeof j=="function"){f.callback=null,u=f.priorityLevel;var Z=j(f.expirationTime<=q);q=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===r(c)&&a(c),h(q)}else a(c);f=r(c)}if(f!==null)var I=!0;else{var ce=r(m);ce!==null&&re(x,ce.startTime-q),I=!1}return I}finally{f=null,u=T,v=!1}}var z=!1,C=null,B=-1,G=5,K=-1;function ee(){return!(t.unstable_now()-K<G)}function X(){if(C!==null){var O=t.unstable_now();K=O;var q=!0;try{q=C(!0,O)}finally{q?F():(z=!1,C=null)}}else z=!1}var F;if(typeof g=="function")F=function(){g(X)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,W=R.port2;R.port1.onmessage=X,F=function(){W.postMessage(null)}}else F=function(){y(X,0)};function D(O){C=O,z||(z=!0,F())}function re(O,q){B=y(function(){O(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){k||v||(k=!0,D(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(u){case 1:case 2:case 3:var q=3;break;default:q=u}var T=u;u=q;try{return O()}finally{u=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var T=u;u=O;try{return q()}finally{u=T}},t.unstable_scheduleCallback=function(O,q,T){var j=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?j+T:j):T=j,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=T+Z,O={id:b++,callback:q,priorityLevel:O,startTime:T,expirationTime:Z,sortIndex:-1},T>j?(O.sortIndex=T,s(m,O),r(c)===null&&O===r(m)&&(N?(p(B),B=-1):N=!0,re(x,T-j))):(O.sortIndex=Z,s(c,O),k||v||(k=!0,D(w))),O},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(O){var q=u;return function(){var T=u;u=q;try{return O.apply(this,arguments)}finally{u=T}}}})(Nm);jm.exports=Nm;var zp=jm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=o,$s=zp;function Ne(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vm=new Set,Ln={};function ja(t,s){Ya(t,s),Ya(t+"Capture",s)}function Ya(t,s){for(Ln[t]=s,t=0;t<s.length;t++)vm.add(s[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lo=Object.prototype.hasOwnProperty,_p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ix={},Mx={};function Rp(t){return Lo.call(Mx,t)?!0:Lo.call(Ix,t)?!1:_p.test(t)?Mx[t]=!0:(Ix[t]=!0,!1)}function Op(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bp(t,s,r,a){if(s===null||typeof s>"u"||Op(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ps(t,s,r,a,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ss[t]=new ps(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ss[s]=new ps(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ss[t]=new ps(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ss[t]=new ps(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ss[t]=new ps(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ss[t]=new ps(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ss[t]=new ps(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ss[t]=new ps(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ss[t]=new ps(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hc=/[\-:]([a-z])/g;function Jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Hc,Jc);ss[s]=new ps(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Hc,Jc);ss[s]=new ps(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Hc,Jc);ss[s]=new ps(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ss[t]=new ps(t,1,!1,t.toLowerCase(),null,!1,!1)});ss.xlinkHref=new ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ss[t]=new ps(t,1,!1,t.toLowerCase(),null,!0,!0)});function qc(t,s,r,a){var n=ss.hasOwnProperty(s)?ss[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Bp(s,r,n,a)&&(r=null),a||n===null?Rp(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Ar=Fp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),Ca=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),Gc=Symbol.for("react.strict_mode"),Uo=Symbol.for("react.profiler"),wm=Symbol.for("react.provider"),km=Symbol.for("react.context"),Xc=Symbol.for("react.forward_ref"),zo=Symbol.for("react.suspense"),Fo=Symbol.for("react.suspense_list"),Kc=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),Sm=Symbol.for("react.offscreen"),Lx=Symbol.iterator;function nn(t){return t===null||typeof t!="object"?null:(t=Lx&&t[Lx]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Ki;function pn(t){if(Ki===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ki=s&&s[1]||""}return`
`+Ki+t}var Qi=!1;function Zi(t,s){if(!t||Qi)return"";Qi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var a=m}Reflect.construct(t,[],s)}else{try{s.call()}catch(m){a=m}t.call(s.prototype)}else{try{throw Error()}catch(m){a=m}t()}}catch(m){if(m&&a&&typeof m.stack=="string"){for(var n=m.stack.split(`
`),l=a.stack.split(`
`),i=n.length-1,d=l.length-1;1<=i&&0<=d&&n[i]!==l[d];)d--;for(;1<=i&&0<=d;i--,d--)if(n[i]!==l[d]){if(i!==1||d!==1)do if(i--,d--,0>d||n[i]!==l[d]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=d);break}}}finally{Qi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?pn(t):""}function Vp(t){switch(t.tag){case 5:return pn(t.type);case 16:return pn("Lazy");case 13:return pn("Suspense");case 19:return pn("SuspenseList");case 0:case 2:case 15:return t=Zi(t.type,!1),t;case 11:return t=Zi(t.type.render,!1),t;case 1:return t=Zi(t.type,!0),t;default:return""}}function _o(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case Ca:return"Portal";case Uo:return"Profiler";case Gc:return"StrictMode";case zo:return"Suspense";case Fo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case km:return(t.displayName||"Context")+".Consumer";case wm:return(t._context.displayName||"Context")+".Provider";case Xc:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kc:return s=t.displayName||null,s!==null?s:_o(t.type)||"Memo";case Ur:s=t._payload,t=t._init;try{return _o(t(s))}catch{}}return null}function Wp(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _o(s);case 8:return s===Gc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ea(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Yp(t){var s=Cm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ml(t){t._valueTracker||(t._valueTracker=Yp(t))}function Tm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=Cm(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ro(t,s){var r=s.checked;return Tt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ux(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=ea(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Em(t,s){s=s.checked,s!=null&&qc(t,"checked",s,!1)}function Oo(t,s){Em(t,s);var r=ea(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Bo(t,s.type,r):s.hasOwnProperty("defaultValue")&&Bo(t,s.type,ea(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function zx(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Bo(t,s,r){(s!=="number"||ql(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gn=Array.isArray;function Fa(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+ea(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Vo(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Tt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fx(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Ne(92));if(gn(r)){if(1<r.length)throw Error(Ne(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:ea(r)}}function Pm(t,s){var r=ea(s.value),a=ea(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function _x(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function $m(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wo(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?$m(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,Am=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Un(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hp=["Webkit","ms","Moz","O"];Object.keys(wn).forEach(function(t){Hp.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),wn[s]=wn[t]})});function Dm(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||wn.hasOwnProperty(t)&&wn[t]?(""+s).trim():s+"px"}function Im(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Dm(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var Jp=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(t,s){if(s){if(Jp[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Ne(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Ne(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Ne(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Ne(62))}}function Ho(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=null;function Qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qo=null,_a=null,Ra=null;function Rx(t){if(t=nl(t)){if(typeof qo!="function")throw Error(Ne(280));var s=t.stateNode;s&&(s=$i(s),qo(t.stateNode,t.type,s))}}function Mm(t){_a?Ra?Ra.push(t):Ra=[t]:_a=t}function Lm(){if(_a){var t=_a,s=Ra;if(Ra=_a=null,Rx(t),s)for(t=0;t<s.length;t++)Rx(s[t])}}function Um(t,s){return t(s)}function zm(){}var eo=!1;function Fm(t,s,r){if(eo)return t(s,r);eo=!0;try{return Um(t,s,r)}finally{eo=!1,(_a!==null||Ra!==null)&&(zm(),Lm())}}function zn(t,s){var r=t.stateNode;if(r===null)return null;var a=$i(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ne(231,s,typeof r));return r}var Go=!1;if(Cr)try{var ln={};Object.defineProperty(ln,"passive",{get:function(){Go=!0}}),window.addEventListener("test",ln,ln),window.removeEventListener("test",ln,ln)}catch{Go=!1}function qp(t,s,r,a,n,l,i,d,c){var m=Array.prototype.slice.call(arguments,3);try{s.apply(r,m)}catch(b){this.onError(b)}}var kn=!1,Gl=null,Xl=!1,Xo=null,Gp={onError:function(t){kn=!0,Gl=t}};function Xp(t,s,r,a,n,l,i,d,c){kn=!1,Gl=null,qp.apply(Gp,arguments)}function Kp(t,s,r,a,n,l,i,d,c){if(Xp.apply(this,arguments),kn){if(kn){var m=Gl;kn=!1,Gl=null}else throw Error(Ne(198));Xl||(Xl=!0,Xo=m)}}function Na(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function _m(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ox(t){if(Na(t)!==t)throw Error(Ne(188))}function Qp(t){var s=t.alternate;if(!s){if(s=Na(t),s===null)throw Error(Ne(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Ox(n),t;if(l===a)return Ox(n),s;l=l.sibling}throw Error(Ne(188))}if(r.return!==a.return)r=n,a=l;else{for(var i=!1,d=n.child;d;){if(d===r){i=!0,r=n,a=l;break}if(d===a){i=!0,a=n,r=l;break}d=d.sibling}if(!i){for(d=l.child;d;){if(d===r){i=!0,r=l,a=n;break}if(d===a){i=!0,a=l,r=n;break}d=d.sibling}if(!i)throw Error(Ne(189))}}if(r.alternate!==a)throw Error(Ne(190))}if(r.tag!==3)throw Error(Ne(188));return r.stateNode.current===r?t:s}function Rm(t){return t=Qp(t),t!==null?Om(t):null}function Om(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Om(t);if(s!==null)return s;t=t.sibling}return null}var Bm=$s.unstable_scheduleCallback,Bx=$s.unstable_cancelCallback,Zp=$s.unstable_shouldYield,eg=$s.unstable_requestPaint,It=$s.unstable_now,tg=$s.unstable_getCurrentPriorityLevel,Zc=$s.unstable_ImmediatePriority,Vm=$s.unstable_UserBlockingPriority,Kl=$s.unstable_NormalPriority,sg=$s.unstable_LowPriority,Wm=$s.unstable_IdlePriority,Ci=null,mr=null;function rg(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(Ci,t,void 0,(t.current.flags&128)===128)}catch{}}var Ks=Math.clz32?Math.clz32:lg,ag=Math.log,ng=Math.LN2;function lg(t){return t>>>=0,t===0?32:31-(ag(t)/ng|0)|0}var pl=64,gl=4194304;function fn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var d=i&~n;d!==0?a=fn(d):(l&=i,l!==0&&(a=fn(l)))}else i=r&~n,i!==0?a=fn(i):l!==0&&(a=fn(l));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-Ks(s),n=1<<r,a|=t[r],s&=~n;return a}function ig(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Ks(l),d=1<<i,c=n[i];c===-1?(!(d&r)||d&a)&&(n[i]=ig(d,s)):c<=s&&(t.expiredLanes|=d),l&=~d}}function Ko(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ym(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function to(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function rl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Ks(s),t[s]=r}function cg(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Ks(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function ed(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-Ks(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var mt=0;function Hm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jm,td,qm,Gm,Xm,Qo=!1,fl=[],Vr=null,Wr=null,Yr=null,Fn=new Map,_n=new Map,Fr=[],dg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vx(t,s){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Fn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function on(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=nl(s),s!==null&&td(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function xg(t,s,r,a,n){switch(s){case"focusin":return Vr=on(Vr,t,s,r,a,n),!0;case"dragenter":return Wr=on(Wr,t,s,r,a,n),!0;case"mouseover":return Yr=on(Yr,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return Fn.set(l,on(Fn.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,_n.set(l,on(_n.get(l)||null,t,s,r,a,n)),!0}return!1}function Km(t){var s=oa(t.target);if(s!==null){var r=Na(s);if(r!==null){if(s=r.tag,s===13){if(s=_m(r),s!==null){t.blockedOn=s,Xm(t.priority,function(){qm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ml(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Zo(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Jo=a,r.target.dispatchEvent(a),Jo=null}else return s=nl(r),s!==null&&td(s),t.blockedOn=r,!1;s.shift()}return!0}function Wx(t,s,r){Ml(t)&&r.delete(s)}function ug(){Qo=!1,Vr!==null&&Ml(Vr)&&(Vr=null),Wr!==null&&Ml(Wr)&&(Wr=null),Yr!==null&&Ml(Yr)&&(Yr=null),Fn.forEach(Wx),_n.forEach(Wx)}function cn(t,s){t.blockedOn===s&&(t.blockedOn=null,Qo||(Qo=!0,$s.unstable_scheduleCallback($s.unstable_NormalPriority,ug)))}function Rn(t){function s(n){return cn(n,t)}if(0<fl.length){cn(fl[0],t);for(var r=1;r<fl.length;r++){var a=fl[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Vr!==null&&cn(Vr,t),Wr!==null&&cn(Wr,t),Yr!==null&&cn(Yr,t),Fn.forEach(s),_n.forEach(s),r=0;r<Fr.length;r++)a=Fr[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Fr.length&&(r=Fr[0],r.blockedOn===null);)Km(r),r.blockedOn===null&&Fr.shift()}var Oa=Ar.ReactCurrentBatchConfig,Zl=!0;function mg(t,s,r,a){var n=mt,l=Oa.transition;Oa.transition=null;try{mt=1,sd(t,s,r,a)}finally{mt=n,Oa.transition=l}}function hg(t,s,r,a){var n=mt,l=Oa.transition;Oa.transition=null;try{mt=4,sd(t,s,r,a)}finally{mt=n,Oa.transition=l}}function sd(t,s,r,a){if(Zl){var n=Zo(t,s,r,a);if(n===null)uo(t,s,a,ei,r),Vx(t,a);else if(xg(n,t,s,r,a))a.stopPropagation();else if(Vx(t,a),s&4&&-1<dg.indexOf(t)){for(;n!==null;){var l=nl(n);if(l!==null&&Jm(l),l=Zo(t,s,r,a),l===null&&uo(t,s,a,ei,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else uo(t,s,a,null,r)}}var ei=null;function Zo(t,s,r,a){if(ei=null,t=Qc(a),t=oa(t),t!==null)if(s=Na(t),s===null)t=null;else if(r=s.tag,r===13){if(t=_m(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ei=t,null}function Qm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tg()){case Zc:return 1;case Vm:return 4;case Kl:case sg:return 16;case Wm:return 536870912;default:return 16}default:return 16}}var Rr=null,rd=null,Ll=null;function Zm(){if(Ll)return Ll;var t,s=rd,r=s.length,a,n="value"in Rr?Rr.value:Rr.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var i=r-t;for(a=1;a<=i&&s[r-a]===n[l-a];a++);return Ll=n.slice(t,1<a?1-a:void 0)}function Ul(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function Yx(){return!1}function Ds(t){function s(r,a,n,l,i){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?yl:Yx,this.isPropagationStopped=Yx,this}return Tt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),s}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=Ds(Za),al=Tt({},Za,{view:0,detail:0}),pg=Ds(al),so,ro,dn,Ti=Tt({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dn&&(dn&&t.type==="mousemove"?(so=t.screenX-dn.screenX,ro=t.screenY-dn.screenY):ro=so=0,dn=t),so)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),Hx=Ds(Ti),gg=Tt({},Ti,{dataTransfer:0}),fg=Ds(gg),yg=Tt({},al,{relatedTarget:0}),ao=Ds(yg),bg=Tt({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),jg=Ds(bg),Ng=Tt({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vg=Ds(Ng),wg=Tt({},Za,{data:0}),Jx=Ds(wg),kg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Cg[t])?!!s[t]:!1}function nd(){return Tg}var Eg=Tt({},al,{key:function(t){if(t.key){var s=kg[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pg=Ds(Eg),$g=Tt({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qx=Ds($g),Ag=Tt({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),Dg=Ds(Ag),Ig=Tt({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mg=Ds(Ig),Lg=Tt({},Ti,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ug=Ds(Lg),zg=[9,13,27,32],ld=Cr&&"CompositionEvent"in window,Sn=null;Cr&&"documentMode"in document&&(Sn=document.documentMode);var Fg=Cr&&"TextEvent"in window&&!Sn,e0=Cr&&(!ld||Sn&&8<Sn&&11>=Sn),Gx=" ",Xx=!1;function t0(t,s){switch(t){case"keyup":return zg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ea=!1;function _g(t,s){switch(t){case"compositionend":return s0(s);case"keypress":return s.which!==32?null:(Xx=!0,Gx);case"textInput":return t=s.data,t===Gx&&Xx?null:t;default:return null}}function Rg(t,s){if(Ea)return t==="compositionend"||!ld&&t0(t,s)?(t=Zm(),Ll=rd=Rr=null,Ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return e0&&s.locale!=="ko"?null:s.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Og[t.type]:s==="textarea"}function r0(t,s,r,a){Mm(a),s=ti(s,"onChange"),0<s.length&&(r=new ad("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Cn=null,On=null;function Bg(t){h0(t,0)}function Ei(t){var s=Aa(t);if(Tm(s))return t}function Vg(t,s){if(t==="change")return s}var a0=!1;if(Cr){var no;if(Cr){var lo="oninput"in document;if(!lo){var Qx=document.createElement("div");Qx.setAttribute("oninput","return;"),lo=typeof Qx.oninput=="function"}no=lo}else no=!1;a0=no&&(!document.documentMode||9<document.documentMode)}function Zx(){Cn&&(Cn.detachEvent("onpropertychange",n0),On=Cn=null)}function n0(t){if(t.propertyName==="value"&&Ei(On)){var s=[];r0(s,On,t,Qc(t)),Fm(Bg,s)}}function Wg(t,s,r){t==="focusin"?(Zx(),Cn=s,On=r,Cn.attachEvent("onpropertychange",n0)):t==="focusout"&&Zx()}function Yg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ei(On)}function Hg(t,s){if(t==="click")return Ei(s)}function Jg(t,s){if(t==="input"||t==="change")return Ei(s)}function qg(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Zs=typeof Object.is=="function"?Object.is:qg;function Bn(t,s){if(Zs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Lo.call(s,n)||!Zs(t[n],s[n]))return!1}return!0}function eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tu(t,s){var r=eu(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=eu(r)}}function l0(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?l0(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function i0(){for(var t=window,s=ql();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=ql(t.document)}return s}function id(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Gg(t){var s=i0(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&l0(r.ownerDocument.documentElement,r)){if(a!==null&&id(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=tu(r,l);var i=tu(r,a);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xg=Cr&&"documentMode"in document&&11>=document.documentMode,Pa=null,ec=null,Tn=null,tc=!1;function su(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tc||Pa==null||Pa!==ql(a)||(a=Pa,"selectionStart"in a&&id(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Tn&&Bn(Tn,a)||(Tn=a,a=ti(ec,"onSelect"),0<a.length&&(s=new ad("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Pa)))}function bl(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var $a={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},io={},o0={};Cr&&(o0=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Pi(t){if(io[t])return io[t];if(!$a[t])return t;var s=$a[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in o0)return io[t]=s[r];return t}var c0=Pi("animationend"),d0=Pi("animationiteration"),x0=Pi("animationstart"),u0=Pi("transitionend"),m0=new Map,ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(t,s){m0.set(t,s),ja(s,[t])}for(var oo=0;oo<ru.length;oo++){var co=ru[oo],Kg=co.toLowerCase(),Qg=co[0].toUpperCase()+co.slice(1);sa(Kg,"on"+Qg)}sa(c0,"onAnimationEnd");sa(d0,"onAnimationIteration");sa(x0,"onAnimationStart");sa("dblclick","onDoubleClick");sa("focusin","onFocus");sa("focusout","onBlur");sa(u0,"onTransitionEnd");Ya("onMouseEnter",["mouseout","mouseover"]);Ya("onMouseLeave",["mouseout","mouseover"]);Ya("onPointerEnter",["pointerout","pointerover"]);Ya("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(yn));function au(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,Kp(a,s,void 0,t),t.currentTarget=null}function h0(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var i=a.length-1;0<=i;i--){var d=a[i],c=d.instance,m=d.currentTarget;if(d=d.listener,c!==l&&n.isPropagationStopped())break e;au(n,d,m),l=c}else for(i=0;i<a.length;i++){if(d=a[i],c=d.instance,m=d.currentTarget,d=d.listener,c!==l&&n.isPropagationStopped())break e;au(n,d,m),l=c}}}if(Xl)throw t=Xo,Xl=!1,Xo=null,t}function bt(t,s){var r=s[lc];r===void 0&&(r=s[lc]=new Set);var a=t+"__bubble";r.has(a)||(p0(s,t,2,!1),r.add(a))}function xo(t,s,r){var a=0;s&&(a|=4),p0(r,t,a,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Vn(t){if(!t[jl]){t[jl]=!0,vm.forEach(function(r){r!=="selectionchange"&&(Zg.has(r)||xo(r,!1,t),xo(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[jl]||(s[jl]=!0,xo("selectionchange",!1,s))}}function p0(t,s,r,a){switch(Qm(s)){case 1:var n=mg;break;case 4:n=hg;break;default:n=sd}r=n.bind(null,s,r,t),n=void 0,!Go||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function uo(t,s,r,a,n){var l=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var d=a.stateNode.containerInfo;if(d===n||d.nodeType===8&&d.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;d!==null;){if(i=oa(d),i===null)return;if(c=i.tag,c===5||c===6){a=l=i;continue e}d=d.parentNode}}a=a.return}Fm(function(){var m=l,b=Qc(r),f=[];e:{var u=m0.get(t);if(u!==void 0){var v=ad,k=t;switch(t){case"keypress":if(Ul(r)===0)break e;case"keydown":case"keyup":v=Pg;break;case"focusin":k="focus",v=ao;break;case"focusout":k="blur",v=ao;break;case"beforeblur":case"afterblur":v=ao;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Hx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=fg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Dg;break;case c0:case d0:case x0:v=jg;break;case u0:v=Mg;break;case"scroll":v=pg;break;case"wheel":v=Ug;break;case"copy":case"cut":case"paste":v=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=qx}var N=(s&4)!==0,y=!N&&t==="scroll",p=N?u!==null?u+"Capture":null:u;N=[];for(var g=m,h;g!==null;){h=g;var x=h.stateNode;if(h.tag===5&&x!==null&&(h=x,p!==null&&(x=zn(g,p),x!=null&&N.push(Wn(g,x,h)))),y)break;g=g.return}0<N.length&&(u=new v(u,k,null,r,b),f.push({event:u,listeners:N}))}}if(!(s&7)){e:{if(u=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",u&&r!==Jo&&(k=r.relatedTarget||r.fromElement)&&(oa(k)||k[Tr]))break e;if((v||u)&&(u=b.window===b?b:(u=b.ownerDocument)?u.defaultView||u.parentWindow:window,v?(k=r.relatedTarget||r.toElement,v=m,k=k?oa(k):null,k!==null&&(y=Na(k),k!==y||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=m),v!==k)){if(N=Hx,x="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(N=qx,x="onPointerLeave",p="onPointerEnter",g="pointer"),y=v==null?u:Aa(v),h=k==null?u:Aa(k),u=new N(x,g+"leave",v,r,b),u.target=y,u.relatedTarget=h,x=null,oa(b)===m&&(N=new N(p,g+"enter",k,r,b),N.target=h,N.relatedTarget=y,x=N),y=x,v&&k)t:{for(N=v,p=k,g=0,h=N;h;h=ka(h))g++;for(h=0,x=p;x;x=ka(x))h++;for(;0<g-h;)N=ka(N),g--;for(;0<h-g;)p=ka(p),h--;for(;g--;){if(N===p||p!==null&&N===p.alternate)break t;N=ka(N),p=ka(p)}N=null}else N=null;v!==null&&nu(f,u,v,N,!1),k!==null&&y!==null&&nu(f,y,k,N,!0)}}e:{if(u=m?Aa(m):window,v=u.nodeName&&u.nodeName.toLowerCase(),v==="select"||v==="input"&&u.type==="file")var w=Vg;else if(Kx(u))if(a0)w=Jg;else{w=Yg;var z=Wg}else(v=u.nodeName)&&v.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(w=Hg);if(w&&(w=w(t,m))){r0(f,w,r,b);break e}z&&z(t,u,m),t==="focusout"&&(z=u._wrapperState)&&z.controlled&&u.type==="number"&&Bo(u,"number",u.value)}switch(z=m?Aa(m):window,t){case"focusin":(Kx(z)||z.contentEditable==="true")&&(Pa=z,ec=m,Tn=null);break;case"focusout":Tn=ec=Pa=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,su(f,r,b);break;case"selectionchange":if(Xg)break;case"keydown":case"keyup":su(f,r,b)}var C;if(ld)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Ea?t0(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(e0&&r.locale!=="ko"&&(Ea||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ea&&(C=Zm()):(Rr=b,rd="value"in Rr?Rr.value:Rr.textContent,Ea=!0)),z=ti(m,B),0<z.length&&(B=new Jx(B,t,null,r,b),f.push({event:B,listeners:z}),C?B.data=C:(C=s0(r),C!==null&&(B.data=C)))),(C=Fg?_g(t,r):Rg(t,r))&&(m=ti(m,"onBeforeInput"),0<m.length&&(b=new Jx("onBeforeInput","beforeinput",null,r,b),f.push({event:b,listeners:m}),b.data=C))}h0(f,s)})}function Wn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ti(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=zn(t,r),l!=null&&a.unshift(Wn(t,l,n)),l=zn(t,s),l!=null&&a.push(Wn(t,l,n))),t=t.return}return a}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nu(t,s,r,a,n){for(var l=s._reactName,i=[];r!==null&&r!==a;){var d=r,c=d.alternate,m=d.stateNode;if(c!==null&&c===a)break;d.tag===5&&m!==null&&(d=m,n?(c=zn(r,l),c!=null&&i.unshift(Wn(r,c,d))):n||(c=zn(r,l),c!=null&&i.push(Wn(r,c,d)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var ef=/\r\n?/g,tf=/\u0000|\uFFFD/g;function lu(t){return(typeof t=="string"?t:""+t).replace(ef,`
`).replace(tf,"")}function Nl(t,s,r){if(s=lu(s),lu(t)!==s&&r)throw Error(Ne(425))}function si(){}var sc=null,rc=null;function ac(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nc=typeof setTimeout=="function"?setTimeout:void 0,sf=typeof clearTimeout=="function"?clearTimeout:void 0,iu=typeof Promise=="function"?Promise:void 0,rf=typeof queueMicrotask=="function"?queueMicrotask:typeof iu<"u"?function(t){return iu.resolve(null).then(t).catch(af)}:nc;function af(t){setTimeout(function(){throw t})}function mo(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),Rn(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Rn(s)}function Hr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function ou(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var en=Math.random().toString(36).slice(2),dr="__reactFiber$"+en,Yn="__reactProps$"+en,Tr="__reactContainer$"+en,lc="__reactEvents$"+en,nf="__reactListeners$"+en,lf="__reactHandles$"+en;function oa(t){var s=t[dr];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Tr]||r[dr]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=ou(t);t!==null;){if(r=t[dr])return r;t=ou(t)}return s}t=r,r=t.parentNode}return null}function nl(t){return t=t[dr]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ne(33))}function $i(t){return t[Yn]||null}var ic=[],Da=-1;function ra(t){return{current:t}}function jt(t){0>Da||(t.current=ic[Da],ic[Da]=null,Da--)}function yt(t,s){Da++,ic[Da]=t.current,t.current=s}var ta={},os=ra(ta),js=ra(!1),ha=ta;function Ha(t,s){var r=t.type.contextTypes;if(!r)return ta;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function Ns(t){return t=t.childContextTypes,t!=null}function ri(){jt(js),jt(os)}function cu(t,s,r){if(os.current!==ta)throw Error(Ne(168));yt(os,s),yt(js,r)}function g0(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(Ne(108,Wp(t)||"Unknown",n));return Tt({},r,a)}function ai(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ta,ha=os.current,yt(os,t),yt(js,js.current),!0}function du(t,s,r){var a=t.stateNode;if(!a)throw Error(Ne(169));r?(t=g0(t,s,ha),a.__reactInternalMemoizedMergedChildContext=t,jt(js),jt(os),yt(os,t)):jt(js),yt(js,r)}var vr=null,Ai=!1,ho=!1;function f0(t){vr===null?vr=[t]:vr.push(t)}function of(t){Ai=!0,f0(t)}function aa(){if(!ho&&vr!==null){ho=!0;var t=0,s=mt;try{var r=vr;for(mt=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}vr=null,Ai=!1}catch(n){throw vr!==null&&(vr=vr.slice(t+1)),Bm(Zc,aa),n}finally{mt=s,ho=!1}}return null}var Ia=[],Ma=0,ni=null,li=0,zs=[],Fs=0,pa=null,wr=1,kr="";function la(t,s){Ia[Ma++]=li,Ia[Ma++]=ni,ni=t,li=s}function y0(t,s,r){zs[Fs++]=wr,zs[Fs++]=kr,zs[Fs++]=pa,pa=t;var a=wr;t=kr;var n=32-Ks(a)-1;a&=~(1<<n),r+=1;var l=32-Ks(s)+n;if(30<l){var i=n-n%5;l=(a&(1<<i)-1).toString(32),a>>=i,n-=i,wr=1<<32-Ks(s)+n|r<<n|a,kr=l+t}else wr=1<<l|r<<n|a,kr=t}function od(t){t.return!==null&&(la(t,1),y0(t,1,0))}function cd(t){for(;t===ni;)ni=Ia[--Ma],Ia[Ma]=null,li=Ia[--Ma],Ia[Ma]=null;for(;t===pa;)pa=zs[--Fs],zs[Fs]=null,kr=zs[--Fs],zs[Fs]=null,wr=zs[--Fs],zs[Fs]=null}var Ps=null,Es=null,vt=!1,Gs=null;function b0(t,s){var r=Rs(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function xu(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ps=t,Es=Hr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ps=t,Es=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=pa!==null?{id:wr,overflow:kr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Rs(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Ps=t,Es=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(vt){var s=Es;if(s){var r=s;if(!xu(t,s)){if(oc(t))throw Error(Ne(418));s=Hr(r.nextSibling);var a=Ps;s&&xu(t,s)?b0(a,r):(t.flags=t.flags&-4097|2,vt=!1,Ps=t)}}else{if(oc(t))throw Error(Ne(418));t.flags=t.flags&-4097|2,vt=!1,Ps=t}}}function uu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ps=t}function vl(t){if(t!==Ps)return!1;if(!vt)return uu(t),vt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ac(t.type,t.memoizedProps)),s&&(s=Es)){if(oc(t))throw j0(),Error(Ne(418));for(;s;)b0(t,s),s=Hr(s.nextSibling)}if(uu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Es=Hr(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Es=null}}else Es=Ps?Hr(t.stateNode.nextSibling):null;return!0}function j0(){for(var t=Es;t;)t=Hr(t.nextSibling)}function Ja(){Es=Ps=null,vt=!1}function dd(t){Gs===null?Gs=[t]:Gs.push(t)}var cf=Ar.ReactCurrentBatchConfig;function xn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ne(309));var a=r.stateNode}if(!a)throw Error(Ne(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var d=n.refs;i===null?delete d[l]:d[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(Ne(284));if(!r._owner)throw Error(Ne(290,t))}return t}function wl(t,s){throw t=Object.prototype.toString.call(s),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function mu(t){var s=t._init;return s(t._payload)}function N0(t){function s(p,g){if(t){var h=p.deletions;h===null?(p.deletions=[g],p.flags|=16):h.push(g)}}function r(p,g){if(!t)return null;for(;g!==null;)s(p,g),g=g.sibling;return null}function a(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function n(p,g){return p=Xr(p,g),p.index=0,p.sibling=null,p}function l(p,g,h){return p.index=h,t?(h=p.alternate,h!==null?(h=h.index,h<g?(p.flags|=2,g):h):(p.flags|=2,g)):(p.flags|=1048576,g)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function d(p,g,h,x){return g===null||g.tag!==6?(g=No(h,p.mode,x),g.return=p,g):(g=n(g,h),g.return=p,g)}function c(p,g,h,x){var w=h.type;return w===Ta?b(p,g,h.props.children,x,h.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ur&&mu(w)===g.type)?(x=n(g,h.props),x.ref=xn(p,g,h),x.return=p,x):(x=Vl(h.type,h.key,h.props,null,p.mode,x),x.ref=xn(p,g,h),x.return=p,x)}function m(p,g,h,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==h.containerInfo||g.stateNode.implementation!==h.implementation?(g=vo(h,p.mode,x),g.return=p,g):(g=n(g,h.children||[]),g.return=p,g)}function b(p,g,h,x,w){return g===null||g.tag!==7?(g=ua(h,p.mode,x,w),g.return=p,g):(g=n(g,h),g.return=p,g)}function f(p,g,h){if(typeof g=="string"&&g!==""||typeof g=="number")return g=No(""+g,p.mode,h),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ul:return h=Vl(g.type,g.key,g.props,null,p.mode,h),h.ref=xn(p,null,g),h.return=p,h;case Ca:return g=vo(g,p.mode,h),g.return=p,g;case Ur:var x=g._init;return f(p,x(g._payload),h)}if(gn(g)||nn(g))return g=ua(g,p.mode,h,null),g.return=p,g;wl(p,g)}return null}function u(p,g,h,x){var w=g!==null?g.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return w!==null?null:d(p,g,""+h,x);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ul:return h.key===w?c(p,g,h,x):null;case Ca:return h.key===w?m(p,g,h,x):null;case Ur:return w=h._init,u(p,g,w(h._payload),x)}if(gn(h)||nn(h))return w!==null?null:b(p,g,h,x,null);wl(p,h)}return null}function v(p,g,h,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(h)||null,d(g,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ul:return p=p.get(x.key===null?h:x.key)||null,c(g,p,x,w);case Ca:return p=p.get(x.key===null?h:x.key)||null,m(g,p,x,w);case Ur:var z=x._init;return v(p,g,h,z(x._payload),w)}if(gn(x)||nn(x))return p=p.get(h)||null,b(g,p,x,w,null);wl(g,x)}return null}function k(p,g,h,x){for(var w=null,z=null,C=g,B=g=0,G=null;C!==null&&B<h.length;B++){C.index>B?(G=C,C=null):G=C.sibling;var K=u(p,C,h[B],x);if(K===null){C===null&&(C=G);break}t&&C&&K.alternate===null&&s(p,C),g=l(K,g,B),z===null?w=K:z.sibling=K,z=K,C=G}if(B===h.length)return r(p,C),vt&&la(p,B),w;if(C===null){for(;B<h.length;B++)C=f(p,h[B],x),C!==null&&(g=l(C,g,B),z===null?w=C:z.sibling=C,z=C);return vt&&la(p,B),w}for(C=a(p,C);B<h.length;B++)G=v(C,p,B,h[B],x),G!==null&&(t&&G.alternate!==null&&C.delete(G.key===null?B:G.key),g=l(G,g,B),z===null?w=G:z.sibling=G,z=G);return t&&C.forEach(function(ee){return s(p,ee)}),vt&&la(p,B),w}function N(p,g,h,x){var w=nn(h);if(typeof w!="function")throw Error(Ne(150));if(h=w.call(h),h==null)throw Error(Ne(151));for(var z=w=null,C=g,B=g=0,G=null,K=h.next();C!==null&&!K.done;B++,K=h.next()){C.index>B?(G=C,C=null):G=C.sibling;var ee=u(p,C,K.value,x);if(ee===null){C===null&&(C=G);break}t&&C&&ee.alternate===null&&s(p,C),g=l(ee,g,B),z===null?w=ee:z.sibling=ee,z=ee,C=G}if(K.done)return r(p,C),vt&&la(p,B),w;if(C===null){for(;!K.done;B++,K=h.next())K=f(p,K.value,x),K!==null&&(g=l(K,g,B),z===null?w=K:z.sibling=K,z=K);return vt&&la(p,B),w}for(C=a(p,C);!K.done;B++,K=h.next())K=v(C,p,B,K.value,x),K!==null&&(t&&K.alternate!==null&&C.delete(K.key===null?B:K.key),g=l(K,g,B),z===null?w=K:z.sibling=K,z=K);return t&&C.forEach(function(X){return s(p,X)}),vt&&la(p,B),w}function y(p,g,h,x){if(typeof h=="object"&&h!==null&&h.type===Ta&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case ul:e:{for(var w=h.key,z=g;z!==null;){if(z.key===w){if(w=h.type,w===Ta){if(z.tag===7){r(p,z.sibling),g=n(z,h.props.children),g.return=p,p=g;break e}}else if(z.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ur&&mu(w)===z.type){r(p,z.sibling),g=n(z,h.props),g.ref=xn(p,z,h),g.return=p,p=g;break e}r(p,z);break}else s(p,z);z=z.sibling}h.type===Ta?(g=ua(h.props.children,p.mode,x,h.key),g.return=p,p=g):(x=Vl(h.type,h.key,h.props,null,p.mode,x),x.ref=xn(p,g,h),x.return=p,p=x)}return i(p);case Ca:e:{for(z=h.key;g!==null;){if(g.key===z)if(g.tag===4&&g.stateNode.containerInfo===h.containerInfo&&g.stateNode.implementation===h.implementation){r(p,g.sibling),g=n(g,h.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else s(p,g);g=g.sibling}g=vo(h,p.mode,x),g.return=p,p=g}return i(p);case Ur:return z=h._init,y(p,g,z(h._payload),x)}if(gn(h))return k(p,g,h,x);if(nn(h))return N(p,g,h,x);wl(p,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,g!==null&&g.tag===6?(r(p,g.sibling),g=n(g,h),g.return=p,p=g):(r(p,g),g=No(h,p.mode,x),g.return=p,p=g),i(p)):r(p,g)}return y}var qa=N0(!0),v0=N0(!1),ii=ra(null),oi=null,La=null,xd=null;function ud(){xd=La=oi=null}function md(t){var s=ii.current;jt(ii),t._currentValue=s}function dc(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ba(t,s){oi=t,xd=La=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(ys=!0),t.firstContext=null)}function Vs(t){var s=t._currentValue;if(xd!==t)if(t={context:t,memoizedValue:s,next:null},La===null){if(oi===null)throw Error(Ne(308));La=t,oi.dependencies={lanes:0,firstContext:t}}else La=La.next=t;return s}var ca=null;function hd(t){ca===null?ca=[t]:ca.push(t)}function w0(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,hd(s)):(r.next=n.next,n.next=r),s.interleaved=r,Er(t,a)}function Er(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zr=!1;function pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Jr(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,it&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Er(t,r)}return n=a.interleaved,n===null?(s.next=s,hd(a)):(s.next=n.next,n.next=s),a.interleaved=s,Er(t,r)}function zl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,ed(t,r)}}function hu(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function ci(t,s,r,a){var n=t.updateQueue;zr=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var c=d,m=c.next;c.next=null,i===null?l=m:i.next=m,i=c;var b=t.alternate;b!==null&&(b=b.updateQueue,d=b.lastBaseUpdate,d!==i&&(d===null?b.firstBaseUpdate=m:d.next=m,b.lastBaseUpdate=c))}if(l!==null){var f=n.baseState;i=0,b=m=c=null,d=l;do{var u=d.lane,v=d.eventTime;if((a&u)===u){b!==null&&(b=b.next={eventTime:v,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var k=t,N=d;switch(u=s,v=r,N.tag){case 1:if(k=N.payload,typeof k=="function"){f=k.call(v,f,u);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,u=typeof k=="function"?k.call(v,f,u):k,u==null)break e;f=Tt({},f,u);break e;case 2:zr=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,u=n.effects,u===null?n.effects=[d]:u.push(d))}else v={eventTime:v,lane:u,tag:d.tag,payload:d.payload,callback:d.callback,next:null},b===null?(m=b=v,c=f):b=b.next=v,i|=u;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;u=d,d=u.next,u.next=null,n.lastBaseUpdate=u,n.shared.pending=null}}while(!0);if(b===null&&(c=f),n.baseState=c,n.firstBaseUpdate=m,n.lastBaseUpdate=b,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);fa|=i,t.lanes=i,t.memoizedState=f}}function pu(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(Ne(191,n));n.call(a)}}}var ll={},hr=ra(ll),Hn=ra(ll),Jn=ra(ll);function da(t){if(t===ll)throw Error(Ne(174));return t}function gd(t,s){switch(yt(Jn,s),yt(Hn,t),yt(hr,ll),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Wo(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Wo(s,t)}jt(hr),yt(hr,s)}function Ga(){jt(hr),jt(Hn),jt(Jn)}function S0(t){da(Jn.current);var s=da(hr.current),r=Wo(s,t.type);s!==r&&(yt(Hn,t),yt(hr,r))}function fd(t){Hn.current===t&&(jt(hr),jt(Hn))}var kt=ra(0);function di(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var po=[];function yd(){for(var t=0;t<po.length;t++)po[t]._workInProgressVersionPrimary=null;po.length=0}var Fl=Ar.ReactCurrentDispatcher,go=Ar.ReactCurrentBatchConfig,ga=0,St=null,Ot=null,Yt=null,xi=!1,En=!1,qn=0,df=0;function ns(){throw Error(Ne(321))}function bd(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Zs(t[r],s[r]))return!1;return!0}function jd(t,s,r,a,n,l){if(ga=l,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fl.current=t===null||t.memoizedState===null?hf:pf,t=r(a,n),En){l=0;do{if(En=!1,qn=0,25<=l)throw Error(Ne(301));l+=1,Yt=Ot=null,s.updateQueue=null,Fl.current=gf,t=r(a,n)}while(En)}if(Fl.current=ui,s=Ot!==null&&Ot.next!==null,ga=0,Yt=Ot=St=null,xi=!1,s)throw Error(Ne(300));return t}function Nd(){var t=qn!==0;return qn=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?St.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Ws(){if(Ot===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var s=Yt===null?St.memoizedState:Yt.next;if(s!==null)Yt=s,Ot=t;else{if(t===null)throw Error(Ne(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Yt===null?St.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Gn(t,s){return typeof s=="function"?s(t):s}function fo(t){var s=Ws(),r=s.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=t;var a=Ot,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var d=i=null,c=null,m=l;do{var b=m.lane;if((ga&b)===b)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),a=m.hasEagerState?m.eagerState:t(a,m.action);else{var f={lane:b,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(d=c=f,i=a):c=c.next=f,St.lanes|=b,fa|=b}m=m.next}while(m!==null&&m!==l);c===null?i=a:c.next=d,Zs(a,s.memoizedState)||(ys=!0),s.memoizedState=a,s.baseState=i,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,St.lanes|=l,fa|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function yo(t){var s=Ws(),r=s.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);Zs(l,s.memoizedState)||(ys=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function C0(){}function T0(t,s){var r=St,a=Ws(),n=s(),l=!Zs(a.memoizedState,n);if(l&&(a.memoizedState=n,ys=!0),a=a.queue,vd($0.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||Yt!==null&&Yt.memoizedState.tag&1){if(r.flags|=2048,Xn(9,P0.bind(null,r,a,n,s),void 0,null),qt===null)throw Error(Ne(349));ga&30||E0(r,s,n)}return n}function E0(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=St.updateQueue,s===null?(s={lastEffect:null,stores:null},St.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function P0(t,s,r,a){s.value=r,s.getSnapshot=a,A0(s)&&D0(t)}function $0(t,s,r){return r(function(){A0(s)&&D0(t)})}function A0(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Zs(t,r)}catch{return!0}}function D0(t){var s=Er(t,1);s!==null&&Qs(s,t,1,-1)}function gu(t){var s=cr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:t},s.queue=t,t=t.dispatch=mf.bind(null,St,t),[s.memoizedState,t]}function Xn(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=St.updateQueue,s===null?(s={lastEffect:null,stores:null},St.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function I0(){return Ws().memoizedState}function _l(t,s,r,a){var n=cr();St.flags|=t,n.memoizedState=Xn(1|s,r,void 0,a===void 0?null:a)}function Di(t,s,r,a){var n=Ws();a=a===void 0?null:a;var l=void 0;if(Ot!==null){var i=Ot.memoizedState;if(l=i.destroy,a!==null&&bd(a,i.deps)){n.memoizedState=Xn(s,r,l,a);return}}St.flags|=t,n.memoizedState=Xn(1|s,r,l,a)}function fu(t,s){return _l(8390656,8,t,s)}function vd(t,s){return Di(2048,8,t,s)}function M0(t,s){return Di(4,2,t,s)}function L0(t,s){return Di(4,4,t,s)}function U0(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function z0(t,s,r){return r=r!=null?r.concat([t]):null,Di(4,4,U0.bind(null,s,t),r)}function wd(){}function F0(t,s){var r=Ws();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&bd(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function _0(t,s){var r=Ws();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&bd(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function R0(t,s,r){return ga&21?(Zs(r,s)||(r=Ym(),St.lanes|=r,fa|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,ys=!0),t.memoizedState=r)}function xf(t,s){var r=mt;mt=r!==0&&4>r?r:4,t(!0);var a=go.transition;go.transition={};try{t(!1),s()}finally{mt=r,go.transition=a}}function O0(){return Ws().memoizedState}function uf(t,s,r){var a=Gr(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},B0(t))V0(s,r);else if(r=w0(t,s,r,a),r!==null){var n=us();Qs(r,t,a,n),W0(r,s,a)}}function mf(t,s,r){var a=Gr(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(B0(t))V0(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,d=l(i,r);if(n.hasEagerState=!0,n.eagerState=d,Zs(d,i)){var c=s.interleaved;c===null?(n.next=n,hd(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=w0(t,s,n,a),r!==null&&(n=us(),Qs(r,t,a,n),W0(r,s,a))}}function B0(t){var s=t.alternate;return t===St||s!==null&&s===St}function V0(t,s){En=xi=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function W0(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,ed(t,r)}}var ui={readContext:Vs,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useInsertionEffect:ns,useLayoutEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useMutableSource:ns,useSyncExternalStore:ns,useId:ns,unstable_isNewReconciler:!1},hf={readContext:Vs,useCallback:function(t,s){return cr().memoizedState=[t,s===void 0?null:s],t},useContext:Vs,useEffect:fu,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,_l(4194308,4,U0.bind(null,s,t),r)},useLayoutEffect:function(t,s){return _l(4194308,4,t,s)},useInsertionEffect:function(t,s){return _l(4,2,t,s)},useMemo:function(t,s){var r=cr();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=cr();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=uf.bind(null,St,t),[a.memoizedState,t]},useRef:function(t){var s=cr();return t={current:t},s.memoizedState=t},useState:gu,useDebugValue:wd,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=gu(!1),s=t[0];return t=xf.bind(null,t[1]),cr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=St,n=cr();if(vt){if(r===void 0)throw Error(Ne(407));r=r()}else{if(r=s(),qt===null)throw Error(Ne(349));ga&30||E0(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,fu($0.bind(null,a,l,t),[t]),a.flags|=2048,Xn(9,P0.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=cr(),s=qt.identifierPrefix;if(vt){var r=kr,a=wr;r=(a&~(1<<32-Ks(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=qn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=df++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},pf={readContext:Vs,useCallback:F0,useContext:Vs,useEffect:vd,useImperativeHandle:z0,useInsertionEffect:M0,useLayoutEffect:L0,useMemo:_0,useReducer:fo,useRef:I0,useState:function(){return fo(Gn)},useDebugValue:wd,useDeferredValue:function(t){var s=Ws();return R0(s,Ot.memoizedState,t)},useTransition:function(){var t=fo(Gn)[0],s=Ws().memoizedState;return[t,s]},useMutableSource:C0,useSyncExternalStore:T0,useId:O0,unstable_isNewReconciler:!1},gf={readContext:Vs,useCallback:F0,useContext:Vs,useEffect:vd,useImperativeHandle:z0,useInsertionEffect:M0,useLayoutEffect:L0,useMemo:_0,useReducer:yo,useRef:I0,useState:function(){return yo(Gn)},useDebugValue:wd,useDeferredValue:function(t){var s=Ws();return Ot===null?s.memoizedState=t:R0(s,Ot.memoizedState,t)},useTransition:function(){var t=yo(Gn)[0],s=Ws().memoizedState;return[t,s]},useMutableSource:C0,useSyncExternalStore:T0,useId:O0,unstable_isNewReconciler:!1};function Hs(t,s){if(t&&t.defaultProps){s=Tt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function xc(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:Tt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ii={isMounted:function(t){return(t=t._reactInternals)?Na(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=us(),n=Gr(t),l=Sr(a,n);l.payload=s,r!=null&&(l.callback=r),s=Jr(t,l,n),s!==null&&(Qs(s,t,n,a),zl(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=us(),n=Gr(t),l=Sr(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Jr(t,l,n),s!==null&&(Qs(s,t,n,a),zl(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=us(),a=Gr(t),n=Sr(r,a);n.tag=2,s!=null&&(n.callback=s),s=Jr(t,n,a),s!==null&&(Qs(s,t,a,r),zl(s,t,a))}};function yu(t,s,r,a,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,i):s.prototype&&s.prototype.isPureReactComponent?!Bn(r,a)||!Bn(n,l):!0}function Y0(t,s,r){var a=!1,n=ta,l=s.contextType;return typeof l=="object"&&l!==null?l=Vs(l):(n=Ns(s)?ha:os.current,a=s.contextTypes,l=(a=a!=null)?Ha(t,n):ta),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ii,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function bu(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Ii.enqueueReplaceState(s,s.state,null)}function uc(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},pd(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=Vs(l):(l=Ns(s)?ha:os.current,n.context=Ha(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(xc(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Ii.enqueueReplaceState(n,n.state,null),ci(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Xa(t,s){try{var r="",a=s;do r+=Vp(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function bo(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function mc(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var ff=typeof WeakMap=="function"?WeakMap:Map;function H0(t,s,r){r=Sr(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){hi||(hi=!0,wc=a),mc(t,s)},r}function J0(t,s,r){r=Sr(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){mc(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){mc(t,s),typeof a!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function ju(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new ff;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Af.bind(null,t,s,r),s.then(t,t))}function Nu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function vu(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Sr(-1,1),s.tag=2,Jr(r,s,1))),r.lanes|=1),t)}var yf=Ar.ReactCurrentOwner,ys=!1;function ds(t,s,r,a){s.child=t===null?v0(s,null,r,a):qa(s,t.child,r,a)}function wu(t,s,r,a,n){r=r.render;var l=s.ref;return Ba(s,n),a=jd(t,s,r,a,l,n),r=Nd(),t!==null&&!ys?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Pr(t,s,n)):(vt&&r&&od(s),s.flags|=1,ds(t,s,a,n),s.child)}function ku(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!Ad(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,q0(t,s,l,a,n)):(t=Vl(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Bn,r(i,a)&&t.ref===s.ref)return Pr(t,s,n)}return s.flags|=1,t=Xr(l,a),t.ref=s.ref,t.return=s,s.child=t}function q0(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Bn(l,a)&&t.ref===s.ref)if(ys=!1,s.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(ys=!0);else return s.lanes=t.lanes,Pr(t,s,n)}return hc(t,s,r,a,n)}function G0(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(za,Ts),Ts|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,yt(za,Ts),Ts|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,yt(za,Ts),Ts|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,yt(za,Ts),Ts|=a;return ds(t,s,n,r),s.child}function X0(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function hc(t,s,r,a,n){var l=Ns(r)?ha:os.current;return l=Ha(s,l),Ba(s,n),r=jd(t,s,r,a,l,n),a=Nd(),t!==null&&!ys?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Pr(t,s,n)):(vt&&a&&od(s),s.flags|=1,ds(t,s,r,n),s.child)}function Su(t,s,r,a,n){if(Ns(r)){var l=!0;ai(s)}else l=!1;if(Ba(s,n),s.stateNode===null)Rl(t,s),Y0(s,r,a),uc(s,r,a,n),a=!0;else if(t===null){var i=s.stateNode,d=s.memoizedProps;i.props=d;var c=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=Vs(m):(m=Ns(r)?ha:os.current,m=Ha(s,m));var b=r.getDerivedStateFromProps,f=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==a||c!==m)&&bu(s,i,a,m),zr=!1;var u=s.memoizedState;i.state=u,ci(s,a,i,n),c=s.memoizedState,d!==a||u!==c||js.current||zr?(typeof b=="function"&&(xc(s,r,b,a),c=s.memoizedState),(d=zr||yu(s,r,d,a,u,c,m))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),i.props=a,i.state=c,i.context=m,a=d):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,k0(t,s),d=s.memoizedProps,m=s.type===s.elementType?d:Hs(s.type,d),i.props=m,f=s.pendingProps,u=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Vs(c):(c=Ns(r)?ha:os.current,c=Ha(s,c));var v=r.getDerivedStateFromProps;(b=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==f||u!==c)&&bu(s,i,a,c),zr=!1,u=s.memoizedState,i.state=u,ci(s,a,i,n);var k=s.memoizedState;d!==f||u!==k||js.current||zr?(typeof v=="function"&&(xc(s,r,v,a),k=s.memoizedState),(m=zr||yu(s,r,m,a,u,k,c)||!1)?(b||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,k,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,k,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=k),i.props=a,i.state=k,i.context=c,a=m):(typeof i.componentDidUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(s.flags|=1024),a=!1)}return pc(t,s,r,a,l,n)}function pc(t,s,r,a,n,l){X0(t,s);var i=(s.flags&128)!==0;if(!a&&!i)return n&&du(s,r,!1),Pr(t,s,l);a=s.stateNode,yf.current=s;var d=i&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&i?(s.child=qa(s,t.child,null,l),s.child=qa(s,null,d,l)):ds(t,s,d,l),s.memoizedState=a.state,n&&du(s,r,!0),s.child}function K0(t){var s=t.stateNode;s.pendingContext?cu(t,s.pendingContext,s.pendingContext!==s.context):s.context&&cu(t,s.context,!1),gd(t,s.containerInfo)}function Cu(t,s,r,a,n){return Ja(),dd(n),s.flags|=256,ds(t,s,r,a),s.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q0(t,s,r){var a=s.pendingProps,n=kt.current,l=!1,i=(s.flags&128)!==0,d;if((d=i)||(d=t!==null&&t.memoizedState===null?!1:(n&2)!==0),d?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),yt(kt,n&1),t===null)return cc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=a.children,t=a.fallback,l?(a=s.mode,l=s.child,i={mode:"hidden",children:i},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ui(i,a,0,null),t=ua(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=fc(r),s.memoizedState=gc,t):kd(s,i));if(n=t.memoizedState,n!==null&&(d=n.dehydrated,d!==null))return bf(t,s,i,a,d,n,r);if(l){l=a.fallback,i=s.mode,n=t.child,d=n.sibling;var c={mode:"hidden",children:a.children};return!(i&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=Xr(n,c),a.subtreeFlags=n.subtreeFlags&14680064),d!==null?l=Xr(d,l):(l=ua(l,i,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,i=t.child.memoizedState,i=i===null?fc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=gc,a}return l=t.child,t=l.sibling,a=Xr(l,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function kd(t,s){return s=Ui({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function kl(t,s,r,a){return a!==null&&dd(a),qa(s,t.child,null,r),t=kd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function bf(t,s,r,a,n,l,i){if(r)return s.flags&256?(s.flags&=-257,a=bo(Error(Ne(422))),kl(t,s,i,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=Ui({mode:"visible",children:a.children},n,0,null),l=ua(l,n,i,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,s.mode&1&&qa(s,t.child,null,i),s.child.memoizedState=fc(i),s.memoizedState=gc,l);if(!(s.mode&1))return kl(t,s,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var d=a.dgst;return a=d,l=Error(Ne(419)),a=bo(l,a,void 0),kl(t,s,i,a)}if(d=(i&t.childLanes)!==0,ys||d){if(a=qt,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Er(t,n),Qs(a,t,n,-1))}return $d(),a=bo(Error(Ne(421))),kl(t,s,i,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Df.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,Es=Hr(n.nextSibling),Ps=s,vt=!0,Gs=null,t!==null&&(zs[Fs++]=wr,zs[Fs++]=kr,zs[Fs++]=pa,wr=t.id,kr=t.overflow,pa=s),s=kd(s,a.children),s.flags|=4096,s)}function Tu(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),dc(t.return,s,r)}function jo(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function Z0(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(ds(t,s,a.children,r),a=kt.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tu(t,r,s);else if(t.tag===19)Tu(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(yt(kt,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&di(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),jo(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&di(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}jo(s,!0,r,null,l);break;case"together":jo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Rl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Pr(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),fa|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Ne(153));if(s.child!==null){for(t=s.child,r=Xr(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Xr(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function jf(t,s,r){switch(s.tag){case 3:K0(s),Ja();break;case 5:S0(s);break;case 1:Ns(s.type)&&ai(s);break;case 4:gd(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;yt(ii,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(yt(kt,kt.current&1),s.flags|=128,null):r&s.child.childLanes?Q0(t,s,r):(yt(kt,kt.current&1),t=Pr(t,s,r),t!==null?t.sibling:null);yt(kt,kt.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return Z0(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),yt(kt,kt.current),a)break;return null;case 22:case 23:return s.lanes=0,G0(t,s,r)}return Pr(t,s,r)}var eh,yc,th,sh;eh=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yc=function(){};th=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,da(hr.current);var l=null;switch(r){case"input":n=Ro(t,n),a=Ro(t,a),l=[];break;case"select":n=Tt({},n,{value:void 0}),a=Tt({},a,{value:void 0}),l=[];break;case"textarea":n=Vo(t,n),a=Vo(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=si)}Yo(r,a);var i;r=null;for(m in n)if(!a.hasOwnProperty(m)&&n.hasOwnProperty(m)&&n[m]!=null)if(m==="style"){var d=n[m];for(i in d)d.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Ln.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in a){var c=a[m];if(d=n!=null?n[m]:void 0,a.hasOwnProperty(m)&&c!==d&&(c!=null||d!=null))if(m==="style")if(d){for(i in d)!d.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&d[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(m,r)),r=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(l=l||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Ln.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&bt("scroll",t),l||d===c||(l=[])):(l=l||[]).push(m,c))}r&&(l=l||[]).push("style",r);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};sh=function(t,s,r,a){r!==a&&(s.flags|=4)};function un(t,s){if(!vt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ls(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Nf(t,s,r){var a=s.pendingProps;switch(cd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(s),null;case 1:return Ns(s.type)&&ri(),ls(s),null;case 3:return a=s.stateNode,Ga(),jt(js),jt(os),yd(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(vl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Gs!==null&&(Cc(Gs),Gs=null))),yc(t,s),ls(s),null;case 5:fd(s);var n=da(Jn.current);if(r=s.type,t!==null&&s.stateNode!=null)th(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(Ne(166));return ls(s),null}if(t=da(hr.current),vl(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[dr]=s,a[Yn]=l,t=(s.mode&1)!==0,r){case"dialog":bt("cancel",a),bt("close",a);break;case"iframe":case"object":case"embed":bt("load",a);break;case"video":case"audio":for(n=0;n<yn.length;n++)bt(yn[n],a);break;case"source":bt("error",a);break;case"img":case"image":case"link":bt("error",a),bt("load",a);break;case"details":bt("toggle",a);break;case"input":Ux(a,l),bt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},bt("invalid",a);break;case"textarea":Fx(a,l),bt("invalid",a)}Yo(r,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="children"?typeof d=="string"?a.textContent!==d&&(l.suppressHydrationWarning!==!0&&Nl(a.textContent,d,t),n=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&Nl(a.textContent,d,t),n=["children",""+d]):Ln.hasOwnProperty(i)&&d!=null&&i==="onScroll"&&bt("scroll",a)}switch(r){case"input":ml(a),zx(a,l,!0);break;case"textarea":ml(a),_x(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=si)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$m(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=i.createElement(r,{is:a.is}):(t=i.createElement(r),r==="select"&&(i=t,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):t=i.createElementNS(t,r),t[dr]=s,t[Yn]=a,eh(t,s,!1,!1),s.stateNode=t;e:{switch(i=Ho(r,a),r){case"dialog":bt("cancel",t),bt("close",t),n=a;break;case"iframe":case"object":case"embed":bt("load",t),n=a;break;case"video":case"audio":for(n=0;n<yn.length;n++)bt(yn[n],t);n=a;break;case"source":bt("error",t),n=a;break;case"img":case"image":case"link":bt("error",t),bt("load",t),n=a;break;case"details":bt("toggle",t),n=a;break;case"input":Ux(t,a),n=Ro(t,a),bt("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=Tt({},a,{value:void 0}),bt("invalid",t);break;case"textarea":Fx(t,a),n=Vo(t,a),bt("invalid",t);break;default:n=a}Yo(r,n),d=n;for(l in d)if(d.hasOwnProperty(l)){var c=d[l];l==="style"?Im(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Am(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Un(t,c):typeof c=="number"&&Un(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ln.hasOwnProperty(l)?c!=null&&l==="onScroll"&&bt("scroll",t):c!=null&&qc(t,l,c,i))}switch(r){case"input":ml(t),zx(t,a,!1);break;case"textarea":ml(t),_x(t);break;case"option":a.value!=null&&t.setAttribute("value",""+ea(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?Fa(t,!!a.multiple,l,!1):a.defaultValue!=null&&Fa(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=si)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ls(s),null;case 6:if(t&&s.stateNode!=null)sh(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(Ne(166));if(r=da(Jn.current),da(hr.current),vl(s)){if(a=s.stateNode,r=s.memoizedProps,a[dr]=s,(l=a.nodeValue!==r)&&(t=Ps,t!==null))switch(t.tag){case 3:Nl(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[dr]=s,s.stateNode=a}return ls(s),null;case 13:if(jt(kt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&Es!==null&&s.mode&1&&!(s.flags&128))j0(),Ja(),s.flags|=98560,l=!1;else if(l=vl(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(Ne(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Ne(317));l[dr]=s}else Ja(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ls(s),l=!1}else Gs!==null&&(Cc(Gs),Gs=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||kt.current&1?Bt===0&&(Bt=3):$d())),s.updateQueue!==null&&(s.flags|=4),ls(s),null);case 4:return Ga(),yc(t,s),t===null&&Vn(s.stateNode.containerInfo),ls(s),null;case 10:return md(s.type._context),ls(s),null;case 17:return Ns(s.type)&&ri(),ls(s),null;case 19:if(jt(kt),l=s.memoizedState,l===null)return ls(s),null;if(a=(s.flags&128)!==0,i=l.rendering,i===null)if(a)un(l,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=di(t),i!==null){for(s.flags|=128,un(l,!1),a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return yt(kt,kt.current&1|2),s.child}t=t.sibling}l.tail!==null&&It()>Ka&&(s.flags|=128,a=!0,un(l,!1),s.lanes=4194304)}else{if(!a)if(t=di(i),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),un(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!vt)return ls(s),null}else 2*It()-l.renderingStartTime>Ka&&r!==1073741824&&(s.flags|=128,a=!0,un(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=It(),s.sibling=null,r=kt.current,yt(kt,a?r&1|2:r&1),s):(ls(s),null);case 22:case 23:return Pd(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?Ts&1073741824&&(ls(s),s.subtreeFlags&6&&(s.flags|=8192)):ls(s),null;case 24:return null;case 25:return null}throw Error(Ne(156,s.tag))}function vf(t,s){switch(cd(s),s.tag){case 1:return Ns(s.type)&&ri(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ga(),jt(js),jt(os),yd(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return fd(s),null;case 13:if(jt(kt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Ne(340));Ja()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return jt(kt),null;case 4:return Ga(),null;case 10:return md(s.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var Sl=!1,is=!1,wf=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ua(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){$t(t,s,a)}else r.current=null}function bc(t,s,r){try{r()}catch(a){$t(t,s,a)}}var Eu=!1;function kf(t,s){if(sc=Zl,t=i0(),id(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,d=-1,c=-1,m=0,b=0,f=t,u=null;t:for(;;){for(var v;f!==r||n!==0&&f.nodeType!==3||(d=i+n),f!==l||a!==0&&f.nodeType!==3||(c=i+a),f.nodeType===3&&(i+=f.nodeValue.length),(v=f.firstChild)!==null;)u=f,f=v;for(;;){if(f===t)break t;if(u===r&&++m===n&&(d=i),u===l&&++b===a&&(c=i),(v=f.nextSibling)!==null)break;f=u,u=f.parentNode}f=v}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rc={focusedElem:t,selectionRange:r},Zl=!1,_e=s;_e!==null;)if(s=_e,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,_e=t;else for(;_e!==null;){s=_e;try{var k=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,y=k.memoizedState,p=s.stateNode,g=p.getSnapshotBeforeUpdate(s.elementType===s.type?N:Hs(s.type,N),y);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var h=s.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(x){$t(s,s.return,x)}if(t=s.sibling,t!==null){t.return=s.return,_e=t;break}_e=s.return}return k=Eu,Eu=!1,k}function Pn(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&bc(s,r,l)}n=n.next}while(n!==a)}}function Mi(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function jc(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function rh(t){var s=t.alternate;s!==null&&(t.alternate=null,rh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[dr],delete s[Yn],delete s[lc],delete s[nf],delete s[lf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ah(t){return t.tag===5||t.tag===3||t.tag===4}function Pu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ah(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=si));else if(a!==4&&(t=t.child,t!==null))for(Nc(t,s,r),t=t.sibling;t!==null;)Nc(t,s,r),t=t.sibling}function vc(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(vc(t,s,r),t=t.sibling;t!==null;)vc(t,s,r),t=t.sibling}var es=null,Js=!1;function Lr(t,s,r){for(r=r.child;r!==null;)nh(t,s,r),r=r.sibling}function nh(t,s,r){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(Ci,r)}catch{}switch(r.tag){case 5:is||Ua(r,s);case 6:var a=es,n=Js;es=null,Lr(t,s,r),es=a,Js=n,es!==null&&(Js?(t=es,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):es.removeChild(r.stateNode));break;case 18:es!==null&&(Js?(t=es,r=r.stateNode,t.nodeType===8?mo(t.parentNode,r):t.nodeType===1&&mo(t,r),Rn(t)):mo(es,r.stateNode));break;case 4:a=es,n=Js,es=r.stateNode.containerInfo,Js=!0,Lr(t,s,r),es=a,Js=n;break;case 0:case 11:case 14:case 15:if(!is&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&bc(r,s,i),n=n.next}while(n!==a)}Lr(t,s,r);break;case 1:if(!is&&(Ua(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(d){$t(r,s,d)}Lr(t,s,r);break;case 21:Lr(t,s,r);break;case 22:r.mode&1?(is=(a=is)||r.memoizedState!==null,Lr(t,s,r),is=a):Lr(t,s,r);break;default:Lr(t,s,r)}}function $u(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new wf),s.forEach(function(a){var n=If.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Ys(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,i=s,d=i;e:for(;d!==null;){switch(d.tag){case 5:es=d.stateNode,Js=!1;break e;case 3:es=d.stateNode.containerInfo,Js=!0;break e;case 4:es=d.stateNode.containerInfo,Js=!0;break e}d=d.return}if(es===null)throw Error(Ne(160));nh(l,i,n),es=null,Js=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(m){$t(n,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lh(s,t),s=s.sibling}function lh(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ys(s,t),or(t),a&4){try{Pn(3,t,t.return),Mi(3,t)}catch(N){$t(t,t.return,N)}try{Pn(5,t,t.return)}catch(N){$t(t,t.return,N)}}break;case 1:Ys(s,t),or(t),a&512&&r!==null&&Ua(r,r.return);break;case 5:if(Ys(s,t),or(t),a&512&&r!==null&&Ua(r,r.return),t.flags&32){var n=t.stateNode;try{Un(n,"")}catch(N){$t(t,t.return,N)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,d=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&Em(n,l),Ho(d,i);var m=Ho(d,l);for(i=0;i<c.length;i+=2){var b=c[i],f=c[i+1];b==="style"?Im(n,f):b==="dangerouslySetInnerHTML"?Am(n,f):b==="children"?Un(n,f):qc(n,b,f,m)}switch(d){case"input":Oo(n,l);break;case"textarea":Pm(n,l);break;case"select":var u=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Fa(n,!!l.multiple,v,!1):u!==!!l.multiple&&(l.defaultValue!=null?Fa(n,!!l.multiple,l.defaultValue,!0):Fa(n,!!l.multiple,l.multiple?[]:"",!1))}n[Yn]=l}catch(N){$t(t,t.return,N)}}break;case 6:if(Ys(s,t),or(t),a&4){if(t.stateNode===null)throw Error(Ne(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(N){$t(t,t.return,N)}}break;case 3:if(Ys(s,t),or(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Rn(s.containerInfo)}catch(N){$t(t,t.return,N)}break;case 4:Ys(s,t),or(t);break;case 13:Ys(s,t),or(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Td=It())),a&4&&$u(t);break;case 22:if(b=r!==null&&r.memoizedState!==null,t.mode&1?(is=(m=is)||b,Ys(s,t),is=m):Ys(s,t),or(t),a&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!b&&t.mode&1)for(_e=t,b=t.child;b!==null;){for(f=_e=b;_e!==null;){switch(u=_e,v=u.child,u.tag){case 0:case 11:case 14:case 15:Pn(4,u,u.return);break;case 1:Ua(u,u.return);var k=u.stateNode;if(typeof k.componentWillUnmount=="function"){a=u,r=u.return;try{s=a,k.props=s.memoizedProps,k.state=s.memoizedState,k.componentWillUnmount()}catch(N){$t(a,r,N)}}break;case 5:Ua(u,u.return);break;case 22:if(u.memoizedState!==null){Du(f);continue}}v!==null?(v.return=u,_e=v):Du(f)}b=b.sibling}e:for(b=null,f=t;;){if(f.tag===5){if(b===null){b=f;try{n=f.stateNode,m?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=Dm("display",i))}catch(N){$t(t,t.return,N)}}}else if(f.tag===6){if(b===null)try{f.stateNode.nodeValue=m?"":f.memoizedProps}catch(N){$t(t,t.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;b===f&&(b=null),f=f.return}b===f&&(b=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ys(s,t),or(t),a&4&&$u(t);break;case 21:break;default:Ys(s,t),or(t)}}function or(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(ah(r)){var a=r;break e}r=r.return}throw Error(Ne(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Un(n,""),a.flags&=-33);var l=Pu(t);vc(t,l,n);break;case 3:case 4:var i=a.stateNode.containerInfo,d=Pu(t);Nc(t,d,i);break;default:throw Error(Ne(161))}}catch(c){$t(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Sf(t,s,r){_e=t,ih(t)}function ih(t,s,r){for(var a=(t.mode&1)!==0;_e!==null;){var n=_e,l=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||Sl;if(!i){var d=n.alternate,c=d!==null&&d.memoizedState!==null||is;d=Sl;var m=is;if(Sl=i,(is=c)&&!m)for(_e=n;_e!==null;)i=_e,c=i.child,i.tag===22&&i.memoizedState!==null?Iu(n):c!==null?(c.return=i,_e=c):Iu(n);for(;l!==null;)_e=l,ih(l),l=l.sibling;_e=n,Sl=d,is=m}Au(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,_e=l):Au(t)}}function Au(t){for(;_e!==null;){var s=_e;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:is||Mi(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!is)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Hs(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&pu(s,l,a);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}pu(s,i,r)}break;case 5:var d=s.stateNode;if(r===null&&s.flags&4){r=d;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var b=m.memoizedState;if(b!==null){var f=b.dehydrated;f!==null&&Rn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}is||s.flags&512&&jc(s)}catch(u){$t(s,s.return,u)}}if(s===t){_e=null;break}if(r=s.sibling,r!==null){r.return=s.return,_e=r;break}_e=s.return}}function Du(t){for(;_e!==null;){var s=_e;if(s===t){_e=null;break}var r=s.sibling;if(r!==null){r.return=s.return,_e=r;break}_e=s.return}}function Iu(t){for(;_e!==null;){var s=_e;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Mi(4,s)}catch(c){$t(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){$t(s,n,c)}}var l=s.return;try{jc(s)}catch(c){$t(s,l,c)}break;case 5:var i=s.return;try{jc(s)}catch(c){$t(s,i,c)}}}catch(c){$t(s,s.return,c)}if(s===t){_e=null;break}var d=s.sibling;if(d!==null){d.return=s.return,_e=d;break}_e=s.return}}var Cf=Math.ceil,mi=Ar.ReactCurrentDispatcher,Sd=Ar.ReactCurrentOwner,Bs=Ar.ReactCurrentBatchConfig,it=0,qt=null,Lt=null,ts=0,Ts=0,za=ra(0),Bt=0,Kn=null,fa=0,Li=0,Cd=0,$n=null,fs=null,Td=0,Ka=1/0,Nr=null,hi=!1,wc=null,qr=null,Cl=!1,Or=null,pi=0,An=0,kc=null,Ol=-1,Bl=0;function us(){return it&6?It():Ol!==-1?Ol:Ol=It()}function Gr(t){return t.mode&1?it&2&&ts!==0?ts&-ts:cf.transition!==null?(Bl===0&&(Bl=Ym()),Bl):(t=mt,t!==0||(t=window.event,t=t===void 0?16:Qm(t.type)),t):1}function Qs(t,s,r,a){if(50<An)throw An=0,kc=null,Error(Ne(185));rl(t,r,a),(!(it&2)||t!==qt)&&(t===qt&&(!(it&2)&&(Li|=r),Bt===4&&_r(t,ts)),vs(t,a),r===1&&it===0&&!(s.mode&1)&&(Ka=It()+500,Ai&&aa()))}function vs(t,s){var r=t.callbackNode;og(t,s);var a=Ql(t,t===qt?ts:0);if(a===0)r!==null&&Bx(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&Bx(r),s===1)t.tag===0?of(Mu.bind(null,t)):f0(Mu.bind(null,t)),rf(function(){!(it&6)&&aa()}),r=null;else{switch(Hm(a)){case 1:r=Zc;break;case 4:r=Vm;break;case 16:r=Kl;break;case 536870912:r=Wm;break;default:r=Kl}r=ph(r,oh.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function oh(t,s){if(Ol=-1,Bl=0,it&6)throw Error(Ne(327));var r=t.callbackNode;if(Va()&&t.callbackNode!==r)return null;var a=Ql(t,t===qt?ts:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=gi(t,a);else{s=a;var n=it;it|=2;var l=dh();(qt!==t||ts!==s)&&(Nr=null,Ka=It()+500,xa(t,s));do try{Pf();break}catch(d){ch(t,d)}while(!0);ud(),mi.current=l,it=n,Lt!==null?s=0:(qt=null,ts=0,s=Bt)}if(s!==0){if(s===2&&(n=Ko(t),n!==0&&(a=n,s=Sc(t,n))),s===1)throw r=Kn,xa(t,0),_r(t,a),vs(t,It()),r;if(s===6)_r(t,a);else{if(n=t.current.alternate,!(a&30)&&!Tf(n)&&(s=gi(t,a),s===2&&(l=Ko(t),l!==0&&(a=l,s=Sc(t,l))),s===1))throw r=Kn,xa(t,0),_r(t,a),vs(t,It()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(Ne(345));case 2:ia(t,fs,Nr);break;case 3:if(_r(t,a),(a&130023424)===a&&(s=Td+500-It(),10<s)){if(Ql(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){us(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=nc(ia.bind(null,t,fs,Nr),s);break}ia(t,fs,Nr);break;case 4:if(_r(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var i=31-Ks(a);l=1<<i,i=s[i],i>n&&(n=i),a&=~l}if(a=n,a=It()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cf(a/1960))-a,10<a){t.timeoutHandle=nc(ia.bind(null,t,fs,Nr),a);break}ia(t,fs,Nr);break;case 5:ia(t,fs,Nr);break;default:throw Error(Ne(329))}}}return vs(t,It()),t.callbackNode===r?oh.bind(null,t):null}function Sc(t,s){var r=$n;return t.current.memoizedState.isDehydrated&&(xa(t,s).flags|=256),t=gi(t,s),t!==2&&(s=fs,fs=r,s!==null&&Cc(s)),t}function Cc(t){fs===null?fs=t:fs.push.apply(fs,t)}function Tf(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!Zs(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _r(t,s){for(s&=~Cd,s&=~Li,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Ks(s),a=1<<r;t[r]=-1,s&=~a}}function Mu(t){if(it&6)throw Error(Ne(327));Va();var s=Ql(t,0);if(!(s&1))return vs(t,It()),null;var r=gi(t,s);if(t.tag!==0&&r===2){var a=Ko(t);a!==0&&(s=a,r=Sc(t,a))}if(r===1)throw r=Kn,xa(t,0),_r(t,s),vs(t,It()),r;if(r===6)throw Error(Ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ia(t,fs,Nr),vs(t,It()),null}function Ed(t,s){var r=it;it|=1;try{return t(s)}finally{it=r,it===0&&(Ka=It()+500,Ai&&aa())}}function ya(t){Or!==null&&Or.tag===0&&!(it&6)&&Va();var s=it;it|=1;var r=Bs.transition,a=mt;try{if(Bs.transition=null,mt=1,t)return t()}finally{mt=a,Bs.transition=r,it=s,!(it&6)&&aa()}}function Pd(){Ts=za.current,jt(za)}function xa(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,sf(r)),Lt!==null)for(r=Lt.return;r!==null;){var a=r;switch(cd(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ri();break;case 3:Ga(),jt(js),jt(os),yd();break;case 5:fd(a);break;case 4:Ga();break;case 13:jt(kt);break;case 19:jt(kt);break;case 10:md(a.type._context);break;case 22:case 23:Pd()}r=r.return}if(qt=t,Lt=t=Xr(t.current,null),ts=Ts=s,Bt=0,Kn=null,Cd=Li=fa=0,fs=$n=null,ca!==null){for(s=0;s<ca.length;s++)if(r=ca[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var i=l.next;l.next=n,a.next=i}r.pending=a}ca=null}return t}function ch(t,s){do{var r=Lt;try{if(ud(),Fl.current=ui,xi){for(var a=St.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}xi=!1}if(ga=0,Yt=Ot=St=null,En=!1,qn=0,Sd.current=null,r===null||r.return===null){Bt=1,Kn=s,Lt=null;break}e:{var l=t,i=r.return,d=r,c=s;if(s=ts,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,b=d,f=b.tag;if(!(b.mode&1)&&(f===0||f===11||f===15)){var u=b.alternate;u?(b.updateQueue=u.updateQueue,b.memoizedState=u.memoizedState,b.lanes=u.lanes):(b.updateQueue=null,b.memoizedState=null)}var v=Nu(i);if(v!==null){v.flags&=-257,vu(v,i,d,l,s),v.mode&1&&ju(l,m,s),s=v,c=m;var k=s.updateQueue;if(k===null){var N=new Set;N.add(c),s.updateQueue=N}else k.add(c);break e}else{if(!(s&1)){ju(l,m,s),$d();break e}c=Error(Ne(426))}}else if(vt&&d.mode&1){var y=Nu(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),vu(y,i,d,l,s),dd(Xa(c,d));break e}}l=c=Xa(c,d),Bt!==4&&(Bt=2),$n===null?$n=[l]:$n.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var p=H0(l,c,s);hu(l,p);break e;case 1:d=c;var g=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(qr===null||!qr.has(h)))){l.flags|=65536,s&=-s,l.lanes|=s;var x=J0(l,d,s);hu(l,x);break e}}l=l.return}while(l!==null)}uh(r)}catch(w){s=w,Lt===r&&r!==null&&(Lt=r=r.return);continue}break}while(!0)}function dh(){var t=mi.current;return mi.current=ui,t===null?ui:t}function $d(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),qt===null||!(fa&268435455)&&!(Li&268435455)||_r(qt,ts)}function gi(t,s){var r=it;it|=2;var a=dh();(qt!==t||ts!==s)&&(Nr=null,xa(t,s));do try{Ef();break}catch(n){ch(t,n)}while(!0);if(ud(),it=r,mi.current=a,Lt!==null)throw Error(Ne(261));return qt=null,ts=0,Bt}function Ef(){for(;Lt!==null;)xh(Lt)}function Pf(){for(;Lt!==null&&!Zp();)xh(Lt)}function xh(t){var s=hh(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,s===null?uh(t):Lt=s,Sd.current=null}function uh(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=vf(r,s),r!==null){r.flags&=32767,Lt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Lt=null;return}}else if(r=Nf(r,s,Ts),r!==null){Lt=r;return}if(s=s.sibling,s!==null){Lt=s;return}Lt=s=t}while(s!==null);Bt===0&&(Bt=5)}function ia(t,s,r){var a=mt,n=Bs.transition;try{Bs.transition=null,mt=1,$f(t,s,r,a)}finally{Bs.transition=n,mt=a}return null}function $f(t,s,r,a){do Va();while(Or!==null);if(it&6)throw Error(Ne(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ne(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(cg(t,l),t===qt&&(Lt=qt=null,ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Cl||(Cl=!0,ph(Kl,function(){return Va(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Bs.transition,Bs.transition=null;var i=mt;mt=1;var d=it;it|=4,Sd.current=null,kf(t,r),lh(r,t),Gg(rc),Zl=!!sc,rc=sc=null,t.current=r,Sf(r),eg(),it=d,mt=i,Bs.transition=l}else t.current=r;if(Cl&&(Cl=!1,Or=t,pi=n),l=t.pendingLanes,l===0&&(qr=null),rg(r.stateNode),vs(t,It()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(hi)throw hi=!1,t=wc,wc=null,t;return pi&1&&t.tag!==0&&Va(),l=t.pendingLanes,l&1?t===kc?An++:(An=0,kc=t):An=0,aa(),null}function Va(){if(Or!==null){var t=Hm(pi),s=Bs.transition,r=mt;try{if(Bs.transition=null,mt=16>t?16:t,Or===null)var a=!1;else{if(t=Or,Or=null,pi=0,it&6)throw Error(Ne(331));var n=it;for(it|=4,_e=t.current;_e!==null;){var l=_e,i=l.child;if(_e.flags&16){var d=l.deletions;if(d!==null){for(var c=0;c<d.length;c++){var m=d[c];for(_e=m;_e!==null;){var b=_e;switch(b.tag){case 0:case 11:case 15:Pn(8,b,l)}var f=b.child;if(f!==null)f.return=b,_e=f;else for(;_e!==null;){b=_e;var u=b.sibling,v=b.return;if(rh(b),b===m){_e=null;break}if(u!==null){u.return=v,_e=u;break}_e=v}}}var k=l.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var y=N.sibling;N.sibling=null,N=y}while(N!==null)}}_e=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,_e=i;else e:for(;_e!==null;){if(l=_e,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Pn(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,_e=p;break e}_e=l.return}}var g=t.current;for(_e=g;_e!==null;){i=_e;var h=i.child;if(i.subtreeFlags&2064&&h!==null)h.return=i,_e=h;else e:for(i=g;_e!==null;){if(d=_e,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Mi(9,d)}}catch(w){$t(d,d.return,w)}if(d===i){_e=null;break e}var x=d.sibling;if(x!==null){x.return=d.return,_e=x;break e}_e=d.return}}if(it=n,aa(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(Ci,t)}catch{}a=!0}return a}finally{mt=r,Bs.transition=s}}return!1}function Lu(t,s,r){s=Xa(r,s),s=H0(t,s,1),t=Jr(t,s,1),s=us(),t!==null&&(rl(t,1,s),vs(t,s))}function $t(t,s,r){if(t.tag===3)Lu(t,t,r);else for(;s!==null;){if(s.tag===3){Lu(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(qr===null||!qr.has(a))){t=Xa(r,t),t=J0(s,t,1),s=Jr(s,t,1),t=us(),s!==null&&(rl(s,1,t),vs(s,t));break}}s=s.return}}function Af(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=us(),t.pingedLanes|=t.suspendedLanes&r,qt===t&&(ts&r)===r&&(Bt===4||Bt===3&&(ts&130023424)===ts&&500>It()-Td?xa(t,0):Cd|=r),vs(t,s)}function mh(t,s){s===0&&(t.mode&1?(s=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):s=1);var r=us();t=Er(t,s),t!==null&&(rl(t,s,r),vs(t,r))}function Df(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),mh(t,r)}function If(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(Ne(314))}a!==null&&a.delete(s),mh(t,r)}var hh;hh=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||js.current)ys=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return ys=!1,jf(t,s,r);ys=!!(t.flags&131072)}else ys=!1,vt&&s.flags&1048576&&y0(s,li,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Rl(t,s),t=s.pendingProps;var n=Ha(s,os.current);Ba(s,r),n=jd(null,s,a,t,n,r);var l=Nd();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ns(a)?(l=!0,ai(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,pd(s),n.updater=Ii,s.stateNode=n,n._reactInternals=s,uc(s,a,t,r),s=pc(null,s,a,!0,l,r)):(s.tag=0,vt&&l&&od(s),ds(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Rl(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=Lf(a),t=Hs(a,t),n){case 0:s=hc(null,s,a,t,r);break e;case 1:s=Su(null,s,a,t,r);break e;case 11:s=wu(null,s,a,t,r);break e;case 14:s=ku(null,s,a,Hs(a.type,t),r);break e}throw Error(Ne(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Hs(a,n),hc(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Hs(a,n),Su(t,s,a,n,r);case 3:e:{if(K0(s),t===null)throw Error(Ne(387));a=s.pendingProps,l=s.memoizedState,n=l.element,k0(t,s),ci(s,a,null,r);var i=s.memoizedState;if(a=i.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Xa(Error(Ne(423)),s),s=Cu(t,s,a,r,n);break e}else if(a!==n){n=Xa(Error(Ne(424)),s),s=Cu(t,s,a,r,n);break e}else for(Es=Hr(s.stateNode.containerInfo.firstChild),Ps=s,vt=!0,Gs=null,r=v0(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ja(),a===n){s=Pr(t,s,r);break e}ds(t,s,a,r)}s=s.child}return s;case 5:return S0(s),t===null&&cc(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,ac(a,n)?i=null:l!==null&&ac(a,l)&&(s.flags|=32),X0(t,s),ds(t,s,i,r),s.child;case 6:return t===null&&cc(s),null;case 13:return Q0(t,s,r);case 4:return gd(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=qa(s,null,a,r):ds(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Hs(a,n),wu(t,s,a,n,r);case 7:return ds(t,s,s.pendingProps,r),s.child;case 8:return ds(t,s,s.pendingProps.children,r),s.child;case 12:return ds(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,yt(ii,a._currentValue),a._currentValue=i,l!==null)if(Zs(l.value,i)){if(l.children===n.children&&!js.current){s=Pr(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var d=l.dependencies;if(d!==null){i=l.child;for(var c=d.firstContext;c!==null;){if(c.context===a){if(l.tag===1){c=Sr(-1,r&-r),c.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var b=m.pending;b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),dc(l.return,r,s),d.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(Ne(341));i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),dc(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ds(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Ba(s,r),n=Vs(n),a=a(n),s.flags|=1,ds(t,s,a,r),s.child;case 14:return a=s.type,n=Hs(a,s.pendingProps),n=Hs(a.type,n),ku(t,s,a,n,r);case 15:return q0(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Hs(a,n),Rl(t,s),s.tag=1,Ns(a)?(t=!0,ai(s)):t=!1,Ba(s,r),Y0(s,a,n),uc(s,a,n,r),pc(null,s,a,!0,t,r);case 19:return Z0(t,s,r);case 22:return G0(t,s,r)}throw Error(Ne(156,s.tag))};function ph(t,s){return Bm(t,s)}function Mf(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(t,s,r,a){return new Mf(t,s,r,a)}function Ad(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lf(t){if(typeof t=="function")return Ad(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xc)return 11;if(t===Kc)return 14}return 2}function Xr(t,s){var r=t.alternate;return r===null?(r=Rs(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Vl(t,s,r,a,n,l){var i=2;if(a=t,typeof t=="function")Ad(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Ta:return ua(r.children,n,l,s);case Gc:i=8,n|=8;break;case Uo:return t=Rs(12,r,s,n|2),t.elementType=Uo,t.lanes=l,t;case zo:return t=Rs(13,r,s,n),t.elementType=zo,t.lanes=l,t;case Fo:return t=Rs(19,r,s,n),t.elementType=Fo,t.lanes=l,t;case Sm:return Ui(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wm:i=10;break e;case km:i=9;break e;case Xc:i=11;break e;case Kc:i=14;break e;case Ur:i=16,a=null;break e}throw Error(Ne(130,t==null?t:typeof t,""))}return s=Rs(i,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function ua(t,s,r,a){return t=Rs(7,t,a,s),t.lanes=r,t}function Ui(t,s,r,a){return t=Rs(22,t,a,s),t.elementType=Sm,t.lanes=r,t.stateNode={isHidden:!1},t}function No(t,s,r){return t=Rs(6,t,null,s),t.lanes=r,t}function vo(t,s,r){return s=Rs(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Uf(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Dd(t,s,r,a,n,l,i,d,c){return t=new Uf(t,s,r,d,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Rs(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(l),t}function zf(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ca,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function gh(t){if(!t)return ta;t=t._reactInternals;e:{if(Na(t)!==t||t.tag!==1)throw Error(Ne(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ns(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Ne(171))}if(t.tag===1){var r=t.type;if(Ns(r))return g0(t,r,s)}return s}function fh(t,s,r,a,n,l,i,d,c){return t=Dd(r,a,!0,t,n,l,i,d,c),t.context=gh(null),r=t.current,a=us(),n=Gr(r),l=Sr(a,n),l.callback=s??null,Jr(r,l,n),t.current.lanes=n,rl(t,n,a),vs(t,a),t}function zi(t,s,r,a){var n=s.current,l=us(),i=Gr(n);return r=gh(r),s.context===null?s.context=r:s.pendingContext=r,s=Sr(l,i),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Jr(n,s,i),t!==null&&(Qs(t,n,i,l),zl(t,n,i)),i}function fi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uu(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Id(t,s){Uu(t,s),(t=t.alternate)&&Uu(t,s)}function Ff(){return null}var yh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Md(t){this._internalRoot=t}Fi.prototype.render=Md.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Ne(409));zi(t,s,null,null)};Fi.prototype.unmount=Md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ya(function(){zi(null,t,null,null)}),s[Tr]=null}};function Fi(t){this._internalRoot=t}Fi.prototype.unstable_scheduleHydration=function(t){if(t){var s=Gm();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Fr.length&&s!==0&&s<Fr[r].priority;r++);Fr.splice(r,0,t),r===0&&Km(t)}};function Ld(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _i(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zu(){}function _f(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var m=fi(i);l.call(m)}}var i=fh(s,a,t,0,null,!1,!1,"",zu);return t._reactRootContainer=i,t[Tr]=i.current,Vn(t.nodeType===8?t.parentNode:t),ya(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var d=a;a=function(){var m=fi(c);d.call(m)}}var c=Dd(t,0,!1,null,null,!1,!1,"",zu);return t._reactRootContainer=c,t[Tr]=c.current,Vn(t.nodeType===8?t.parentNode:t),ya(function(){zi(s,c,r,a)}),c}function Ri(t,s,r,a,n){var l=r._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var d=n;n=function(){var c=fi(i);d.call(c)}}zi(s,i,t,n)}else i=_f(r,s,t,n,a);return fi(i)}Jm=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=fn(s.pendingLanes);r!==0&&(ed(s,r|1),vs(s,It()),!(it&6)&&(Ka=It()+500,aa()))}break;case 13:ya(function(){var a=Er(t,1);if(a!==null){var n=us();Qs(a,t,1,n)}}),Id(t,1)}};td=function(t){if(t.tag===13){var s=Er(t,134217728);if(s!==null){var r=us();Qs(s,t,134217728,r)}Id(t,134217728)}};qm=function(t){if(t.tag===13){var s=Gr(t),r=Er(t,s);if(r!==null){var a=us();Qs(r,t,s,a)}Id(t,s)}};Gm=function(){return mt};Xm=function(t,s){var r=mt;try{return mt=t,s()}finally{mt=r}};qo=function(t,s,r){switch(s){case"input":if(Oo(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=$i(a);if(!n)throw Error(Ne(90));Tm(a),Oo(a,n)}}}break;case"textarea":Pm(t,r);break;case"select":s=r.value,s!=null&&Fa(t,!!r.multiple,s,!1)}};Um=Ed;zm=ya;var Rf={usingClientEntryPoint:!1,Events:[nl,Aa,$i,Mm,Lm,Ed]},mn={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Of={bundleType:mn.bundleType,version:mn.version,rendererPackageName:mn.rendererPackageName,rendererConfig:mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rm(t),t===null?null:t.stateNode},findFiberByHostInstance:mn.findFiberByHostInstance||Ff,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Ci=Tl.inject(Of),mr=Tl}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rf;As.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ld(s))throw Error(Ne(200));return zf(t,s,null,r)};As.createRoot=function(t,s){if(!Ld(t))throw Error(Ne(299));var r=!1,a="",n=yh;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=Dd(t,1,!1,null,null,r,!1,a,n),t[Tr]=s.current,Vn(t.nodeType===8?t.parentNode:t),new Md(s)};As.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=Rm(s),t=t===null?null:t.stateNode,t};As.flushSync=function(t){return ya(t)};As.hydrate=function(t,s,r){if(!_i(s))throw Error(Ne(200));return Ri(null,t,s,!0,r)};As.hydrateRoot=function(t,s,r){if(!Ld(t))throw Error(Ne(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",i=yh;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=fh(s,null,t,1,r??null,n,!1,l,i),t[Tr]=s.current,Vn(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new Fi(s)};As.render=function(t,s,r){if(!_i(s))throw Error(Ne(200));return Ri(null,t,s,!1,r)};As.unmountComponentAtNode=function(t){if(!_i(t))throw Error(Ne(40));return t._reactRootContainer?(ya(function(){Ri(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};As.unstable_batchedUpdates=Ed;As.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!_i(r))throw Error(Ne(200));if(t==null||t._reactInternals===void 0)throw Error(Ne(38));return Ri(t,s,r,!1,a)};As.version="18.3.1-next-f1338f8080-20240426";function bh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bh)}catch(t){console.error(t)}}bh(),bm.exports=As;var Bf=bm.exports,Fu=Bf;Mo.createRoot=Fu.createRoot,Mo.hydrateRoot=Fu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qn(){return Qn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Qn.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const _u="popstate";function Vf(t){t===void 0&&(t={});function s(a,n){let{pathname:l,search:i,hash:d}=a.location;return Tc("",{pathname:l,search:i,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:yi(n)}return Yf(s,r,null,t)}function Ft(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Ud(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Wf(){return Math.random().toString(36).substr(2,8)}function Ru(t,s){return{usr:t.state,key:t.key,idx:s}}function Tc(t,s,r,a){return r===void 0&&(r=null),Qn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?tn(s):s,{state:r,key:s&&s.key||a||Wf()})}function yi(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function tn(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function Yf(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,d=Br.Pop,c=null,m=b();m==null&&(m=0,i.replaceState(Qn({},i.state,{idx:m}),""));function b(){return(i.state||{idx:null}).idx}function f(){d=Br.Pop;let y=b(),p=y==null?null:y-m;m=y,c&&c({action:d,location:N.location,delta:p})}function u(y,p){d=Br.Push;let g=Tc(N.location,y,p);m=b()+1;let h=Ru(g,m),x=N.createHref(g);try{i.pushState(h,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(x)}l&&c&&c({action:d,location:N.location,delta:1})}function v(y,p){d=Br.Replace;let g=Tc(N.location,y,p);m=b();let h=Ru(g,m),x=N.createHref(g);i.replaceState(h,"",x),l&&c&&c({action:d,location:N.location,delta:0})}function k(y){let p=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof y=="string"?y:yi(y);return g=g.replace(/ $/,"%20"),Ft(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let N={get action(){return d},get location(){return t(n,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(_u,f),c=y,()=>{n.removeEventListener(_u,f),c=null}},createHref(y){return s(n,y)},createURL:k,encodeLocation(y){let p=k(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:u,replace:v,go(y){return i.go(y)}};return N}var Ou;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ou||(Ou={}));function Hf(t,s,r){return r===void 0&&(r="/"),Jf(t,s,r)}function Jf(t,s,r,a){let n=typeof s=="string"?tn(s):s,l=zd(n.pathname||"/",r);if(l==null)return null;let i=jh(t);qf(i);let d=null;for(let c=0;d==null&&c<i.length;++c){let m=ly(l);d=ry(i[c],m)}return d}function jh(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(l,i,d)=>{let c={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Ft(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let m=Kr([a,c.relativePath]),b=r.concat(c);l.children&&l.children.length>0&&(Ft(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),jh(l.children,s,b,m)),!(l.path==null&&!l.index)&&s.push({path:m,score:ty(m,l.index),routesMeta:b})};return t.forEach((l,i)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))n(l,i);else for(let c of Nh(l.path))n(l,i,c)}),s}function Nh(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let i=Nh(a.join("/")),d=[];return d.push(...i.map(c=>c===""?l:[l,c].join("/"))),n&&d.push(...i),d.map(c=>t.startsWith("/")&&c===""?"/":c)}function qf(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:sy(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Gf=/^:[\w-]+$/,Xf=3,Kf=2,Qf=1,Zf=10,ey=-2,Bu=t=>t==="*";function ty(t,s){let r=t.split("/"),a=r.length;return r.some(Bu)&&(a+=ey),s&&(a+=Kf),r.filter(n=>!Bu(n)).reduce((n,l)=>n+(Gf.test(l)?Xf:l===""?Qf:Zf),a)}function sy(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function ry(t,s,r){let{routesMeta:a}=t,n={},l="/",i=[];for(let d=0;d<a.length;++d){let c=a[d],m=d===a.length-1,b=l==="/"?s:s.slice(l.length)||"/",f=ay({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},b),u=c.route;if(!f)return null;Object.assign(n,f.params),i.push({params:n,pathname:Kr([l,f.pathname]),pathnameBase:xy(Kr([l,f.pathnameBase])),route:u}),f.pathnameBase!=="/"&&(l=Kr([l,f.pathnameBase]))}return i}function ay(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=ny(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((m,b,f)=>{let{paramName:u,isOptional:v}=b;if(u==="*"){let N=d[f]||"";i=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const k=d[f];return v&&!k?m[u]=void 0:m[u]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:i,pattern:t}}function ny(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Ud(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,d,c)=>(a.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function ly(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ud(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function zd(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const iy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oy=t=>iy.test(t);function cy(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?tn(t):t,l;if(r)if(oy(r))l=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Ud(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?l=Vu(r.substring(1),"/"):l=Vu(r,s)}else l=s;return{pathname:l,search:uy(a),hash:my(n)}}function Vu(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function wo(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dy(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function vh(t,s){let r=dy(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function wh(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=tn(t):(n=Qn({},t),Ft(!n.pathname||!n.pathname.includes("?"),wo("?","pathname","search",n)),Ft(!n.pathname||!n.pathname.includes("#"),wo("#","pathname","hash",n)),Ft(!n.search||!n.search.includes("#"),wo("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,d;if(i==null)d=r;else{let f=s.length-1;if(!a&&i.startsWith("..")){let u=i.split("/");for(;u[0]==="..";)u.shift(),f-=1;n.pathname=u.join("/")}d=f>=0?s[f]:"/"}let c=cy(n,d),m=i&&i!=="/"&&i.endsWith("/"),b=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(m||b)&&(c.pathname+="/"),c}const Kr=t=>t.join("/").replace(/\/\/+/g,"/"),xy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,my=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kh=["post","put","patch","delete"];new Set(kh);const py=["get",...kh];new Set(py);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zn(){return Zn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Zn.apply(this,arguments)}const Fd=o.createContext(null),gy=o.createContext(null),va=o.createContext(null),Oi=o.createContext(null),na=o.createContext({outlet:null,matches:[],isDataRoute:!1}),Sh=o.createContext(null);function fy(t,s){let{relative:r}=s===void 0?{}:s;il()||Ft(!1);let{basename:a,navigator:n}=o.useContext(va),{hash:l,pathname:i,search:d}=Th(t,{relative:r}),c=i;return a!=="/"&&(c=i==="/"?a:Kr([a,i])),n.createHref({pathname:c,search:d,hash:l})}function il(){return o.useContext(Oi)!=null}function sn(){return il()||Ft(!1),o.useContext(Oi).location}function Ch(t){o.useContext(va).static||o.useLayoutEffect(t)}function Nt(){let{isDataRoute:t}=o.useContext(na);return t?$y():yy()}function yy(){il()||Ft(!1);let t=o.useContext(Fd),{basename:s,future:r,navigator:a}=o.useContext(va),{matches:n}=o.useContext(na),{pathname:l}=sn(),i=JSON.stringify(vh(n,r.v7_relativeSplatPath)),d=o.useRef(!1);return Ch(()=>{d.current=!0}),o.useCallback(function(m,b){if(b===void 0&&(b={}),!d.current)return;if(typeof m=="number"){a.go(m);return}let f=wh(m,JSON.parse(i),l,b.relative==="path");t==null&&s!=="/"&&(f.pathname=f.pathname==="/"?s:Kr([s,f.pathname])),(b.replace?a.replace:a.push)(f,b.state,b)},[s,a,i,l,t])}function _d(){let{matches:t}=o.useContext(na),s=t[t.length-1];return s?s.params:{}}function Th(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=o.useContext(va),{matches:n}=o.useContext(na),{pathname:l}=sn(),i=JSON.stringify(vh(n,a.v7_relativeSplatPath));return o.useMemo(()=>wh(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function by(t,s){return jy(t,s)}function jy(t,s,r,a){il()||Ft(!1);let{navigator:n}=o.useContext(va),{matches:l}=o.useContext(na),i=l[l.length-1],d=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let m=sn(),b;if(s){var f;let y=typeof s=="string"?tn(s):s;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Ft(!1),b=y}else b=m;let u=b.pathname||"/",v=u;if(c!=="/"){let y=c.replace(/^\//,"").split("/");v="/"+u.replace(/^\//,"").split("/").slice(y.length).join("/")}let k=Hf(t,{pathname:v}),N=Sy(k&&k.map(y=>Object.assign({},y,{params:Object.assign({},d,y.params),pathname:Kr([c,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Kr([c,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),l,r,a);return s&&N?o.createElement(Oi.Provider,{value:{location:Zn({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Br.Pop}},N):N}function Ny(){let t=Py(),s=hy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},s),r?o.createElement("pre",{style:n},r):null,null)}const vy=o.createElement(Ny,null);class wy extends o.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?o.createElement(na.Provider,{value:this.props.routeContext},o.createElement(Sh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ky(t){let{routeContext:s,match:r,children:a}=t,n=o.useContext(Fd);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),o.createElement(na.Provider,{value:s},a)}function Sy(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,d=(n=r)==null?void 0:n.errors;if(d!=null){let b=i.findIndex(f=>f.route.id&&(d==null?void 0:d[f.route.id])!==void 0);b>=0||Ft(!1),i=i.slice(0,Math.min(i.length,b+1))}let c=!1,m=-1;if(r&&a&&a.v7_partialHydration)for(let b=0;b<i.length;b++){let f=i[b];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=b),f.route.id){let{loaderData:u,errors:v}=r,k=f.route.loader&&u[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||k){c=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((b,f,u)=>{let v,k=!1,N=null,y=null;r&&(v=d&&f.route.id?d[f.route.id]:void 0,N=f.route.errorElement||vy,c&&(m<0&&u===0?(Ay("route-fallback"),k=!0,y=null):m===u&&(k=!0,y=f.route.hydrateFallbackElement||null)));let p=s.concat(i.slice(0,u+1)),g=()=>{let h;return v?h=N:k?h=y:f.route.Component?h=o.createElement(f.route.Component,null):f.route.element?h=f.route.element:h=b,o.createElement(ky,{match:f,routeContext:{outlet:b,matches:p,isDataRoute:r!=null},children:h})};return r&&(f.route.ErrorBoundary||f.route.errorElement||u===0)?o.createElement(wy,{location:r.location,revalidation:r.revalidation,component:N,error:v,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var Eh=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Eh||{}),Ph=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ph||{});function Cy(t){let s=o.useContext(Fd);return s||Ft(!1),s}function Ty(t){let s=o.useContext(gy);return s||Ft(!1),s}function Ey(t){let s=o.useContext(na);return s||Ft(!1),s}function $h(t){let s=Ey(),r=s.matches[s.matches.length-1];return r.route.id||Ft(!1),r.route.id}function Py(){var t;let s=o.useContext(Sh),r=Ty(),a=$h();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function $y(){let{router:t}=Cy(Eh.UseNavigateStable),s=$h(Ph.UseNavigateStable),r=o.useRef(!1);return Ch(()=>{r.current=!0}),o.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Zn({fromRouteId:s},l)))},[t,s])}const Wu={};function Ay(t,s,r){Wu[t]||(Wu[t]=!0)}function Dy(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ge(t){Ft(!1)}function Iy(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Br.Pop,navigator:l,static:i=!1,future:d}=t;il()&&Ft(!1);let c=s.replace(/^\/*/,"/"),m=o.useMemo(()=>({basename:c,navigator:l,static:i,future:Zn({v7_relativeSplatPath:!1},d)}),[c,d,l,i]);typeof a=="string"&&(a=tn(a));let{pathname:b="/",search:f="",hash:u="",state:v=null,key:k="default"}=a,N=o.useMemo(()=>{let y=zd(b,c);return y==null?null:{location:{pathname:y,search:f,hash:u,state:v,key:k},navigationType:n}},[c,b,f,u,v,k,n]);return N==null?null:o.createElement(va.Provider,{value:m},o.createElement(Oi.Provider,{children:r,value:N}))}function My(t){let{children:s,location:r}=t;return by(Ec(s),r)}new Promise(()=>{});function Ec(t,s){s===void 0&&(s=[]);let r=[];return o.Children.forEach(t,(a,n)=>{if(!o.isValidElement(a))return;let l=[...s,n];if(a.type===o.Fragment){r.push.apply(r,Ec(a.props.children,l));return}a.type!==Ge&&Ft(!1),!a.props.index||!a.props.children||Ft(!1);let i={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Ec(a.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Pc.apply(this,arguments)}function Ly(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Uy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zy(t,s){return t.button===0&&(!s||s==="_self")&&!Uy(t)}function $c(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function Fy(t,s){let r=$c(t);return s&&s.forEach((a,n)=>{r.has(n)||s.getAll(n).forEach(l=>{r.append(n,l)})}),r}const _y=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ry="6";try{window.__reactRouterVersion=Ry}catch{}const Oy="startTransition",Yu=$p[Oy];function By(t){let{basename:s,children:r,future:a,window:n}=t,l=o.useRef();l.current==null&&(l.current=Vf({window:n,v5Compat:!0}));let i=l.current,[d,c]=o.useState({action:i.action,location:i.location}),{v7_startTransition:m}=a||{},b=o.useCallback(f=>{m&&Yu?Yu(()=>c(f)):c(f)},[c,m]);return o.useLayoutEffect(()=>i.listen(b),[i,b]),o.useEffect(()=>Dy(a),[a]),o.createElement(Iy,{basename:s,children:r,location:d.location,navigationType:d.action,navigator:i,future:a})}const Vy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=o.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:l,replace:i,state:d,target:c,to:m,preventScrollReset:b,viewTransition:f}=s,u=Ly(s,_y),{basename:v}=o.useContext(va),k,N=!1;if(typeof m=="string"&&Wy.test(m)&&(k=m,Vy))try{let h=new URL(window.location.href),x=m.startsWith("//")?new URL(h.protocol+m):new URL(m),w=zd(x.pathname,v);x.origin===h.origin&&w!=null?m=w+x.search+x.hash:N=!0}catch{}let y=fy(m,{relative:n}),p=Yy(m,{replace:i,state:d,target:c,preventScrollReset:b,relative:n,viewTransition:f});function g(h){a&&a(h),h.defaultPrevented||p(h)}return o.createElement("a",Pc({},u,{href:k||y,onClick:N||l?a:g,ref:r,target:c}))});var Hu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hu||(Hu={}));var Ju;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ju||(Ju={}));function Yy(t,s){let{target:r,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:d}=s===void 0?{}:s,c=Nt(),m=sn(),b=Th(t,{relative:i});return o.useCallback(f=>{if(zy(f,r)){f.preventDefault();let u=a!==void 0?a:yi(m)===yi(b);c(t,{replace:u,state:n,preventScrollReset:l,relative:i,viewTransition:d})}},[m,c,b,a,n,r,t,l,i,d])}function Bi(t){let s=o.useRef($c(t)),r=o.useRef(!1),a=sn(),n=o.useMemo(()=>Fy(a.search,r.current?null:s.current),[a.search]),l=Nt(),i=o.useCallback((d,c)=>{const m=$c(typeof d=="function"?d(n):d);r.current=!0,l("?"+m,c)},[l,n]);return[n,i]}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ah=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=o.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:l,iconNode:i,...d},c)=>o.createElement("svg",{ref:c,...Jy,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:Ah("lucide",n),...d},[...i.map(([m,b])=>o.createElement(m,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,s)=>{const r=o.forwardRef(({className:a,...n},l)=>o.createElement(qy,{ref:l,iconNode:s,className:Ah(`lucide-${Hy(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ye("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=ye("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=ye("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=ye("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ye("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ye("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=ye("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ye("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ye("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ye("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=ye("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=ye("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ye("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ye("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ye("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=ye("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ye("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=ye("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ye("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ye("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ye("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ye("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ye("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ye("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ye("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ye("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ye("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ye("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ye("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rs="/assets/logo-CqWyyM6s.png",ub="/assets/hero-video-Ct0sC9SG.mp4",mb=()=>{Nt();const[t,s]=o.useState(!0),[r,a]=o.useState(0);o.useEffect(()=>{const d=()=>a(window.scrollY);return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const n=[{icon:e.jsx(xt,{className:"w-8 h-8"}),title:"Advanced Trading",description:"Access forex, crypto, and commodities with real-time market data and lightning-fast execution."},{icon:e.jsx(ar,{className:"w-8 h-8"}),title:"Secure Platform",description:"Bank-grade security with 256-bit encryption protecting your funds and personal data."},{icon:e.jsx(ot,{className:"w-8 h-8"}),title:"Copy Trading",description:"Follow and copy successful traders automatically. Earn while you learn from the best."},{icon:e.jsx(xb,{className:"w-8 h-8"}),title:"Instant Execution",description:"Ultra-low latency order execution with spreads starting from 0.0 pips."},{icon:e.jsx(Rd,{className:"w-8 h-8"}),title:"IB Program",description:"Earn unlimited commissions through our 18-level referral program."},{icon:e.jsx(Dc,{className:"w-8 h-8"}),title:"24/7 Support",description:"Round-the-clock customer support to help you succeed in your trading journey."}],l=[{value:"$2.5B+",label:"Trading Volume"},{value:"150K+",label:"Active Traders"},{value:"99.9%",label:"Uptime"},{value:"0.001s",label:"Execution Speed"}],i=[{name:"Rajesh Kumar",role:"Professional Trader",content:"ProfitVisionFX has transformed my trading experience. The platform is incredibly fast and reliable.",rating:5},{name:"Sarah Johnson",role:"Copy Trader",content:"I started with copy trading and now I'm earning consistent profits. Best decision I ever made!",rating:5},{name:"Michael Chen",role:"IB Partner",content:"The IB program is amazing. I've built a passive income stream just by referring traders.",rating:5}];return e.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden",children:[e.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r>50?"bg-black/90 backdrop-blur-lg border-b border-gray-800":"bg-transparent"}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white transition-colors",children:"Features"}),e.jsx("a",{href:"#stats",className:"text-gray-300 hover:text-white transition-colors",children:"Stats"}),e.jsx("a",{href:"#testimonials",className:"text-gray-300 hover:text-white transition-colors",children:"Testimonials"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/login",className:"text-white hover:text-red-400 transition-colors font-medium",children:"Login"}),e.jsx("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/signup",className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-6 py-2.5 rounded-full font-medium transition-all transform hover:scale-105",children:"Get Started"})]})]})})}),e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",children:e.jsx("source",{src:ub,type:"video/mp4"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black"})]}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center pt-20",children:[e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-red-500/20 border border-red-500/30 rounded-full px-4 py-2 mb-6",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-red-400 text-sm font-medium",children:"Live Trading Platform"})]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight",children:["Trade Smarter with",e.jsx("span",{className:"block bg-gradient-to-r from-red-400 via-red-500 to-orange-500 bg-clip-text text-transparent",children:"ProfitVisionFX"})]}),e.jsx("p",{className:"text-lg sm:text-xl text-gray-300 max-w-3xl mx-auto mb-8",children:"Experience the future of trading with our advanced platform. Trade forex, crypto, and commodities with lightning-fast execution and industry-leading spreads."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12",children:[e.jsxs("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/signup",className:"group bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-8 py-4 rounded-full font-semibold text-lg transition-all transform hover:scale-105 flex items-center gap-2",children:["Start Trading Now",e.jsx(Sa,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/login",className:"bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white px-8 py-4 rounded-full font-semibold text-lg transition-all border border-white/20",children:"Login to Account"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:l.map((d,c)=>e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-white",children:d.value}),e.jsx("div",{className:"text-gray-400 text-sm",children:d.label})]},c))})]}),e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:e.jsx(Od,{className:"w-8 h-8 text-gray-400"})})]})]}),e.jsx("section",{id:"features",className:"py-20 bg-gradient-to-b from-black to-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["Why Choose ",e.jsx("span",{className:"text-red-500",children:"ProfitVisionFX"}),"?"]}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"We provide everything you need to succeed in the financial markets"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((d,c)=>e.jsxs("div",{className:"group bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-6 border border-gray-700/50 hover:border-red-500/50 transition-all duration-300 hover:transform hover:-translate-y-2",children:[e.jsx("div",{className:"w-14 h-14 bg-red-500/20 rounded-xl flex items-center justify-center text-red-500 mb-4 group-hover:bg-red-500 group-hover:text-white transition-all",children:d.icon}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:d.title}),e.jsx("p",{className:"text-gray-400",children:d.description})]},c))})]})}),e.jsxs("section",{id:"stats",className:"py-20 bg-gray-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:["Trusted by Traders ",e.jsx("span",{className:"text-red-500",children:"Worldwide"})]}),e.jsx("p",{className:"text-gray-400 mb-8",children:"Join thousands of successful traders who have chosen ProfitVisionFX as their preferred trading platform. Our commitment to excellence and innovation sets us apart."}),e.jsx("ul",{className:"space-y-4",children:["Regulated & Licensed","Segregated Client Funds","Negative Balance Protection","Free Demo Account"].map((d,c)=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(xs,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-gray-300",children:d})]},c))})]}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:l.map((d,c)=>e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-2xl p-6 border border-gray-700 text-center",children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent",children:d.value}),e.jsx("div",{className:"text-gray-400 mt-2",children:d.label})]},c))})]})})]}),e.jsx("section",{id:"testimonials",className:"py-20 bg-black",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["What Our ",e.jsx("span",{className:"text-red-500",children:"Traders"})," Say"]}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Real stories from real traders who have achieved success with ProfitVisionFX"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:i.map((d,c)=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-6 border border-gray-700/50",children:[e.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(d.rating)].map((m,b)=>e.jsx(ba,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"},b))}),e.jsxs("p",{className:"text-gray-300 mb-6 italic",children:['"',d.content,'"']}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center text-white font-bold",children:d.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:d.name}),e.jsx("div",{className:"text-gray-400 text-sm",children:d.role})]})]})]},c))})]})}),e.jsxs("section",{className:"py-20 bg-gradient-to-r from-red-600 to-orange-600 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Ready to Start Your Trading Journey?"}),e.jsx("p",{className:"text-white/80 text-lg mb-8 max-w-2xl mx-auto",children:"Join ProfitVisionFX today and get access to world-class trading tools, educational resources, and 24/7 support."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/signup",className:"bg-white text-red-600 px-8 py-4 rounded-full font-semibold text-lg hover:bg-gray-100 transition-all transform hover:scale-105",children:"Create Free Account"}),e.jsx("button",{onClick:()=>window.location.href="https://trade.profitvisionfx.com/user/login",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-full font-semibold text-lg hover:bg-white/10 transition-all",children:"Login"})]})]})]}),e.jsx("footer",{className:"bg-gray-900 py-12 border-t border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-10 object-contain mb-4"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your trusted partner in forex and crypto trading. Trade with confidence."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Trading"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Forex Trading"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Crypto Trading"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Copy Trading"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"IB Program"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Careers"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Risk Disclosure"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"AML Policy"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-800 pt-8 text-center text-gray-400 text-sm",children:[e.jsx("p",{children:" 2026 ProfitVisionFX. All rights reserved."}),e.jsx("p",{className:"mt-2 text-xs",children:"Trading involves significant risk of loss. Past performance is not indicative of future results."})]})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 1s ease-out;
        }
      `})]})},hb="http://localhost:5001/api",A=hb,pb="http://localhost:5001",zh=`${A}/auth`,gb=async t=>{const s=await fetch(`${zh}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!s.ok)throw new Error(r.message||"Signup failed");return r},fb=async t=>{const s=await fetch(`${zh}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!s.ok)throw new Error(r.message||"Login failed");return r},yb=()=>{const t=Nt(),[s,r]=o.useState("signin"),[a,n]=o.useState(!1),[l,i]=o.useState(""),[d,c]=o.useState(!1),[m,b]=o.useState({email:"",password:""}),[f,u]=o.useState(window.innerWidth<768);o.useEffect(()=>{const N=()=>u(window.innerWidth<768);return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const v=N=>{b({...m,[N.target.name]:N.target.value}),i("")},k=async N=>{N.preventDefault(),n(!0),i("");try{const y=await fb(m);localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),t(f?"/mobile":"/dashboard")}catch(y){i(y.message)}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-32 object-contain"})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx(bs,{to:"/user/signup",className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign up"}),e.jsx("button",{onClick:()=>r("signin"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${s==="signin"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Welcome back"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:m.email,onChange:v,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:d?"text":"password",name:"password",placeholder:"Enter your password",value:m.password,onChange:v,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>c(!d),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:d?e.jsx(cl,{size:18}):e.jsx(ms,{size:18})})]}),e.jsx("div",{className:"text-right",children:e.jsx(bs,{to:"/user/forgot-password",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Forgot password?"})}),l&&e.jsx("p",{className:"text-red-500 text-sm",children:l}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:a?"Signing in...":"Sign in"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Don't have an account?"," ",e.jsx(bs,{to:"/user/signup",className:"text-white hover:underline",children:"Sign up"})]})]})]})},tm=[{code:"+1",name:"United States",flag:""},{code:"+1",name:"Canada",flag:""},{code:"+44",name:"United Kingdom",flag:""},{code:"+91",name:"India",flag:""},{code:"+61",name:"Australia",flag:""},{code:"+49",name:"Germany",flag:""},{code:"+33",name:"France",flag:""},{code:"+81",name:"Japan",flag:""},{code:"+86",name:"China",flag:""},{code:"+55",name:"Brazil",flag:""},{code:"+52",name:"Mexico",flag:""},{code:"+34",name:"Spain",flag:""},{code:"+39",name:"Italy",flag:""},{code:"+7",name:"Russia",flag:""},{code:"+82",name:"South Korea",flag:""},{code:"+31",name:"Netherlands",flag:""},{code:"+46",name:"Sweden",flag:""},{code:"+41",name:"Switzerland",flag:""},{code:"+65",name:"Singapore",flag:""},{code:"+971",name:"UAE",flag:""},{code:"+966",name:"Saudi Arabia",flag:""},{code:"+27",name:"South Africa",flag:""},{code:"+234",name:"Nigeria",flag:""},{code:"+254",name:"Kenya",flag:""},{code:"+62",name:"Indonesia",flag:""},{code:"+60",name:"Malaysia",flag:""},{code:"+63",name:"Philippines",flag:""},{code:"+66",name:"Thailand",flag:""},{code:"+84",name:"Vietnam",flag:""},{code:"+92",name:"Pakistan",flag:""},{code:"+880",name:"Bangladesh",flag:""},{code:"+94",name:"Sri Lanka",flag:""},{code:"+977",name:"Nepal",flag:""}],bb=()=>{const t=Nt(),[s]=Bi(),r=s.get("ref"),[a,n]=o.useState("signup"),[l,i]=o.useState(!1),[d,c]=o.useState(""),[m,b]=o.useState(!1),[f,u]=o.useState(""),[v,k]=o.useState(tm[0]),N=o.useRef(null),[y,p]=o.useState(!1),[g,h]=o.useState(window.innerWidth<768),[x,w]=o.useState({firstName:"",email:"",phone:"",countryCode:"+1",password:""});o.useEffect(()=>{const K=()=>h(window.innerWidth<768);return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),o.useEffect(()=>{const K=ee=>{N.current&&!N.current.contains(ee.target)&&b(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]);const z=tm.filter(K=>K.name.toLowerCase().includes(f.toLowerCase())||K.code.includes(f)),C=K=>{k(K),w({...x,countryCode:K.code}),b(!1),u("")},B=K=>{w({...x,[K.target.name]:K.target.value}),c("")},G=async K=>{var ee;K.preventDefault(),i(!0),c("");try{const X={...x,referralCode:r||void 0},F=await gb(X);if(localStorage.setItem("token",F.token),localStorage.setItem("user",JSON.stringify(F.user)),r&&((ee=F.user)!=null&&ee._id))try{await fetch(`${A}/ib/register-referral`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:F.user._id,referralCode:r})}),console.log("Referral registered:",r)}catch(R){console.error("Error registering referral:",R)}t(g?"/mobile":"/dashboard")}catch(X){c(X.message)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 sm:p-6 md:p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-6 sm:p-8 w-full max-w-md border border-gray-800 mx-4 sm:mx-0",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-32 object-contain"})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx("button",{onClick:()=>n("signup"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${a==="signup"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign up"}),e.jsx(bs,{to:"/user/login",className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Create an account"}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"firstName",placeholder:"Enter your name",value:x.firstName,onChange:B,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:x.email,onChange:B,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"flex relative",ref:N,children:[e.jsxs("button",{type:"button",onClick:()=>b(!m),className:"flex items-center gap-1 sm:gap-2 bg-dark-600 border border-gray-700 rounded-l-lg px-2 sm:px-3 py-3 border-r-0 hover:bg-dark-500 transition-colors min-w-[70px] sm:min-w-[90px]",children:[e.jsx("span",{className:"text-base sm:text-lg",children:v.flag}),e.jsx("span",{className:"text-gray-400 text-xs sm:text-sm hidden sm:inline",children:v.code}),e.jsx(Od,{size:14,className:"text-gray-500"})]}),m&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 sm:w-72 bg-dark-600 border border-gray-700 rounded-lg shadow-xl z-50 max-h-64 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search country...",value:f,onChange:K=>u(K.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg pl-9 pr-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-gray-600"})]})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[z.map((K,ee)=>e.jsxs("button",{type:"button",onClick:()=>C(K),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-dark-500 transition-colors text-left",children:[e.jsx("span",{className:"text-lg",children:K.flag}),e.jsx("span",{className:"text-white text-sm flex-1",children:K.name}),e.jsx("span",{className:"text-gray-500 text-sm",children:K.code})]},`${K.code}-${ee}`)),z.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-3",children:"No countries found"})]})]}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Enter phone number",value:x.phone,onChange:B,className:"flex-1 bg-dark-600 border border-gray-700 rounded-r-lg px-3 sm:px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors min-w-0"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",name:"password",placeholder:"Create password",value:x.password,onChange:B,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 pr-12 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>p(!y),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:y?e.jsx(cl,{size:18}):e.jsx(ms,{size:18})})]}),d&&e.jsx("p",{className:"text-red-500 text-sm",children:d}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:l?"Creating account...":"Create an account"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["By creating an account, you agree to our"," ",e.jsx("a",{href:"#",className:"text-white hover:underline",children:"Terms & Service"})]})]})]})},Fh=o.createContext(),ks=()=>{const t=o.useContext(Fh);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Eo={bgPrimary:"#000000",bgSecondary:"#0D0D0D",bgCard:"#1A1A1A",bgHover:"#262626",textPrimary:"#FFFFFF",textSecondary:"#9CA3AF",textMuted:"#6B7280",border:"#374151",borderLight:"#4B5563"},Po={bgPrimary:"#F8FAFC",bgSecondary:"#FFFFFF",bgCard:"#F1F5F9",bgHover:"#E2E8F0",bgAccent:"#EFF6FF",textPrimary:"#0F172A",textSecondary:"#334155",textMuted:"#64748B",textHighlight:"#1E40AF",border:"#CBD5E1",borderLight:"#E2E8F0",shadow:"rgba(0,0,0,0.08)"},jb=({children:t})=>{const[s,r]=o.useState(null),[a,n]=o.useState(!0),[l,i]=o.useState(()=>{const u=localStorage.getItem("darkMode");return u!==null?JSON.parse(u):!1}),d=async()=>{try{const v=await(await fetch(`${A}/theme/active`)).json();v.success&&v.theme&&(r(v.theme),c(v.theme.colors))}catch(u){console.error("Error fetching theme:",u)}n(!1)},c=u=>{if(!u)return;const v=document.documentElement;Object.entries(u).forEach(([k,N])=>{N&&v.style.setProperty(`--theme-${k}`,N)}),v.style.setProperty("--color-primary",u.primary||"#3B82F6"),v.style.setProperty("--color-secondary",u.secondary||"#10B981"),v.style.setProperty("--color-accent",u.accent||"#F59E0B"),v.style.setProperty("--color-bg-primary",u.bgPrimary||"#000000"),v.style.setProperty("--color-bg-secondary",u.bgSecondary||"#0D0D0D"),v.style.setProperty("--color-bg-card",u.bgCard||"#1A1A1A"),v.style.setProperty("--color-text-primary",u.textPrimary||"#FFFFFF"),v.style.setProperty("--color-text-secondary",u.textSecondary||"#9CA3AF"),v.style.setProperty("--color-border",u.border||"#374151"),v.style.setProperty("--color-success",u.success||"#10B981"),v.style.setProperty("--color-error",u.error||"#EF4444"),v.style.setProperty("--color-buy",u.buyColor||"#3B82F6"),v.style.setProperty("--color-sell",u.sellColor||"#EF4444"),v.style.setProperty("--color-profit",u.profitColor||"#10B981"),v.style.setProperty("--color-loss",u.lossColor||"#EF4444")};o.useEffect(()=>{const u=document.documentElement;Object.entries(l?Eo:Po).forEach(([k,N])=>{u.style.setProperty(`--${k}`,N)}),l?(u.style.setProperty("--theme-bgPrimary","#000000"),u.style.setProperty("--theme-bgSecondary","#0D0D0D"),u.style.setProperty("--theme-bgCard","#1A1A1A"),u.style.setProperty("--theme-bgHover","#262626"),u.style.setProperty("--theme-textPrimary","#FFFFFF"),u.style.setProperty("--theme-textSecondary","#9CA3AF"),u.style.setProperty("--theme-textMuted","#6B7280"),u.style.setProperty("--theme-border","#374151"),u.style.setProperty("--theme-borderLight","#4B5563")):(u.style.setProperty("--theme-bgPrimary","#F8FAFC"),u.style.setProperty("--theme-bgSecondary","#FFFFFF"),u.style.setProperty("--theme-bgCard","#F1F5F9"),u.style.setProperty("--theme-bgHover","#E2E8F0"),u.style.setProperty("--theme-textPrimary","#0F172A"),u.style.setProperty("--theme-textSecondary","#334155"),u.style.setProperty("--theme-textMuted","#64748B"),u.style.setProperty("--theme-border","#CBD5E1"),u.style.setProperty("--theme-borderLight","#E2E8F0")),l?(u.classList.add("dark"),u.classList.remove("light")):(u.classList.add("light"),u.classList.remove("dark")),localStorage.setItem("darkMode",JSON.stringify(l))},[l]),o.useEffect(()=>{d();const u=setInterval(d,3e4);return()=>clearInterval(u)},[]);const m=()=>{d()},b=()=>{i(u=>!u)},f=l?Eo:Po;return e.jsx(Fh.Provider,{value:{theme:s,loading:a,refreshTheme:m,applyTheme:c,isDarkMode:l,toggleDarkMode:b,modeColors:f,darkColors:Eo,lightColors:Po},children:t})},Nb=()=>{var de,fe,me,ae,ve,Ve,Le;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState("Dashboard"),[l,i]=o.useState(!1),[d,c]=o.useState([]),[m,b]=o.useState(!0),[f,u]=o.useState([]),[v,k]=o.useState(!0),[N,y]=o.useState(0),[p,g]=o.useState(0),[h,x]=o.useState(0),[w,z]=o.useState(0),[C,B]=o.useState([]),[G,K]=o.useState(!1),[ee,X]=o.useState([]),[F,R]=o.useState(0),[W,D]=o.useState([]),[re,O]=o.useState(!0),[q,T]=o.useState(null);o.useRef(null);const j=o.useRef(null),Z=o.useRef(null),I=o.useRef(null),ce=JSON.parse(localStorage.getItem("user")||"{}"),[J,le]=o.useState(window.innerWidth<768);o.useEffect(()=>{const S=()=>{const ie=window.innerWidth<768;le(ie)};return window.addEventListener("resize",S),window.innerWidth<768&&!sessionStorage.getItem("viewChecked")&&(sessionStorage.setItem("viewChecked","true"),t("/mobile")),()=>window.removeEventListener("resize",S)},[t]);const xe=async()=>{const S=localStorage.getItem("token");if(!S||!ce._id){t("/user/login");return}try{const ie=await fetch(`${A}/auth/me`,{headers:{Authorization:`Bearer ${S}`}}),ge=await ie.json();if(ge.forceLogout||ie.status===403){alert(ge.message||"Session expired. Please login again."),localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login");return}}catch(ie){console.error("Auth check error:",ie)}};o.useEffect(()=>{xe(),je(),ce._id&&(H(),be(),ze())},[ce._id]);const ze=async()=>{try{const ie=await(await fetch(`${A}/kyc/status/${ce._id}`)).json();ie.success&&ie.hasKYC&&T(ie.kyc)}catch(S){console.error("Error fetching KYC status:",S)}};o.useEffect(()=>{C.length>0&&ue()},[C]);const je=async()=>{try{const ie=await(await fetch(`${A}/prop/status`)).json();ie.success&&K(ie.enabled)}catch(S){console.error("Error fetching challenge status:",S)}},H=async()=>{var S;try{const ge=await(await fetch(`${A}/wallet/${ce._id}`)).json();y(((S=ge.wallet)==null?void 0:S.balance)||0)}catch(ie){console.error("Error fetching wallet:",ie)}},be=async()=>{try{const ie=await(await fetch(`${A}/trading-accounts/user/${ce._id}`)).json();B(ie.accounts||[])}catch(S){console.error("Error fetching accounts:",S)}},ue=async()=>{try{let S=[],ie=0,ge=0;for(const Ee of C){const Q=await(await fetch(`${A}/trade/history/${Ee._id}`)).json();Q.success&&Q.trades&&(S=[...S,...Q.trades],Q.trades.forEach(Ce=>{ie+=(Ce.commission||0)+(Ce.swap||0),ge+=Ce.realizedPnl||0}));const te=await(await fetch(`${A}/trade/open/${Ee._id}`)).json();te.success&&te.trades&&(S=[...S,...te.trades])}g(S.length),x(Math.abs(ie)),z(ge)}catch(S){console.error("Error fetching trades:",S)}};o.useEffect(()=>{const S=async()=>{var ge;b(!0);try{const Ee=await fetch("https://api.coingecko.com/api/v3/news");if(Ee.ok){const M=await Ee.json();c(((ge=M.data)==null?void 0:ge.slice(0,6))||[])}else c([{title:"Bitcoin Surges Past $100K Milestone",description:"BTC reaches new all-time high amid institutional buying",updated_at:Date.now(),url:"#"},{title:"Ethereum 2.0 Staking Rewards Increase",description:"ETH staking yields hit 5.2% APY",updated_at:Date.now()-36e5,url:"#"},{title:"SEC Approves New Crypto ETFs",description:"Multiple spot crypto ETFs get regulatory approval",updated_at:Date.now()-72e5,url:"#"},{title:"DeFi Total Value Locked Hits $200B",description:"Decentralized finance continues rapid growth",updated_at:Date.now()-108e5,url:"#"},{title:"Major Bank Launches Crypto Custody",description:"Traditional finance embraces digital assets",updated_at:Date.now()-144e5,url:"#"},{title:"NFT Market Shows Recovery Signs",description:"Trading volume up 40% month-over-month",updated_at:Date.now()-18e6,url:"#"}])}catch{c([{title:"Bitcoin Surges Past $100K Milestone",description:"BTC reaches new all-time high amid institutional buying",updated_at:Date.now(),url:"#"},{title:"Ethereum 2.0 Staking Rewards Increase",description:"ETH staking yields hit 5.2% APY",updated_at:Date.now()-36e5,url:"#"},{title:"SEC Approves New Crypto ETFs",description:"Multiple spot crypto ETFs get regulatory approval",updated_at:Date.now()-72e5,url:"#"},{title:"DeFi Total Value Locked Hits $200B",description:"Decentralized finance continues rapid growth",updated_at:Date.now()-108e5,url:"#"},{title:"Major Bank Launches Crypto Custody",description:"Traditional finance embraces digital assets",updated_at:Date.now()-144e5,url:"#"},{title:"NFT Market Shows Recovery Signs",description:"Trading volume up 40% month-over-month",updated_at:Date.now()-18e6,url:"#"}])}b(!1)};S();const ie=setInterval(S,3e5);return()=>clearInterval(ie)},[]),o.useEffect(()=>{k(!0),u([{date:"2026-01-08",time:"08:30",country:"US",event:"Non-Farm Payrolls",impact:"high",forecast:"180K",previous:"227K"},{date:"2026-01-08",time:"10:00",country:"US",event:"ISM Services PMI",impact:"high",forecast:"53.5",previous:"52.1"},{date:"2026-01-09",time:"08:30",country:"US",event:"Initial Jobless Claims",impact:"medium",forecast:"210K",previous:"211K"},{date:"2026-01-09",time:"14:00",country:"US",event:"FOMC Meeting Minutes",impact:"high",forecast:"-",previous:"-"},{date:"2026-01-10",time:"08:30",country:"US",event:"CPI m/m",impact:"high",forecast:"0.3%",previous:"0.3%"},{date:"2026-01-10",time:"08:30",country:"US",event:"Core CPI m/m",impact:"high",forecast:"0.2%",previous:"0.3%"},{date:"2026-01-13",time:"08:30",country:"US",event:"PPI m/m",impact:"medium",forecast:"0.2%",previous:"0.4%"},{date:"2026-01-14",time:"08:30",country:"US",event:"Retail Sales m/m",impact:"high",forecast:"0.5%",previous:"0.7%"}]),k(!1)},[]),o.useEffect(()=>{const S=async()=>{try{const ge=await fetch("https://newsdata.io/api/1/news?apikey=pub_63aboreal&q=forex%20OR%20currency%20OR%20trading&language=en&category=business");if(ge.ok){const Ee=await ge.json();if(Ee.results&&Ee.results.length>0){X(Ee.results.slice(0,10));return}}}catch{console.log("Using fallback news data")}X([{title:"EUR/USD Breaks Key Resistance Level",description:"Euro surges against dollar amid ECB hawkish stance",image_url:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Fed Signals Potential Rate Cuts in 2026",description:"Federal Reserve hints at monetary policy shift",image_url:"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"GBP/JPY Volatility Spikes on BOJ News",description:"Bank of Japan policy decision creates market turbulence",image_url:"https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Gold Prices Hit New Record High",description:"Safe-haven demand drives precious metals rally",image_url:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Oil Markets React to OPEC+ Decision",description:"Crude prices fluctuate on production cut news",image_url:"https://images.unsplash.com/photo-1518186285589-2f7649de83e0?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"USD/CHF Tests Critical Support Zone",description:"Swiss franc strengthens on risk-off sentiment",image_url:"https://images.unsplash.com/photo-1642790106117-e829e14a795f?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"AUD/USD Rallies on China Data",description:"Australian dollar gains on positive trade figures",image_url:"https://images.unsplash.com/photo-1523961131990-5ea7c61b2107?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Crypto Markets Show Correlation with Forex",description:"Bitcoin movements mirror dollar index trends",image_url:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=400",pubDate:new Date().toISOString(),link:"#"}])};S();const ie=setInterval(S,6e5);return()=>clearInterval(ie)},[]),o.useEffect(()=>{if(ee.length===0)return;const S=setInterval(()=>{R(ie=>(ie+1)%ee.length)},5e3);return()=>clearInterval(S)},[ee.length]);const $=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}],V=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return o.useEffect(()=>{const S=async()=>{O(!0);try{const Q=await(await fetch(`${A}/news/marketwatch`)).json();Q.success&&Q.news&&D(Q.news)}catch(M){console.error("Error fetching MarketWatch news:",M);try{const Ae=await(await fetch("https://feeds.content.dowjones.io/public/rss/mw_topstories")).text(),te=ie(Ae);D(te)}catch(Q){console.error("RSS fallback failed:",Q),D([{id:"1",title:"Markets Update: Loading latest news...",source:"MarketWatch",time:"Just now",category:"Markets",url:"https://www.marketwatch.com"}])}}finally{O(!1)}},ie=M=>{const Q=[];return(M.match(/<item>([\s\S]*?)<\/item>/g)||[]).slice(0,20).forEach((te,Ce)=>{const $e=te.match(/<title><!\[CDATA\[(.*?)\]\]><\/title>/)||te.match(/<title>(.*?)<\/title>/),et=te.match(/<link>(.*?)<\/link>/),qe=te.match(/<pubDate>(.*?)<\/pubDate>/),Re=te.match(/<category>(.*?)<\/category>/);$e&&Q.push({id:`mw-${Ce}`,title:$e[1].replace(/<!\[CDATA\[|\]\]>/g,"").trim(),url:et?et[1]:"https://www.marketwatch.com",time:qe?ge(qe[1]):"",category:Re?Re[1]:"Markets",source:"MarketWatch"})}),Q},ge=M=>{if(!M)return"";const Q=new Date,Ae=new Date(M),te=Q-Ae,Ce=Math.floor(te/6e4),$e=Math.floor(Ce/60),et=Math.floor($e/24);return Ce<1?"Just now":Ce<60?`${Ce}m ago`:$e<24?`${$e}h ago`:`${et}d ago`};S();const Ee=setInterval(S,3e4);return()=>clearInterval(Ee)},[]),o.useEffect(()=>{if(j.current){j.current.innerHTML="";const S=document.createElement("script");S.src="https://s3.tradingview.com/external-embedding/embed-widget-events.js",S.async=!0,S.innerHTML=JSON.stringify({colorTheme:"dark",isTransparent:!0,width:"100%",height:"100%",locale:"en",importanceFilter:"0,1",countryFilter:"us,eu,gb,jp,cn"}),j.current.appendChild(S)}if(Z.current){Z.current.innerHTML="";const S=document.createElement("script");S.src="https://s3.tradingview.com/external-embedding/embed-widget-forex-heat-map.js",S.async=!0,S.innerHTML=JSON.stringify({width:"100%",height:"100%",currencies:["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD"],isTransparent:!0,colorTheme:"dark",locale:"en"}),Z.current.appendChild(S)}if(I.current){I.current.innerHTML="";const S=document.createElement("script");S.src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js",S.async=!0,S.innerHTML=JSON.stringify({width:"100%",height:"100%",defaultColumn:"overview",defaultScreen:"general",market:"forex",showToolbar:!0,colorTheme:"dark",locale:"en",isTransparent:!0}),I.current.appendChild(S)}},[]),e.jsxs("div",{className:`h-screen flex transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[e.jsxs("aside",{className:`${l?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col h-screen sticky top-0 transition-all duration-300 ease-in-out`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center shrink-0",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-24 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2 overflow-y-auto",children:$.map(S=>e.jsxs("button",{onClick:()=>t(S.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${a===S.name?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:l?"":S.name,children:[e.jsx(S.icon,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:S.name})]},S.name))}),e.jsxs("div",{className:`p-2 border-t shrink-0 ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s?"text-yellow-400 hover:text-yellow-300 hover:bg-dark-700":"text-blue-600 hover:text-blue-700 hover:bg-gray-100"}`,title:l?"":s?"Light Mode":"Dark Mode",children:[s?e.jsx(At,{size:18,className:"flex-shrink-0"}):e.jsx(Ct,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:V,className:`w-full flex items-center gap-3 px-3 py-2.5 transition-colors rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,title:l?"":"Log Out",children:[e.jsx(ws,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsxs("header",{className:`flex items-center justify-between px-6 py-5 border-b ${s?"border-gray-800 bg-gradient-to-r from-dark-800 to-dark-900":"border-gray-200 bg-gradient-to-r from-gray-50 to-white"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Welcome back,"}),e.jsx("h1",{className:`text-xl font-bold ${s?"text-white":"text-gray-900"}`,children:ce.name||ce.email||"Trader"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:`px-3 py-1.5 rounded-full ${s?"bg-accent-green/20":"bg-green-100"}`,children:e.jsx("span",{className:"text-accent-green text-sm font-medium",children:"Active"})})})]}),(!q||((de=q.status)==null?void 0:de.toUpperCase())!=="APPROVED")&&e.jsxs("div",{className:`mx-6 mt-4 p-4 rounded-xl border flex items-center justify-between ${q?((fe=q.status)==null?void 0:fe.toUpperCase())==="PENDING"?"bg-blue-500/10 border-blue-500/30":"bg-red-500/10 border-red-500/30":"bg-yellow-500/10 border-yellow-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${q?((me=q.status)==null?void 0:me.toUpperCase())==="PENDING"?"bg-blue-500/20":"bg-red-500/20":"bg-yellow-500/20"}`,children:q?((ae=q.status)==null?void 0:ae.toUpperCase())==="PENDING"?e.jsx(Je,{size:20,className:"text-blue-500"}):e.jsx(Ut,{size:20,className:"text-red-500"}):e.jsx(Ut,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:q?((ve=q.status)==null?void 0:ve.toUpperCase())==="PENDING"?"KYC Verification Pending":"KYC Rejected":"Complete Your KYC"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:q?((Ve=q.status)==null?void 0:Ve.toUpperCase())==="PENDING"?"Your documents are being reviewed":"Please resubmit your documents":"Verify your identity to enable withdrawals"})]})]}),(!q||((Le=q.status)==null?void 0:Le.toUpperCase())==="REJECTED")&&e.jsx("button",{onClick:()=>t("/profile"),className:"bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90 transition-colors",children:"Complete KYC"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-lg flex items-center justify-center",children:e.jsx(ht,{size:20,className:"text-accent-green"})}),e.jsx("button",{onClick:()=>t("/wallet"),className:"text-accent-green text-xs font-medium hover:underline",children:"View"})]}),e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Wallet Balance"}),e.jsxs("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:["$",N.toLocaleString()]})]}),e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(xt,{size:20,className:"text-blue-500"})}),e.jsxs("span",{className:"text-gray-500 text-xs",children:[C.length," accounts"]})]}),e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Total Trades"}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:p.toLocaleString()})]}),e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wt,{size:20,className:"text-orange-500"})}),e.jsx("span",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Fees & Swap"})]}),e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Total Charges"}),e.jsxs("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(xr,{size:20,className:"text-purple-500"})}),e.jsxs("span",{className:`text-xs font-medium ${w>=0?"text-accent-green":"text-red-500"}`,children:[w>=0?"+":"",w!==0?(w/(N||1)*100).toFixed(1)+"%":"0%"]})]}),e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Total PnL"}),e.jsxs("p",{className:`text-2xl font-bold ${w>=0?"text-accent-green":"text-red-500"}`,children:[w>=0?"+":"","$",w.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ab,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"MarketWatch News"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"Real-time market updates"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"LIVE"})]})]}),e.jsx("div",{className:"h-[500px] overflow-y-auto custom-scrollbar",children:re?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Je,{size:24,className:"text-accent-green animate-spin"})}):e.jsx("div",{className:"space-y-4",children:W.slice(0,20).map((S,ie)=>e.jsxs("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:`block rounded-xl overflow-hidden transition-all hover:scale-[1.01] ${s?"bg-dark-700 border border-gray-800 hover:border-gray-700":"bg-gray-50 border border-gray-200 hover:border-gray-300 shadow-sm"}`,children:[S.image&&e.jsxs("div",{className:"relative h-40 overflow-hidden",children:[e.jsx("img",{src:S.image,alt:"",className:"w-full h-full object-cover",onError:ge=>ge.target.style.display="none"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-500/80 text-white font-medium",children:S.category||"Markets"}),e.jsx("span",{className:"text-xs text-white/80",children:S.time})]})})]}),e.jsxs("div",{className:"p-4",children:[!S.image&&e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${s?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:S.category||"Markets"}),e.jsx("span",{className:`text-xs ${s?"text-gray-500":"text-gray-400"}`,children:S.time})]}),e.jsx("h3",{className:`text-sm font-semibold line-clamp-2 mb-2 ${s?"text-white":"text-gray-900"}`,children:S.title}),S.summary&&e.jsx("p",{className:`text-xs line-clamp-2 mb-3 ${s?"text-gray-400":"text-gray-600"}`,children:S.summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})}),e.jsx("span",{className:`text-xs font-medium ${s?"text-gray-400":"text-gray-500"}`,children:S.source||"MarketWatch"})]}),e.jsx(Ky,{size:14,className:`${s?"text-gray-500":"text-gray-400"}`})]})]})]},S.id||ie))})})]}),e.jsxs("div",{className:`rounded-xl p-5 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wa,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Economic Calendar"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"Real-time events from TradingView"})]})]}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg",children:e.jsx("div",{ref:j,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]})]}),e.jsxs("div",{className:`rounded-xl p-5 border mb-6 ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(xr,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Forex Heatmap"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"Currency strength visualization"})]})]}),e.jsx("div",{className:"h-80 overflow-hidden rounded-lg",children:e.jsx("div",{ref:Z,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]}),e.jsxs("div",{className:`rounded-xl p-5 border mb-6 ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-500/20 rounded-lg flex items-center justify-center",children:e.jsx(xt,{size:20,className:"text-cyan-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Forex Screener"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"Real-time currency pair analysis"})]})]}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg",children:e.jsx("div",{ref:I,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]})]})]})]})},$o="eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiJiYmRlZGVjYWJjMDAzOTczNTQ3ODk2Y2NlYjgyNzY2NSIsImFjY2Vzc1J1bGVzIjpbeyJpZCI6InRyYWRpbmctYWNjb3VudC1tYW5hZ2VtZW50LWFwaSIsIm1ldGhvZHMiOlsidHJhZGluZy1hY2NvdW50LW1hbmFnZW1lbnQtYXBpOnJlc3Q6cHVibGljOio6KiJdLCJyb2xlcyI6WyJyZWFkZXIiXSwicmVzb3VyY2VzIjpbImFjY291bnQ6JFVTRVJfSUQkOjJkNjM4M2E1LWJiNjgtNGJhOS1hNDBmLTE4OTA5NGQ3YzE0ZiJdfSx7ImlkIjoibWV0YWFwaS1yZXN0LWFwaSIsIm1ldGhvZHMiOlsibWV0YWFwaS1hcGk6cmVzdDpwdWJsaWM6KjoqIl0sInJvbGVzIjpbInJlYWRlciIsIndyaXRlciJdLCJyZXNvdXJjZXMiOlsiYWNjb3VudDokVVNFUl9JRCQ6MmQ2MzgzYTUtYmI2OC00YmE5LWE0MGYtMTg5MDk0ZDdjMTRmIl19LHsiaWQiOiJtZXRhYXBpLXJwYy1hcGkiLCJtZXRob2RzIjpbIm1ldGFhcGktYXBpOndzOnB1YmxpYzoqOioiXSwicm9sZXMiOlsicmVhZGVyIiwid3JpdGVyIl0sInJlc291cmNlcyI6WyJhY2NvdW50OiRVU0VSX0lEJDoyZDYzODNhNS1iYjY4LTRiYTktYTQwZi0xODkwOTRkN2MxNGYiXX0seyJpZCI6Im1ldGFhcGktcmVhbC10aW1lLXN0cmVhbWluZy1hcGkiLCJtZXRob2RzIjpbIm1ldGFhcGktYXBpOndzOnB1YmxpYzoqOioiXSwicm9sZXMiOlsicmVhZGVyIiwid3JpdGVyIl0sInJlc291cmNlcyI6WyJhY2NvdW50OiRVU0VSX0lEJDoyZDYzODNhNS1iYjY4LTRiYTktYTQwZi0xODkwOTRkN2MxNGYiXX0seyJpZCI6Im1ldGFzdGF0cy1hcGkiLCJtZXRob2RzIjpbIm1ldGFzdGF0cy1hcGk6cmVzdDpwdWJsaWM6KjoqIl0sInJvbGVzIjpbInJlYWRlciJdLCJyZXNvdXJjZXMiOlsiYWNjb3VudDokVVNFUl9JRCQ6MmQ2MzgzYTUtYmI2OC00YmE5LWE0MGYtMTg5MDk0ZDdjMTRmIl19XSwiaWdub3JlUmF0ZUxpbWl0cyI6ZmFsc2UsInRva2VuSWQiOiIyMDIxMDIxMyIsImltcGVyc29uYXRlZCI6ZmFsc2UsInJlYWxVc2VySWQiOiJiYmRlZGVjYWJjMDAzOTczNTQ3ODk2Y2NlYjgyNzY2NSIsImlhdCI6MTc2Nzg2OTUyMywiZXhwIjoxNzc1NjQ1NTIzfQ.OKKP9THiaQN1GRbWEM2HaCRYkNeEyIwB63Jocxyuy-8jR0Gv2fQFncUnWAoVF7jBZRT3Eii4-HqcU7aXZGJZyFyRyekAROD4XEoWfvEDRHGuyi3Mzqt3II3apH-wlFIQDBaH4qtiCCHXPTw1-dDOSDrjcXzVhvx-1sU88Iq_0QBgz7MUJ7zKFWWzB3usBtbixcRHG6fhKFwLlKePry8BMbj9xrvySuyySj0wnl8Qw4Fgo9KYLc4UdliEhNAqN3MPumH4yccM-BZjrYWN_FMLZHCSfutjSSwjoQrwwOTyf8NsHnqJNXfcboV7IZkP5iGth6-hEMNb-UKmdsFZLQjenEI-Ql3xwo-i7luILfqErquc9ZIuhTZVLlAQPiyiiXDCwL6DlJRj625tiAJKgAKz65Bz8NiXZ0T37r9OCKcwK6Q7Rr8LK1bluHGBk3iewpJgpNzPa92GmjBhrbY5EaNfr8Os84zdLOGpww8nljfEqdy40boOl-2hZ8S9FpV6drnlSLD-aAhKbq3yIR9_S_tXqwstIl00_1JUKHpJHZn04zvIXtqYFGgiAxcY7AXKrk1Bty_xulnaiQ9dXuSj8boJJkeoaq6wwJGNe_aA-ytdQAKz6PSxtXRcQVB-PsKzhC8wKCBbxru9zCwDkSXJUPtEKN5c25eMvsTq5JNc5sgbrds",Nn="2d6383a5-bb68-4ba9-a40f-189094d7c14f";console.log("MetaAPI initialized with account:",Nn);class vb{constructor(){this.ws=null,this.subscribers=new Map,this.prices=new Map,this.symbols=[],this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5}async getSymbols(){try{const s=new AbortController,r=setTimeout(()=>s.abort(),5e3),a=await fetch(`https://mt-client-api-v1.new-york.agiliumtrade.ai/users/current/accounts/${Nn}/symbols`,{headers:{"auth-token":$o,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(r),!a.ok)throw new Error("Failed to fetch symbols");const n=await a.json();return this.symbols=n,n}catch(s){return console.error("Error fetching symbols:",s),[]}}async getSymbolSpecification(s){try{const r=await fetch(`https://mt-client-api-v1.new-york.agiliumtrade.ai/users/current/accounts/${Nn}/symbols/${s}/specification`,{headers:{"auth-token":$o,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch symbol specification");return await r.json()}catch(r){return console.error("Error fetching symbol specification:",r),null}}async getSymbolPrice(s){try{const r=await fetch(`${A}/prices/${s}`);if(!r.ok)throw new Error("Failed to fetch symbol price");const a=await r.json();return a.success&&a.price?(this.prices.set(s,a.price),a.price):null}catch(r){return console.error("Error fetching symbol price:",r),null}}async getAllPrices(s){try{const r=await fetch(`${A}/prices/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!r.ok)throw new Error("Failed to fetch prices");const a=await r.json();return a.success&&a.prices?(Object.entries(a.prices).forEach(([n,l])=>{this.prices.set(n,l)}),a.prices):{}}catch(r){return console.error("Error fetching all prices:",r),{}}}connect(s=[]){if(this.ws&&this.ws.readyState===WebSocket.OPEN)return;const r="wss://mt-client-api-v1.new-york.agiliumtrade.ai/ws";this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("MetaAPI WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0,this.ws.send(JSON.stringify({type:"authenticate",accountId:Nn,token:$o})),s.length>0&&this.subscribeToSymbols(s)},this.ws.onmessage=a=>{try{const n=JSON.parse(a.data);this.handleMessage(n)}catch(n){console.error("Error parsing WebSocket message:",n)}},this.ws.onerror=a=>{console.error("MetaAPI WebSocket error:",a)},this.ws.onclose=()=>{console.log("MetaAPI WebSocket disconnected"),this.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>{console.log(`Reconnecting... Attempt ${this.reconnectAttempts}`),this.connect(Array.from(this.subscribers.keys()))},3e3*this.reconnectAttempts))}}handleMessage(s){if(s.type==="prices"||s.type==="price"){const r=s.symbol,a={bid:s.bid,ask:s.ask,spread:s.ask-s.bid,time:s.time};this.prices.set(r,a);const n=this.subscribers.get(r);n&&n(a)}}subscribeToSymbols(s){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.warn("WebSocket not connected");return}this.ws.send(JSON.stringify({type:"subscribeToMarketData",accountId:Nn,symbols:s,subscriptions:[{type:"quotes"}]}))}subscribe(s,r){this.subscribers.set(s,r),this.isConnected&&this.subscribeToSymbols([s])}unsubscribe(s){this.subscribers.delete(s)}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.subscribers.clear(),this.isConnected=!1}getPrice(s){return this.prices.get(s)}}const tl=new vb,yr=Object.create(null);yr.open="0";yr.close="1";yr.ping="2";yr.pong="3";yr.message="4";yr.upgrade="5";yr.noop="6";const Wl=Object.create(null);Object.keys(yr).forEach(t=>{Wl[yr[t]]=t});const Uc={type:"error",data:"parser error"},_h=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rh=typeof ArrayBuffer=="function",Oh=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Bd=({type:t,data:s},r,a)=>_h&&s instanceof Blob?r?a(s):sm(s,a):Rh&&(s instanceof ArrayBuffer||Oh(s))?r?a(s):sm(new Blob([s]),a):a(yr[t]+(s||"")),sm=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function rm(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Ao;function wb(t,s){if(_h&&t.data instanceof Blob)return t.data.arrayBuffer().then(rm).then(s);if(Rh&&(t.data instanceof ArrayBuffer||Oh(t.data)))return s(rm(t.data));Bd(t,!1,r=>{Ao||(Ao=new TextEncoder),s(Ao.encode(r))})}const am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<am.length;t++)vn[am.charCodeAt(t)]=t;const kb=t=>{let s=t.length*.75,r=t.length,a,n=0,l,i,d,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const m=new ArrayBuffer(s),b=new Uint8Array(m);for(a=0;a<r;a+=4)l=vn[t.charCodeAt(a)],i=vn[t.charCodeAt(a+1)],d=vn[t.charCodeAt(a+2)],c=vn[t.charCodeAt(a+3)],b[n++]=l<<2|i>>4,b[n++]=(i&15)<<4|d>>2,b[n++]=(d&3)<<6|c&63;return m},Sb=typeof ArrayBuffer=="function",Vd=(t,s)=>{if(typeof t!="string")return{type:"message",data:Bh(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:Cb(t.substring(1),s)}:Wl[r]?t.length>1?{type:Wl[r],data:t.substring(1)}:{type:Wl[r]}:Uc},Cb=(t,s)=>{if(Sb){const r=kb(t);return Bh(r,s)}else return{base64:!0,data:t}},Bh=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Vh="",Tb=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((l,i)=>{Bd(l,!1,d=>{a[i]=d,++n===r&&s(a.join(Vh))})})},Eb=(t,s)=>{const r=t.split(Vh),a=[];for(let n=0;n<r.length;n++){const l=Vd(r[n],s);if(a.push(l),l.type==="error")break}return a};function Pb(){return new TransformStream({transform(t,s){wb(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const l=new DataView(n.buffer);l.setUint8(0,126),l.setUint16(1,a)}else{n=new Uint8Array(9);const l=new DataView(n.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let Do;function $l(t){return t.reduce((s,r)=>s+r.length,0)}function Al(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function $b(t,s){Do||(Do=new TextDecoder);const r=[];let a=0,n=-1,l=!1;return new TransformStream({transform(i,d){for(r.push(i);;){if(a===0){if($l(r)<1)break;const c=Al(r,1);l=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if($l(r)<2)break;const c=Al(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if($l(r)<8)break;const c=Al(r,8),m=new DataView(c.buffer,c.byteOffset,c.length),b=m.getUint32(0);if(b>Math.pow(2,21)-1){d.enqueue(Uc);break}n=b*Math.pow(2,32)+m.getUint32(4),a=3}else{if($l(r)<n)break;const c=Al(r,n);d.enqueue(Vd(l?c:Do.decode(c),s)),a=0}if(n===0||n>t){d.enqueue(Uc);break}}}})}const Wh=4;function zt(t){if(t)return Ab(t)}function Ab(t){for(var s in zt.prototype)t[s]=zt.prototype[s];return t}zt.prototype.on=zt.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};zt.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};zt.prototype.off=zt.prototype.removeListener=zt.prototype.removeAllListeners=zt.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};zt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};zt.prototype.emitReserved=zt.prototype.emit;zt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};zt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yi=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),_s=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Db="arraybuffer";function Yh(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const Ib=_s.setTimeout,Mb=_s.clearTimeout;function Hi(t,s){s.useNativeTimers?(t.setTimeoutFn=Ib.bind(_s),t.clearTimeoutFn=Mb.bind(_s)):(t.setTimeoutFn=_s.setTimeout.bind(_s),t.clearTimeoutFn=_s.clearTimeout.bind(_s))}const Lb=1.33;function Ub(t){return typeof t=="string"?zb(t):Math.ceil((t.byteLength||t.size)*Lb)}function zb(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function Hh(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Fb(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function _b(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let l=r[a].split("=");s[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return s}class Rb extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class Wd extends zt{constructor(s){super(),this.writable=!1,Hi(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new Rb(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=Vd(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=Fb(s);return r.length?"?"+r:""}}class Ob extends Wd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};Eb(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,Tb(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Hh()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let Jh=!1;try{Jh=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bb=Jh;function Vb(){}class Wb extends Ob{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,l)=>{this.onError("xhr post error",n,l)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}class gr extends zt{constructor(s,r,a){super(),this.createRequest=s,Hi(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=Yh(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=gr.requestsCount++,gr.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Vb,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete gr.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}gr.requestsCount=0;gr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nm);else if(typeof addEventListener=="function"){const t="onpagehide"in _s?"pagehide":"unload";addEventListener(t,nm,!1)}}function nm(){for(let t in gr.requests)gr.requests.hasOwnProperty(t)&&gr.requests[t].abort()}const Yb=function(){const t=qh({xdomain:!1});return t&&t.responseType!==null}();class Hb extends Wb{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=Yb&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new gr(qh,this.uri(),s)}}function qh(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Bb))return new XMLHttpRequest}catch{}if(!s)try{return new _s[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Gh=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Jb extends Wd{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=Gh?{}:Yh(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;Bd(a,this.supportsBinary,l=>{try{this.doWrite(a,l)}catch{}n&&Yi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Hh()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const Io=_s.WebSocket||_s.MozWebSocket;class qb extends Jb{createSocket(s,r,a){return Gh?new Io(s,r,a):r?new Io(s,r):new Io(s)}doWrite(s,r){this.ws.send(r)}}class Gb extends Wd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=$b(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=Pb();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const l=()=>{a.read().then(({done:d,value:c})=>{d||(this.onPacket(c),l())}).catch(d=>{})};l();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&Yi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Xb={websocket:qb,webtransport:Gb,polling:Hb},Kb=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function zc(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=Kb.exec(t||""),l={},i=14;for(;i--;)l[Qb[i]]=n[i]||"";return r!=-1&&a!=-1&&(l.source=s,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Zb(l,l.path),l.queryKey=ej(l,l.query),l}function Zb(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function ej(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,l){n&&(r[n]=l)}),r}const Fc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Yl=[];Fc&&addEventListener("offline",()=>{Yl.forEach(t=>t())},!1);class Zr extends zt{constructor(s,r){if(super(),this.binaryType=Db,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=zc(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=zc(r.host).host);Hi(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_b(this.opts.query)),Fc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Yl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=Wh,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Zr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Zr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=Ub(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Yi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const l={type:s,data:r,options:a};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(Zr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Yl.indexOf(this._offlineEventListener);a!==-1&&Yl.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}Zr.protocol=Wh;class tj extends Zr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;Zr.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!a)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Zr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(b(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=r.name,this.emitReserved("upgradeError",u)}}))};function l(){a||(a=!0,b(),r.close(),r=null)}const i=f=>{const u=new Error("probe error: "+f);u.transport=r.name,l(),this.emitReserved("upgradeError",u)};function d(){i("transport closed")}function c(){i("socket closed")}function m(f){r&&f.name!==r.name&&l()}const b=()=>{r.removeListener("open",n),r.removeListener("error",i),r.removeListener("close",d),this.off("close",c),this.off("upgrading",m)};r.once("open",n),r.once("error",i),r.once("close",d),this.once("close",c),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let sj=class extends tj{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>Xb[n]).filter(n=>!!n)),super(s,a)}};function rj(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=zc(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const l=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+l+":"+a.port+s,a.href=a.protocol+"://"+l+(r&&r.port===a.port?"":":"+a.port),a}const aj=typeof ArrayBuffer=="function",nj=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Xh=Object.prototype.toString,lj=typeof Blob=="function"||typeof Blob<"u"&&Xh.call(Blob)==="[object BlobConstructor]",ij=typeof File=="function"||typeof File<"u"&&Xh.call(File)==="[object FileConstructor]";function Yd(t){return aj&&(t instanceof ArrayBuffer||nj(t))||lj&&t instanceof Blob||ij&&t instanceof File}function Hl(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Hl(t[r]))return!0;return!1}if(Yd(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Hl(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Hl(t[r]))return!0;return!1}function oj(t){const s=[],r=t.data,a=t;return a.data=_c(r,s),a.attachments=s.length,{packet:a,buffers:s}}function _c(t,s){if(!t)return t;if(Yd(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=_c(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=_c(t[a],s));return r}return t}function cj(t,s){return t.data=Rc(t.data,s),delete t.attachments,t}function Rc(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Rc(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Rc(t[r],s));return t}const Kh=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],dj=5;var Xe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Xe||(Xe={}));class xj{constructor(s){this.replacer=s}encode(s){return(s.type===Xe.EVENT||s.type===Xe.ACK)&&Hl(s)?this.encodeAsBinary({type:s.type===Xe.EVENT?Xe.BINARY_EVENT:Xe.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===Xe.BINARY_EVENT||s.type===Xe.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=oj(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}class Hd extends zt{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===Xe.BINARY_EVENT;a||r.type===Xe.BINARY_ACK?(r.type=a?Xe.EVENT:Xe.ACK,this.reconstructor=new uj(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Yd(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(Xe[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Xe.BINARY_EVENT||a.type===Xe.BINARY_ACK){const l=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const i=s.substring(l,r);if(i!=Number(i)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(i)}if(s.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(l,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const l=r+1;for(;++r;){const i=s.charAt(r);if(i==null||Number(i)!=i){--r;break}if(r===s.length)break}a.id=Number(s.substring(l,r+1))}if(s.charAt(++r)){const l=this.tryParse(s.substr(r));if(Hd.isPayloadValid(a.type,l))a.data=l;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case Xe.CONNECT:return ki(r);case Xe.DISCONNECT:return r===void 0;case Xe.CONNECT_ERROR:return typeof r=="string"||ki(r);case Xe.EVENT:case Xe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Kh.indexOf(r[0])===-1);case Xe.ACK:case Xe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class uj{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=cj(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function mj(t){return typeof t=="string"}const hj=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function pj(t){return t===void 0||hj(t)}function ki(t){return Object.prototype.toString.call(t)==="[object Object]"}function gj(t,s){switch(t){case Xe.CONNECT:return s===void 0||ki(s);case Xe.DISCONNECT:return s===void 0;case Xe.EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Kh.indexOf(s[0])===-1);case Xe.ACK:return Array.isArray(s);case Xe.CONNECT_ERROR:return typeof s=="string"||ki(s);default:return!1}}function fj(t){return mj(t.nsp)&&pj(t.id)&&gj(t.type,t.data)}const yj=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hd,Encoder:xj,get PacketType(){return Xe},isPacketValid:fj,protocol:dj},Symbol.toStringTag,{value:"Module"}));function qs(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const bj=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qh extends zt{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[qs(s,"open",this.onopen.bind(this)),qs(s,"packet",this.onpacket.bind(this)),qs(s,"error",this.onerror.bind(this)),qs(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,l;if(bj.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const i={type:Xe.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const b=this.ids++,f=r.pop();this._registerAckCallback(b,f),i.id=b}const d=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!d||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===s&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},n),i=(...d)=>{this.io.clearTimeoutFn(l),r.apply(this,d)};i.withError=!0,this.acks[s]=i}emitWithAck(s,...r){return new Promise((a,n)=>{const l=(i,d)=>i?n(i):a(d);l.withError=!0,r.push(l),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...l)=>(this._queue[0],n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...l)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Xe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Xe.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xe.EVENT:case Xe.BINARY_EVENT:this.onevent(s);break;case Xe.ACK:case Xe.BINARY_ACK:this.onack(s);break;case Xe.DISCONNECT:this.ondisconnect();break;case Xe.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:Xe.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function rn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}rn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};rn.prototype.reset=function(){this.attempts=0};rn.prototype.setMin=function(t){this.ms=t};rn.prototype.setMax=function(t){this.max=t};rn.prototype.setJitter=function(t){this.jitter=t};class Oc extends zt{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Hi(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new rn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||yj;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new sj(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=qs(r,"open",function(){a.onopen(),s&&s()}),l=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),s?s(d):this.maybeReconnectOnOpen()},i=qs(r,"error",l);if(this._timeout!==!1){const d=this._timeout,c=this.setTimeoutFn(()=>{n(),l(new Error("timeout")),r.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(i),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(qs(s,"ping",this.onping.bind(this)),qs(s,"data",this.ondata.bind(this)),qs(s,"error",this.onerror.bind(this)),qs(s,"close",this.onclose.bind(this)),qs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Yi(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new Qh(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const hn={};function Jl(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=rj(t,s.path||"/socket.io"),a=r.source,n=r.id,l=r.path,i=hn[n]&&l in hn[n].nsps,d=s.forceNew||s["force new connection"]||s.multiplex===!1||i;let c;return d?c=new Oc(a,s):(hn[n]||(hn[n]=new Oc(a,s)),c=hn[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(Jl,{Manager:Oc,Socket:Qh,io:Jl,connect:Jl});class jj{constructor(){this.socket=null,this.prices={},this.subscribers=new Map,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=10}connect(){var s;(s=this.socket)!=null&&s.connected||(this.socket=Jl(pb,{transports:["websocket"],reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),this.socket.on("connect",()=>{console.log("[PriceStream] Connected to server"),this.isConnected=!0,this.reconnectAttempts=0,this.socket.emit("subscribePrices")}),this.socket.on("priceStream",r=>{const{prices:a,updated:n,timestamp:l}=r;a&&(this.prices={...this.prices,...a}),this.subscribers.forEach((i,d)=>{try{i(this.prices,n,l)}catch(c){console.error("[PriceStream] Subscriber error:",c)}})}),this.socket.on("disconnect",()=>{console.log("[PriceStream] Disconnected"),this.isConnected=!1}),this.socket.on("connect_error",r=>{console.error("[PriceStream] Connection error:",r.message),this.reconnectAttempts++}))}disconnect(){this.socket&&(this.socket.emit("unsubscribePrices"),this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.subscribers.clear()}subscribe(s,r){var a;return this.subscribers.set(s,r),(a=this.socket)!=null&&a.connected||this.connect(),Object.keys(this.prices).length>0&&r(this.prices,{},Date.now()),()=>this.unsubscribe(s)}unsubscribe(s){this.subscribers.delete(s),this.subscribers.size===0&&this.disconnect()}getPrice(s){return this.prices[s]||null}getAllPrices(){return this.prices}calculatePnl(s){const r=this.prices[s.symbol];if(!r)return 0;const a=s.side==="BUY"?r.bid:r.ask,n=s.contractSize||100;return s.side==="BUY"?(a-s.openPrice)*s.quantity*n:(s.openPrice-a)*s.quantity*n}}const Ji=new jj,Nj=()=>{var jr,lr;const t=Nt(),[s]=Bi(),{isDarkMode:r,toggleDarkMode:a}=ks(),n=s.get("account"),[l,i]=o.useState(n?"trade":"home"),[d,c]=o.useState(!1),[m,b]=o.useState(!1),[f,u]=o.useState(null),[v,k]=o.useState(null),[N,y]=o.useState([]),[p,g]=o.useState(null),[h,x]=o.useState([]),[w,z]=o.useState([]),[C,B]=o.useState([]),[G,K]=o.useState([]),[ee,X]=o.useState({}),[F,R]=o.useState(!0),[W,D]=o.useState(""),[re,O]=o.useState("All"),[q,T]=o.useState("positions"),[j,Z]=o.useState([{symbol:"XAUUSD",name:"Gold"}]),[I,ce]=o.useState("XAUUSD"),[J,le]=o.useState("market"),[xe,ze]=o.useState("BUY"),[je,H]=o.useState("0.01"),[be,ue]=o.useState(""),[$,V]=o.useState(""),[de,fe]=o.useState(!1),[me,ae]=o.useState({balance:0,equity:0,credit:0,freeMargin:0,usedMargin:0,floatingPnl:0}),[ve,Ve]=o.useState(null),Le=o.useRef(null);o.useRef(null);const[S,ie]=o.useState(!1),[ge,Ee]=o.useState(null),[M,Q]=o.useState(""),[Ae,te]=o.useState(""),[Ce,$e]=o.useState(!1),[et,qe]=o.useState([]),Re=o.useRef(0),Ke=["All","Starred","Forex","Metals","Crypto"],gt=[{symbol:"EURUSD",name:"EUR/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!0},{symbol:"GBPUSD",name:"GBP/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!0},{symbol:"USDJPY",name:"USD/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"USDCHF",name:"USD/CHF",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"AUDUSD",name:"AUD/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"NZDUSD",name:"NZD/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"USDCAD",name:"USD/CAD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"EURGBP",name:"EUR/GBP",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"EURJPY",name:"EUR/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"GBPJPY",name:"GBP/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"XAUUSD",name:"Gold",bid:0,ask:0,spread:0,category:"Metals",starred:!0},{symbol:"XAGUSD",name:"Silver",bid:0,ask:0,spread:0,category:"Metals",starred:!1},{symbol:"BTCUSD",name:"Bitcoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!0},{symbol:"ETHUSD",name:"Ethereum",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"BNBUSD",name:"BNB",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"SOLUSD",name:"Solana",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"XRPUSD",name:"XRP",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"ADAUSD",name:"Cardano",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"DOGEUSD",name:"Dogecoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"DOTUSD",name:"Polkadot",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"MATICUSD",name:"Polygon",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"LTCUSD",name:"Litecoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"AVAXUSD",name:"Avalanche",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"LINKUSD",name:"Chainlink",bid:0,ask:0,spread:0,category:"Crypto",starred:!1}];o.useEffect(()=>{const U=()=>{window.innerWidth>=768&&(sessionStorage.removeItem("viewChecked"),t("/dashboard"))};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[t]),o.useEffect(()=>{const U=JSON.parse(localStorage.getItem("user")||"{}");if(!U._id){t("/user/login");return}return k(U),K(gt),P(U._id),Fe(),()=>{tl.disconnect()}},[]),o.useEffect(()=>{if(p){oe(),Me(),Ye(),Et();const U=setInterval(()=>{oe(),Et()},5e3);return()=>clearInterval(U)}},[p]);const ne=["EURUSD","GBPUSD","USDJPY","USDCHF","AUDUSD","NZDUSD","USDCAD","EURGBP","EURJPY","GBPJPY","XAUUSD","XAGUSD","BTCUSD","ETHUSD","BNBUSD","SOLUSD","XRPUSD","ADAUSD","DOGEUSD","DOTUSD","MATICUSD","LTCUSD","AVAXUSD","LINKUSD"];o.useEffect(()=>{const U=Ji.subscribe("mobileTradingApp",(Te,Oe,Qe)=>{!Te||Object.keys(Te).length===0||(X(_=>{const se={..._};return Object.entries(Te).forEach(([De,ct])=>{ct&&ct.bid&&(se[De]=ct)}),se}),K(_=>_.map(se=>{const De=Te[se.symbol];if(De&&De.bid&&De.bid>0){const ct=De.bid,rt=De.ask||De.bid,Ze=Math.abs(rt-ct)||ct*1e-4;return{...se,bid:ct,ask:rt,spread:Ze}}return se})),Object.keys(Te).length>0&&st(Te))});return Fe(),()=>U()},[]);const Fe=async()=>{try{const U=await tl.getAllPrices(ne);Object.keys(U).length>0&&(R(!1),X(U),K(Te=>Te.map(Oe=>{const Qe=U[Oe.symbol];if(Qe&&Qe.bid){const _=Qe.bid,se=Qe.ask||Qe.bid,De=Math.abs(se-_)||_*1e-4;return{...Oe,bid:_,ask:se,spread:De}}return Oe})),st(U))}catch(U){console.error("Live prices error:",U)}},st=async U=>{if(p)try{const Oe=await(await fetch(`${A}/trade/check-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:U})})).json();Oe.success&&Oe.executedCount>0&&(Oe.executedTrades.forEach(se=>{var De;dt(`${se.orderType} order executed: ${se.symbol} ${se.side} @ ${(De=se.executionPrice)==null?void 0:De.toFixed(5)}`,"success")}),oe(),Me());const _=await(await fetch(`${A}/trade/check-sltp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:U})})).json();_.success&&_.closedCount>0&&(_.closedTrades.forEach(se=>{const De=se.pnl>=0?`+$${se.pnl.toFixed(2)}`:`-$${Math.abs(se.pnl).toFixed(2)}`;dt(`${se.reason} hit: ${se.symbol} closed at ${De}`,se.pnl>=0?"success":"error")}),oe(),Ye(),Et())}catch{}},P=async U=>{var Te;try{const Qe=await(await fetch(`${A}/trading-accounts/user/${U}`)).json();if(y(Qe.accounts||[]),((Te=Qe.accounts)==null?void 0:Te.length)>0)if(n){const _=Qe.accounts.find(se=>se._id===n);g(_||Qe.accounts[0])}else g(Qe.accounts[0])}catch{}R(!1)},oe=async()=>{if(p)try{const Te=await(await fetch(`${A}/trade/open/${p._id}`)).json();Te.success&&x(Te.trades||[])}catch{}},Me=async()=>{if(p)try{const Te=await(await fetch(`${A}/trade/pending/${p._id}`)).json();Te.success&&z(Te.orders||[])}catch{}},Ye=async()=>{if(p)try{const Te=await(await fetch(`${A}/trade/history/${p._id}?limit=50`)).json();Te.success&&B(Te.trades||[])}catch{}},Et=async()=>{if(p)try{const U=encodeURIComponent(JSON.stringify(ee)),Oe=await(await fetch(`${A}/trade/summary/${p._id}?prices=${U}`)).json();Oe.success&&ae(Oe.summary)}catch{}},at=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},Ss=U=>{u(U),b(!0)},Mt=async()=>{if(!p||!f||de)return;fe(!0);const U=ee[f.symbol]||{};if(!U.bid||!U.ask||U.bid<=0||U.ask<=0){dt("Market is closed or no price data available","error"),fe(!1);return}try{const Oe=await(await fetch(`${A}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,tradingAccountId:p._id,symbol:f.symbol,segment:f.category,side:xe,orderType:J==="market"?"MARKET":"PENDING",quantity:parseFloat(je),bid:U.bid,ask:U.ask,sl:be?parseFloat(be):null,tp:$?parseFloat($):null})})).json();Oe.success?(b(!1),oe(),Et(),dt("Order executed successfully!","success")):dt(Oe.message||"Order failed","error")}catch{dt("Error executing order","error")}fe(!1)},Ms=async U=>{var Qe,_;const Te=h.find(se=>se._id===U);if(!Te){dt("Trade not found","error");return}const Oe=ee[Te.symbol]||{};if(!Oe.bid||!Oe.ask||Oe.bid<=0||Oe.ask<=0){dt("Market is closed or no price data. Cannot close trade.","error");return}try{const De=await(await fetch(`${A}/trade/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:U,bid:Oe.bid,ask:Oe.ask})})).json();if(De.success){const ct=((Qe=De.realizedPnl)==null?void 0:Qe.toFixed(2))||((_=De.pnl)==null?void 0:_.toFixed(2))||"0.00";dt(`Trade closed! P/L: $${ct}`,parseFloat(ct)>=0?"success":"error"),oe(),Ye(),Et()}else dt(De.message||"Failed to close trade","error")}catch(se){console.error("Close trade error:",se),dt("Error closing trade","error")}},dt=(U,Te="success",Oe=3e3)=>{const Qe=++Re.current,_={id:Qe,message:U,type:Te};qe(se=>[...se,_]),setTimeout(()=>{qe(se=>se.filter(De=>De.id!==Qe))},Oe)},Pt=U=>{var Te,Oe;Ee(U),Q(((Te=U.sl||U.stopLoss)==null?void 0:Te.toString())||""),te(((Oe=U.tp||U.takeProfit)==null?void 0:Oe.toString())||""),ie(!0)},Pe=async()=>{if(!(!ge||Ce)){$e(!0);try{const Te=await(await fetch(`${A}/trade/modify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:ge._id,sl:M?parseFloat(M):null,tp:Ae?parseFloat(Ae):null})})).json();Te.success?(dt("Trade modified successfully","success"),oe(),ie(!1)):dt(Te.message||"Failed to modify trade","error")}catch{dt("Error modifying trade","error")}$e(!1)}},Y=async U=>{try{const Oe=await(await fetch(`${A}/trade/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:U})})).json();Oe.success?(dt("Pending order cancelled","success"),Me()):dt(Oe.message||"Failed to cancel order","error")}catch{dt("Error cancelling order","error")}},we=G.filter(U=>{const Te=U.symbol.toLowerCase().includes(W.toLowerCase())||U.name.toLowerCase().includes(W.toLowerCase()),Oe=re==="All"||re==="Starred"&&U.starred||U.category===re;return Te&&Oe}),Be=[{name:"Dashboard",icon:sr,path:"/dashboard",action:()=>i("home")},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Copy Trade",icon:Xt,path:"/copytrade"},{name:"IB Program",icon:ot,path:"/ib"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}],He=U=>ee[U]||{bid:0,ask:0},pt=U=>{const Te=He(U.symbol),Oe=U.side==="BUY"?Te.bid:Te.ask;if(!Oe||Oe<=0)return U._lastPnl||0;const Qe=U.side==="BUY"?(Oe-U.openPrice)*U.quantity*(U.contractSize||1e5):(U.openPrice-Oe)*U.quantity*(U.contractSize||1e5);return U._lastPnl=Qe,Qe},Dt=Object.keys(ee).length>0&&h.some(U=>{var Te;return((Te=ee[U.symbol])==null?void 0:Te.bid)>0})?h.reduce((U,Te)=>U+pt(Te),0):me.floatingPnl||0,Kt=h.reduce((U,Te)=>U+(Te.marginUsed||0),0),Qt=(me.balance||0)+(me.credit||0)+Dt,Rt=Qt-Kt,L={bgMain:r?"bg-dark-900":"bg-slate-50",bgCard:r?"bg-dark-800":"bg-white",bgCardAlt:r?"bg-dark-700":"bg-slate-100",bgHover:r?"bg-dark-600":"bg-slate-200",textPrimary:r?"text-white":"text-slate-900",textSecondary:r?"text-gray-400":"text-slate-600",textMuted:r?"text-gray-500":"text-slate-500",border:r?"border-gray-800":"border-slate-200",divide:r?"divide-gray-800":"divide-slate-200",shadow:r?"":"shadow-sm",shadowMd:r?"":"shadow-md"},[Zt,Ls]=o.useState(!1),Us=()=>e.jsxs("div",{className:`p-4 pb-20 ${L.bgMain} min-h-screen`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-24 object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:`${L.textMuted} text-xs`,children:"Welcome back,"}),e.jsx("h1",{className:`${L.textPrimary} text-lg font-bold`,children:(v==null?void 0:v.firstName)||"Trader"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:a,className:`p-2 ${L.bgCard} ${L.shadow} rounded-full`,children:r?e.jsx(At,{size:20,className:"text-yellow-400"}):e.jsx(Ct,{size:20,className:"text-slate-600"})}),e.jsx("button",{onClick:()=>t("/profile"),className:`p-2 ${L.bgCard} ${L.shadow} rounded-full`,children:e.jsx(er,{size:20,className:L.textSecondary})}),e.jsx("button",{className:`p-2 ${L.bgCard} ${L.shadow} rounded-full`,children:e.jsx(Gy,{size:20,className:L.textSecondary})})]})]}),p&&e.jsxs("div",{className:`${r?"bg-gradient-to-br from-accent-green/20 to-dark-800 border-accent-green/30":"bg-gradient-to-br from-blue-50 to-white border-blue-200"} rounded-xl p-4 mb-4 border ${L.shadowMd}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer",onClick:()=>Ls(!Zt),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 ${r?"bg-accent-green/30":"bg-blue-100"} rounded-full flex items-center justify-center`,children:e.jsx(Gt,{size:16,className:r?"text-accent-green":"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:`${L.textPrimary} font-medium text-sm`,children:p.accountId}),e.jsx("p",{className:`${L.textSecondary} text-xs`,children:p.accountType||"Standard"})]})]}),e.jsx(Xs,{size:18,className:`${L.textSecondary} transition-transform ${Zt?"rotate-90":""}`})]}),Zt&&N.length>1&&e.jsxs("div",{className:`mb-3 border-t ${L.border} pt-3`,children:[e.jsx("p",{className:`${L.textMuted} text-xs mb-2`,children:"Switch Account"}),e.jsx("div",{className:"space-y-2",children:N.map(U=>e.jsxs("button",{onClick:()=>{g(U),Ls(!1)},className:`w-full flex items-center justify-between p-2 rounded-lg ${p._id===U._id?r?"bg-accent-green/20 border border-accent-green/50":"bg-blue-50 border border-blue-300":L.bgCardAlt}`,children:[e.jsx("span",{className:`${L.textPrimary} text-sm`,children:U.accountId}),p._id===U._id&&e.jsx(nt,{size:14,className:r?"text-accent-green":"text-blue-600"})]},U._id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${L.textSecondary} text-xs`,children:"Balance"}),e.jsxs("p",{className:`${L.textPrimary} text-xl font-bold`,children:["$",(me.balance||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${L.textSecondary} text-xs`,children:"Equity"}),e.jsxs("p",{className:"text-xl font-bold",style:{color:Dt>=0?"#3B82F6":"#EF4444"},children:["$",Qt.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>t("/wallet"),className:`flex-1 flex items-center justify-center gap-1 py-2 ${r?"bg-accent-green text-black":"bg-blue-600 text-white"} rounded-lg text-sm font-medium`,children:[e.jsx(Dn,{size:16}),"Deposit"]}),e.jsxs("button",{onClick:()=>t("/wallet"),className:`flex-1 flex items-center justify-center gap-1 py-2 ${L.bgCardAlt} ${L.textPrimary} rounded-lg text-sm font-medium border ${L.border}`,children:[e.jsx(In,{size:16}),"Withdraw"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>t("/account"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(Gt,{size:20,className:r?"text-accent-green":"text-blue-600"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Account"})]}),e.jsxs("button",{onClick:()=>i("market"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(Xu,{size:20,className:"text-blue-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Market"})]}),e.jsxs("button",{onClick:()=>i("trade"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(xt,{size:20,className:"text-amber-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Trade"})]}),e.jsxs("button",{onClick:()=>i("chart"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(Co,{size:20,className:"text-orange-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Chart"})]}),e.jsxs("button",{onClick:()=>t("/wallet"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(ht,{size:20,className:"text-green-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Wallet"})]}),e.jsxs("button",{onClick:()=>t("/copytrade"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(Xt,{size:20,className:"text-purple-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"Copy"})]}),e.jsxs("button",{onClick:()=>t("/ib"),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(ot,{size:20,className:"text-pink-500"}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"IB"})]}),e.jsxs("button",{onClick:()=>c(!0),className:`flex flex-col items-center p-2.5 ${L.bgCard} ${L.shadow} rounded-xl`,children:[e.jsx(bi,{size:20,className:L.textSecondary}),e.jsx("span",{className:`${L.textPrimary} text-[10px] mt-1`,children:"More"})]})]}),e.jsxs("div",{className:`${L.bgCard} ${L.shadow} rounded-xl p-4 mb-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:`${L.textPrimary} font-semibold`,children:"Open Positions"}),e.jsxs("span",{className:r?"text-accent-green":"text-blue-600",style:{fontSize:"0.875rem"},children:[h.length," active"]})]}),h.length===0?e.jsx("p",{className:`${L.textMuted} text-sm text-center py-4`,children:"No open positions"}):e.jsxs("div",{className:"space-y-2",children:[h.slice(0,3).map(U=>{const Te=pt(U);return e.jsxs("div",{className:`flex items-center justify-between p-3 ${L.bgCardAlt} rounded-lg`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`${L.textPrimary} font-medium`,children:U.symbol}),e.jsxs("p",{className:`text-xs ${U.side==="BUY"?"text-green-500":"text-red-500"}`,children:[U.side,"  ",U.quantity," lots"]})]}),e.jsxs("p",{className:"font-semibold",style:{color:Te>=0?"#3B82F6":"#EF4444"},children:[Te>=0?"+":"","$",Te.toFixed(2)]})]},U._id)}),h.length>3&&e.jsxs("button",{onClick:()=>i("trade"),className:`w-full ${r?"text-accent-green":"text-blue-600"} text-sm py-2`,children:["View all ",h.length," positions "]})]})]}),e.jsxs("div",{className:`${L.bgCard} ${L.shadow} rounded-xl p-4`,children:[e.jsx("h3",{className:`${L.textPrimary} font-semibold mb-3`,children:"Market Watch"}),e.jsx("div",{className:"space-y-2",children:G.filter(U=>U.starred).slice(0,4).map(U=>{var Oe;const Te=He(U.symbol);return e.jsxs("button",{onClick:()=>Ss(U),className:`w-full flex items-center justify-between p-3 ${L.bgCardAlt} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ba,{size:16,className:"text-yellow-500 fill-yellow-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`${L.textPrimary} font-medium`,children:U.symbol}),e.jsx("p",{className:`${L.textMuted} text-xs`,children:U.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:L.textPrimary,children:((Oe=Te.bid)==null?void 0:Oe.toFixed(U.category==="Forex"?5:2))||"-"}),e.jsxs("p",{className:`${L.textMuted} text-xs`,children:["Spread: ",((Te.ask-Te.bid)*(U.category==="Forex"?1e4:1)).toFixed(1)]})]})]},U.symbol)})})]})]}),Ir=()=>e.jsxs("div",{className:`flex flex-col h-full pb-16 ${L.bgMain}`,children:[e.jsxs("div",{className:`p-4 ${L.bgCard} border-b ${L.border}`,children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(_t,{className:`absolute left-3 top-1/2 -translate-y-1/2 ${L.textMuted}`,size:18}),e.jsx("input",{type:"text",placeholder:"Search instruments...",value:W,onChange:U=>D(U.target.value),className:`w-full ${L.bgCardAlt} border ${L.border} rounded-xl pl-10 pr-4 py-3 ${L.textPrimary} placeholder-slate-400`})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:Ke.map(U=>e.jsx("button",{onClick:()=>O(U),className:`px-4 py-1.5 rounded-full text-sm whitespace-nowrap ${re===U?r?"bg-accent-green text-black":"bg-blue-600 text-white":`${L.bgCardAlt} ${L.textSecondary}`}`,children:U},U))})]}),e.jsx("div",{className:`flex-1 overflow-auto ${L.bgMain}`,children:we.map(U=>{var Oe,Qe;const Te=He(U.symbol);return e.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${L.border} ${L.bgCard}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),K(se=>se.map(De=>De.symbol===U.symbol?{...De,starred:!De.starred}:De))},className:"p-1",children:e.jsx(ba,{size:18,className:U.starred?"text-yellow-500 fill-yellow-500":L.textMuted})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`${L.textPrimary} font-medium`,children:U.symbol}),e.jsx("p",{className:`${L.textMuted} text-xs`,children:U.name})]})]}),e.jsxs("button",{onClick:()=>Ss(U),className:`flex items-center gap-3 active:${L.bgHover} rounded-lg p-2`,children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-red-500 text-sm",children:((Oe=Te.bid)==null?void 0:Oe.toFixed(U.category==="Forex"?5:2))||"-"}),e.jsx("p",{className:`${L.textMuted} text-xs`,children:"Bid"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-green-500 text-sm",children:((Qe=Te.ask)==null?void 0:Qe.toFixed(U.category==="Forex"?5:2))||"-"}),e.jsx("p",{className:`${L.textMuted} text-xs`,children:"Ask"})]})]}),e.jsx("button",{onClick:()=>{j.find(se=>se.symbol===U.symbol)||Z(se=>[...se,{symbol:U.symbol,name:U.name}]),ce(U.symbol),i("chart")},className:`p-2 ${L.bgCardAlt} rounded-lg`,children:e.jsx(Co,{size:18,className:r?"text-accent-green":"text-blue-600"})})]},U.symbol)})})]}),cs=()=>e.jsxs("div",{className:`flex flex-col h-full pb-16 ${L.bgMain}`,children:[e.jsx("div",{className:`${L.bgCard} border-b ${L.border}`,children:e.jsxs("div",{className:`${L.divide}`,children:[e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Balance"}),e.jsx("span",{className:`${L.textPrimary} text-sm`,children:(me.balance||0).toFixed(2)})]}),e.jsxs("div",{className:`flex justify-between px-4 py-2.5 border-t ${L.border}`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Equity"}),e.jsx("span",{className:"text-sm",style:{color:Dt>=0?"#3B82F6":"#EF4444"},children:Qt.toFixed(2)})]}),e.jsxs("div",{className:`flex justify-between px-4 py-2.5 border-t ${L.border}`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Credit"}),e.jsx("span",{className:`${L.textPrimary} text-sm`,children:(me.credit||0).toFixed(2)})]}),e.jsxs("div",{className:`flex justify-between px-4 py-2.5 border-t ${L.border}`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Used Margin"}),e.jsx("span",{className:`${L.textPrimary} text-sm`,children:Kt.toFixed(2)})]}),e.jsxs("div",{className:`flex justify-between px-4 py-2.5 border-t ${L.border}`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Free Margin"}),e.jsx("span",{className:`text-sm ${Rt>=0?"text-blue-500":"text-red-500"}`,children:Rt.toFixed(2)})]}),e.jsxs("div",{className:`flex justify-between px-4 py-2.5 border-t ${L.border}`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Floating PL"}),e.jsx("span",{className:"text-sm",style:{color:Dt>=0?"#3B82F6":"#EF4444"},children:Dt.toFixed(2)})]})]})}),e.jsx("div",{className:`flex ${L.bgCard} border-b ${L.border}`,children:["positions","pending","history"].map(U=>e.jsx("button",{onClick:()=>T(U),className:`flex-1 py-3 text-sm font-medium ${q===U?r?"text-accent-green border-b-2 border-accent-green":"text-blue-600 border-b-2 border-blue-600":L.textMuted}`,children:U==="positions"?`Positions (${h.length})`:U==="pending"?`Pending (${w.length})`:"History"},U))}),e.jsxs("div",{className:`flex-1 overflow-auto ${L.bgMain}`,children:[q==="positions"&&(h.length===0?e.jsxs("div",{className:`flex flex-col items-center justify-center h-full ${L.textMuted}`,children:[e.jsx(xt,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No open positions"})]}):e.jsx("div",{className:`${L.divide}`,children:h.map(U=>{var se,De,ct,rt;const Te=pt(U),Oe=He(U.symbol),Qe=ve===U._id,_=U.side==="BUY"?Oe.bid:Oe.ask;return e.jsxs("div",{className:`${L.bgCard} border-b ${L.border}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer",onClick:()=>Ve(Qe?null:U._id),children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${L.textPrimary} font-medium text-sm`,children:U.symbol}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${U.side==="BUY"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"}`,children:U.side})]}),e.jsxs("p",{className:`${L.textMuted} text-xs`,children:[U.quantity," lots @ ",(se=U.openPrice)==null?void 0:se.toFixed(5)]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),Pt(U)},className:"p-2 bg-blue-500/20 rounded-lg active:bg-blue-500/30",children:e.jsx(Lc,{size:14,className:"text-blue-400"})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-sm",style:{color:Te>=0?"#3B82F6":"#EF4444"},children:[Te>=0?"+":"","$",Te.toFixed(2)]}),e.jsx("p",{className:`${L.textMuted} text-xs`,children:(_==null?void 0:_.toFixed(5))||"-"})]})]})]}),Qe&&e.jsxs("div",{className:`px-4 pb-3 border-t ${L.border} ${L.bgCardAlt}`,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Open Price"}),e.jsx("p",{className:L.textPrimary,children:(De=U.openPrice)==null?void 0:De.toFixed(5)})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Current Price"}),e.jsx("p",{className:L.textPrimary,children:(_==null?void 0:_.toFixed(5))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Volume"}),e.jsxs("p",{className:L.textPrimary,children:[U.quantity," lots"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Margin Used"}),e.jsxs("p",{className:L.textPrimary,children:["$",(U.marginUsed||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Swap"}),e.jsxs("p",{className:L.textPrimary,children:["$",(U.swap||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Commission"}),e.jsxs("p",{className:L.textPrimary,children:["$",(U.commission||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Stop Loss"}),e.jsx("p",{className:U.sl||U.stopLoss?"text-red-500":L.textMuted,children:((ct=U.sl||U.stopLoss)==null?void 0:ct.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Take Profit"}),e.jsx("p",{className:U.tp||U.takeProfit?"text-green-500":L.textMuted,children:((rt=U.tp||U.takeProfit)==null?void 0:rt.toFixed(5))||"Not set"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Ze=>{Ze.stopPropagation(),Pt(U)},className:"flex-1 py-2.5 bg-blue-500 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Lc,{size:14}),"Modify SL/TP"]}),e.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),Ms(U._id)},className:"flex-1 py-2.5 bg-red-500 text-white rounded-lg text-sm font-medium",children:"Close Trade"})]})]})]},U._id)})})),q==="pending"&&(w.length===0?e.jsxs("div",{className:`flex flex-col items-center justify-center h-full ${L.textMuted}`,children:[e.jsx(Wt,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No pending orders"})]}):e.jsx("div",{className:L.divide,children:w.map(U=>{var Qe,_,se;const Te=He(U.symbol),Oe=U.side==="BUY"?Te.ask:Te.bid;return e.jsxs("div",{className:`p-4 ${L.bgCard} border-b ${L.border}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${L.textPrimary} font-medium`,children:U.symbol}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${U.side==="BUY"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"}`,children:U.orderType})]}),e.jsx("span",{className:"text-amber-500 text-xs font-medium",children:"PENDING"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Entry Price"}),e.jsx("p",{className:L.textPrimary,children:(Qe=U.pendingPrice)==null?void 0:Qe.toFixed(5)})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Current"}),e.jsx("p",{className:L.textPrimary,children:(Oe==null?void 0:Oe.toFixed(5))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Volume"}),e.jsxs("p",{className:L.textPrimary,children:[U.quantity," lots"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Stop Loss"}),e.jsx("p",{className:U.sl||U.stopLoss?"text-red-500":L.textMuted,children:((_=U.sl||U.stopLoss)==null?void 0:_.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Take Profit"}),e.jsx("p",{className:U.tp||U.takeProfit?"text-green-500":L.textMuted,children:((se=U.tp||U.takeProfit)==null?void 0:se.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:L.textMuted,children:"Created"}),e.jsx("p",{className:L.textPrimary,children:new Date(U.createdAt).toLocaleDateString()})]})]}),e.jsxs("button",{onClick:()=>Y(U._id),className:"w-full py-2 bg-red-500/20 text-red-500 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Vt,{size:14}),"Cancel Order"]})]},U._id)})})),q==="history"&&(C.length===0?e.jsxs("div",{className:`flex flex-col items-center justify-center h-full ${L.textMuted}`,children:[e.jsx(Ut,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No trade history"})]}):e.jsx("div",{className:L.divide,children:C.map(U=>{var Te;return e.jsxs("div",{className:`p-4 ${L.bgCard} border-b ${L.border}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${L.textPrimary} font-medium`,children:U.symbol}),e.jsx("span",{className:`text-xs ${U.side==="BUY"?"text-green-500":"text-red-500"}`,children:U.side}),U.closedBy==="ADMIN"&&e.jsx("span",{className:"text-xs bg-amber-500/20 text-amber-600 px-1.5 py-0.5 rounded",children:"Admin Close"})]}),e.jsxs("span",{className:"font-semibold",style:{color:U.realizedPnl>=0?"#3B82F6":"#EF4444"},children:[U.realizedPnl>=0?"+":"","$",(Te=U.realizedPnl)==null?void 0:Te.toFixed(2)]})]}),e.jsxs("div",{className:`flex items-center justify-between text-xs ${L.textMuted}`,children:[e.jsxs("span",{children:[U.quantity," lots"]}),e.jsx("span",{children:new Date(U.closedAt).toLocaleDateString()})]})]},U._id)})}))]})]}),nr=U=>({EURUSD:"OANDA:EURUSD",GBPUSD:"OANDA:GBPUSD",USDJPY:"OANDA:USDJPY",USDCHF:"OANDA:USDCHF",AUDUSD:"OANDA:AUDUSD",NZDUSD:"OANDA:NZDUSD",USDCAD:"OANDA:USDCAD",EURGBP:"OANDA:EURGBP",EURJPY:"OANDA:EURJPY",GBPJPY:"OANDA:GBPJPY",XAUUSD:"OANDA:XAUUSD",XAGUSD:"OANDA:XAGUSD",BTCUSD:"COINBASE:BTCUSD",ETHUSD:"COINBASE:ETHUSD",LTCUSD:"COINBASE:LTCUSD",XRPUSD:"BITSTAMP:XRPUSD",BNBUSD:"BINANCE:BNBUSDT",SOLUSD:"COINBASE:SOLUSD",ADAUSD:"COINBASE:ADAUSD",DOGEUSD:"BINANCE:DOGEUSDT",DOTUSD:"COINBASE:DOTUSD",MATICUSD:"COINBASE:MATICUSD",AVAXUSD:"COINBASE:AVAXUSD",LINKUSD:"COINBASE:LINKUSD"})[U]||`OANDA:${U}`,Mr=()=>{var De,ct;const U=G.find(rt=>rt.symbol===I),Te=(U==null?void 0:U.category)==="Forex",Oe=Te?5:2,Qe=Te?1e4:1,_=r?"dark":"light",se=r?"0d0d0d":"ffffff";return e.jsxs("div",{className:`flex flex-col h-screen ${L.bgMain}`,children:[e.jsxs("div",{className:`flex items-center ${L.bgCard} border-b ${L.border} overflow-x-auto shrink-0`,style:{height:"40px"},children:[j.map(rt=>e.jsxs("button",{onClick:()=>ce(rt.symbol),className:`flex items-center gap-2 px-3 py-2 text-xs whitespace-nowrap border-r ${L.border} ${I===rt.symbol?`${L.bgCardAlt} ${L.textPrimary}`:L.textMuted}`,children:[rt.symbol,j.length>1&&e.jsx(Se,{size:12,onClick:Ze=>{Ze.stopPropagation(),Z(Cs=>Cs.filter(dl=>dl.symbol!==rt.symbol)),I===rt.symbol&&j.length>1&&ce(j[0].symbol)},className:"hover:text-red-500"})]},rt.symbol)),e.jsx("button",{onClick:()=>i("market"),className:`px-3 py-2 ${L.textMuted} hover:${L.textPrimary}`,children:e.jsx(ut,{size:16})})]}),e.jsx("div",{className:`flex-1 ${r?"bg-[#0d0d0d]":"bg-white"} relative min-h-0`,ref:Le,children:e.jsx("iframe",{src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_mobile&symbol=${nr(I)}&interval=5&hidesidetoolbar=1&hidetoptoolbar=0&symboledit=1&saveimage=0&toolbarbg=${se}&studies=[]&theme=${_}&style=1&timezone=Etc%2FUTC&withdateranges=0&showpopupbutton=0&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=["left_toolbar","header_fullscreen_button"]&locale=en&utm_source=localhost&utm_medium=widget_new&utm_campaign=chart`,style:{width:"100%",height:"100%",border:"none"},allowFullScreen:!0,title:"TradingView Chart"},`${I}-${r}`)}),e.jsxs("div",{className:`${L.bgCard} border-t ${L.border} shrink-0`,style:{paddingBottom:"64px"},children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`${L.textMuted} text-[10px]`,children:"Bid"}),e.jsx("p",{className:"text-red-500 font-semibold text-sm",children:((De=He(I).bid)==null?void 0:De.toFixed(Oe))||"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`${L.textMuted} text-[10px]`,children:"Spread"}),e.jsx("p",{className:`${L.textPrimary} text-xs`,children:((He(I).ask-He(I).bid)*Qe).toFixed(1)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`${L.textMuted} text-[10px]`,children:"Ask"}),e.jsx("p",{className:"text-green-500 font-semibold text-sm",children:((ct=He(I).ask)==null?void 0:ct.toFixed(Oe))||"-"})]})]}),e.jsxs("div",{className:"flex gap-2 px-3 pb-2",children:[e.jsx("button",{onClick:()=>{const rt=G.find(Ze=>Ze.symbol===I)||{symbol:I,category:"Forex"};u(rt),ze("SELL"),b(!0)},className:"flex-1 py-3 bg-red-500 text-white font-semibold rounded-xl",children:"SELL"}),e.jsx("button",{onClick:()=>{const rt=G.find(Ze=>Ze.symbol===I)||{symbol:I,category:"Forex"};u(rt),ze("BUY"),b(!0)},className:"flex-1 py-3 bg-blue-500 text-white font-semibold rounded-xl",children:"BUY"})]})]})]})};return F?e.jsx("div",{className:`min-h-screen ${L.bgMain} flex items-center justify-center`,children:e.jsx(Je,{size:32,className:r?"text-accent-green":"text-blue-600"})}):e.jsxs("div",{className:`min-h-screen ${L.bgMain} flex flex-col`,children:[e.jsxs("main",{className:"flex-1 overflow-hidden",children:[l==="home"&&Us(),l==="market"&&Ir(),l==="trade"&&cs(),l==="chart"&&Mr()]}),e.jsx("nav",{className:`fixed bottom-0 left-0 right-0 ${L.bgCard} border-t ${L.border} z-40 safe-area-pb ${L.shadow}`,children:e.jsx("div",{className:"flex items-center justify-around h-14",children:[{id:"home",icon:sr,label:"Home"},{id:"market",icon:Xu,label:"Market"},{id:"trade",icon:xt,label:"Trade"},{id:"chart",icon:Co,label:"Chart"},{id:"more",icon:bi,label:"More"}].map(U=>e.jsxs("button",{onClick:()=>{U.id==="more"?c(!0):i(U.id)},className:`flex flex-col items-center justify-center flex-1 h-full ${l===U.id?r?"text-accent-green":"text-blue-600":L.textMuted}`,children:[e.jsx(U.icon,{size:20}),e.jsx("span",{className:"text-[10px] mt-0.5",children:U.label})]},U.id))})}),m&&f&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>b(!1)}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 ${L.bgCard} rounded-t-3xl animate-slide-up max-h-[80vh] overflow-auto ${L.shadowMd}`,children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:`w-10 h-1 ${r?"bg-gray-600":"bg-slate-300"} rounded-full`})}),e.jsxs("div",{className:"px-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`${L.textPrimary} font-semibold text-lg`,children:f.symbol}),e.jsx("p",{className:`${L.textMuted} text-sm`,children:f.name})]}),e.jsx("button",{onClick:()=>b(!1),className:"p-2",children:e.jsx(Se,{size:20,className:L.textSecondary})})]}),e.jsxs("div",{className:`flex items-center justify-between ${L.bgCardAlt} rounded-lg px-4 py-2 mb-4`,children:[e.jsx("span",{className:`${L.textSecondary} text-sm`,children:"Leverage"}),e.jsx("span",{className:"text-amber-500 font-bold",children:(p==null?void 0:p.leverage)||"1:100"})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("button",{onClick:()=>{ze("SELL"),Mt()},disabled:de,className:"flex-1 py-3 bg-red-600 rounded-xl disabled:opacity-50",children:[e.jsx("p",{className:"text-white text-xs",children:"SELL"}),e.jsx("p",{className:"text-white text-lg font-bold",children:((jr=He(f.symbol).bid)==null?void 0:jr.toFixed(f.category==="Forex"?5:2))||"-"})]}),e.jsxs("button",{onClick:()=>{ze("BUY"),Mt()},disabled:de,className:"flex-1 py-3 bg-blue-600 rounded-xl disabled:opacity-50",children:[e.jsx("p",{className:"text-white text-xs",children:"BUY"}),e.jsx("p",{className:"text-white text-lg font-bold",children:((lr=He(f.symbol).ask)==null?void 0:lr.toFixed(f.category==="Forex"?5:2))||"-"})]})]}),e.jsxs("div",{className:"flex items-center justify-center mb-4 text-xs",children:[e.jsx("span",{className:L.textMuted,children:"Spread: "}),e.jsxs("span",{className:`${L.textPrimary} ml-1`,children:[((He(f.symbol).ask-He(f.symbol).bid)*(f.category==="Forex"?1e4:1)).toFixed(1)," pips"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>le("market"),className:`flex-1 py-2 rounded-lg text-sm font-medium ${J==="market"?r?"bg-accent-green text-black":"bg-blue-600 text-white":`${L.bgCardAlt} ${L.textSecondary}`}`,children:"Market"}),e.jsx("button",{onClick:()=>le("pending"),className:`flex-1 py-2 rounded-lg text-sm font-medium ${J==="pending"?r?"bg-accent-green text-black":"bg-blue-600 text-white":`${L.bgCardAlt} ${L.textSecondary}`}`,children:"Pending"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`${L.textSecondary} text-sm mb-2 block`,children:"Volume (Lots)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(U=>Math.max(.01,parseFloat(U)-.01).toFixed(2)),className:`p-3 ${L.bgCardAlt} rounded-lg`,children:e.jsx(ur,{size:18,className:L.textPrimary})}),e.jsx("input",{type:"text",value:je,onChange:U=>H(U.target.value),className:`flex-1 ${L.bgCardAlt} border ${L.border} rounded-lg px-4 py-3 ${L.textPrimary} text-center`}),e.jsx("button",{onClick:()=>H(U=>(parseFloat(U)+.01).toFixed(2)),className:`p-3 ${L.bgCardAlt} rounded-lg`,children:e.jsx(ut,{size:18,className:L.textPrimary})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`${L.textSecondary} text-sm mb-2 block`,children:"Stop Loss"}),e.jsx("input",{type:"text",value:be,onChange:U=>ue(U.target.value),placeholder:"Optional",className:`w-full ${L.bgCardAlt} border ${L.border} rounded-lg px-4 py-3 ${L.textPrimary}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`${L.textSecondary} text-sm mb-2 block`,children:"Take Profit"}),e.jsx("input",{type:"text",value:$,onChange:U=>V(U.target.value),placeholder:"Optional",className:`w-full ${L.bgCardAlt} border ${L.border} rounded-lg px-4 py-3 ${L.textPrimary}`})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{ze("SELL"),Mt()},disabled:de,className:"flex-1 py-4 bg-red-500 text-white font-semibold rounded-xl disabled:opacity-50",children:de?"Executing...":"SELL"}),e.jsx("button",{onClick:()=>{ze("BUY"),Mt()},disabled:de,className:"flex-1 py-4 bg-blue-500 text-white font-semibold rounded-xl disabled:opacity-50",children:de?"Executing...":"BUY"})]})]})]})]}),d&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>c(!1)}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 ${L.bgCard} rounded-t-3xl animate-slide-up ${L.shadowMd}`,children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:`w-10 h-1 ${r?"bg-gray-600":"bg-slate-300"} rounded-full`})}),e.jsxs("div",{className:"px-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`${L.textPrimary} font-semibold text-lg`,children:"More"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2",children:e.jsx(Se,{size:20,className:L.textSecondary})})]}),e.jsxs("div",{className:"space-y-1",children:[Be.map(U=>e.jsxs("button",{onClick:()=>{U.action?U.action():t(U.path),c(!1)},className:`w-full flex items-center justify-between p-4 rounded-xl hover:${L.bgHover}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 ${L.bgCardAlt} rounded-full flex items-center justify-center`,children:e.jsx(U.icon,{size:20,className:r?"text-accent-green":"text-blue-600"})}),e.jsx("span",{className:`${L.textPrimary} font-medium`,children:U.name})]}),e.jsx(Xs,{size:20,className:L.textMuted})]},U.name)),e.jsx("button",{onClick:at,className:"w-full flex items-center justify-between p-4 rounded-xl hover:bg-red-500/10 mt-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(ws,{size:20,className:"text-red-500"})}),e.jsx("span",{className:"text-red-500 font-medium",children:"Log Out"})]})})]})]})]})]}),S&&ge&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end justify-center",onClick:()=>ie(!1),children:e.jsxs("div",{className:"w-full bg-[#1c1c1e] rounded-t-3xl overflow-hidden animate-slide-up",onClick:U=>U.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),e.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Modify Trade"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[ge.symbol,"  ",ge.side,"  ",ge.quantity," lots"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Stop Loss"}),e.jsx("input",{type:"number",value:M,onChange:U=>Q(U.target.value),placeholder:"Enter stop loss price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-red-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Take Profit"}),e.jsx("input",{type:"number",value:Ae,onChange:U=>te(U.target.value),placeholder:"Enter take profit price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-green-500 transition-colors"})]})]}),e.jsxs("div",{className:"border-t border-gray-700/50",children:[e.jsx("button",{onClick:Pe,disabled:Ce,className:"w-full py-4 text-blue-500 font-semibold text-lg border-b border-gray-700/50 disabled:opacity-50",children:Ce?"Saving...":"Save Changes"}),e.jsx("button",{onClick:()=>ie(!1),className:"w-full py-4 text-gray-400 font-medium text-lg",children:"Cancel"})]})]})}),e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] pointer-events-none",children:et.map((U,Te)=>e.jsx("div",{className:"pointer-events-auto mx-4 mt-4 animate-slide-down",style:{marginTop:`${Te*60+16}px`},children:e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl backdrop-blur-xl shadow-lg ${U.type==="success"?"bg-green-500/90":U.type==="error"?"bg-red-500/90":"bg-gray-800/90"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${U.type==="success","bg-white/20"}`,children:U.type==="success"?e.jsx(nt,{size:18,className:"text-white"}):e.jsx(Se,{size:18,className:"text-white"})}),e.jsx("p",{className:"text-white font-medium text-sm flex-1",children:U.message})]})},U.id))})]})},vj=()=>{var Kt,Qt,Rt,L,Zt,Ls,Us,Ir,cs,nr,Mr,jr,lr,U,Te,Oe,Qe;const t=Nt(),[s]=Bi(),{isDarkMode:r,toggleDarkMode:a}=ks(),[n,l]=o.useState(!1),[i,d]=o.useState(""),[c,m]=o.useState("Account"),[b,f]=o.useState(!1),[u,v]=o.useState("Real"),[k,N]=o.useState([]),[y,p]=o.useState([]),[g,h]=o.useState([]),[x,w]=o.useState(!1),[z,C]=o.useState(0),[B,G]=o.useState(!0),[K,ee]=o.useState(!1),[X,F]=o.useState(!1),[R,W]=o.useState(!1),[D,re]=o.useState(!1),[O,q]=o.useState(!1),[T,j]=o.useState(null),[Z,I]=o.useState(!1),[ce,J]=o.useState(!1),[le,xe]=o.useState(null),[ze,je]=o.useState(null),[H,be]=o.useState(null),[ue,$]=o.useState(null),[V,de]=o.useState(()=>{const _=localStorage.getItem("pinSecurityEnabled");return _!==null?JSON.parse(_):!0}),[fe,me]=o.useState(null),[ae,ve]=o.useState(null),[Ve,Le]=o.useState(["","","",""]),[S,ie]=o.useState(["","","",""]),[ge,Ee]=o.useState(["","","",""]),[M,Q]=o.useState(""),[Ae,te]=o.useState(["","","",""]),[Ce,$e]=o.useState(""),[et,qe]=o.useState(""),[Re,Ke]=o.useState(window.innerWidth<768),[gt,ne]=o.useState("live");o.useEffect(()=>{const _=()=>Ke(window.innerWidth<768);return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const Fe=x?["Real","Demo","Challenge","Archived"]:["Real","Demo","Archived"],st=JSON.parse(localStorage.getItem("user")||"{}"),P=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}];o.useEffect(()=>{const _=s.get("failed"),se=s.get("reason");_==="true"&&se&&(d(decodeURIComponent(se)),l(!0),v("Challenge"),t("/account",{replace:!0})),Et(),oe(),st._id?(at(),Ye(),Me()):G(!1)},[st._id]);const oe=async()=>{try{const se=await(await fetch(`${A}/prop/status`)).json();se.success&&w(se.enabled)}catch(_){console.error("Error fetching challenge status:",_)}},Me=async()=>{try{const se=await(await fetch(`${A}/prop/my-accounts/${st._id}`)).json();se.success&&h(se.accounts||[])}catch(_){console.error("Error fetching challenge accounts:",_)}},Ye=async()=>{var _;try{const De=await(await fetch(`${A}/wallet/${st._id}`)).json();C(((_=De.wallet)==null?void 0:_.balance)||0)}catch(se){console.error("Error fetching wallet:",se)}},Et=async()=>{try{const se=await(await fetch(`${A}/account-types`)).json();N(se.accountTypes||[])}catch(_){console.error("Error fetching account types:",_)}},at=async()=>{G(!0);try{const se=await(await fetch(`${A}/trading-accounts/user/${st._id}`)).json();p(se.accounts||[])}catch(_){console.error("Error fetching accounts:",_)}G(!1)},Ss=(_,se,De,ct,rt="pin")=>{if(se.length>1&&(se=se.slice(-1)),se&&!/^\d$/.test(se))return;const Ze=[...De];if(Ze[_]=se,ct(Ze),se&&_<3){const Cs=document.getElementById(`${rt}-${_+1}`);Cs&&(Cs.focus(),Cs.select())}},Mt=(_,se,De,ct,rt="pin")=>{if(_.key==="Backspace"){if(!De[se]&&se>0){const Ze=document.getElementById(`${rt}-${se-1}`);if(Ze){const Cs=[...De];Cs[se-1]="",ct(Cs),Ze.focus()}}}else if(_.key==="ArrowLeft"&&se>0){const Ze=document.getElementById(`${rt}-${se-1}`);Ze&&Ze.focus()}else if(_.key==="ArrowRight"&&se<3){const Ze=document.getElementById(`${rt}-${se+1}`);Ze&&Ze.focus()}else _.key==="Enter"&&De.every(Cs=>Cs!=="")&&(K?dt():R?He():D?pt():X&&Pt())},Ms=_=>{_.target.select()},dt=async()=>{if(!fe){$e("Please select an account type");return}if(!st._id){$e("Please login to create an account");return}try{const _=await fetch(`${A}/trading-accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:st._id,accountTypeId:fe._id,pin:"0000"})}),se=await _.json();_.ok?(qe("Account created successfully!"),ee(!1),Le(["","","",""]),me(null),at(),setTimeout(()=>qe(""),3e3)):$e(se.message||"Failed to create account")}catch(_){console.error("Account creation error:",_),$e("Error creating account. Please try again.")}},Pt=async()=>{const _=ge.join(""),se=S.join("");if(_.length!==4||se.length!==4){$e("Please enter valid 4-digit PINs");return}try{const De=await fetch(`${A}/trading-accounts/${ae._id}/change-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPin:_,newPin:se})}),ct=await De.json();De.ok?(qe("PIN changed successfully!"),F(!1),Ee(["","","",""]),ie(["","","",""]),ve(null),setTimeout(()=>qe(""),3e3)):$e(ct.message)}catch{$e("Error changing PIN")}},Pe=async _=>{try{const De=await(await fetch(`${A}/trading-accounts/${_}/archive`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();De.success?(qe("Account archived successfully!"),be(null),at(),setTimeout(()=>qe(""),3e3)):$e(De.message||"Failed to archive account")}catch(se){console.error("Archive error:",se),$e("Error archiving account")}},Y=async _=>{try{const De=await(await fetch(`${A}/trading-accounts/${_}/unarchive`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();De.success?(qe("Account restored successfully!"),at(),setTimeout(()=>qe(""),3e3)):$e(De.message||"Failed to restore account")}catch(se){console.error("Unarchive error:",se),$e("Error restoring account")}},we=async _=>{try{const De=await(await fetch(`${A}/trading-accounts/${_}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();De.success?(qe("Account deleted permanently!"),$(null),at(),setTimeout(()=>qe(""),3e3)):$e(De.message||"Failed to delete account")}catch(se){console.error("Delete error:",se),$e("Error deleting account")}},Be=async _=>{if(confirm("Are you sure you want to reset this demo account? All open trades will be closed and balance will be reset."))try{const De=await(await fetch(`${A}/trading-accounts/${_}/reset-demo`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();De.success?(qe(De.message||"Demo account reset successfully!"),at(),setTimeout(()=>qe(""),3e3)):$e(De.message||"Failed to reset demo account")}catch(se){console.error("Demo reset error:",se),$e("Error resetting demo account")}},He=async()=>{if(!M||parseFloat(M)<=0){$e("Please enter a valid amount");return}if(parseFloat(M)>z){$e("Insufficient wallet balance");return}try{const _=await fetch(`${A}/trading-accounts/${ae._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:st._id,amount:parseFloat(M),direction:"deposit",skipPinVerification:!0})}),se=await _.json();_.ok?(qe("Funds transferred successfully!"),W(!1),Q(""),te(["","","",""]),ve(null),at(),Ye(),setTimeout(()=>qe(""),3e3)):$e(se.message||"Transfer failed")}catch(_){console.error("Transfer error:",_),$e("Error transferring funds")}},pt=async()=>{if(!M||parseFloat(M)<=0){$e("Please enter a valid amount");return}if(parseFloat(M)>ae.balance){$e("Insufficient account balance");return}try{const _=await fetch(`${A}/trading-accounts/${ae._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:st._id,amount:parseFloat(M),direction:"withdraw",skipPinVerification:!0})}),se=await _.json();_.ok?(qe("Funds withdrawn to main wallet!"),re(!1),Q(""),te(["","","",""]),ve(null),at(),Ye(),setTimeout(()=>qe(""),3e3)):$e(se.message||"Withdrawal failed")}catch(_){console.error("Withdraw error:",_),$e("Error withdrawing funds")}},gs=async()=>{if(!M||parseFloat(M)<=0){$e("Please enter a valid amount");return}if(!T){$e("Please select a target account");return}if(parseFloat(M)>ae.balance){$e("Insufficient account balance");return}try{const _=await fetch(`${A}/trading-accounts/account-transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:st._id,fromAccountId:ae._id,toAccountId:T._id,amount:parseFloat(M),skipPinVerification:!0})}),se=await _.json();_.ok?(qe(`$${M} transferred from ${ae.accountId} to ${T.accountId}!`),q(!1),Q(""),te(["","","",""]),ve(null),j(null),at(),setTimeout(()=>qe(""),3e3)):$e(se.message||"Transfer failed")}catch(_){console.error("Account transfer error:",_),$e("Error transferring funds")}},Dt=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:`h-screen flex flex-col md:flex-row transition-colors duration-300 ${r?"bg-dark-900":"bg-gray-100"}`,children:[Re&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${r?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${r?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:r?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${r?"text-white":"text-gray-900"}`,children:"Account"}),e.jsx("button",{onClick:a,className:`p-2 rounded-lg ${r?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:r?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${r?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!Re&&e.jsxs("aside",{className:`${b?"w-48":"w-16"} ${r?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col h-screen sticky top-0 transition-all duration-300 ease-in-out`,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center shrink-0",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2 overflow-y-auto",children:P.map(_=>e.jsxs("button",{onClick:()=>t(_.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${c===_.name?"bg-accent-green text-black":r?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:b?"":_.name,children:[e.jsx(_.icon,{size:18,className:"flex-shrink-0"}),b&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:_.name})]},_.name))}),e.jsxs("div",{className:`p-2 border-t shrink-0 ${r?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:a,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${r?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,title:b?"":r?"Light Mode":"Dark Mode",children:[r?e.jsx(At,{size:18,className:"flex-shrink-0"}):e.jsx(Ct,{size:18,className:"flex-shrink-0"}),b&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:r?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:Dt,className:`w-full flex items-center gap-3 px-3 py-2.5 transition-colors rounded-lg ${r?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,title:b?"":"Log Out",children:[e.jsx(ws,{size:18,className:"flex-shrink-0"}),b&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})]})]}),e.jsx("main",{className:`flex-1 overflow-y-auto ${Re?"pt-14":""}`,children:e.jsxs("div",{className:`${Re?"p-4":"p-6"}`,children:[et&&e.jsxs("div",{className:`mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2 ${Re?"text-sm":""}`,children:[e.jsx(nt,{size:18})," ",et]}),Ce&&e.jsx("div",{className:`mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500 ${Re?"text-sm":""}`,children:Ce}),e.jsxs("div",{className:`flex ${Re?"flex-col gap-3":"items-center justify-between"} mb-4`,children:[!Re&&e.jsx("h1",{className:`text-2xl font-semibold ${r?"text-white":"text-gray-900"}`,children:"My Accounts"}),e.jsxs("div",{className:`flex items-center ${Re?"justify-between":"gap-3"}`,children:[e.jsx("button",{onClick:at,className:`p-2 rounded-lg transition-colors ${r?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Je,{size:18,className:`text-gray-400 ${B?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>{Et(),ee(!0)},className:`flex items-center gap-2 bg-accent-green text-black font-medium ${Re?"px-3 py-2 text-sm":"px-4 py-2.5"} rounded-lg hover:bg-accent-green/90 transition-colors`,children:[e.jsx(ut,{size:Re?16:18})," ",Re?"New Account":"Open Account"]})]})]}),e.jsx("div",{className:`flex items-center ${Re?"gap-1 overflow-x-auto pb-2":"gap-1"} mb-4`,children:Fe.map(_=>e.jsx("button",{onClick:()=>v(_),className:`${Re?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2 text-sm"} rounded-lg font-medium transition-colors ${u===_?r?"bg-dark-700 text-white border border-gray-600":"bg-white text-gray-900 border border-gray-300 shadow-sm":r?"text-gray-400 hover:text-white hover:bg-dark-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:_},_))}),B?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):u==="Challenge"?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-yellow-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Ht,{size:28,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Prop Trading Challenge"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Get funded up to $200,000. Keep up to 80% of profits."})]})]}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"flex items-center gap-2 bg-yellow-500 text-black font-bold px-6 py-3 rounded-xl hover:bg-yellow-400 transition-colors",children:[e.jsx(Ht,{size:18})," Buy Challenge"]})]})}),g.length===0?e.jsxs("div",{className:`border border-dashed border-gray-700 rounded-xl ${Re?"p-8":"p-16"} text-center`,children:[e.jsx("div",{className:`${Re?"w-12 h-12":"w-14 h-14"} bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Ht,{size:Re?20:24,className:"text-gray-500"})}),e.jsx("h3",{className:`text-white font-medium ${Re?"text-base":"text-lg"} mb-2`,children:"No challenge accounts yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Buy a challenge to start your prop trading journey"}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"inline-flex items-center gap-2 text-yellow-500 hover:text-yellow-400 font-medium transition-colors text-sm",children:["Buy your first challenge ",e.jsx(Sa,{size:16})]})]}):e.jsx("div",{className:`grid ${Re?"grid-cols-1 gap-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"}`,children:g.map(_=>{var se;return e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${_.status==="FUNDED"?"bg-purple-500/20":_.status==="PASSED"?"bg-green-500/20":_.status==="FAILED"?"bg-red-500/20":"bg-yellow-500/20"}`,children:e.jsx(Ht,{size:20,className:_.status==="FUNDED"?"text-purple-500":_.status==="PASSED"?"text-green-500":_.status==="FAILED"?"text-red-500":"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:_.accountId}),e.jsxs("p",{className:"text-gray-500 text-xs uppercase",children:[((se=_.challengeId)==null?void 0:se.name)||"Challenge","  Phase ",_.currentPhase,"/",_.totalPhases]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_.status==="FUNDED"?"bg-purple-500/20 text-purple-500":_.status==="PASSED"?"bg-green-500/20 text-green-500":_.status==="FAILED"?"bg-red-500/20 text-red-500":_.status==="EXPIRED"?"bg-orange-500/20 text-orange-500":"bg-blue-500/20 text-blue-500"}`,children:_.status})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(_.currentBalance||0).toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Balance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Profit"}),e.jsxs("p",{className:`font-medium ${_.currentProfitPercent>=0?"text-green-500":"text-red-500"}`,children:[_.currentProfitPercent>=0?"+":"",(_.currentProfitPercent||0).toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Daily DD"}),e.jsxs("p",{className:"text-red-500 font-medium",children:[(_.currentDailyDrawdownPercent||0).toFixed(2),"%"]})]})]})]}),e.jsx("div",{className:"flex border-t border-gray-800",children:_.status==="ACTIVE"||_.status==="FUNDED"?e.jsxs("button",{onClick:()=>{xe(_),J(!0)},className:"flex-1 flex items-center justify-center gap-2 py-3 bg-yellow-500 text-black font-medium hover:bg-yellow-400 transition-colors",children:[e.jsx(Sa,{size:16})," Start Trading"]}):e.jsx("div",{className:"flex-1 flex items-center justify-center gap-2 py-3 text-gray-500 bg-dark-700",children:_.status==="PASSED"?"Awaiting Funded Account":_.status})})]},_._id)})})]}):y.length===0?e.jsxs("div",{className:"border border-dashed border-gray-700 rounded-xl p-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(xt,{size:24,className:"text-gray-500"})}),e.jsxs("h3",{className:"text-white font-medium text-lg mb-2",children:["No ",u.toLowerCase()," accounts yet"]}),e.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:["Open your first ",u.toLowerCase()," trading account to start trading"]}),e.jsxs("button",{onClick:()=>{Et(),ee(!0)},className:"inline-flex items-center gap-2 text-accent-green hover:text-accent-green/80 font-medium transition-colors",children:["Open your first ",u.toLowerCase()," account ",e.jsx(Sa,{size:18})]})]}):e.jsx("div",{className:`grid ${Re?"grid-cols-1 gap-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"}`,children:y.filter(_=>{var se,De;return u==="Real"?!((se=_.accountTypeId)!=null&&se.isDemo)&&!_.isDemo&&_.status==="Active":u==="Demo"?(((De=_.accountTypeId)==null?void 0:De.isDemo)||_.isDemo)&&_.status==="Active":u==="Archived"?_.status==="Archived"||_.status!=="Active":!0}).map(_=>{var se,De,ct,rt;return e.jsxs("div",{className:`${r?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:[e.jsxs("div",{className:`${Re?"p-3":"p-4"} border-b ${r?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${Re?"w-8 h-8":"w-10 h-10"} bg-blue-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(xt,{size:Re?16:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${Re?"text-sm":""} ${r?"text-white":"text-gray-900"}`,children:_.accountId}),e.jsx("p",{className:"text-gray-500 text-xs uppercase",children:((se=_.accountTypeId)==null?void 0:se.name)||"STANDARD"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>je(ze===_._id?null:_._id),className:"text-gray-500 hover:text-white p-1",children:e.jsx(bi,{size:18})}),ze===_._id&&e.jsx("div",{className:"absolute right-0 top-8 bg-dark-700 border border-gray-700 rounded-lg shadow-xl z-50 min-w-[160px]",onClick:Ze=>Ze.stopPropagation(),children:_.status==="Archived"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ze=>{Ze.stopPropagation(),je(null),Y(_._id)},className:"w-full px-4 py-2 text-left text-sm text-green-400 hover:bg-dark-600 rounded-t-lg flex items-center gap-2",children:[e.jsx(Je,{size:14})," Unarchive"]}),e.jsxs("button",{onClick:Ze=>{Ze.stopPropagation(),je(null),$(_)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-600 rounded-b-lg flex items-center gap-2",children:[e.jsx(Se,{size:14})," Delete Permanently"]})]}):e.jsxs("button",{onClick:Ze=>{Ze.stopPropagation(),je(null),be(_)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-600 rounded-lg flex items-center gap-2",children:[e.jsx(Se,{size:14})," Archive Account"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${_.status==="Active"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-xs ${_.status==="Active"?"text-green-500":"text-red-500"}`,children:_.status==="Active"?"Live":_.status}),_.isCopyTrading&&e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-full",children:"Copy Trading"})]})]}),e.jsxs("div",{className:`${Re?"p-3":"p-4"}`,children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("p",{className:`font-bold ${Re?"text-2xl":"text-3xl"} ${r?"text-white":"text-gray-900"}`,children:["$",_.isCopyTrading?(_.credit||0).toLocaleString():_.balance.toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:_.isCopyTrading?"Credit":"Balance"})]}),e.jsxs("div",{className:`grid grid-cols-2 gap-2 mt-3 pt-3 border-t ${r?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Leverage"}),e.jsx("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:_.leverage||"1:100"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Credit"}),e.jsxs("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:["$",(_.credit||0).toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Min Deposit"}),e.jsxs("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:["$",((ct=(De=_.accountTypeId)==null?void 0:De.minDeposit)==null?void 0:ct.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Equity"}),e.jsxs("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:["$",((_.balance||0)+(_.credit||0)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:`flex border-t ${r?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:()=>t(Re?`/mobile?account=${_._id}`:`/trade/${_._id}`),className:`flex-1 flex items-center justify-center gap-1 ${Re?"py-2 text-xs":"py-3"} bg-accent-green text-black font-medium hover:bg-accent-green/90 transition-colors`,children:[e.jsx(Sa,{size:Re?12:16})," Trade"]}),_.isDemo||(rt=_.accountTypeId)!=null&&rt.isDemo?e.jsxs("button",{onClick:()=>Be(_._id),className:`flex-1 flex items-center justify-center gap-1 ${Re?"py-2 text-xs":"py-3"} text-yellow-400 hover:text-yellow-300 hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(Je,{size:Re?12:16})," Reset"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{ve(_),W(!0)},className:`flex-1 flex items-center justify-center gap-1 ${Re?"py-2 text-xs":"py-3"} text-gray-400 hover:text-white hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(ut,{size:Re?12:16})," Deposit"]}),e.jsxs("button",{onClick:()=>{ve(_),re(!0)},className:`flex-1 flex items-center justify-center gap-1 ${Re?"py-2 text-xs":"py-3"} text-gray-400 hover:text-white hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(ur,{size:Re?12:16})," Withdraw"]}),e.jsxs("button",{onClick:()=>{ve(_),q(!0)},className:`flex-1 flex items-center justify-center gap-1 ${Re?"py-2 text-xs":"py-3"} text-blue-400 hover:text-blue-300 hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(Xt,{size:Re?12:16})," Transfer"]})]})]})]},_._id)})})]})}),K&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-2xl border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Open New Account"}),e.jsx("button",{onClick:()=>{ee(!1),Le(["","","",""]),me(null),$e("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne("live"),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${gt==="live"?"bg-accent-green text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Live Account"}),e.jsx("button",{onClick:()=>ne("demo"),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${gt==="demo"?"bg-yellow-500 text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Demo Account"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-4",children:gt==="demo"?"Select Demo Account Type":"Select Live Account Type"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[500px] overflow-y-auto pr-1",children:k.filter(_=>gt==="demo"?_.isDemo:!_.isDemo).length===0?e.jsxs("p",{className:"text-gray-500 text-sm text-center py-8 col-span-2",children:["No ",gt==="demo"?"demo":"live"," account types available"]}):k.filter(_=>gt==="demo"?_.isDemo:!_.isDemo).map(_=>{var rt,Ze;const se=(fe==null?void 0:fe._id)===_._id,ct={DEMO:"",STANDARD:"",PRO:"","PRO+":"",ELITE:"",HNI:""}[(rt=_.name)==null?void 0:rt.toUpperCase()]||"";return e.jsxs("button",{onClick:()=>me(_),className:`relative bg-dark-700 rounded-xl p-5 text-left transition-all duration-200 border ${se?"border-white ring-1 ring-white":"border-gray-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:ct}),e.jsx("span",{className:"text-white font-bold text-lg",children:_.name}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ml-auto ${se?"border-white bg-white":"border-gray-500"}`,children:se&&e.jsx("div",{className:"w-full h-full rounded-full bg-white"})})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:_.description||(_.isDemo?"Practice trading with virtual funds. No risk involved.":"Live trading account")}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:_.isDemo?"Virtual Balance":"Min deposit"}),e.jsxs("p",{className:"text-white font-semibold",children:["$",_.isDemo?"10,000":((Ze=_.minDeposit)==null?void 0:Ze.toLocaleString())||"100"," ",!_.isDemo&&"USD"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Min spread"}),e.jsxs("p",{className:"text-white font-semibold",children:[_.spread||"2"," pips"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Max leverage"}),e.jsx("p",{className:"text-white font-semibold",children:_.leverage||"1:100"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Commission"}),e.jsx("p",{className:"text-white font-semibold",children:_.commission?`$${_.commission}/lot`:"NO COMM"})]})]})]},_._id)})})]}),fe&&e.jsx("div",{className:`mb-4 p-4 rounded-xl ${fe.isDemo?"bg-yellow-500/10 border border-yellow-500/30":"bg-accent-green/10 border border-accent-green/30"}`,children:e.jsxs("p",{className:`text-sm text-center ${fe.isDemo?"text-yellow-500":"text-accent-green"}`,children:[" ",e.jsx("strong",{children:fe.name})," ",fe.isDemo?`demo account will be created with $${((Kt=fe.demoBalance)==null?void 0:Kt.toLocaleString())||"10,000"} virtual balance.`:"account will be created with $0 balance. Deposit funds after creation."]})}),Ce&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:Ce}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{ee(!1),Le(["","","",""]),me(null),$e("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),fe&&e.jsx("button",{onClick:dt,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Create Account"})]})]})}),X&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Change PIN"}),e.jsx("button",{onClick:()=>{F(!1),Ee(["","","",""]),ie(["","","",""]),$e("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Current PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:ge.map((_,se)=>e.jsx("input",{id:`currentpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:_,onChange:De=>Ss(se,De.target.value,ge,Ee,"currentpin"),onKeyDown:De=>Mt(De,se,ge,Ee,"currentpin"),onFocus:Ms,autoFocus:se===0,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`current-${se}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"New PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:S.map((_,se)=>e.jsx("input",{id:`newpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:_,onChange:De=>Ss(se,De.target.value,S,ie,"newpin"),onKeyDown:De=>Mt(De,se,S,ie,"newpin"),onFocus:Ms,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`new-${se}`))})]}),Ce&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:Ce}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{F(!1),Ee(["","","",""]),ie(["","","",""]),$e("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Pt,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Change PIN"})]})]})}),R&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Transfer to Account"}),e.jsx("button",{onClick:()=>{W(!1),Q(""),te(["","","",""]),$e("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded flex items-center justify-center",children:e.jsx(xt,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:ae.accountId}),e.jsx("p",{className:"text-gray-500 text-xs",children:(Qt=ae.accountTypeId)==null?void 0:Qt.name})]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-3 pt-3 border-t border-gray-600",children:[e.jsx("span",{className:"text-gray-400",children:"Account Balance:"}),e.jsxs("span",{className:"text-white font-medium",children:["$",ae.balance.toLocaleString()]})]})]}),e.jsx("div",{className:"p-3 bg-accent-green/10 border border-accent-green/30 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Main Wallet Balance:"}),e.jsxs("span",{className:"text-accent-green font-medium",children:["$",z.toLocaleString()]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transfer Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:M,onChange:_=>{const se=_.target.value.replace(/,/g,".");(se===""||/^\d*\.?\d*$/.test(se))&&Q(se)},placeholder:"Enter amount (e.g., 100.50)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),e.jsx("div",{className:"flex justify-between mt-2",children:e.jsxs("button",{type:"button",onClick:()=>Q(z.toString()),className:"text-accent-green text-xs hover:underline",children:["Max: $",z.toLocaleString()]})})]}),Ce&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:Ce}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{W(!1),Q(""),$e("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:He,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Transfer Funds"})]})]})}),D&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Withdraw to Main Wallet"}),e.jsx("button",{onClick:()=>{re(!1),Q(""),te(["","","",""]),$e("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded flex items-center justify-center",children:e.jsx(xt,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:ae.accountId}),e.jsx("p",{className:"text-gray-500 text-xs",children:(Rt=ae.accountTypeId)==null?void 0:Rt.name})]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-3 pt-3 border-t border-gray-600",children:[e.jsx("span",{className:"text-gray-400",children:"Available Balance:"}),e.jsxs("span",{className:"text-white font-medium",children:["$",ae.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Withdraw Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:M,onChange:_=>{const se=_.target.value.replace(/,/g,".");(se===""||/^\d*\.?\d*$/.test(se))&&Q(se)},placeholder:"Enter amount (e.g., 100.50)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),e.jsx("div",{className:"flex justify-between mt-2",children:e.jsxs("button",{type:"button",onClick:()=>Q(ae.balance.toString()),className:"text-accent-green text-xs hover:underline",children:["Max: $",ae.balance.toLocaleString()]})})]}),Ce&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:Ce}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{re(!1),Q(""),$e("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:pt,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Withdraw"})]})]})}),O&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Transfer Between Accounts"}),e.jsx("button",{onClick:()=>{q(!1),Q(""),te(["","","",""]),j(null),$e("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"From Account"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-white font-medium",children:ae.accountId})]}),e.jsxs("span",{className:"text-white",children:["$",ae.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"To Account"}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[y.filter(_=>_._id!==ae._id&&_.status==="Active").map(_=>{var se;return e.jsxs("button",{onClick:()=>j(_),className:`w-full p-3 rounded-lg border flex items-center justify-between ${(T==null?void 0:T._id)===_._id?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-white text-sm",children:_.accountId}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",(se=_.accountTypeId)==null?void 0:se.name,")"]})]}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["$",_.balance.toLocaleString()]})]},_._id)}),y.filter(_=>_._id!==ae._id&&_.status==="Active").length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-2",children:"No other accounts available"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transfer Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:M,onChange:_=>{const se=_.target.value.replace(/[^0-9.]/g,"");Q(se)},placeholder:"Enter amount",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>Q(ae.balance.toString()),className:"text-blue-400 text-xs hover:underline mt-2",children:["Max: $",ae.balance.toLocaleString()]})]}),Ce&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:Ce}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{q(!1),Q(""),j(null),$e("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:gs,disabled:!T,className:"flex-1 bg-blue-500 text-white font-medium py-3 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Transfer"})]})]})}),ce&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-700",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ht,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Challenge Rules"}),e.jsx("p",{className:"text-gray-500 text-sm",children:le.accountId})]})]}),e.jsx("button",{onClick:()=>J(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-dark-700 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Account Size"}),e.jsxs("p",{className:"text-white font-bold",children:["$",(le.initialBalance||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Current Balance"}),e.jsxs("p",{className:"text-white font-bold",children:["$",(le.currentBalance||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Phase"}),e.jsxs("p",{className:"text-white font-bold",children:[le.currentPhase,"/",le.totalPhases]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Status"}),e.jsx("p",{className:`font-bold ${le.status==="ACTIVE"?"text-blue-500":le.status==="FUNDED"?"text-purple-500":"text-gray-400"}`,children:le.status})]})]})}),e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Rules You Must Follow"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Drawdown Limit"}),e.jsxs("span",{className:"text-red-500 font-bold",children:[((Zt=(L=le.challengeId)==null?void 0:L.rules)==null?void 0:Zt.maxDailyDrawdownPercent)||5,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Drawdown Limit"}),e.jsxs("span",{className:"text-red-500 font-bold",children:[((Us=(Ls=le.challengeId)==null?void 0:Ls.rules)==null?void 0:Us.maxOverallDrawdownPercent)||10,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Profit Target"}),e.jsxs("span",{className:"text-green-500 font-bold",children:[((cs=(Ir=le.challengeId)==null?void 0:Ir.rules)==null?void 0:cs.profitTargetPhase1Percent)||8,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Min Lot Size"}),e.jsx("span",{className:"text-white font-bold",children:((Mr=(nr=le.challengeId)==null?void 0:nr.rules)==null?void 0:Mr.minLotSize)||.01})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Max Lot Size"}),e.jsx("span",{className:"text-white font-bold",children:((lr=(jr=le.challengeId)==null?void 0:jr.rules)==null?void 0:lr.maxLotSize)||100})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Max Leverage"}),e.jsxs("span",{className:"text-white font-bold",children:["1:",((Te=(U=le.challengeId)==null?void 0:U.rules)==null?void 0:Te.maxLeverage)||100]})]}),((Qe=(Oe=le.challengeId)==null?void 0:Oe.rules)==null?void 0:Qe.stopLossMandatory)&&e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[e.jsx(nt,{size:18,className:"text-yellow-500"}),e.jsx("span",{className:"text-yellow-500",children:"Stop Loss is REQUIRED on all trades"})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-red-500 font-medium mb-2",children:" Important Warning"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Breaking any of the above rules will result in immediate account failure. Your challenge will be terminated and no refund will be provided."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{J(!1),t(Re?`/mobile?account=${le._id}`:`/trade/${le._id}?type=challenge`)},className:"flex-1 py-3 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors flex items-center justify-center gap-2",children:["I Agree, Start Trading ",e.jsx(Sa,{size:18})]})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md border border-red-500/30",children:[e.jsx("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(Se,{size:24,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-red-500",children:"Challenge Failed"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Your challenge account has been terminated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-red-400 font-medium mb-2",children:"Reason for Failure:"}),e.jsx("p",{className:"text-white",children:i})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"What happened?"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"You violated the challenge rules multiple times. After 3 warnings for the same rule violation, your challenge account is automatically failed. No refund is available for failed challenges."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"w-full py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"View My Accounts"}),e.jsx("button",{onClick:()=>{l(!1),t("/challenge")},className:"w-full py-3 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors",children:"Try a New Challenge"})]})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-sm border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Se,{size:32,className:"text-red-500"})}),e.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Archive Account?"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to archive ",e.jsx("span",{className:"text-white font-medium",children:H.accountId}),"? The account will be moved to archived and you won't be able to trade on it."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>be(null),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Pe(H._id),className:"flex-1 py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition-colors",children:"Archive"})]})]})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-sm border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Se,{size:32,className:"text-red-500"})}),e.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Delete Permanently?"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to permanently delete ",e.jsx("span",{className:"text-white font-medium",children:ue.accountId}),"? This action cannot be undone and all account data will be lost forever."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>$(null),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>we(ue._id),className:"flex-1 py-3 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors",children:"Delete Forever"})]})]})})]})},wj=()=>{var $e,et,qe,Re,Ke,gt;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState("Wallet"),[l,i]=o.useState(!1),[d,c]=o.useState(null),[m,b]=o.useState([]),[f,u]=o.useState(window.innerWidth<768),[v,k]=o.useState([]),[N,y]=o.useState(!0),[p,g]=o.useState(!1),[h,x]=o.useState(!1),[w,z]=o.useState(null),[C,B]=o.useState(""),[G,K]=o.useState(""),[ee,X]=o.useState(""),[F,R]=o.useState(""),[W,D]=o.useState(!1),[re,O]=o.useState([]),[q,T]=o.useState(null),[j,Z]=o.useState(""),[I,ce]=o.useState(null),[J,le]=o.useState(null),[xe,ze]=o.useState(!1),[je,H]=o.useState(null),[be,ue]=o.useState(!1),$=o.useRef(null),V=JSON.parse(localStorage.getItem("user")||"{}"),de=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:ol,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"}],fe=ne=>{const Fe=ne.target.files[0];if(Fe){if(Fe.size>5*1024*1024){X("Screenshot must be less than 5MB");return}ce(Fe);const st=new FileReader;st.onloadend=()=>{le(st.result)},st.readAsDataURL(Fe)}},me=()=>{const ne=["Date","Type","Amount","Method","Status","Reference"],Fe=m.map(Ye=>[new Date(Ye.createdAt).toLocaleString(),Ye.type,Ye.amount.toFixed(2),Ye.paymentMethod||"Internal",Ye.status,Ye.transactionRef||"-"]),st=[ne.join(","),...Fe.map(Ye=>Ye.join(","))].join(`
`),P=new Blob([st],{type:"text/csv"}),oe=window.URL.createObjectURL(P),Me=document.createElement("a");Me.href=oe,Me.download=`transactions_${new Date().toISOString().split("T")[0]}.csv`,Me.click()};o.useEffect(()=>{const ne=()=>u(window.innerWidth<768);return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]),o.useEffect(()=>{Le(),V._id&&(S(),ie(),ae()),ge(),ve()},[V._id]);const ae=async()=>{try{const Fe=await(await fetch(`${A}/kyc/status/${V._id}`)).json();Fe.success&&Fe.hasKYC&&H(Fe.kyc)}catch(ne){console.error("Error fetching KYC status:",ne)}},ve=async()=>{try{const Fe=await(await fetch(`${A}/payment-methods/currencies/active`)).json();O(Fe.currencies||[]),(!Fe.currencies||Fe.currencies.length===0)&&T({currency:"USD",symbol:"$",rateToUSD:1,markup:0})}catch(ne){console.error("Error fetching currencies:",ne)}},Ve=(ne,Fe)=>{if(!Fe||Fe.currency==="USD")return ne;const st=Fe.rateToUSD*(1+(Fe.markup||0)/100);return ne/st},Le=async()=>{try{const Fe=await(await fetch(`${A}/prop/status`)).json();Fe.success&&D(Fe.enabled)}catch(ne){console.error("Error fetching challenge status:",ne)}},S=async()=>{try{const Fe=await(await fetch(`${A}/wallet/${V._id}`)).json();c(Fe.wallet)}catch(ne){console.error("Error fetching wallet:",ne)}},ie=async()=>{y(!0);try{const Fe=await(await fetch(`${A}/wallet/transactions/${V._id}`)).json();b(Fe.transactions||[])}catch(ne){console.error("Error fetching transactions:",ne)}y(!1)},ge=async()=>{try{const Fe=await(await fetch(`${A}/payment-methods`)).json();k(Fe.paymentMethods||[])}catch(ne){console.error("Error fetching payment methods:",ne)}},Ee=async()=>{if(!V._id){X("Please login to make a deposit");return}if(!j||parseFloat(j)<=0){X("Please enter a valid amount");return}if(!w){X("Please select a payment method");return}const ne=q&&q.currency!=="USD"?Ve(parseFloat(j),q):parseFloat(j);try{ze(!0);let Fe=null;if(I){const oe=new FormData;oe.append("screenshot",I),oe.append("userId",V._id);const Ye=await(await fetch(`${A}/upload/screenshot`,{method:"POST",body:oe})).json();Ye.success&&(Fe=Ye.url)}const st=await fetch(`${A}/wallet/deposit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,amount:ne,localAmount:parseFloat(j),currency:(q==null?void 0:q.currency)||"USD",currencySymbol:(q==null?void 0:q.symbol)||"$",exchangeRate:(q==null?void 0:q.rateToUSD)||1,markup:(q==null?void 0:q.markup)||0,paymentMethod:w.type,transactionRef:G,screenshot:Fe||J})}),P=await st.json();st.ok?(R("Deposit request submitted successfully!"),g(!1),B(""),Z(""),K(""),z(null),T(null),ce(null),le(null),S(),ie(),setTimeout(()=>R(""),3e3)):X(P.message||"Failed to create deposit")}catch(Fe){console.error("Deposit error:",Fe),X("Error submitting deposit. Please try again.")}finally{ze(!1)}},M=async()=>{var ne;if(!je||((ne=je.status)==null?void 0:ne.toUpperCase())!=="APPROVED"){ue(!0);return}if(!C||parseFloat(C)<=0){X("Please enter a valid amount");return}if(!w){X("Please select a payment method");return}if(d&&parseFloat(C)>d.balance){X("Insufficient balance");return}try{const Fe=await fetch(`${A}/wallet/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,amount:parseFloat(C),paymentMethod:w.type})}),st=await Fe.json();Fe.ok?(R("Withdrawal request submitted successfully!"),x(!1),B(""),z(null),S(),ie(),setTimeout(()=>R(""),3e3)):X(st.message)}catch{X("Error submitting withdrawal")}},Q=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},Ae=ne=>{switch(ne){case"Approved":case"Completed":return e.jsx(nt,{size:16,className:"text-green-500"});case"Rejected":return e.jsx(pr,{size:16,className:"text-red-500"});default:return e.jsx(Wt,{size:16,className:"text-yellow-500"})}},te=ne=>{switch(ne){case"Bank Transfer":return e.jsx(Dh,{size:18});case"UPI":return e.jsx(Qr,{size:18});case"QR Code":return e.jsx(vi,{size:18});default:return e.jsx(ht,{size:18})}},Ce=ne=>new Date(ne).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:`h-screen flex transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[f&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Wallet"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!f&&e.jsxs("aside",{className:`${l?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col h-screen sticky top-0 transition-all duration-300 ease-in-out`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center shrink-0",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2 overflow-y-auto",children:de.map(ne=>e.jsxs("button",{onClick:()=>t(ne.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${a===ne.name?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:l?"":ne.name,children:[e.jsx(ne.icon,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:ne.name})]},ne.name))}),e.jsxs("div",{className:`p-2 border-t shrink-0 ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),l&&e.jsx("span",{className:"text-sm font-medium",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:Q,className:`w-full flex items-center gap-3 px-3 py-2.5 transition-colors rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,title:l?"":"Log Out",children:[e.jsx(ws,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-y-auto ${f?"pt-14":""}`,children:[!f&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Wallet"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"Manage your funds"})]})}),e.jsxs("div",{className:`${f?"p-4":"p-6"}`,children:[F&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2 text-sm",children:[e.jsx(nt,{size:18})," ",F]}),ee&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500 text-sm",children:ee}),e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${f?"p-4":"p-6"} border mb-4`,children:e.jsxs("div",{className:`${f?"":"flex items-center justify-between"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Available Balance"}),e.jsxs("p",{className:`font-bold ${f?"text-2xl":"text-4xl"} ${s?"text-white":"text-gray-900"}`,children:["$",(($e=d==null?void 0:d.balance)==null?void 0:$e.toLocaleString())||"0.00"]}),e.jsxs("div",{className:`flex ${f?"gap-4":"gap-6"} mt-3`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Pending Deposits"}),e.jsxs("p",{className:"text-yellow-500 font-medium text-sm",children:["$",((et=d==null?void 0:d.pendingDeposits)==null?void 0:et.toLocaleString())||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Pending Withdrawals"}),e.jsxs("p",{className:"text-orange-500 font-medium text-sm",children:["$",((qe=d==null?void 0:d.pendingWithdrawals)==null?void 0:qe.toLocaleString())||"0.00"]})]})]})]}),e.jsxs("div",{className:`flex gap-2 ${f?"mt-4":""}`,children:[e.jsxs("button",{onClick:()=>{g(!0),X("")},className:`flex items-center gap-2 bg-accent-green text-black font-medium ${f?"px-4 py-2 text-sm":"px-6 py-3"} rounded-lg hover:bg-accent-green/90 transition-colors`,children:[e.jsx(Dn,{size:f?16:20})," Deposit"]}),e.jsxs("button",{onClick:()=>{x(!0),X("")},className:`flex items-center gap-2 font-medium ${f?"px-4 py-2 text-sm":"px-6 py-3"} rounded-lg transition-colors border ${s?"bg-dark-700 text-white hover:bg-dark-600 border-gray-700":"bg-gray-100 text-gray-900 hover:bg-gray-200 border-gray-300"}`,children:[e.jsx(In,{size:f?16:20})," Withdraw"]})]})]})}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${f?"p-4":"p-5"} border`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:`font-semibold text-lg ${s?"text-white":"text-gray-900"}`,children:"Transaction History"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:me,disabled:m.length===0,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm disabled:opacity-50 ${s?"bg-dark-700 hover:bg-dark-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:[e.jsx(Ac,{size:14})," Download"]}),e.jsx("button",{onClick:ie,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Je,{size:18,className:`text-gray-400 ${N?"animate-spin":""}`})})]})]}),N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ht,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"})]})}),e.jsx("tbody",{children:m.map(ne=>e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ne.type==="Deposit"&&e.jsx(Dn,{size:18,className:"text-green-500"}),ne.type==="Withdrawal"&&e.jsx(In,{size:18,className:"text-red-500"}),ne.type==="Transfer_To_Account"&&e.jsx(el,{size:18,className:"text-blue-500"}),ne.type==="Transfer_From_Account"&&e.jsx(Ac,{size:18,className:"text-purple-500"}),ne.type==="Account_Transfer_Out"&&e.jsx(In,{size:18,className:"text-orange-500"}),ne.type==="Account_Transfer_In"&&e.jsx(Dn,{size:18,className:"text-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white",children:ne.type==="Transfer_To_Account"?"To Trading Account":ne.type==="Transfer_From_Account"?"From Trading Account":ne.type==="Account_Transfer_Out"?"Account Transfer (Out)":ne.type==="Account_Transfer_In"?"Account Transfer (In)":ne.type}),ne.tradingAccountName&&e.jsx("p",{className:"text-gray-500 text-xs",children:ne.tradingAccountName}),ne.type==="Account_Transfer_Out"&&ne.toTradingAccountName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",ne.toTradingAccountName]}),ne.type==="Account_Transfer_In"&&ne.fromTradingAccountName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",ne.fromTradingAccountName]})]})]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${ne.type==="Deposit"||ne.type==="Transfer_From_Account"||ne.type==="Account_Transfer_In"?"text-green-500":"text-red-500"}`,children:[ne.type==="Deposit"||ne.type==="Transfer_From_Account"||ne.type==="Account_Transfer_In"?"+":"-","$",ne.amount.toLocaleString()]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:ne.type==="Transfer_To_Account"||ne.type==="Transfer_From_Account"||ne.type==="Account_Transfer_Out"||ne.type==="Account_Transfer_In"?"Internal":ne.paymentMethod}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ae(ne.status),e.jsx("span",{className:`${ne.status==="Approved"||ne.status==="Completed"?"text-green-500":ne.status==="Rejected"?"text-red-500":"text-yellow-500"}`,children:ne.status})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400 text-sm",children:Ce(ne.createdAt)})]},ne._id))})]})})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Deposit Funds"}),e.jsx("button",{onClick:()=>{g(!1),B(""),K(""),z(null),X("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Select Your Currency"}),e.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2 max-h-32 sm:max-h-40 overflow-y-auto p-1",children:[e.jsxs("button",{onClick:()=>T({currency:"USD",symbol:"$",rateToUSD:1,markup:0}),className:`p-2 rounded-lg border transition-colors flex flex-col items-center gap-0.5 ${!q||q.currency==="USD"?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsx("span",{className:"text-lg",children:"$"}),e.jsx("span",{className:"text-white text-[10px]",children:"USD"})]}),re.map(ne=>e.jsxs("button",{onClick:()=>T(ne),className:`p-2 rounded-lg border transition-colors flex flex-col items-center gap-0.5 ${(q==null?void 0:q.currency)===ne.currency?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsx("span",{className:"text-lg",children:ne.symbol}),e.jsx("span",{className:"text-white text-[10px]",children:ne.currency})]},ne._id))]}),re.length===0&&e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Only USD available. Admin can add more currencies."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2",children:["Amount ",q?`(${q.symbol} ${q.currency})`:"($ USD)"]}),e.jsx("input",{type:"number",value:j,onChange:ne=>Z(ne.target.value),placeholder:`Enter amount in ${(q==null?void 0:q.currency)||"USD"}`,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),q&&q.currency!=="USD"&&j&&parseFloat(j)>0&&e.jsx("div",{className:"mt-2 p-3 bg-accent-green/10 rounded-lg border border-accent-green/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You will receive"}),e.jsxs("p",{className:"text-green-400 font-bold text-2xl",children:["$",Ve(parseFloat(j),q).toFixed(2)," USD"]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Exchange Rate: 1 USD = ",q.symbol,(q.rateToUSD*(1+(q.markup||0)/100)).toFixed(2)," ",q.currency]})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:v.map(ne=>e.jsxs("button",{onClick:()=>z(ne),className:`p-4 rounded-lg border transition-colors flex flex-col items-center gap-2 ${(w==null?void 0:w._id)===ne._id?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[te(ne.type),e.jsx("span",{className:"text-white text-sm",children:ne.type})]},ne._id))}),v.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No payment methods available"})]}),w&&e.jsxs("div",{className:"mb-4 p-4 bg-dark-700 rounded-lg",children:[w.type==="Bank Transfer"&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-400",children:["Bank: ",e.jsx("span",{className:"text-white",children:w.bankName})]}),e.jsxs("p",{className:"text-gray-400",children:["Account: ",e.jsx("span",{className:"text-white",children:w.accountNumber})]}),e.jsxs("p",{className:"text-gray-400",children:["Name: ",e.jsx("span",{className:"text-white",children:w.accountHolderName})]}),e.jsxs("p",{className:"text-gray-400",children:["IFSC: ",e.jsx("span",{className:"text-white",children:w.ifscCode})]})]}),w.type==="UPI"&&e.jsxs("p",{className:"text-gray-400",children:["UPI ID: ",e.jsx("span",{className:"text-white",children:w.upiId})]}),w.type==="QR Code"&&w.qrCodeImage&&e.jsx("img",{src:w.qrCodeImage,alt:"QR Code",className:"mx-auto max-w-48"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transaction Reference (Optional)"}),e.jsx("input",{type:"text",value:G,onChange:ne=>K(ne.target.value),placeholder:"Enter transaction ID or reference",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Payment Screenshot (Proof)"}),e.jsx("input",{type:"file",ref:$,onChange:fe,accept:"image/*",className:"hidden"}),J?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:J,alt:"Payment Screenshot",className:"w-full max-h-48 object-contain rounded-lg border border-gray-700"}),e.jsx("button",{onClick:()=>{ce(null),le(null),$.current&&($.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600",children:e.jsx(Se,{size:16})})]}):e.jsxs("button",{onClick:()=>{var ne;return(ne=$.current)==null?void 0:ne.click()},className:"w-full p-4 border-2 border-dashed border-gray-700 rounded-lg hover:border-accent-green transition-colors flex flex-col items-center gap-2",children:[e.jsx(wi,{size:24,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Click to upload payment screenshot"}),e.jsx("span",{className:"text-gray-600 text-xs",children:"PNG, JPG up to 5MB"})]})]}),ee&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:ee}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),B(""),Z(""),K(""),z(null),T(null),ce(null),le(null),X("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ee,disabled:xe,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:xe?e.jsxs(e.Fragment,{children:[e.jsx(Je,{size:16,className:"animate-spin"})," Submitting..."]}):"Submit Deposit"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 sm:p-6 w-full max-w-lg border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Withdraw Funds"}),e.jsx("button",{onClick:()=>{x(!1),B(""),z(null),X("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-2 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Available Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",((Re=d==null?void 0:d.balance)==null?void 0:Re.toLocaleString())||"0.00"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:C,onChange:ne=>B(ne.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Withdrawal Method"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:v.map(ne=>e.jsxs("button",{onClick:()=>z(ne),className:`p-4 rounded-lg border transition-colors flex flex-col items-center gap-2 ${(w==null?void 0:w._id)===ne._id?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[te(ne.type),e.jsx("span",{className:"text-white text-sm",children:ne.type})]},ne._id))})]}),ee&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:ee}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),B(""),z(null),X("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:M,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Submit Withdrawal"})]})]})}),be&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`${s?"bg-dark-800 border-gray-700":"bg-white border-gray-200"} rounded-xl p-6 w-full max-w-md border`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(pr,{size:32,className:"text-yellow-500"})}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${s?"text-white":"text-gray-900"}`,children:"KYC Required"}),e.jsx("p",{className:`mb-4 ${s?"text-gray-400":"text-gray-600"}`,children:je?((Ke=je.status)==null?void 0:Ke.toUpperCase())==="PENDING"?"Your KYC is pending approval. Please wait for verification.":((gt=je.status)==null?void 0:gt.toUpperCase())==="REJECTED"?"Your KYC was rejected. Please resubmit with valid documents.":"Please complete your KYC verification to proceed.":"You need to complete KYC verification before making withdrawals."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ue(!1),className:`flex-1 py-3 rounded-lg ${s?"bg-dark-700 text-white hover:bg-dark-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{ue(!1),t("/profile")},className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90",children:"Complete KYC"})]})]})})})]})},kj=()=>{const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState("Orders"),[l,i]=o.useState(!1),[d,c]=o.useState(window.innerWidth<768),[m,b]=o.useState(!0),[f,u]=o.useState("positions"),[v,k]=o.useState("all"),[N,y]=o.useState([]),[p,g]=o.useState([]),[h,x]=o.useState([]),[w,z]=o.useState([]),[C,B]=o.useState({}),[G,K]=o.useState("all"),[ee,X]=o.useState(1),F=20,R=JSON.parse(localStorage.getItem("user")||"{}"),W=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:ol,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"}];o.useEffect(()=>{const H=()=>c(window.innerWidth<768);return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),o.useEffect(()=>{R._id&&D()},[R._id]),o.useEffect(()=>{N.length>0&&re()},[N,v]),o.useEffect(()=>{const H=async()=>{const ue=[...new Set(p.map($=>$.symbol))];if(ue.length!==0)try{const V=await(await fetch(`${A}/prices/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:ue})})).json();V.success&&V.prices&&B(V.prices)}catch($){console.error("Error fetching prices:",$)}};H();const be=setInterval(H,3e3);return()=>clearInterval(be)},[p]);const D=async()=>{try{const be=await(await fetch(`${A}/trading-accounts/user/${R._id}`)).json();y(be.accounts||[])}catch(H){console.error("Error fetching accounts:",H)}},re=async()=>{b(!0);try{const H=v==="all"?N:N.filter(V=>V._id===v);let be=[],ue=[],$=[];for(const V of H){const fe=await(await fetch(`${A}/trade/open/${V._id}`)).json();fe.success&&fe.trades&&(be=[...be,...fe.trades.map(Le=>({...Le,accountName:V.accountId}))]);const ae=await(await fetch(`${A}/trade/history/${V._id}`)).json();ae.success&&ae.trades&&(ue=[...ue,...ae.trades.map(Le=>({...Le,accountName:V.accountId}))]);const Ve=await(await fetch(`${A}/trade/pending/${V._id}`)).json();Ve.success&&Ve.trades&&($=[...$,...Ve.trades.map(Le=>({...Le,accountName:V.accountId}))])}g(be),x(ue.sort((V,de)=>new Date(de.closedAt)-new Date(V.closedAt))),z($)}catch(H){console.error("Error fetching trades:",H)}b(!1)},O=H=>{const be=C[H.symbol];if(!be||!be.bid)return 0;const ue=H.side==="BUY"?be.bid:be.ask;if(!ue)return 0;const $=H.contractSize||q(H.symbol);return(H.side==="BUY"?(ue-H.openPrice)*H.quantity*$:(H.openPrice-ue)*H.quantity*$)-(H.commission||0)-(H.swap||0)},q=H=>H==="XAUUSD"?100:H==="XAGUSD"?5e3:["BTCUSD","ETHUSD"].includes(H)?1:1e5,T=()=>p.reduce((H,be)=>H+O(be),0),j=()=>Z().reduce((H,be)=>H+(be.realizedPnl||0),0),Z=()=>{const H=new Date;return h.filter(be=>{if(G==="all")return!0;const ue=new Date(be.closedAt);if(G==="today")return ue.toDateString()===H.toDateString();if(G==="week"){const $=new Date(H.getTime()-6048e5);return ue>=$}if(G==="month"){const $=new Date(H.getTime()-2592e6);return ue>=$}if(G==="year"){const $=new Date(H.getTime()-31536e6);return ue>=$}return!0})},I=()=>{const H=Z(),be=(ee-1)*F;return H.slice(be,be+F)},ce=Math.ceil(Z().length/F),J=(H,be)=>{const ue=["Date","Account","Symbol","Side","Quantity","Open Price","Close Price","P&L","Status"],$=H.map(ae=>{var ve,Ve;return[new Date(ae.closedAt||ae.openedAt||ae.createdAt).toLocaleString(),ae.accountName||"N/A",ae.symbol,ae.side,ae.quantity,(ve=ae.openPrice)==null?void 0:ve.toFixed(5),((Ve=ae.closePrice)==null?void 0:Ve.toFixed(5))||"-",(ae.realizedPnl||O(ae)).toFixed(2),ae.status]}),V=[ue.join(","),...$.map(ae=>ae.join(","))].join(`
`),de=new Blob([V],{type:"text/csv"}),fe=window.URL.createObjectURL(de),me=document.createElement("a");me.href=fe,me.download=`${be}_${new Date().toISOString().split("T")[0]}.csv`,me.click()},le=async H=>{var be,ue,$;if(confirm(`Close ${H.side} ${H.quantity} ${H.symbol} position?`))try{const V=(be=C[H.symbol])==null?void 0:be[H.side==="BUY"?"bid":"ask"];if(!V){alert("Unable to get current price. Please try again.");return}const de=await fetch(`${A}/trade/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:H._id,closePrice:V})}),fe=await de.json();de.ok&&fe.success?(alert(`Trade closed! P&L: $${(($=(ue=fe.trade)==null?void 0:ue.realizedPnl)==null?void 0:$.toFixed(2))||"0.00"}`),re()):alert(fe.message||"Failed to close trade")}catch(V){console.error("Close trade error:",V),alert("Error closing trade")}},xe=async H=>{if(confirm(`Cancel pending ${H.side} ${H.quantity} ${H.symbol} order?`))try{const be=await fetch(`${A}/trade/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:H._id})}),ue=await be.json();be.ok&&ue.success?(alert("Order cancelled successfully"),re()):alert(ue.message||"Failed to cancel order")}catch(be){console.error("Cancel order error:",be),alert("Error cancelling order")}},ze=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},je=H=>H?new Date(H).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return e.jsxs("div",{className:`min-h-screen flex transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[d&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Order Book"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!d&&e.jsxs("aside",{className:`${l?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col transition-all duration-300`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:W.map(H=>e.jsxs("button",{onClick:()=>t(H.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${a===H.name?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(H.icon,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium",children:H.name})]},H.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),l&&e.jsx("span",{className:"text-sm font-medium",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:ze,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),l&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${d?"pt-14":""}`,children:[!d&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Order Book"}),e.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-600"}`,children:"View all your positions, history & pending orders"})]})}),e.jsxs("div",{className:`${d?"p-4":"p-6"}`,children:[e.jsxs("div",{className:`grid ${d?"grid-cols-1 gap-3":"grid-cols-4 gap-4"} mb-4`,children:[e.jsxs("div",{className:`rounded-xl p-4 border ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200"}`,children:[e.jsx("label",{className:`block text-xs mb-2 ${s?"text-gray-500":"text-gray-600"}`,children:"Select Account"}),e.jsxs("select",{value:v,onChange:H=>k(H.target.value),className:`w-full rounded-lg px-3 py-2 text-sm ${s?"bg-dark-700 border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border`,children:[e.jsx("option",{value:"all",children:"All Accounts"}),N.map(H=>e.jsx("option",{value:H._id,children:H.accountId},H._id))]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:`text-xs mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Open Positions"}),e.jsx("p",{className:`text-2xl font-bold ${s?"text-white":"text-gray-900"}`,children:p.length})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:`text-xs mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Floating P&L"}),e.jsxs("p",{className:`text-2xl font-bold ${T()>=0?"text-green-500":"text-red-500"}`,children:[T()>=0?"+":"","$",T().toFixed(2)]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:`text-xs mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:"Realized P&L"}),e.jsxs("p",{className:`text-2xl font-bold ${j()>=0?"text-green-500":"text-red-500"}`,children:[j()>=0?"+":"","$",j().toFixed(2)]})]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:[e.jsxs("div",{className:`flex border-b ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:()=>u("positions"),className:`flex-1 py-3 px-4 text-sm font-medium flex items-center justify-center gap-2 ${f==="positions"?"bg-accent-green/10 text-accent-green border-b-2 border-accent-green":"text-gray-400 hover:text-white"}`,children:[e.jsx(xr,{size:16})," Positions (",p.length,")"]}),e.jsxs("button",{onClick:()=>u("history"),className:`flex-1 py-3 px-4 text-sm font-medium flex items-center justify-center gap-2 ${f==="history"?"bg-accent-green/10 text-accent-green border-b-2 border-accent-green":"text-gray-400 hover:text-white"}`,children:[e.jsx(Qu,{size:16})," History (",h.length,")"]}),e.jsxs("button",{onClick:()=>u("pending"),className:`flex-1 py-3 px-4 text-sm font-medium flex items-center justify-center gap-2 ${f==="pending"?"bg-accent-green/10 text-accent-green border-b-2 border-accent-green":"text-gray-400 hover:text-white"}`,children:[e.jsx(Wt,{size:16})," Pending (",w.length,")"]})]}),e.jsxs("div",{className:`p-3 border-b flex items-center justify-between ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:re,className:`flex items-center gap-2 text-sm ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Je,{size:14,className:m?"animate-spin":""})," Refresh"]}),e.jsxs("button",{onClick:()=>J(f==="positions"?p:h,f),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm ${s?"bg-dark-700 hover:bg-dark-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:[e.jsx(Ac,{size:14})," Download CSV"]})]}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):e.jsxs("div",{className:"overflow-x-auto",children:[f==="positions"&&(p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xr,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No open positions"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Account"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Side"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Qty"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Open Price"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Current"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"P&L"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"SL/TP"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Action"})]})}),e.jsx("tbody",{children:p.map(H=>{var $,V;const be=O(H),ue=($=C[H.symbol])==null?void 0:$[H.side==="BUY"?"bid":"ask"];return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-400 text-sm",children:H.accountName}),e.jsx("td",{className:"py-3 px-4 text-white font-medium",children:H.symbol}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${H.side==="BUY"?"text-green-500":"text-red-500"}`,children:[H.side==="BUY"?e.jsx(xt,{size:14}):e.jsx(Mn,{size:14}),H.side]})}),e.jsx("td",{className:"py-3 px-4 text-white",children:H.quantity}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:(V=H.openPrice)==null?void 0:V.toFixed(5)}),e.jsx("td",{className:"py-3 px-4 text-white",children:(ue==null?void 0:ue.toFixed(5))||"-"}),e.jsxs("td",{className:`py-3 px-4 font-medium ${be>=0?"text-green-500":"text-red-500"}`,children:[be>=0?"+":"","$",be.toFixed(2)]}),e.jsxs("td",{className:"py-3 px-4 text-gray-400 text-xs",children:[e.jsxs("div",{children:["SL: ",H.stopLoss||"-"]}),e.jsxs("div",{children:["TP: ",H.takeProfit||"-"]})]}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>le(H),className:"bg-red-500/20 text-red-500 hover:bg-red-500/30 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",children:"Close"})})]},H._id)})})]})),f==="history"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 border-b border-gray-800",children:[[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"month",label:"This Month"},{key:"year",label:"This Year"}].map(H=>e.jsx("button",{onClick:()=>{K(H.key),X(1)},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${G===H.key?"bg-accent-green text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:H.label},H.key)),e.jsxs("span",{className:"ml-auto text-gray-500 text-xs",children:[Z().length," trades | P&L: ",e.jsxs("span",{className:j()>=0?"text-green-500":"text-red-500",children:["$",j().toFixed(2)]})]})]}),Z().length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qu,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No trade history for this period"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Account"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Side"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Qty"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Open"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Close"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"P&L"})]})}),e.jsx("tbody",{children:I().map(H=>{var be,ue;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-400 text-xs",children:je(H.closedAt)}),e.jsx("td",{className:"py-3 px-4 text-gray-400 text-sm",children:H.accountName}),e.jsx("td",{className:"py-3 px-4 text-white font-medium",children:H.symbol}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${H.side==="BUY"?"text-green-500":"text-red-500"}`,children:[H.side==="BUY"?e.jsx(xt,{size:14}):e.jsx(Mn,{size:14}),H.side]})}),e.jsx("td",{className:"py-3 px-4 text-white",children:H.quantity}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:(be=H.openPrice)==null?void 0:be.toFixed(5)}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:(ue=H.closePrice)==null?void 0:ue.toFixed(5)}),e.jsxs("td",{className:`py-3 px-4 font-medium ${(H.realizedPnl||0)>=0?"text-green-500":"text-red-500"}`,children:[(H.realizedPnl||0)>=0?"+":"","$",(H.realizedPnl||0).toFixed(2)]})]},H._id)})})]}),ce>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-800",children:[e.jsxs("span",{className:"text-gray-500 text-sm",children:["Page ",ee," of ",ce]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>X(H=>Math.max(1,H-1)),disabled:ee===1,className:"px-3 py-1.5 bg-dark-700 text-white rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-600",children:"Previous"}),e.jsx("button",{onClick:()=>X(H=>Math.min(ce,H+1)),disabled:ee===ce,className:"px-3 py-1.5 bg-dark-700 text-white rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-600",children:"Next"})]})]})]})]}),f==="pending"&&(w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Wt,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No pending orders"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Account"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Side"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Qty"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Price"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-xs font-medium py-3 px-4",children:"Action"})]})}),e.jsx("tbody",{children:w.map(H=>{var be,ue;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-400 text-sm",children:H.accountName}),e.jsx("td",{className:"py-3 px-4 text-white font-medium",children:H.symbol}),e.jsx("td",{className:"py-3 px-4 text-yellow-500 text-sm",children:H.orderType}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${H.side==="BUY"?"text-green-500":"text-red-500"}`,children:[H.side==="BUY"?e.jsx(xt,{size:14}):e.jsx(Mn,{size:14}),H.side]})}),e.jsx("td",{className:"py-3 px-4 text-white",children:H.quantity}),e.jsx("td",{className:"py-3 px-4 text-gray-400",children:((be=H.limitPrice)==null?void 0:be.toFixed(5))||((ue=H.stopPrice)==null?void 0:ue.toFixed(5))}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-500 rounded text-xs",children:H.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>xe(H),className:"bg-red-500/20 text-red-500 hover:bg-red-500/30 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",children:"Cancel"})})]},H._id)})})]}))]})]})]})]})]})};class Sj{constructor(){this.ws=null,this.prices=new Map,this.subscribers=new Map,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5}toBinanceSymbol(s){return{BTCUSD:"btcusdt",ETHUSD:"ethusdt",LTCUSD:"ltcusdt",XRPUSD:"xrpusdt",BCHUSD:"bchusdt",BNBUSD:"bnbusdt",ADAUSD:"adausdt",DOTUSD:"dotusdt",SOLUSD:"solusdt",DOGEUSD:"dogeusdt",MATICUSD:"maticusdt",AVAXUSD:"avaxusdt",LINKUSD:"linkusdt",UNIUSD:"uniusdt",ATOMUSD:"atomusdt",XLMUSD:"xlmusdt",ALGOUSD:"algousdt",VETUSD:"vetusdt",ICPUSD:"icpusdt",FILUSD:"filusdt",TRXUSD:"trxusdt",ETCUSD:"etcusdt",XMRUSD:"xmrusdt",EOSUSD:"eosusdt",AAVEUSD:"aaveusdt",MKRUSD:"mkrusdt",COMPUSD:"compusdt",SNXUSD:"snxusdt",YFIUSD:"yfiusdt",SUSHIUSD:"sushiusdt",NEARUSD:"nearusdt",FTMUSD:"ftmusdt",SANDUSD:"sandusdt",MANAUSD:"manausdt",AXSUSD:"axsusdt",GALAUSD:"galausdt",APEUSD:"apeusdt",GMTUSD:"gmtusdt",OPUSD:"opusdt",ARBUSD:"arbusdt",PEPEUSD:"pepeusdt",SHIBUSD:"shibusdt"}[s]||s.toLowerCase().replace("usd","usdt")}fromBinanceSymbol(s){return s.toUpperCase().replace("USDT","USD")}getCryptoSymbols(){return[{symbol:"BTCUSD",name:"Bitcoin",category:"Crypto"},{symbol:"ETHUSD",name:"Ethereum",category:"Crypto"},{symbol:"BNBUSD",name:"BNB",category:"Crypto"},{symbol:"SOLUSD",name:"Solana",category:"Crypto"},{symbol:"XRPUSD",name:"XRP",category:"Crypto"},{symbol:"ADAUSD",name:"Cardano",category:"Crypto"},{symbol:"DOGEUSD",name:"Dogecoin",category:"Crypto"},{symbol:"DOTUSD",name:"Polkadot",category:"Crypto"},{symbol:"MATICUSD",name:"Polygon",category:"Crypto"},{symbol:"LTCUSD",name:"Litecoin",category:"Crypto"},{symbol:"SHIBUSD",name:"Shiba Inu",category:"Crypto"},{symbol:"AVAXUSD",name:"Avalanche",category:"Crypto"},{symbol:"LINKUSD",name:"Chainlink",category:"Crypto"},{symbol:"UNIUSD",name:"Uniswap",category:"Crypto"},{symbol:"ATOMUSD",name:"Cosmos",category:"Crypto"},{symbol:"XLMUSD",name:"Stellar",category:"Crypto"},{symbol:"NEARUSD",name:"NEAR Protocol",category:"Crypto"},{symbol:"FTMUSD",name:"Fantom",category:"Crypto"},{symbol:"ALGOUSD",name:"Algorand",category:"Crypto"},{symbol:"VETUSD",name:"VeChain",category:"Crypto"},{symbol:"ICPUSD",name:"Internet Computer",category:"Crypto"},{symbol:"FILUSD",name:"Filecoin",category:"Crypto"},{symbol:"TRXUSD",name:"TRON",category:"Crypto"},{symbol:"ETCUSD",name:"Ethereum Classic",category:"Crypto"},{symbol:"AAVEUSD",name:"Aave",category:"Crypto"},{symbol:"SANDUSD",name:"The Sandbox",category:"Crypto"},{symbol:"MANAUSD",name:"Decentraland",category:"Crypto"},{symbol:"AXSUSD",name:"Axie Infinity",category:"Crypto"},{symbol:"APEUSD",name:"ApeCoin",category:"Crypto"},{symbol:"ARBUSD",name:"Arbitrum",category:"Crypto"},{symbol:"OPUSD",name:"Optimism",category:"Crypto"},{symbol:"PEPEUSD",name:"Pepe",category:"Crypto"}]}async getSymbolPrice(s){try{const r=this.toBinanceSymbol(s),a=await fetch(`https://api.binance.com/api/v3/ticker/bookTicker?symbol=${r.toUpperCase()}`);if(!a.ok)throw new Error("Failed to fetch price");const n=await a.json(),l={bid:parseFloat(n.bidPrice),ask:parseFloat(n.askPrice),spread:parseFloat(n.askPrice)-parseFloat(n.bidPrice)};return this.prices.set(s,l),l}catch(r){return console.error(`Error fetching ${s} price:`,r),null}}async getAllPrices(s){const r={};try{const a=await fetch("https://api.binance.com/api/v3/ticker/bookTicker");if(!a.ok)throw new Error("Failed to fetch prices");const n=await a.json(),l=new Map(n.map(i=>[i.symbol.toLowerCase(),i]));for(const i of s){const d=this.toBinanceSymbol(i),c=l.get(d);c&&(r[i]={bid:parseFloat(c.bidPrice),ask:parseFloat(c.askPrice),spread:parseFloat(c.askPrice)-parseFloat(c.bidPrice)},this.prices.set(i,r[i]))}}catch(a){console.error("Error fetching all prices:",a)}return r}connect(s=[]){if(this.ws&&this.ws.readyState===WebSocket.OPEN||s.length===0)return;const a=`wss://stream.binance.com:9443/stream?streams=${s.map(n=>`${this.toBinanceSymbol(n)}@bookTicker`).join("/")}`;this.ws=new WebSocket(a),this.ws.onopen=()=>{console.log("Binance WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0},this.ws.onmessage=n=>{try{const l=JSON.parse(n.data);l.data&&this.handleMessage(l.data)}catch(l){console.error("Error parsing WebSocket message:",l)}},this.ws.onerror=n=>{console.error("Binance WebSocket error:",n)},this.ws.onclose=()=>{console.log("Binance WebSocket disconnected"),this.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>{console.log(`Reconnecting to Binance... Attempt ${this.reconnectAttempts}`),this.connect(Array.from(this.subscribers.keys()))},3e3*this.reconnectAttempts))}}handleMessage(s){const r=this.fromBinanceSymbol(s.s),a={bid:parseFloat(s.b),ask:parseFloat(s.a),spread:parseFloat(s.a)-parseFloat(s.b),time:new Date().toISOString()};this.prices.set(r,a);const n=this.subscribers.get(r);n&&n(a)}subscribe(s,r){this.subscribers.set(s,r)}unsubscribe(s){this.subscribers.delete(s)}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.subscribers.clear(),this.isConnected=!1}getPrice(s){return this.prices.get(s)}}const Cj=new Sj,Tj=()=>{var Gd,Xd,Kd,Qd,Zd,ex,tx,sx,rx,ax,nx,lx,ix,ox,cx,dx,xx,ux,mx,hx,px,gx,fx,yx,bx,jx,Nx,vx,wx,kx,Sx,Cx,Tx,Ex,Px;const t=Nt(),{accountId:s}=_d(),[r]=Bi(),a=r.get("type"),{isDarkMode:n,toggleDarkMode:l}=ks(),[i,d]=o.useState(null),[c,m]=o.useState(null),[b,f]=o.useState(null),[u,v]=o.useState(!0),[k,N]=o.useState(!1),[y,p]=o.useState({symbol:"XAUUSD",name:"CFDs on Gold (US$ / OZ)",bid:0,ask:0,spread:0}),[g,h]=o.useState(window.innerWidth>=768),[x,w]=o.useState(window.innerWidth>=768),[z,C]=o.useState("Market"),[B,G]=o.useState("0.01"),[K,ee]=o.useState("1:100"),[X,F]=o.useState(""),[R,W]=o.useState("All"),[D,re]=o.useState("Positions"),[O,q]=o.useState(!1),[T,j]=o.useState("BUY"),[Z,I]=o.useState([{symbol:"XAUUSD",name:"CFDs on Gold (US$ / OZ)",bid:0,ask:0,spread:0}]),[ce,J]=o.useState("XAUUSD"),[le,xe]=o.useState(!1),[ze,je]=o.useState(!1),[H,be]=o.useState(""),[ue,$]=o.useState(""),[V,de]=o.useState("BUY LIMIT"),[fe,me]=o.useState(""),[ae,ve]=o.useState([{symbol:"EURUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!0},{symbol:"GBPUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!0},{symbol:"USDJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"USDCHF",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"AUDUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"NZDUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"USDCAD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"EURGBP",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"EURJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"GBPJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"XAUUSD",bid:0,ask:0,spread:0,change:0,category:"Metals",starred:!0},{symbol:"XAGUSD",bid:0,ask:0,spread:0,change:0,category:"Metals",starred:!1},{symbol:"BTCUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!0},{symbol:"ETHUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"BNBUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"SOLUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"XRPUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"ADAUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"DOGEUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"DOTUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"MATICUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"LTCUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"AVAXUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"LINKUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1}]),[Ve,Le]=o.useState(!0),[S,ie]=o.useState(["XAUUSD","EURUSD","GBPUSD"]),[ge,Ee]=o.useState(window.innerWidth<768),[M,Q]=o.useState([]),[Ae,te]=o.useState([]),[Ce,$e]=o.useState([]),[et,qe]=o.useState(!1),[Re,Ke]=o.useState(""),[gt,ne]=o.useState(""),[Fe,st]=o.useState({balance:0,credit:0,equity:0,usedMargin:0,freeMargin:0,floatingPnl:0}),[P,oe]=o.useState({}),[Me,Ye]=o.useState({}),[Et,at]=o.useState(!1),[Ss,Mt]=o.useState(!1),[Ms,dt]=o.useState(!1),[Pt,Pe]=o.useState(null),[Y,we]=o.useState(null),[Be,He]=o.useState("all"),[pt,gs]=o.useState(""),[Dt,Kt]=o.useState(""),[Qt,Rt]=o.useState(!1),[L,Zt]=o.useState(!1),[Ls,Us]=o.useState(null),[Ir,cs]=o.useState({value:30,unit:"minutes"}),[nr,Mr]=o.useState(""),[jr,lr]=o.useState(""),U=["All","Forex","Metals","Crypto"],Te=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{lp(),Oe(),_();const E=setInterval(()=>{Oe()},2e3);return()=>{clearInterval(E),tl.disconnect()}},[s]),o.useEffect(()=>{if(s){se(),De(),ct(),rt();const E=setInterval(()=>{se(),rt()},5e3);return()=>clearInterval(E)}},[s]),o.useEffect(()=>{const E=()=>{const he=window.innerWidth<768;Ee(he),he||(w(!0),h(!0))};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),o.useEffect(()=>{const E=Ji.subscribe("tradingPage",(he,pe,Ie)=>{if(!he||Object.keys(he).length===0)return;oe(Ue=>{const We={...Ue};return Object.entries(he).forEach(([ft,lt])=>{lt&&lt.bid&&(We[ft]=lt)}),We}),ve(Ue=>Ue.map(We=>{const ft=he[We.symbol];if(ft&&ft.bid&&ft.bid>0){const lt=ft.bid,ir=ft.ask||ft.bid,up=Math.abs(ir-lt)||lt*1e-4;return{...We,bid:lt,ask:ir,spread:up}}return We}));const ke=he[y==null?void 0:y.symbol];ke&&ke.bid&&ke.bid>0&&p(Ue=>({...Ue,bid:ke.bid,ask:ke.ask||ke.bid,spread:Math.abs((ke.ask||ke.bid)-ke.bid)}))});return Oe(),()=>E()},[y==null?void 0:y.symbol]),o.useEffect(()=>{(async()=>{const pe=localStorage.getItem("token"),Ie=JSON.parse(localStorage.getItem("user")||"{}");if(!pe||!Ie._id){t("/user/login");return}try{const ke=await fetch(`${A}/auth/me`,{headers:{Authorization:`Bearer ${pe}`}}),Ue=await ke.json();if(Ue.forceLogout||ke.status===403){alert(Ue.message||"Session expired. Please login again."),localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login");return}}catch(ke){console.error("Auth check error:",ke)}})();const he=localStorage.getItem(`killSwitch_${s}`);if(he){const pe=parseInt(he);pe>Date.now()?(Zt(!0),Us(pe)):localStorage.removeItem(`killSwitch_${s}`)}},[s]),o.useEffect(()=>{if(!L||!Ls)return;const E=()=>{const pe=Date.now(),Ie=Ls-pe;if(Ie<=0){Zt(!1),Us(null),Mr(""),localStorage.removeItem(`killSwitch_${s}`);return}const ke=Math.floor(Ie/(1e3*60*60*24)),Ue=Math.floor(Ie%(1e3*60*60*24)/(1e3*60*60)),We=Math.floor(Ie%(1e3*60*60)/(1e3*60)),ft=Math.floor(Ie%(1e3*60)/1e3);let lt="";ke>0&&(lt+=`${ke}d `),(Ue>0||ke>0)&&(lt+=`${Ue}h `),(We>0||Ue>0||ke>0)&&(lt+=`${We}m `),lt+=`${ft}s`,Mr(lt.trim())};E();const he=setInterval(E,1e3);return()=>clearInterval(he)},[L,Ls,s]),o.useEffect(()=>{if(Object.keys(P).length===0)return;let E=0,he=0,pe=!1;if(M.length>0&&M.forEach(Ue=>{const We=P[Ue.symbol],ft=ae.find(ir=>ir.symbol===Ue.symbol),lt=We!=null&&We.bid?Ue.side==="BUY"?We.bid:We.ask:ft!=null&&ft.bid?Ue.side==="BUY"?ft.bid:ft.ask:null;if(lt&&lt>0){pe=!0;const ir=Ue.side==="BUY"?(lt-Ue.openPrice)*Ue.quantity*Ue.contractSize:(Ue.openPrice-lt)*Ue.quantity*Ue.contractSize;E+=ir-(Ue.commission||0)-(Ue.swap||0)}he+=Ue.marginUsed||0}),!pe&&M.length>0)return;const Ie=Math.round((Fe.balance+(Fe.credit||0)+E)*100)/100,ke=Math.round((Fe.balance+(Fe.credit||0)+E-he)*100)/100;st(Ue=>({...Ue,floatingPnl:Math.round(E*100)/100,usedMargin:Math.round(he*100)/100,equity:Ie,freeMargin:ke})),M.length>0&&(Ie<=0||ke<-he)&&Ze()},[P,ae,M]);const Oe=async()=>{try{const E=ae.map(pe=>pe.symbol),he=await tl.getAllPrices(E);if(Object.keys(he).length>0&&(Le(!1),oe(pe=>({...pe,...he})),ve(pe=>pe.map(Ie=>{const ke=he[Ie.symbol];if(ke&&ke.bid){const Ue=ke.bid,We=ke.ask||ke.bid,ft=Math.abs(We-Ue)||Ue*1e-4;return{...Ie,bid:Ue,ask:We,spread:ft}}return Ie})),p(pe=>{const Ie=he[pe.symbol];if(Ie&&Ie.bid){const ke=Ie.bid,Ue=Ie.ask||Ie.bid;return{...pe,bid:ke,ask:Ue,spread:Math.abs(Ue-ke)||ke*1e-4}}return pe}),I(pe=>pe.map(Ie=>{const ke=he[Ie.symbol];if(ke&&ke.bid){const Ue=ke.bid,We=ke.ask||ke.bid;return{...Ie,bid:Ue,ask:We,spread:Math.abs(We-Ue)||Ue*1e-4}}return Ie})),Object.keys(he).length>0))try{const Ie=await(await fetch(`${A}/trade/check-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:he})})).json();Ie.success&&Ie.executedCount>0&&(se(),De(),Ie.executedTrades.forEach(We=>{var ft;ne(`${We.orderType} executed: ${We.symbol} ${We.side} @ ${(ft=We.executionPrice)==null?void 0:ft.toFixed(5)}`)}));const Ue=await(await fetch(`${A}/trade/check-sltp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:he})})).json();Ue.success&&Ue.closedCount>0&&(se(),ct(),Ue.closedTrades.forEach(We=>{ne(`Trade ${We.symbol} closed by ${We.reason}: ${We.pnl>=0?"+":""}$${We.pnl.toFixed(2)}`)}))}catch{}}catch(E){console.error("Live prices error:",E)}},Qe=E=>["XAUUSD","XAGUSD","XPTUSD","XPDUSD"].includes(E)?"Metals":["BTCUSD","ETHUSD","LTCUSD","XRPUSD","BCHUSD"].includes(E)?"Crypto":"Forex",_=async()=>{try{const he=await(await fetch(`${A}/charges/spreads`)).json();he.success&&Ye(he.spreads||{})}catch(E){console.error("Error fetching admin spreads:",E)}},se=async()=>{try{const he=await(await fetch(`${A}/trade/open/${s}`)).json();he.success&&Q(he.trades||[])}catch(E){console.error("Error fetching open trades:",E)}},De=async()=>{try{const he=await(await fetch(`${A}/trade/pending/${s}`)).json();he.success&&te(he.trades||[])}catch(E){console.error("Error fetching pending orders:",E)}},ct=async()=>{try{const he=await(await fetch(`${A}/trade/history/${s}`)).json();he.success&&$e(he.trades||[])}catch(E){console.error("Error fetching trade history:",E)}},rt=async()=>{try{const E={};ae.forEach(ke=>{ke.bid&&ke.ask&&(E[ke.symbol]={bid:ke.bid,ask:ke.ask})});const he=encodeURIComponent(JSON.stringify(E)),Ie=await(await fetch(`${A}/trade/summary/${s}?prices=${he}`)).json();Ie.success&&st(Ie.summary)}catch(E){console.error("Error fetching account summary:",E)}},Ze=async()=>{try{const E={};ae.forEach(Ie=>{Ie.bid&&Ie.ask&&(E[Ie.symbol]={bid:Ie.bid,ask:Ie.ask})});const pe=await(await fetch(`${A}/trade/check-stopout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradingAccountId:s,prices:E})})).json();pe.success&&pe.stopOutTriggered&&(alert(` STOP OUT: ${pe.message}

All your trades have been closed to prevent further losses.`),se(),rt(),ct())}catch(E){console.error("Error checking stop out:",E)}},Cs=(E=null)=>{const he={seconds:1e3,minutes:6e4,hours:36e5,days:864e5},pe=E||Ir,Ie=pe.value*he[pe.unit],ke=Date.now()+Ie;Zt(!0),Us(ke),localStorage.setItem(`killSwitch_${s}`,ke.toString()),Rt(!1);const Ue=`${pe.value} ${pe.unit}`;lr(` Kill Switch activated for ${Ue}! Trading is now blocked.`),setTimeout(()=>lr(""),5e3)},dl=()=>{Cs({value:30,unit:"minutes"})},Jd=()=>{Zt(!1),Us(null),Mr(""),localStorage.removeItem(`killSwitch_${s}`),lr(" Kill Switch deactivated. Trading is now enabled."),setTimeout(()=>lr(""),3e3)},an=async E=>{if(L){Ke(`Trading blocked! Kill Switch active for ${nr}`);return}qe(!0),Ke(""),ne("");try{const he=Qe(y.symbol),pe=P[y.symbol],Ie=(pe==null?void 0:pe.bid)||y.bid,ke=(pe==null?void 0:pe.ask)||y.ask;if(!Ie||!ke||Ie<=0||ke<=0||isNaN(Ie)||isNaN(ke)){Ke("Market is closed or no price data available. Trading is not available at this time."),qe(!1);return}const We=await(await fetch(`${A}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Te._id,tradingAccountId:s,symbol:y.symbol,segment:he,side:E,orderType:"MARKET",quantity:parseFloat(B),bid:Ie,ask:ke,leverage:K,sl:ze&&ue?parseFloat(ue):null,tp:le&&H?parseFloat(H):null})})).json();if(We.success)ne(`${E} order executed successfully!`),se(),rt(),$(""),be(""),je(!1),xe(!1);else{if(We.accountFailed){t(`/account?failed=true&reason=${encodeURIComponent(We.failReason||We.message)}`);return}We.warningCount>0?Ke(`${We.message} (Warning ${We.warningCount}/3 - ${We.remainingWarnings} remaining before account fails)`):Ke(We.message||"Failed to execute order")}}catch(he){console.error("Error executing trade:",he),Ke("Failed to execute order. Please try again.")}qe(!1),setTimeout(()=>{Ke(""),ne("")},3e3)},Zh=async()=>{if(L){Ke(`Trading blocked! Kill Switch active for ${nr}`);return}qe(!0),Ke(""),ne("");try{const E=Qe(y.symbol),he=V.includes("BUY")?"BUY":"SELL",pe=V.replace(" ","_"),Ie=fe?parseFloat(fe):null,ke=P[y.symbol],Ue=(ke==null?void 0:ke.bid)||y.bid,We=(ke==null?void 0:ke.ask)||y.ask,lt=await(await fetch(`${A}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Te._id,tradingAccountId:s,symbol:y.symbol,segment:E,side:he,orderType:pe,quantity:parseFloat(B),bid:Ie||Ue,ask:Ie||We,sl:ze&&ue?parseFloat(ue):null,tp:le&&H?parseFloat(H):null})})).json();lt.success?(ne(`${V} order placed successfully!`),De(),me("")):Ke(lt.message||"Failed to place order")}catch(E){console.error("Error placing pending order:",E),Ke("Failed to place order. Please try again.")}qe(!1),setTimeout(()=>{Ke(""),ne("")},3e3)},qd=async E=>{var he;try{const pe=M.find(ir=>ir._id===E);if(!pe)return;const Ie=P[pe.symbol],ke=ae.find(ir=>ir.symbol===pe.symbol)||y,Ue=(Ie==null?void 0:Ie.bid)||ke.bid,We=(Ie==null?void 0:Ie.ask)||ke.ask;if(!Ue||!We||Ue===0||We===0){Ke("Price not available. Please wait for prices to load.");return}const lt=await(await fetch(`${A}/trade/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:E,bid:Ue,ask:We})})).json();lt.success?(ne(`Trade closed. P/L: $${(he=lt.realizedPnl)==null?void 0:he.toFixed(2)}`),se(),ct(),rt()):Ke(lt.message||"Failed to close trade")}catch(pe){console.error("Error closing trade:",pe),Ke("Failed to close trade")}setTimeout(()=>{Ke(""),ne("")},3e3)},ep=async E=>{try{const pe=await(await fetch(`${A}/trade/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:E})})).json();pe.success?(ne("Order cancelled"),De()):Ke(pe.message||"Failed to cancel order")}catch(he){console.error("Error cancelling order:",he),Ke("Failed to cancel order")}setTimeout(()=>{Ke(""),ne("")},3e3)},tp=E=>{var he,pe;Pe(E),gs(((he=E.sl||E.stopLoss)==null?void 0:he.toString())||""),Kt(((pe=E.tp||E.takeProfit)==null?void 0:pe.toString())||""),at(!0)},sp=async()=>{var E,he;if(console.log("handleModifyTrade called"),!Pt){console.log("No trade selected for modify"),Ke("No trade selected");return}console.log("Modifying trade:",Pt._id,"SL:",pt,"TP:",Dt),Ke("");try{const pe={tradeId:Pt._id,sl:pt?parseFloat(pt):null,tp:Dt?parseFloat(Dt):null};console.log("Request body:",JSON.stringify(pe));const Ie=await fetch(`${A}/trade/modify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});console.log("Response status:",Ie.status);const ke=await Ie.json();console.log("Response data:",ke),ke.success?(ne("Trade modified successfully"),se(),at(!1)):(console.log("Modify failed:",ke.message),(E=ke.message)!=null&&E.includes("not open")||(he=ke.message)!=null&&he.includes("not found")?(se(),Ke("This trade is no longer open. Refreshing..."),setTimeout(()=>at(!1),1500)):Ke(ke.message||"Failed to modify trade"))}catch(pe){console.error("Error modifying trade:",pe),Ke("Failed to modify trade: "+pe.message)}setTimeout(()=>{Ke(""),ne("")},3e3)},rp=E=>{we(E),Mt(!0)},ap=async()=>{Y&&(await qd(Y._id),Mt(!1))},qi=async E=>{He(E),dt(!0)},np=async()=>{const E=M.filter(he=>{const pe=P[he.symbol],Ie=ae.find(We=>We.symbol===he.symbol)||y,ke=pe?he.side==="BUY"?pe.bid:pe.ask:he.side==="BUY"?Ie.bid:Ie.ask,Ue=he.side==="BUY"?(ke-he.openPrice)*he.quantity*he.contractSize:(he.openPrice-ke)*he.quantity*he.contractSize;return Be==="profit"?Ue>0:Be==="loss"?Ue<0:!0});for(const he of E)await qd(he._id);dt(!1),ne(`Closed ${E.length} trade(s)`),setTimeout(()=>ne(""),3e3)},lp=async()=>{var E,he,pe;v(!0);try{if(a==="challenge"){const ke=await(await fetch(`${A}/prop/account/${s}`)).json();ke.success&&ke.account?(m(ke),f(ke.rules||{}),d({_id:ke.account._id,accountId:ke.account.accountId,balance:((E=ke.balance)==null?void 0:E.current)||0,equity:((he=ke.balance)==null?void 0:he.equity)||0,leverage:"1:100",accountType:"CHALLENGE",status:ke.account.status}),ee("1:100")):t("/account")}else{const Ue=(pe=(await(await fetch(`${A}/trading-accounts/user/${Te._id}`)).json()).accounts)==null?void 0:pe.find(We=>We._id===s);Ue?(d(Ue),ee(Ue.leverage||"1:100")):t("/account")}}catch(Ie){console.error("Error fetching account:",Ie)}v(!1)},ip=E=>({EURUSD:"OANDA:EURUSD",GBPUSD:"OANDA:GBPUSD",USDJPY:"OANDA:USDJPY",USDCHF:"OANDA:USDCHF",AUDUSD:"OANDA:AUDUSD",NZDUSD:"OANDA:NZDUSD",USDCAD:"OANDA:USDCAD",EURGBP:"OANDA:EURGBP",EURJPY:"OANDA:EURJPY",GBPJPY:"OANDA:GBPJPY",EURCHF:"OANDA:EURCHF",EURAUD:"OANDA:EURAUD",EURCAD:"OANDA:EURCAD",GBPAUD:"OANDA:GBPAUD",GBPCAD:"OANDA:GBPCAD",AUDCAD:"OANDA:AUDCAD",AUDJPY:"OANDA:AUDJPY",CADJPY:"OANDA:CADJPY",CHFJPY:"OANDA:CHFJPY",NZDJPY:"OANDA:NZDJPY",XAUUSD:"OANDA:XAUUSD",XAGUSD:"OANDA:XAGUSD",BTCUSD:"COINBASE:BTCUSD",ETHUSD:"COINBASE:ETHUSD",LTCUSD:"COINBASE:LTCUSD",XRPUSD:"BITSTAMP:XRPUSD",BCHUSD:"COINBASE:BCHUSD"})[E]||`OANDA:${E}`,Gi=ae.filter(E=>{const he=E.symbol.toLowerCase().includes(X.toLowerCase()),pe=R==="All"||E.category===R;return he&&pe}),op=E=>{Z.find(pe=>pe.symbol===E.symbol)||I([...Z,E]),J(E.symbol),p(E)},cp=E=>{J(E);const he=Z.find(pe=>pe.symbol===E);he&&p(he)},dp=(E,he)=>{if(E.stopPropagation(),Z.length===1)return;const pe=Z.filter(Ie=>Ie.symbol!==he);I(pe),ce===he&&(J(pe[0].symbol),p(pe[0]))},xp=()=>{const E=parseFloat(B)||0,he=y.ask||0,pe=parseInt(K==null?void 0:K.split(":")[1])||100;return(E*1e5*he/pe).toFixed(2)};return u?e.jsx("div",{className:`h-screen flex items-center justify-center ${n?"bg-black":"bg-gray-100"}`,children:e.jsx("div",{className:n?"text-white":"text-gray-900",children:"Loading..."})}):e.jsxs("div",{className:`h-screen flex overflow-hidden text-sm transition-colors duration-300 ${n?"bg-black":"bg-gray-100"}`,children:[e.jsxs("div",{className:`w-12 border-r flex flex-col items-center py-3 shrink-0 ${n?"bg-[#0a0a0a] border-gray-800":"bg-white border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/account"),className:`w-9 h-9 flex items-center justify-center rounded-lg mb-2 transition-colors ${n?"text-gray-500 hover:text-white hover:bg-[#1a1a1a]":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Home",children:e.jsx(sr,{size:20})}),e.jsx("button",{onClick:()=>h(!g),className:`w-9 h-9 flex items-center justify-center rounded-lg mb-2 transition-colors ${g?n?"text-white bg-[#1a1a1a]":"text-gray-900 bg-gray-100":n?"text-gray-500 hover:text-white hover:bg-[#1a1a1a]":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Instruments",children:e.jsx(eb,{size:20})}),e.jsx("button",{onClick:()=>t("/account"),className:`w-9 h-9 flex items-center justify-center rounded-lg mb-2 transition-colors ${n?"text-gray-500 hover:text-white hover:bg-[#1a1a1a]":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Wallet",children:e.jsx(ht,{size:20})}),e.jsx("button",{onClick:l,className:`w-9 h-9 flex items-center justify-center rounded-lg mb-2 transition-colors ${n?"text-gray-500 hover:text-white hover:bg-[#1a1a1a]":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:n?"Light Mode":"Dark Mode",children:n?e.jsx(At,{size:20,className:"text-yellow-400"}):e.jsx(Ct,{size:20})}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"w-6 h-6 rounded bg-red-500 flex items-center justify-center text-white text-xs font-bold cursor-pointer hover:bg-red-600",onClick:()=>h(!1),children:e.jsx(Se,{size:14})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[jr&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] animate-slide-down",children:e.jsx("div",{className:`px-4 py-3 text-center font-medium text-sm shadow-lg ${jr.includes("")?"bg-red-600 text-white":"bg-green-600 text-white"}`,children:jr})}),a==="challenge"&&c&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-b border-yellow-500/30 px-3 py-2 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{size:18,className:"text-yellow-500"}),e.jsxs("span",{className:"text-yellow-500 font-medium text-sm",children:[((Gd=c.challenge)==null?void 0:Gd.name)||"Challenge"," - Phase ",(Xd=c.account)==null?void 0:Xd.currentPhase,"/",(Kd=c.account)==null?void 0:Kd.totalPhases]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Daily DD: ",e.jsxs("span",{className:((Qd=c.drawdown)==null?void 0:Qd.dailyUsed)>3?"text-red-500":"text-green-500",children:[((ex=(Zd=c.drawdown)==null?void 0:Zd.dailyUsed)==null?void 0:ex.toFixed(2))||0,"%"]})," / ",((tx=c.drawdown)==null?void 0:tx.dailyMax)||5,"%"]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Overall DD: ",e.jsxs("span",{className:((sx=c.drawdown)==null?void 0:sx.overallUsed)>6?"text-red-500":"text-green-500",children:[((ax=(rx=c.drawdown)==null?void 0:rx.overallUsed)==null?void 0:ax.toFixed(2))||0,"%"]})," / ",((nx=c.drawdown)==null?void 0:nx.overallMax)||10,"%"]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Profit: ",e.jsxs("span",{className:"text-green-500",children:[((ix=(lx=c.profit)==null?void 0:lx.currentPercent)==null?void 0:ix.toFixed(2))||0,"%"]})," / ",((ox=c.profit)==null?void 0:ox.targetPercent)||8,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[((cx=c.time)==null?void 0:cx.remainingDays)||0," days left"]}),(b==null?void 0:b.stopLossMandatory)&&e.jsxs("span",{className:"bg-red-500/20 text-red-400 text-xs px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Wi,{size:12})," SL Required"]})]})]}),e.jsxs("header",{className:`border-b shrink-0 ${n?"bg-black border-gray-800":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`h-8 flex items-center px-2 sm:px-3 ${ge?"border-b border-gray-800/50":""}`,children:[e.jsx("span",{className:`font-medium text-sm sm:text-base shrink-0 ${n?"text-white":"text-gray-900"}`,children:y.symbol}),e.jsxs("span",{className:`ml-2 sm:ml-3 text-xs shrink-0 ${a==="challenge"?"text-yellow-500":"text-teal-400"}`,children:[a==="challenge"?"Challenge":"Standard",!ge&&` - ${i==null?void 0:i.accountId}`]}),e.jsxs("span",{className:`ml-2 sm:ml-3 text-xs shrink-0 ${n?"text-gray-400":"text-gray-600"}`,children:["Bal: ",e.jsxs("span",{className:n?"text-white":"text-gray-900",children:["$",((dx=Fe.balance)==null?void 0:dx.toFixed(2))||"0.00"]})]}),e.jsx("div",{className:"flex-1 min-w-2"}),e.jsx("span",{className:"text-red-500 font-mono text-xs sm:text-sm shrink-0 mr-1 sm:mr-2",children:(xx=y.bid)==null?void 0:xx.toFixed(2)}),e.jsx("span",{className:"text-green-500 font-mono text-xs sm:text-sm shrink-0",children:(ux=y.ask)==null?void 0:ux.toFixed(2)})]}),e.jsxs("div",{className:`${ge?"h-9 px-2 flex items-center justify-between":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w(!x),className:"bg-teal-500 hover:bg-teal-600 text-white text-xs px-3 py-1.5 rounded",children:"Order"}),e.jsxs("button",{onClick:()=>L?Jd():dl(),onContextMenu:E=>{E.preventDefault(),L||Rt(!0)},className:`text-xs px-3 py-1.5 rounded flex items-center gap-1 ${L?"bg-red-600 hover:bg-red-700 text-white animate-pulse":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[" ",L?nr:"Kill"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>w(!x),className:"p-1.5 text-gray-400 hover:text-white",children:e.jsx(fr,{size:16})}),e.jsx("button",{onClick:l,className:`p-1.5 rounded transition-colors ${n?"text-yellow-400":"text-blue-500"}`,children:n?e.jsx(At,{size:16}):e.jsx(Ct,{size:16})})]})]})]}),!ge&&e.jsxs("div",{className:`h-8 border-b flex items-center justify-end px-3 gap-2 shrink-0 ${n?"bg-black/50 border-gray-800":"bg-gray-50 border-gray-200"}`,children:[e.jsx("button",{onClick:()=>w(!x),className:"bg-teal-500 hover:bg-teal-600 text-white text-xs px-3 py-1 rounded",children:"New Order"}),e.jsxs("button",{onClick:()=>L?Jd():dl(),onContextMenu:E=>{E.preventDefault(),L||Rt(!0)},className:`text-xs px-3 py-1 rounded flex items-center gap-1 ${L?"bg-red-600 hover:bg-red-700 text-white animate-pulse":"bg-orange-500 hover:bg-orange-600 text-white"}`,title:L?`Click to deactivate (${nr} left)`:"Click: Activate 30min | Right-click: Custom duration",children:[" ",L?nr:"Kill Switch"]}),e.jsx("button",{onClick:()=>w(!x),className:"text-gray-400 hover:text-white",children:e.jsx(fr,{size:16})}),e.jsx("button",{onClick:l,className:`p-1 rounded transition-colors ${n?"text-yellow-400 hover:text-yellow-300":"text-blue-500 hover:text-blue-400"}`,title:n?"Switch to Light Mode":"Switch to Dark Mode",children:n?e.jsx(At,{size:16}):e.jsx(Ct,{size:16})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g&&e.jsxs("div",{className:`${ge?"absolute inset-0 z-20":"w-[280px]"} border-r flex flex-col shrink-0 ${n?"bg-[#0d0d0d] border-gray-800":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`px-3 py-3 border-b flex items-center justify-between ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-gray-900"}`,children:"Instruments"}),e.jsx("button",{onClick:()=>h(!1),className:n?"text-gray-500 hover:text-white":"text-gray-400 hover:text-gray-900",children:e.jsx(Se,{size:16})})]}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search instruments",value:X,onChange:E=>F(E.target.value),className:`w-full rounded pl-9 pr-3 py-2 text-sm placeholder-gray-500 focus:outline-none border ${n?"bg-[#1a1a1a] border-gray-700 text-white focus:border-gray-600":"bg-gray-50 border-gray-300 text-gray-900 focus:border-gray-400"}`})]})}),e.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 border-b overflow-x-auto ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("button",{className:"text-gray-600 hover:text-yellow-500 shrink-0",children:e.jsx(ba,{size:14})}),U.map(E=>e.jsx("button",{onClick:()=>W(E),className:`px-2 py-1 rounded text-xs font-medium transition-colors shrink-0 ${R===E?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:E},E))]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:Ve?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading instruments..."})}):Gi.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No instruments found"})}):Gi.map(E=>{var he,pe;return e.jsxs("button",{onClick:()=>op(E),className:`w-full px-3 py-2.5 my-1 flex items-center rounded-lg border transition-colors ${y.symbol===E.symbol?n?"bg-[#1a1a1a] border-blue-500":"bg-blue-50 border-blue-500":n?"border-gray-700 hover:border-gray-600 hover:bg-[#1a1a1a]":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(ba,{size:12,className:`shrink-0 mr-2 ${E.starred?"text-yellow-500 fill-yellow-500":"text-gray-700"}`}),e.jsxs("div",{className:"text-left min-w-[55px]",children:[e.jsx("div",{className:`text-xs font-medium ${n?"text-white":"text-gray-900"}`,children:E.symbol}),e.jsxs("div",{className:"text-green-500 text-[10px]",children:["+",((he=E.change)==null?void 0:he.toFixed(2))||"0.00","%"]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-right w-16",children:[e.jsx("div",{className:"text-red-500 text-xs font-mono",children:E.bid>0?E.bid.toFixed(E.bid>100?2:5):"..."}),e.jsx("div",{className:"text-gray-600 text-[9px]",children:"Bid"})]}),e.jsx("div",{className:"bg-[#2a2a2a] px-1.5 py-0.5 rounded text-cyan-400 text-[10px] font-medium min-w-[28px] text-center mx-2",children:((pe=Me[E.symbol])==null?void 0:pe.spread)>0?E.symbol.includes("JPY")?(Me[E.symbol].spread*100).toFixed(1):E.bid>100?Me[E.symbol].spread.toFixed(2):(Me[E.symbol].spread*1e4).toFixed(1):E.spread>0?E.symbol.includes("JPY")?(E.spread*100).toFixed(1):E.bid>100?E.spread.toFixed(2):(E.spread*1e4).toFixed(1):"-"}),e.jsxs("div",{className:"text-right w-14",children:[e.jsx("div",{className:"text-green-500 text-xs font-mono",children:E.ask>0?E.ask.toFixed(E.ask>100?2:5):"..."}),e.jsx("div",{className:"text-gray-600 text-[9px]",children:"Ask"})]})]},E.symbol)})}),e.jsxs("div",{className:"px-3 py-2 border-t border-gray-800 flex items-center justify-between shrink-0",children:[e.jsxs("span",{className:"text-gray-500 text-xs",children:[Gi.length," instruments"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-500 text-xs",children:"Live"})]})]})]}),e.jsxs("div",{className:`flex-1 flex flex-col min-w-0 ${n?"bg-[#0d0d0d]":"bg-gray-50"}`,children:[e.jsxs("div",{className:`h-9 border-b flex items-center px-2 shrink-0 gap-1 ${n?"bg-[#0d0d0d] border-gray-800":"bg-white border-gray-200"}`,children:[Z.map(E=>e.jsxs("div",{onClick:()=>cp(E.symbol),className:`flex items-center gap-2 px-3 py-1.5 rounded cursor-pointer transition-colors ${ce===E.symbol?"bg-blue-600 text-white":n?"bg-[#1a1a1a] text-gray-400 hover:bg-[#252525] hover:text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-900"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:E.symbol}),Z.length>1&&e.jsx("button",{onClick:he=>dp(he,E.symbol),className:"hover:text-red-400 ml-1",children:e.jsx(Se,{size:12})})]},E.symbol)),e.jsx("button",{className:`ml-1 p-1.5 rounded ${n?"text-gray-500 hover:text-white hover:bg-[#1a1a1a]":"text-gray-400 hover:text-gray-900 hover:bg-gray-100"}`,children:e.jsx(ut,{size:16})})]}),e.jsx("div",{className:`flex-1 min-h-0 relative ${n?"bg-[#0d0d0d]":"bg-white"}`,children:e.jsx("iframe",{src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_chart&symbol=${ip(y.symbol)}&interval=5&hidesidetoolbar=0&hidetoptoolbar=0&symboledit=1&saveimage=1&toolbarbg=${n?"0d0d0d":"ffffff"}&studies=[]&theme=${n?"dark":"light"}&style=1&timezone=Etc%2FUTC&withdateranges=1&showpopupbutton=1&studies_overrides={}&overrides={}&enabled_features=["left_toolbar","header_widget"]&disabled_features=[]&locale=en&utm_source=localhost&utm_medium=widget_new&utm_campaign=chart&hide_side_toolbar=0`,style:{width:"100%",height:"100%",border:"none"},allowFullScreen:!0,title:"TradingView Chart"},`${y.symbol}-${n}`)}),e.jsxs("div",{className:`${ge?"h-32":"h-44"} border-t flex flex-col shrink-0 ${n?"bg-[#0d0d0d] border-gray-800":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`h-10 flex items-center justify-between px-2 sm:px-4 border-b overflow-x-auto ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"flex gap-2 sm:gap-6",children:[{name:"Positions",count:M.length},{name:"Pending",count:Ae.length},{name:"History",count:Ce.length},{name:"Cancelled",count:0}].map(E=>e.jsx("button",{onClick:()=>re(E.name),className:`text-xs sm:text-sm whitespace-nowrap ${D===E.name?n?"text-white":"text-gray-900":"text-gray-500 hover:text-white"}`,children:ge?`${E.name.split(" ")[0]}(${E.count})`:`${E.name}(${E.count})`},E.name))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 shrink-0",children:[e.jsx("span",{className:`text-xs ${n?"text-gray-400":"text-gray-600"}`,children:"One Click"}),e.jsx("button",{onClick:()=>q(!O),className:`w-10 h-5 rounded-full relative transition-colors ${O?"bg-blue-600":n?"bg-gray-600":"bg-gray-400"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${O?"left-5":"left-0.5"}`})}),O&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>an("SELL"),disabled:et,className:"w-8 h-8 rounded-full bg-red-500 text-white text-sm font-bold hover:bg-red-600 transition-colors disabled:opacity-50",children:"S"}),e.jsx("input",{type:"text",value:B,onChange:E=>G(E.target.value),className:`w-14 h-7 rounded text-center text-sm font-medium focus:outline-none focus:border-blue-500 ${n?"bg-[#1a1a1a] border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"}`}),e.jsx("button",{onClick:()=>an("BUY"),disabled:et,className:"w-8 h-8 rounded-full bg-blue-500 text-white text-sm font-bold hover:bg-blue-600 transition-colors disabled:opacity-50",children:"B"})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["P/L: ",e.jsxs("span",{className:Fe.floatingPnl>=0?"text-green-500":"text-red-500",children:[Fe.floatingPnl>=0?"+":"","$",((mx=Fe.floatingPnl)==null?void 0:mx.toFixed(2))||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[D==="Positions"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:`text-gray-500 border-b sticky top-0 ${n?"border-gray-800 bg-[#0d0d0d]":"border-gray-200 bg-white"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Time"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Side"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Entry"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Current"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"SL"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"TP"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Charges"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Swap"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"P/L"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Action"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-8 text-gray-500",children:"No open positions"})}):M.map(E=>{var We,ft;const he=P[E.symbol],pe=ae.find(lt=>lt.symbol===E.symbol)||y,Ie=he?E.side==="BUY"?he.bid:he.ask:E.side==="BUY"?pe.bid:pe.ask,ke=E.side==="BUY"?(Ie-E.openPrice)*E.quantity*E.contractSize:(E.openPrice-Ie)*E.quantity*E.contractSize,Ue=lt=>lt?E.symbol.includes("JPY")?lt.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(E.symbol)?lt.toFixed(2):["XAGUSD"].includes(E.symbol)?lt.toFixed(4):lt.toFixed(5):"-";return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(E.openedAt).toLocaleTimeString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:E.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${E.side==="BUY"?"text-blue-400":"text-red-400"}`,children:E.side}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:Ue(E.openPrice)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:Ue(Ie)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.stopLoss?Ue(E.stopLoss):"-"}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.takeProfit?Ue(E.takeProfit):"-"}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((We=E.commission)==null?void 0:We.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((ft=E.swap)==null?void 0:ft.toFixed(2))||"0.00"]}),e.jsxs("td",{className:`py-2 px-3 text-xs font-medium ${ke>=0?"text-green-400":"text-red-400"}`,children:["$",ke.toFixed(2)]}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>tp(E),className:"p-1.5 bg-blue-500/20 text-blue-400 rounded hover:bg-blue-500/30 transition-colors",title:"Modify SL/TP",children:e.jsx(Lc,{size:12})}),e.jsx("button",{onClick:()=>rp(E),className:"p-1.5 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors",title:"Close Trade",children:e.jsx(Se,{size:12})})]})})]},E._id)})})]}),D==="History"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800 sticky top-0 bg-[#0d0d0d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Closed"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Side"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Entry"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Close"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Charges"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Swap"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"P/L"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Closed By"})]})}),e.jsx("tbody",{children:Ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-8 text-gray-500",children:"No trade history"})}):Ce.map(E=>{var pe,Ie,ke;const he=Ue=>Ue?E.symbol.includes("JPY")?Ue.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(E.symbol)?Ue.toFixed(2):["XAGUSD"].includes(E.symbol)?Ue.toFixed(4):Ue.toFixed(5):"-";return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(E.closedAt).toLocaleString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:E.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${E.side==="BUY"?"text-blue-400":"text-red-400"}`,children:E.side}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:he(E.openPrice)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:he(E.closePrice)}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((pe=E.commission)==null?void 0:pe.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((Ie=E.swap)==null?void 0:Ie.toFixed(2))||"0.00"]}),e.jsxs("td",{className:`py-2 px-3 text-xs font-medium ${E.realizedPnl>=0?"text-green-400":"text-red-400"}`,children:["$",((ke=E.realizedPnl)==null?void 0:ke.toFixed(2))||"0.00"]}),e.jsx("td",{className:"py-2 px-3 text-xs text-gray-400",children:E.closedBy||"USER"})]},E._id)})})]}),D==="Pending"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800 sticky top-0 bg-[#0d0d0d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Time"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Price"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"SL"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"TP"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Action"})]})}),e.jsx("tbody",{children:Ae.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:"No pending orders"})}):Ae.map(E=>{var he;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(E.createdAt).toLocaleTimeString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:E.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${E.orderType.includes("BUY")?"text-blue-400":"text-red-400"}`,children:E.orderType}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:(he=E.pendingPrice)==null?void 0:he.toFixed(5)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.stopLoss||"-"}),e.jsx("td",{className:"py-2 px-3 text-xs",children:E.takeProfit||"-"}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("button",{onClick:()=>ep(E._id),className:"p-1.5 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors",title:"Cancel Order",children:e.jsx(Se,{size:12})})})]},E._id)})})]}),D==="Cancelled"&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No cancelled orders"})]})]})]}),x&&e.jsxs("div",{className:`${ge?"absolute inset-0 z-20":"w-72"} border-l flex flex-col shrink-0 ${n?"bg-[#0d0d0d] border-gray-800":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:`px-4 py-4 border-b flex items-center justify-between ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("span",{className:`text-base font-medium ${n?"text-white":"text-gray-900"}`,children:[y.symbol," order"]}),e.jsx("button",{onClick:()=>w(!1),className:n?"text-gray-500 hover:text-white":"text-gray-400 hover:text-gray-900",children:e.jsx(Se,{size:18})})]}),e.jsxs("div",{className:`flex border-b ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("button",{onClick:()=>C("Market"),className:`flex-1 py-3 text-sm font-medium ${z==="Market"?(n?"text-white":"text-gray-900")+" border-b-2 border-blue-500":"text-gray-500"}`,children:"Market"}),e.jsx("button",{onClick:()=>C("Pending"),className:`flex-1 py-3 text-sm font-medium ${z==="Pending"?(n?"text-white":"text-gray-900")+" border-b-2 border-blue-500":"text-gray-500"}`,children:"Pending"})]}),z==="Market"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:`flex items-center justify-between rounded px-3 py-2 mb-3 border ${n?"bg-[#1a1a1a] border-gray-700":"bg-gray-50 border-gray-300"}`,children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Leverage"}),e.jsxs("select",{value:K,onChange:E=>ee(E.target.value),className:"bg-transparent text-yellow-500 font-semibold text-sm focus:outline-none cursor-pointer",children:[e.jsx("option",{value:"1:10",className:"bg-dark-800",children:"1:10"}),e.jsx("option",{value:"1:20",className:"bg-dark-800",children:"1:20"}),e.jsx("option",{value:"1:50",className:"bg-dark-800",children:"1:50"}),e.jsx("option",{value:"1:100",className:"bg-dark-800",children:"1:100"}),e.jsx("option",{value:"1:200",className:"bg-dark-800",children:"1:200"}),e.jsx("option",{value:"1:500",className:"bg-dark-800",children:"1:500"}),e.jsx("option",{value:"1:1000",className:"bg-dark-800",children:"1:1000"}),e.jsx("option",{value:"1:2000",className:"bg-dark-800",children:"1:2000"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>an("SELL"),disabled:et,className:"flex-1 rounded py-3 text-center transition-colors bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"text-white text-[10px] font-medium",children:"SELL"}),e.jsx("div",{className:"text-white font-mono text-lg font-bold",children:(hx=y.symbol)!=null&&hx.includes("JPY")?(px=y.bid)==null?void 0:px.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(y.symbol)?(gx=y.bid)==null?void 0:gx.toFixed(2):(fx=y.bid)==null?void 0:fx.toFixed(5)})]}),e.jsxs("button",{onClick:()=>an("BUY"),disabled:et,className:"flex-1 rounded py-3 text-center transition-colors bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"text-white text-[10px] font-medium",children:"BUY"}),e.jsx("div",{className:"text-white font-mono text-lg font-bold",children:(yx=y.symbol)!=null&&yx.includes("JPY")?(bx=y.ask)==null?void 0:bx.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(y.symbol)?(jx=y.ask)==null?void 0:jx.toFixed(2):(Nx=y.ask)==null?void 0:Nx.toFixed(5)})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>j("SELL"),className:`flex-1 rounded py-1.5 text-center text-xs transition-colors ${T==="SELL"?"bg-red-500/20 border border-red-500 text-red-400":n?"bg-[#1a1a1a] border border-gray-600 text-gray-400 hover:border-red-500/50":"bg-gray-50 border border-gray-300 text-gray-600 hover:border-red-500/50"}`,children:"Sell Side"}),e.jsx("button",{onClick:()=>j("BUY"),className:`flex-1 rounded py-1.5 text-center text-xs transition-colors ${T==="BUY"?"bg-blue-500/20 border border-blue-500 text-blue-400":n?"bg-[#1a1a1a] border border-gray-600 text-gray-400 hover:border-blue-500/50":"bg-gray-50 border border-gray-300 text-gray-600 hover:border-blue-500/50"}`,children:"Buy Side"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:`text-xs mb-1 block ${n?"text-white":"text-gray-900"}`,children:"Volume"}),e.jsxs("div",{className:`flex items-center rounded border ${n?"bg-[#1a1a1a] border-gray-700":"bg-gray-50 border-gray-300"}`,children:[e.jsx("button",{onClick:()=>G(Math.max(.01,parseFloat(B)-.01).toFixed(2)),className:`px-3 py-2 border-r ${n?"text-gray-400 hover:text-white border-gray-700":"text-gray-600 hover:text-gray-900 border-gray-300"}`,children:e.jsx(ur,{size:14})}),e.jsx("input",{type:"text",value:B,onChange:E=>G(E.target.value),className:`flex-1 bg-transparent text-center text-sm font-medium focus:outline-none py-2 ${n?"text-white":"text-gray-900"}`}),e.jsx("button",{onClick:()=>G((parseFloat(B)+.01).toFixed(2)),className:`px-3 py-2 border-l ${n?"text-gray-400 hover:text-white border-gray-700":"text-gray-600 hover:text-gray-900 border-gray-300"}`,children:e.jsx(ut,{size:14})})]}),e.jsxs("div",{className:"text-right text-gray-500 text-[10px] mt-1",children:[B," lot"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-gray-400 text-xs mb-1",children:["Leverage (Max: ",(i==null?void 0:i.leverage)||"1:100",")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:K,onChange:E=>ee(E.target.value),className:`flex-1 rounded px-3 py-2 text-sm focus:outline-none border ${n?"bg-[#1a1a1a] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`,children:(()=>{const E=parseInt(((i==null?void 0:i.leverage)||"1:100").replace("1:",""))||100,he=[50,100,200,500,1e3,2e3,5e3].filter(pe=>pe<=E);return he.includes(E)||he.push(E),he.sort((pe,Ie)=>pe-Ie).map(pe=>e.jsxs("option",{value:`1:${pe}`,children:["1:",pe]},pe))})()}),e.jsxs("div",{className:`rounded px-3 py-2 text-green-500 text-sm font-medium border ${n?"bg-[#1a1a1a] border-gray-700":"bg-gray-50 border-gray-300"}`,children:["$",(()=>{const E=parseInt(K.replace("1:",""))||100,he=["BTCUSD","ETHUSD","LTCUSD","XRPUSD"].includes(y.symbol)?1:y.symbol==="XAUUSD"?100:y.symbol==="XAGUSD"?5e3:1e5;return(parseFloat(B||0)*he*(y.ask||0)/E).toFixed(2)})()]})]}),e.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:["Margin Required | Free: $",((vx=Fe.freeMargin)==null?void 0:vx.toFixed(2))||"0.00"]}),e.jsxs("div",{className:"text-blue-400 text-[10px] mt-0.5",children:["Buying Power: $",(()=>{const E=parseInt(K.replace("1:",""))||100;return((Fe.equity||0)*E).toLocaleString()})()]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>xe(!le),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-green-500 text-sm",children:"Take profit"}),e.jsx(ut,{size:16,className:`text-green-500 transition-transform ${le?"rotate-45":""}`})]}),le&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"text",value:H,onChange:E=>be(E.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-green-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-green-500"}),e.jsx("input",{type:"text",placeholder:"Pips",className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>je(!ze),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-red-500 text-sm",children:"Stop loss"}),e.jsx(ut,{size:16,className:`text-red-500 transition-transform ${ze?"rotate-45":""}`})]}),ze&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"text",value:ue,onChange:E=>$(E.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-red-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-red-500"}),e.jsx("input",{type:"text",placeholder:"Pips",className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none"})]})]}),e.jsxs("div",{className:`rounded p-3 mb-3 ${n?"bg-[#1a1a1a]":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-2 ${n?"text-white":"text-gray-900"}`,children:"Trading Charges"}),e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Spread"}),e.jsx("span",{className:n?"text-white":"text-gray-900",children:"10 pips"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Commission"}),e.jsx("span",{className:n?"text-white":"text-gray-900",children:"$0.10 ($10/lot)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Margin Required"}),e.jsxs("span",{className:`text-base font-semibold ${n?"text-white":"text-gray-900"}`,children:["$",xp()]})]})]}),Re&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-red-500/20 border border-red-500 rounded text-red-400 text-xs text-center",children:Re}),gt&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-green-500/20 border border-green-500 rounded text-green-400 text-xs text-center",children:gt}),e.jsxs("div",{className:`p-3 border-t ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("button",{onClick:()=>an(T),disabled:et,className:`w-full py-3 rounded font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${T==="BUY"?"bg-blue-600/20 border border-blue-600 hover:bg-blue-600/30 text-blue-400":"bg-red-600/20 border border-red-600 hover:bg-red-600/30 text-red-400"}`,children:et?"Executing...":`Open ${T} Order`}),e.jsxs("div",{className:"text-center text-gray-500 text-xs mt-2",children:[B," lots @ ",T==="BUY"?(wx=y.ask)==null?void 0:wx.toFixed(2):(kx=y.bid)==null?void 0:kx.toFixed(2)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"Order type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["BUY LIMIT","SELL LIMIT","BUY STOP","SELL STOP"].map(E=>e.jsx("button",{onClick:()=>de(E),className:`py-2 rounded text-xs font-medium transition-colors ${V===E?E.includes("BUY")?"bg-blue-600 text-white":"bg-red-600 text-white":E.includes("BUY")?n?"bg-[#1a1a1a] border border-blue-500/30 text-blue-400 hover:bg-blue-500/10":"bg-gray-50 border border-blue-500/30 text-blue-600 hover:bg-blue-500/10":n?"bg-[#1a1a1a] border border-red-500/30 text-red-400 hover:bg-red-500/10":"bg-gray-50 border border-red-500/30 text-red-600 hover:bg-red-500/10"}`,children:E},E))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Entry price"}),e.jsx("input",{type:"text",value:fe,onChange:E=>me(E.target.value),placeholder:"Enter price",className:`w-full rounded px-3 py-2.5 text-sm focus:outline-none border ${n?"bg-[#1a1a1a] border-gray-700 text-white focus:border-gray-600":"bg-gray-50 border-gray-300 text-gray-900 focus:border-gray-400"}`})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Order volume"}),e.jsxs("div",{className:`flex items-center rounded border ${n?"bg-[#1a1a1a] border-gray-700":"bg-gray-50 border-gray-300"}`,children:[e.jsx("input",{type:"text",value:B,onChange:E=>G(E.target.value),className:`flex-1 bg-transparent text-center text-sm font-medium focus:outline-none py-2 ${n?"text-white":"text-gray-900"}`}),e.jsx("button",{onClick:()=>G(Math.max(.01,parseFloat(B)-.01).toFixed(2)),className:`px-3 py-2 border-l ${n?"text-gray-400 hover:text-white border-gray-700":"text-gray-600 hover:text-gray-900 border-gray-300"}`,children:e.jsx(ur,{size:14})}),e.jsx("button",{onClick:()=>G((parseFloat(B)+.01).toFixed(2)),className:`px-3 py-2 border-l ${n?"text-gray-400 hover:text-white border-gray-700":"text-gray-600 hover:text-gray-900 border-gray-300"}`,children:e.jsx(ut,{size:14})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-gray-400 text-xs mb-1",children:["Leverage (Max: ",(i==null?void 0:i.leverage)||"1:100",")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:K,onChange:E=>ee(E.target.value),className:`flex-1 rounded px-3 py-2 text-sm focus:outline-none border ${n?"bg-[#1a1a1a] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`,children:(()=>{const E=parseInt(((i==null?void 0:i.leverage)||"1:100").replace("1:",""))||100,he=[50,100,200,500,1e3,2e3,5e3].filter(pe=>pe<=E);return he.includes(E)||he.push(E),he.sort((pe,Ie)=>pe-Ie).map(pe=>e.jsxs("option",{value:`1:${pe}`,children:["1:",pe]},pe))})()}),e.jsx("div",{className:`rounded px-3 py-2 text-green-500 text-sm border ${n?"bg-[#1a1a1a] border-gray-700":"bg-gray-50 border-gray-300"}`,children:"$0"})]}),e.jsx("div",{className:"text-gray-500 text-[10px] mt-1",children:"Trading power: $0.00  100 = $0"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>xe(!le),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-green-500 text-sm",children:"Take profit"}),e.jsx(ut,{size:16,className:`text-green-500 transition-transform ${le?"rotate-45":""}`})]}),le&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsx("input",{type:"text",value:H,onChange:E=>be(E.target.value),placeholder:"Price",className:`flex-1 rounded px-3 py-2 text-sm focus:outline-none border border-green-500/50 focus:border-green-500 ${n?"bg-[#1a1a1a] text-white":"bg-gray-50 text-gray-900"}`})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>je(!ze),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-red-500 text-sm",children:"Stop loss"}),e.jsx(ut,{size:16,className:`text-red-500 transition-transform ${ze?"rotate-45":""}`})]}),ze&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsx("input",{type:"text",value:ue,onChange:E=>$(E.target.value),placeholder:"Price",className:`flex-1 rounded px-3 py-2 text-sm focus:outline-none border border-red-500/50 focus:border-red-500 ${n?"bg-[#1a1a1a] text-white":"bg-gray-50 text-gray-900"}`})})]}),e.jsxs("div",{className:`rounded p-3 mb-3 ${n?"bg-[#1a1a1a]":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("div",{className:`text-xs font-medium mb-2 ${n?"text-white":"text-gray-900"}`,children:"Trading Charges"}),e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Spread"}),e.jsx("span",{className:n?"text-white":"text-gray-900",children:"10 pips"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Commission"}),e.jsx("span",{className:n?"text-white":"text-gray-900",children:"$0.10 ($10/lot)"})]})]})]}),Re&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-red-500/20 border border-red-500 rounded text-red-400 text-xs text-center",children:Re}),gt&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-green-500/20 border border-green-500 rounded text-green-400 text-xs text-center",children:gt}),e.jsxs("div",{className:`p-3 border-t ${n?"border-gray-800":"border-gray-200"}`,children:[e.jsx("button",{onClick:Zh,disabled:et,className:"w-full bg-blue-600/20 border border-blue-600 hover:bg-blue-600/30 text-blue-400 py-3 rounded font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:et?"Placing...":`Place ${V}`}),e.jsxs("div",{className:"text-center text-gray-500 text-xs mt-2",children:[B," lots @ ",fe||"--.--"]})]})]})]})]}),e.jsxs("footer",{className:`h-6 border-t flex items-center px-2 sm:px-3 text-[10px] sm:text-xs shrink-0 overflow-x-auto ${n?"bg-black border-gray-800":"bg-white border-gray-200"}`,children:[e.jsx("span",{className:`font-medium shrink-0 ${n?"text-white":"text-gray-900"}`,children:y.symbol}),e.jsxs("span",{className:"text-gray-500 ml-2 sm:ml-4 shrink-0",children:["Bal: ",e.jsxs("span",{className:n?"text-white":"text-gray-900",children:["$",((Sx=Fe.balance)==null?void 0:Sx.toFixed(2))||"0.00"]})]}),!ge&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Credit: ",e.jsxs("span",{className:"text-purple-400",children:["$",((Cx=Fe.credit)==null?void 0:Cx.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Eq: ",e.jsxs("span",{className:Fe.floatingPnl>=0?"text-green-500":"text-red-500",children:["$",((Tx=Fe.equity)==null?void 0:Tx.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Margin: ",e.jsxs("span",{className:"text-yellow-500",children:["$",((Ex=Fe.usedMargin)==null?void 0:Ex.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Free: ",e.jsxs("span",{className:Fe.freeMargin>=0?"text-blue-400":"text-red-500",children:["$",((Px=Fe.freeMargin)==null?void 0:Px.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"flex-1"}),!ge&&e.jsxs("span",{className:"text-gray-400 shrink-0",children:["Standard - ",i==null?void 0:i.accountId]}),e.jsxs("span",{className:"text-green-500 ml-2 sm:ml-3 shrink-0 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]})]}),Et&&Pt&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",onClick:()=>at(!1),children:e.jsxs("div",{className:"w-full sm:w-96 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",onClick:E=>E.stopPropagation(),children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Modify Trade"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[Pt.symbol,"  ",Pt.side,"  ",Pt.quantity," lots"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[Re&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-400 text-sm",children:Re}),gt&&e.jsx("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3 text-green-400 text-sm",children:gt}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Stop Loss"}),e.jsx("input",{type:"number",value:pt,onChange:E=>gs(E.target.value),placeholder:"Enter stop loss price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-red-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Take Profit"}),e.jsx("input",{type:"number",value:Dt,onChange:E=>Kt(E.target.value),placeholder:"Enter take profit price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-green-500 transition-colors"})]})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{type:"button",onClick:async E=>{E.preventDefault(),E.stopPropagation(),console.log("Save Changes clicked, trade:",Pt==null?void 0:Pt._id),await sp()},className:"w-full py-4 text-blue-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors cursor-pointer active:bg-[#3c3c3e]",children:"Save Changes"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>at(!1),className:"w-full py-4 text-gray-400 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),Ss&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-80 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Close Trade?"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:[Y.symbol,"  ",Y.side,"  ",Y.quantity," lots"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"This action cannot be undone"})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:ap,className:"w-full py-4 text-red-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Trade"})}),M.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsxs("button",{onClick:()=>{Mt(!1),qi("all")},className:"w-full py-4 text-orange-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:["Close All (",M.length,")"]})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>{Mt(!1),qi("profit")},className:"w-full py-4 text-green-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Profit"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>{Mt(!1),qi("loss")},className:"w-full py-4 text-red-400 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Loss"})})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>Mt(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),Ms&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-80 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:[Be==="all"&&"Close All Trades?",Be==="profit"&&"Close Winning Trades?",Be==="loss"&&"Close Losing Trades?"]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:[Be==="all"&&`This will close all ${M.length} open trade(s)`,Be==="profit"&&"This will close all trades currently in profit",Be==="loss"&&"This will close all trades currently in loss"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"This action cannot be undone"})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsxs("button",{onClick:np,className:`w-full py-4 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors ${Be==="profit"?"text-green-500":Be==="loss"?"text-red-500":"text-orange-500"}`,children:[Be==="all"&&"Close All",Be==="profit"&&"Close Winners",Be==="loss"&&"Close Losers"]})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>dt(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),Qt&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-96 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center border-b border-gray-700/50",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Kill Switch"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Block all trading for a set period to prevent emotional decisions"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Duration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"999",value:Ir.value,onChange:E=>cs(he=>({...he,value:parseInt(E.target.value)||1})),className:"flex-1 bg-[#2c2c2e] text-white px-3 py-2 rounded-lg text-center text-lg font-mono"}),e.jsxs("select",{value:Ir.unit,onChange:E=>cs(he=>({...he,unit:E.target.value})),className:"bg-[#2c2c2e] text-white px-3 py-2 rounded-lg",children:[e.jsx("option",{value:"seconds",children:"Seconds"}),e.jsx("option",{value:"minutes",children:"Minutes"}),e.jsx("option",{value:"hours",children:"Hours"}),e.jsx("option",{value:"days",children:"Days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Quick Select"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>cs({value:30,unit:"seconds"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"30s"}),e.jsx("button",{onClick:()=>cs({value:5,unit:"minutes"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"5m"}),e.jsx("button",{onClick:()=>cs({value:30,unit:"minutes"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"30m"}),e.jsx("button",{onClick:()=>cs({value:1,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"1h"}),e.jsx("button",{onClick:()=>cs({value:4,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"4h"}),e.jsx("button",{onClick:()=>cs({value:12,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"12h"}),e.jsx("button",{onClick:()=>cs({value:1,unit:"days"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"1d"}),e.jsx("button",{onClick:()=>cs({value:7,unit:"days"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"7d"})]})]}),e.jsx("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-orange-400 text-xs",children:" Once activated, you won't be able to open new trades until the timer expires. You can still close existing trades."})})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:Cs,className:"w-full py-4 text-red-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors",children:"Activate Kill Switch"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>Rt(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},Ej=()=>{var Mt,Ms,dt,Pt,Pe;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState(!1),[l,i]=o.useState("discover"),[d,c]=o.useState([]),[m,b]=o.useState([]),[f,u]=o.useState([]),[v,k]=o.useState([]),[N,y]=o.useState([]),[p,g]=o.useState(null),[h,x]=o.useState(null),[w,z]=o.useState(!0),[C,B]=o.useState(!1),[G,K]=o.useState(null),[ee,X]=o.useState("FIXED_LOT"),[F,R]=o.useState("0.01"),[W,D]=o.useState(""),[re,O]=o.useState([]),[q,T]=o.useState(""),[j,Z]=o.useState(""),[I,ce]=o.useState(0),[J,le]=o.useState(!1),[xe,ze]=o.useState(null),[je,H]=o.useState(!1),[be,ue]=o.useState({displayName:"",description:"",tradingAccountId:"",requestedCommissionPercentage:10,minimumFollowerDeposit:0}),[$,V]=o.useState(!1),[de,fe]=o.useState(window.innerWidth<768),[me,ae]=o.useState(!1),[ve,Ve]=o.useState(null),[Le,S]=o.useState(""),[ie,ge]=o.useState("FIXED_LOT"),[Ee,M]=o.useState("0.01"),Q=JSON.parse(localStorage.getItem("user")||"{}"),Ae=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}];o.useEffect(()=>{const Y=()=>fe(window.innerWidth<768);return window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]),o.useEffect(()=>{et(),qe(),Re(),Ke(),gt(),Fe(),ne()},[]),o.useEffect(()=>{xe!=null&&xe._id&&(te(),Ce())},[xe]);const te=async()=>{if(xe!=null&&xe._id)try{const we=await(await fetch(`${A}/copy/my-followers/${xe._id}`)).json();k(we.followers||[])}catch(Y){console.error("Error fetching my followers:",Y)}},Ce=async()=>{if(xe!=null&&xe._id)try{const we=await(await fetch(`${A}/copy/master/commissions/${xe._id}`)).json();we.success&&(y(we.commissions||[]),g(we.totals),x(we.masterStats))}catch(Y){console.error("Error fetching commissions:",Y)}},$e=async()=>{if(!(xe!=null&&xe._id)||!(h!=null&&h.pendingCommission))return;const Y=h.pendingCommission;if(Y<10){alert("Minimum withdrawal amount is $10");return}if(confirm(`Withdraw $${Y.toFixed(2)} commission to your wallet?`))try{const Be=await(await fetch(`${A}/copy/master/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({masterId:xe._id,amount:Y})})).json();Be.message?(alert("Commission withdrawn successfully!"),Ce(),Fe()):alert(Be.message||"Failed to withdraw")}catch(we){console.error("Error withdrawing:",we),alert("Failed to withdraw commission")}},et=async()=>{try{const we=await(await fetch(`${A}/prop/status`)).json();we.success&&le(we.enabled)}catch(Y){console.error("Error:",Y)}},qe=async()=>{try{const we=await(await fetch(`${A}/copy/masters`)).json();c(we.masters||[])}catch(Y){console.error("Error fetching masters:",Y)}z(!1)},Re=async()=>{try{const we=await(await fetch(`${A}/copy/my-subscriptions/${Q._id}`)).json();b(we.subscriptions||[])}catch(Y){console.error("Error fetching subscriptions:",Y)}},Ke=async()=>{try{const we=await(await fetch(`${A}/copy/my-copy-trades/${Q._id}?limit=50`)).json();u(we.copyTrades||[])}catch(Y){console.error("Error fetching copy trades:",Y)}},gt=async()=>{var Y;try{const Be=await(await fetch(`${A}/trading-accounts/user/${Q._id}`)).json();O(Be.accounts||[]),((Y=Be.accounts)==null?void 0:Y.length)>0&&(T(Be.accounts[0]._id),ue(He=>({...He,tradingAccountId:Be.accounts[0]._id})))}catch(we){console.error("Error fetching accounts:",we)}},ne=async()=>{var Y;try{const Be=await(await fetch(`${A}/wallet/${Q._id}`)).json();ce(((Y=Be.wallet)==null?void 0:Y.balance)||0)}catch(we){console.error("Error fetching wallet balance:",we)}},Fe=async()=>{try{const we=await(await fetch(`${A}/copy/master/my-profile/${Q._id}`)).json();we.master&&ze(we.master)}catch{console.log("No master profile found")}},st=async()=>{const Y=be.tradingAccountId||(re.length>0?re[0]._id:"");if(!be.displayName.trim()){alert("Please enter a display name");return}if(!Y){alert("Please select a trading account");return}const we={...be,tradingAccountId:Y};V(!0);try{const He=await(await fetch(`${A}/copy/master/apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Q._id,...we})})).json();He.master?(alert("Application submitted successfully! Please wait for admin approval."),H(!1),Fe()):alert(He.message||"Failed to submit application")}catch(Be){console.error("Error applying as master:",Be),alert("Failed to submit application")}V(!1)},P=async()=>{if(!G)return;const Y=parseFloat(W)||0,we=G.minimumFollowerDeposit||0;if(Y<we){alert(`Minimum deposit of $${we} required to follow this master`);return}if(Y>I){alert(`Insufficient wallet balance. You have $${I}, need $${Y}`);return}try{const He=await(await fetch(`${A}/copy/follow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followerUserId:Q._id,masterId:G._id,depositAmount:Y,copyMode:ee,copyValue:parseFloat(F)})})).json();He.success?(alert(`Successfully following ${G.displayName}! A copy trading account has been created with $${Y} credit.`),B(!1),D(""),Re(),ne(),gt()):He.code==="INSUFFICIENT_WALLET"?alert(`Insufficient wallet balance. You have $${He.current}, need $${He.required}`):He.code==="INSUFFICIENT_DEPOSIT"?alert(`Minimum deposit of $${He.required} required. You entered $${He.provided}`):alert(He.message||"Failed to follow")}catch(Be){console.error("Error following master:",Be),alert("Failed to follow master")}},oe=async(Y,we)=>{const Be=we==="ACTIVE"?"pause":"resume";try{(await(await fetch(`${A}/copy/follow/${Y}/${Be}`,{method:"PUT"})).json()).follower&&Re()}catch(He){console.error("Error updating subscription:",He)}},Me=Y=>{var we,Be;Ve(Y),S(((we=Y.followerAccountId)==null?void 0:we._id)||Y.followerAccountId||""),ge(Y.copyMode||"FIXED_LOT"),M(((Be=Y.copyValue)==null?void 0:Be.toString())||"0.01"),ae(!0)},Ye=async()=>{if(ve)try{const we=await(await fetch(`${A}/copy/follow/${ve._id}/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({followerAccountId:Le,copyMode:ie,copyValue:parseFloat(Ee)})})).json();we.success||we.follower?(alert("Subscription updated successfully!"),ae(!1),Ve(null),Re()):alert(we.message||"Failed to update subscription")}catch(Y){console.error("Error updating subscription:",Y),alert("Failed to update subscription")}},Et=async Y=>{if(confirm("Are you sure you want to unfollow this master? This will stop all future copy trades."))try{const Be=await(await fetch(`${A}/copy/follow/${Y}/unfollow`,{method:"DELETE"})).json();Be.success?(alert("Successfully unfollowed master"),Re()):alert(Be.message||"Failed to unfollow")}catch(we){console.error("Error unfollowing:",we),alert("Failed to unfollow master")}},at=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},Ss=d.filter(Y=>{var we;return(we=Y.displayName)==null?void 0:we.toLowerCase().includes(j.toLowerCase())});return e.jsxs("div",{className:`min-h-screen flex flex-col md:flex-row transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[de&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Copy Trading"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!de&&e.jsxs("aside",{className:`${a?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:Ae.map(Y=>e.jsxs("button",{onClick:()=>t(Y.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${Y.name==="Copytrade"?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(Y.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium",children:Y.name})]},Y.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),a&&e.jsx("span",{className:"text-sm",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:at,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${de?"pt-14":""}`,children:[!de&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Copy Trading"})}),e.jsxs("div",{className:`${de?"p-4":"p-6"}`,children:[!xe&&e.jsx("div",{className:`bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl ${de?"p-4":"p-5"} border border-yellow-500/30 mb-4`,children:e.jsxs("div",{className:`${de?"flex flex-col gap-3":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${de?"w-10 h-10":"w-12 h-12"} bg-yellow-500/20 rounded-full flex items-center justify-center`,children:e.jsx(Pl,{size:de?20:24,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-white font-semibold ${de?"text-sm":""}`,children:"Become a Master Trader"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Share your trades and earn commission"})]})]}),e.jsxs("button",{onClick:()=>H(!0),className:`bg-yellow-500 text-black ${de?"px-4 py-2 text-sm w-full":"px-6 py-2"} rounded-lg font-medium hover:bg-yellow-400 flex items-center justify-center gap-2`,children:[e.jsx(Pl,{size:16}),"Apply Now"]})]})}),xe&&e.jsxs("div",{className:`rounded-xl ${de?"p-4":"p-5"} border mb-4 ${xe.status==="ACTIVE"?"bg-green-500/10 border-green-500/30":xe.status==="PENDING"?"bg-yellow-500/10 border-yellow-500/30":xe.status==="REJECTED"?"bg-red-500/10 border-red-500/30":"bg-gray-500/10 border-gray-500/30"}`,children:[e.jsxs("div",{className:`${de?"flex flex-col gap-3":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${de?"w-10 h-10":"w-12 h-12"} rounded-full flex items-center justify-center ${xe.status==="ACTIVE"?"bg-green-500/20":xe.status==="PENDING"?"bg-yellow-500/20":"bg-red-500/20"}`,children:e.jsx(Pl,{size:de?20:24,className:xe.status==="ACTIVE"?"text-green-500":xe.status==="PENDING"?"text-yellow-500":"text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-white font-semibold ${de?"text-sm":""}`,children:xe.displayName}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[e.jsx("span",{className:xe.status==="ACTIVE"?"text-green-500":xe.status==="PENDING"?"text-yellow-500":"text-red-500",children:xe.status}),xe.status==="ACTIVE"&&`  ${((Mt=xe.stats)==null?void 0:Mt.activeFollowers)||0} followers`]})]})]}),xe.status==="ACTIVE"&&e.jsx("div",{className:de?"":"text-right",children:e.jsxs("p",{className:"text-gray-400 text-xs",children:["Commission: ",e.jsxs("span",{className:"text-white font-semibold",children:[xe.approvedCommissionPercentage,"%"]})]})})]}),xe.status==="REJECTED"&&xe.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-xs mt-2",children:["Reason: ",xe.rejectionReason]})]}),e.jsx("div",{className:`flex ${de?"gap-2 overflow-x-auto pb-2":"gap-4"} mb-4`,children:["discover","subscriptions","trades",...(xe==null?void 0:xe.status)==="ACTIVE"?["my-followers","commissions"]:[]].map(Y=>e.jsx("button",{onClick:()=>i(Y),className:`${de?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2"} rounded-lg font-medium transition-colors ${l===Y?"bg-accent-green text-black":s?"bg-dark-800 text-gray-400 hover:text-white":"bg-white text-gray-600 hover:text-gray-900 border border-gray-200"}`,children:Y==="discover"?"Discover":Y==="subscriptions"?"Subscriptions":Y==="trades"?"Trades":Y==="my-followers"?"Followers":"Commissions"},Y))}),l==="discover"&&e.jsxs("div",{children:[e.jsx("div",{className:`flex ${de?"gap-2":"gap-4"} mb-4`,children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search masters...",value:j,onChange:Y=>Z(Y.target.value),className:`w-full rounded-lg pl-9 pr-3 ${de?"py-2 text-sm":"py-2"} ${s?"bg-dark-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} border`})]})}),w?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading masters..."}):Ss.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xt,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No master traders available yet"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Check back later for trading experts to follow"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ss.map(Y=>{var Be,He,pt,gs,Dt,Kt,Qt;const we=m.some(Rt=>{var L;return((L=Rt.masterId)==null?void 0:L._id)===Y._id||Rt.masterId===Y._id});return e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-5 border`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-bold",children:(Be=Y.displayName)==null?void 0:Be.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:Y.displayName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[((He=Y.stats)==null?void 0:He.activeFollowers)||0," followers"]})]}),we&&e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-500 text-xs rounded-full font-medium",children:"Following"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-lg p-3`,children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Win Rate"}),e.jsxs("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:[((gs=(pt=Y.stats)==null?void 0:pt.winRate)==null?void 0:gs.toFixed(1))||0,"%"]})]}),e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-lg p-3`,children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Trades"}),e.jsx("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:((Dt=Y.stats)==null?void 0:Dt.totalTrades)||0})]}),e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-lg p-3`,children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Commission"}),e.jsxs("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:[Y.totalCommissionPercentage||Y.approvedCommissionPercentage||0,"%"]})]}),e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-lg p-3`,children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Profit"}),e.jsxs("p",{className:"text-accent-green font-semibold",children:["$",((Qt=(Kt=Y.stats)==null?void 0:Kt.totalProfitGenerated)==null?void 0:Qt.toFixed(2))||"0.00"]})]})]}),Y.minimumFollowerDeposit>0&&e.jsx("div",{className:"mb-3 px-3 py-2 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsxs("p",{className:"text-yellow-500 text-xs font-medium",children:["Min. Deposit Required: $",Y.minimumFollowerDeposit]})}),we?e.jsx("button",{onClick:()=>i("subscriptions"),className:"w-full bg-green-500/20 text-green-500 py-2 rounded-lg font-medium border border-green-500/50 hover:bg-green-500/30",children:" Following"}):e.jsx("button",{onClick:()=>{K(Y),B(!0)},className:"w-full bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90",children:"Follow"})]},Y._id)})})]}),l==="subscriptions"&&e.jsx("div",{children:m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"You're not following any masters yet"}),e.jsx("button",{onClick:()=>i("discover"),className:"mt-4 text-accent-green hover:underline",children:"Discover Masters "})]}):e.jsx("div",{className:"space-y-4",children:m.map(Y=>{var we,Be,He,pt,gs,Dt,Kt,Qt,Rt,L,Zt;return e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-5 border`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-bold",children:(Be=(we=Y.masterId)==null?void 0:we.displayName)==null?void 0:Be.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:(He=Y.masterId)==null?void 0:He.displayName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[Y.copyMode==="FIXED_LOT"&&`Fixed: ${Y.copyValue} lots`,Y.copyMode==="BALANCE_BASED"&&"Balance Based",Y.copyMode==="EQUITY_BASED"&&"Equity Based",Y.copyMode==="MULTIPLIER"&&`Multiplier: ${Y.copyValue}x`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Y.status==="ACTIVE"?"bg-green-500/20 text-green-500":Y.status==="PAUSED"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:Y.status}),e.jsx("button",{onClick:()=>Me(Y),className:"p-2 bg-dark-700 rounded-lg hover:bg-blue-500/20",title:"Edit Settings",children:e.jsx(ba,{size:16,className:"text-blue-500"})}),e.jsx("button",{onClick:()=>oe(Y._id,Y.status),className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",title:Y.status==="ACTIVE"?"Pause":"Resume",children:Y.status==="ACTIVE"?e.jsx(nb,{size:16,className:"text-yellow-500"}):e.jsx(ib,{size:16,className:"text-green-500"})}),e.jsx("button",{onClick:()=>Et(Y._id),className:"p-2 bg-dark-700 rounded-lg hover:bg-red-500/20",title:"Unfollow",children:e.jsx(Se,{size:16,className:"text-red-500"})})]})]}),e.jsxs("div",{className:`grid grid-cols-2 sm:grid-cols-5 gap-3 mt-4 pt-4 border-t ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Trades"}),e.jsx("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:((pt=Y.stats)==null?void 0:pt.totalCopiedTrades)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Open / Closed"}),e.jsxs("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:[e.jsx("span",{className:"text-blue-400",children:((gs=Y.stats)==null?void 0:gs.openTrades)||0})," / ",e.jsx("span",{className:"text-gray-400",children:((Dt=Y.stats)==null?void 0:Dt.closedTrades)||0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Profit"}),e.jsxs("p",{className:"text-green-500 font-semibold",children:["+$",(((Kt=Y.stats)==null?void 0:Kt.totalProfit)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Loss"}),e.jsxs("p",{className:"text-red-500 font-semibold",children:["-$",(((Qt=Y.stats)==null?void 0:Qt.totalLoss)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Net P&L"}),e.jsxs("p",{className:`font-semibold ${(((Rt=Y.stats)==null?void 0:Rt.netPnl)||0)>=0?"text-green-500":"text-red-500"}`,children:[(((L=Y.stats)==null?void 0:L.netPnl)||0)>=0?"+":"","$",(((Zt=Y.stats)==null?void 0:Zt.netPnl)||0).toFixed(2)]})]})]})]},Y._id)})})}),l==="trades"&&e.jsx("div",{children:f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xt,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No copy trades yet"})]}):e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-dark-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Master"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Symbol"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Side"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Lots"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Open Price"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Close Price"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"P/L"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Status"})]})}),e.jsx("tbody",{children:f.map(Y=>{var we,Be,He,pt;return e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:((we=Y.masterId)==null?void 0:we.displayName)||"-"}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:Y.symbol}),e.jsx("td",{className:`px-4 py-3 text-sm ${Y.side==="BUY"?"text-green-500":"text-red-500"}`,children:Y.side}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:Y.followerLotSize}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:(Be=Y.followerOpenPrice)==null?void 0:Be.toFixed(5)}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:((He=Y.followerClosePrice)==null?void 0:He.toFixed(5))||"-"}),e.jsxs("td",{className:`px-4 py-3 text-sm font-medium ${Y.followerPnl>=0?"text-green-500":"text-red-500"}`,children:["$",((pt=Y.followerPnl)==null?void 0:pt.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${Y.status==="OPEN"?"bg-blue-500/20 text-blue-500":Y.status==="CLOSED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:Y.status})})]},Y._id)})})]})})}),l==="my-followers"&&(xe==null?void 0:xe.status)==="ACTIVE"&&e.jsx("div",{children:v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No followers yet"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Share your profile to attract followers"})]}):e.jsx("div",{className:"space-y-4",children:v.map(Y=>{var we,Be,He,pt,gs,Dt,Kt,Qt,Rt,L,Zt,Ls,Us;return e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-5 border`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:((Be=(we=Y.followerId)==null?void 0:we.firstName)==null?void 0:Be.charAt(0))||"U"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:[(He=Y.followerId)==null?void 0:He.firstName," ",(pt=Y.followerId)==null?void 0:pt.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:(gs=Y.followerId)==null?void 0:gs.email}),e.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:[Y.copyMode==="FIXED_LOT"&&`Fixed: ${Y.copyValue} lots`,Y.copyMode==="BALANCE_BASED"&&"Balance Based",Y.copyMode==="EQUITY_BASED"&&"Equity Based",Y.copyMode==="MULTIPLIER"&&`Multiplier: ${Y.copyValue}x`]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Y.status==="ACTIVE"?"bg-green-500/20 text-green-500":Y.status==="PAUSED"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:Y.status}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Account: ",(Dt=Y.followerAccountId)==null?void 0:Dt.accountId]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Copied Trades"}),e.jsx("p",{className:"text-white font-semibold",children:((Kt=Y.stats)==null?void 0:Kt.totalCopiedTrades)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Their Profit"}),e.jsxs("p",{className:"text-accent-green font-semibold",children:["$",((Rt=(Qt=Y.stats)==null?void 0:Qt.totalProfit)==null?void 0:Rt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Their Loss"}),e.jsxs("p",{className:"text-red-500 font-semibold",children:["$",((Zt=(L=Y.stats)==null?void 0:L.totalLoss)==null?void 0:Zt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Commission Earned"}),e.jsxs("p",{className:"text-purple-400 font-semibold",children:["$",((Us=(Ls=Y.stats)==null?void 0:Ls.totalCommissionPaid)==null?void 0:Us.toFixed(2))||"0.00"]})]})]})]},Y._id)})})}),l==="commissions"&&(xe==null?void 0:xe.status)==="ACTIVE"&&e.jsxs("div",{children:[e.jsxs("div",{className:`grid ${de?"grid-cols-2":"grid-cols-4"} gap-4 mb-6`,children:[e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Pending Commission"}),e.jsxs("p",{className:"text-purple-400 text-xl font-bold",children:["$",((Ms=h==null?void 0:h.pendingCommission)==null?void 0:Ms.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Total Earned"}),e.jsxs("p",{className:"text-accent-green text-xl font-bold",children:["$",((dt=h==null?void 0:h.totalCommissionEarned)==null?void 0:dt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Total Withdrawn"}),e.jsxs("p",{className:`text-xl font-bold ${s?"text-white":"text-gray-900"}`,children:["$",((Pt=h==null?void 0:h.totalCommissionWithdrawn)==null?void 0:Pt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-4 border`,children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Your Commission Rate"}),e.jsxs("p",{className:"text-blue-400 text-xl font-bold",children:[(xe==null?void 0:xe.approvedCommissionPercentage)||0,"%"]})]})]}),(h==null?void 0:h.pendingCommission)>=10&&e.jsx("div",{className:`${s?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"} rounded-xl p-4 border mb-6`,children:e.jsxs("div",{className:`flex ${de?"flex-col gap-3":"items-center justify-between"}`,children:[e.jsxs("div",{children:[e.jsxs("p",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:["You have $",h.pendingCommission.toFixed(2)," available to withdraw"]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Minimum withdrawal: $10"})]}),e.jsxs("button",{onClick:$e,className:"bg-purple-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-purple-600 flex items-center gap-2",children:[e.jsx(wt,{size:16}),"Withdraw to Wallet"]})]})}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border`,children:[e.jsxs("div",{className:`px-5 py-4 border-b ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Commission History"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Daily profit share from your followers"})]}),N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(wt,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No commission records yet"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Commission is calculated daily from followers' profits"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-dark-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Date"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Follower"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Daily Profit"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Rate"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Your Share"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Status"})]})}),e.jsx("tbody",{children:N.map(Y=>{var we,Be,He,pt;return e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:Y.tradingDay}),e.jsxs("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:[((we=Y.followerUserId)==null?void 0:we.firstName)||"User"," ",((Be=Y.followerUserId)==null?void 0:Be.lastName)||""]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-accent-green font-medium",children:["$",(He=Y.dailyProfit)==null?void 0:He.toFixed(2)]}),e.jsxs("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[Y.commissionPercentage,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-purple-400 font-medium",children:["$",(pt=Y.masterShare)==null?void 0:pt.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${Y.status==="DEDUCTED"?"bg-green-500/20 text-green-500":Y.status==="SETTLED"?"bg-blue-500/20 text-blue-500":Y.status==="FAILED"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:Y.status})})]},Y._id)})})]})})]}),e.jsxs("div",{className:`mt-6 ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-5 border`,children:[e.jsx("h4",{className:`font-semibold mb-3 ${s?"text-white":"text-gray-900"}`,children:"How Commission Works"}),e.jsxs("ul",{className:"text-gray-500 text-sm space-y-2",children:[e.jsx("li",{children:" Commission is calculated daily based on your followers' profits"}),e.jsxs("li",{children:[" Your rate: ",e.jsxs("span",{className:"text-purple-400 font-medium",children:[xe==null?void 0:xe.approvedCommissionPercentage,"%"]})," of daily profit"]}),e.jsx("li",{children:" Commission is only charged when followers make profit"}),e.jsx("li",{children:" Minimum withdrawal amount is $10"}),e.jsx("li",{children:" Withdrawals are transferred to your wallet instantly"})]})]})]})]})]}),C&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Follow ",G.displayName]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-600",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Your Wallet Balance"}),e.jsxs("span",{className:"text-white font-bold text-lg",children:["$",I.toFixed(2)]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Deposit Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:W,onChange:Y=>D(Y.target.value),min:G.minimumFollowerDeposit||0,placeholder:`Min: $${G.minimumFollowerDeposit||0}`,className:"w-full pl-8 pr-4 py-3 bg-dark-700 border border-gray-600 rounded-lg text-white text-lg focus:outline-none focus:border-accent-green"})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"This amount will be deducted from your wallet and added as credit to your copy trading account"}),G.minimumFollowerDeposit>0&&e.jsxs("p",{className:"text-yellow-500 text-xs mt-1",children:["Minimum deposit required: $",G.minimumFollowerDeposit]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Copy Mode"}),e.jsxs("select",{value:ee,onChange:Y=>{X(Y.target.value),Y.target.value==="FIXED_LOT"?R("0.01"):Y.target.value==="MULTIPLIER"?R("1"):R("10")},className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"FIXED_LOT",children:"Fixed Lot Size"}),e.jsx("option",{value:"BALANCE_BASED",children:"Balance Based (Proportional)"}),e.jsx("option",{value:"EQUITY_BASED",children:"Equity Based (Proportional)"}),e.jsx("option",{value:"MULTIPLIER",children:"Multiplier"})]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[ee==="FIXED_LOT"&&"Use a fixed lot size for every copied trade",ee==="BALANCE_BASED"&&"Lot = Master Lot  (Your Credit / Master Balance)",ee==="EQUITY_BASED"&&"Lot = Master Lot  (Your Equity / Master Equity)",ee==="MULTIPLIER"&&"Lot = Master Lot  Your Multiplier"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:ee==="FIXED_LOT"?"Lot Size":ee==="MULTIPLIER"?"Multiplier Value":"Max Lot Size"}),e.jsx("input",{type:"number",value:F,onChange:Y=>R(Y.target.value),min:ee==="MULTIPLIER"?"0.1":"0.01",step:ee==="MULTIPLIER"?"0.1":"0.01",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:e.jsxs("p",{className:"text-gray-400 text-sm",children:["Commission: ",e.jsxs("span",{className:"text-white",children:[G.totalCommissionPercentage||G.approvedCommissionPercentage,"%"]})," of daily profit"]})}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-blue-400 text-sm font-medium mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-blue-400/80 text-xs space-y-1",children:[e.jsx("li",{children:" A new Copy Trading account will be created for you"}),e.jsx("li",{children:" Your deposit goes to Credit (non-withdrawable)"}),e.jsx("li",{children:" Profits from copied trades go to Balance (withdrawable)"}),e.jsx("li",{children:" Losses and commissions are deducted from Credit"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{B(!1),D("")},className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:!W||parseFloat(W)<(G.minimumFollowerDeposit||0),className:"flex-1 bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Deposit & Follow"})]})]})}),je&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx(Pl,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Become a Master Trader"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Share your trades with followers"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Display Name *"}),e.jsx("input",{type:"text",value:be.displayName,onChange:Y=>ue(we=>({...we,displayName:Y.target.value})),placeholder:"Your trading name",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Description"}),e.jsx("textarea",{value:be.description,onChange:Y=>ue(we=>({...we,description:Y.target.value})),placeholder:"Tell followers about your trading strategy...",rows:3,className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Trading Account *"}),e.jsxs("select",{value:be.tradingAccountId||(re.length>0?re[0]._id:""),onChange:Y=>ue(we=>({...we,tradingAccountId:Y.target.value})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[re.length===0&&e.jsx("option",{value:"",children:"No accounts available"}),re.map(Y=>{var we;return e.jsxs("option",{value:Y._id,children:[Y.accountId," - $",(we=Y.balance)==null?void 0:we.toFixed(2)]},Y._id)})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Trades from this account will be copied to followers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Requested Commission (%)"}),e.jsx("input",{type:"number",value:be.requestedCommissionPercentage,onChange:Y=>ue(we=>({...we,requestedCommissionPercentage:parseFloat(Y.target.value)||0})),min:"0",max:"50",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Commission you'll earn from followers' daily profits (0-50%)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Minimum Follower Deposit ($)"}),e.jsx("input",{type:"number",value:be.minimumFollowerDeposit,onChange:Y=>ue(we=>({...we,minimumFollowerDeposit:parseFloat(Y.target.value)||0})),min:"0",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Minimum balance required for followers to copy you (0 = no minimum)"})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:"Requirements:"}),e.jsxs("ul",{className:"text-gray-400 text-xs space-y-1",children:[e.jsx("li",{children:" Minimum account balance may be required"}),e.jsx("li",{children:" Trading history will be reviewed"}),e.jsx("li",{children:" Admin approval is required"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>H(!1),className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:st,disabled:$,className:"flex-1 bg-yellow-500 text-black py-2 rounded-lg font-medium hover:bg-yellow-400 disabled:opacity-50",children:$?"Submitting...":"Submit Application"})]})]})}),me&&ve&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Edit Subscription"}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Following: ",(Pe=ve.masterId)==null?void 0:Pe.displayName]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Trading Account"}),e.jsx("select",{value:Le,onChange:Y=>S(Y.target.value),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:re.map(Y=>{var we;return e.jsxs("option",{value:Y._id,children:[Y.accountId," - $",(we=Y.balance)==null?void 0:we.toFixed(2)]},Y._id)})}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Change the account where trades will be copied"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Copy Mode"}),e.jsxs("select",{value:ie,onChange:Y=>{ge(Y.target.value),Y.target.value==="FIXED_LOT"?M("0.01"):Y.target.value==="MULTIPLIER"?M("1"):M("10")},className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"FIXED_LOT",children:"Fixed Lot Size"}),e.jsx("option",{value:"BALANCE_BASED",children:"Balance Based (Proportional)"}),e.jsx("option",{value:"EQUITY_BASED",children:"Equity Based (Proportional)"}),e.jsx("option",{value:"MULTIPLIER",children:"Multiplier"})]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[ie==="FIXED_LOT"&&"Use a fixed lot size for every copied trade",ie==="BALANCE_BASED"&&"Lot = Master Lot  (Your Balance / Master Balance)",ie==="EQUITY_BASED"&&"Lot = Master Lot  (Your Equity / Master Equity)",ie==="MULTIPLIER"&&"Lot = Master Lot  Your Multiplier"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:ie==="FIXED_LOT"?"Lot Size":ie==="MULTIPLIER"?"Multiplier Value":"Max Lot Size"}),e.jsx("input",{type:"number",value:Ee,onChange:Y=>M(Y.target.value),min:ie==="MULTIPLIER"?"0.1":"0.01",step:ie==="MULTIPLIER"?"0.1":"0.01",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[ie==="FIXED_LOT"&&"Each copied trade will use this fixed lot size",ie==="BALANCE_BASED"&&"Maximum lot size limit for proportional calculation",ie==="EQUITY_BASED"&&"Maximum lot size limit for proportional calculation",ie==="MULTIPLIER"&&"Multiply master lot by this value"]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{ae(!1),Ve(null)},className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:Ye,className:"flex-1 bg-blue-500 text-white py-2 rounded-lg font-medium hover:bg-blue-600",children:"Save Changes"})]})]})})]})},Pj=()=>{var je,H,be,ue,$,V,de,fe,me,ae,ve,Ve,Le,S,ie,ge,Ee,M,Q,Ae,te,Ce,$e,et,qe,Re,Ke,gt,ne,Fe,st;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState(!1),[l,i]=o.useState("overview"),[d,c]=o.useState(null),[m,b]=o.useState([]),[f,u]=o.useState([]),[v,k]=o.useState([]),[N,y]=o.useState(!0),[p,g]=o.useState(!1),[h,x]=o.useState(""),[w,z]=o.useState(!1),[C,B]=o.useState(window.innerWidth<768),[G,K]=o.useState(null),[ee,X]=o.useState({entryFeeEnabled:!1,entryFee:0}),[F,R]=o.useState(null),W=JSON.parse(localStorage.getItem("user")||"{}"),D=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}];o.useEffect(()=>{const P=()=>B(window.innerWidth<768);return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),o.useEffect(()=>{q(),T(),re();const P=setInterval(()=>{T()},15e3);return()=>clearInterval(P)},[]);const re=async()=>{try{const oe=await(await fetch(`${A}/ib/entry-fee-settings`)).json();oe.success&&(X({entryFeeEnabled:oe.entryFeeEnabled,entryFee:oe.entryFee}),oe.entryFeeEnabled&&oe.entryFee>0&&O())}catch(P){console.error("Error fetching entry fee settings:",P)}},O=async()=>{try{const oe=await(await fetch(`${A}/ib/check-eligibility/${W._id}`)).json();oe.success&&R(oe)}catch(P){console.error("Error checking eligibility:",P)}},q=async()=>{try{const oe=await(await fetch(`${A}/prop/status`)).json();oe.success&&z(oe.enabled)}catch(P){console.error("Error fetching challenge status:",P)}},T=async()=>{var P,oe,Me,Ye;try{const at=await(await fetch(`${A}/ib/my-profile/${W._id}`)).json();at.ibUser&&(c({...at.ibUser,ibWalletBalance:((P=at.wallet)==null?void 0:P.balance)||0,totalCommissionEarned:((oe=at.wallet)==null?void 0:oe.totalEarned)||0,pendingWithdrawal:((Me=at.wallet)==null?void 0:Me.pendingWithdrawal)||0,totalWithdrawn:((Ye=at.wallet)==null?void 0:Ye.totalWithdrawn)||0,stats:at.stats||{}}),at.levelProgress&&K(at.levelProgress),(at.ibUser.status==="ACTIVE"||at.ibUser.ibStatus==="ACTIVE")&&(j(),Z(),I()))}catch(Et){console.error("Error fetching IB profile:",Et)}y(!1)},j=async()=>{try{const oe=await(await fetch(`${A}/ib/my-referrals/${W._id}`)).json();b(oe.referrals||[])}catch(P){console.error("Error fetching referrals:",P)}},Z=async()=>{try{const oe=await(await fetch(`${A}/ib/my-commissions/${W._id}`)).json();u(oe.commissions||[])}catch(P){console.error("Error fetching commissions:",P)}},I=async()=>{var P;try{const Me=await(await fetch(`${A}/ib/my-downline/${W._id}`)).json();k(((P=Me.tree)==null?void 0:P.downlines)||[])}catch(oe){console.error("Error fetching downline:",oe)}},ce=async()=>{if(ee.entryFeeEnabled&&ee.entryFee>0&&F&&!F.eligible){alert(`Insufficient wallet balance. You need $${ee.entryFee} to become an IB. Please deposit funds first.`),t("/wallet");return}g(!0);try{const oe=await(await fetch(`${A}/ib/apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:W._id})})).json();if(oe.code==="INSUFFICIENT_BALANCE"){alert(`Insufficient wallet balance. You need $${oe.entryFee} to become an IB. Your current balance is $${oe.walletBalance}. Please deposit $${oe.shortfall.toFixed(2)} more.`),t("/wallet"),g(!1);return}if(oe.success||oe.ibUser||oe.user){const Me=oe.ibUser||oe.user||{};c({...Me,status:Me.ibStatus||"PENDING",ibStatus:Me.ibStatus||"PENDING"});const Ye=ee.entryFeeEnabled&&ee.entryFee>0?` Entry fee of $${ee.entryFee} has been deducted from your wallet.`:"";alert(`IB application submitted successfully!${Ye}`),setTimeout(()=>T(),500)}else alert(oe.message||"Failed to apply")}catch(P){console.error("Error applying:",P),alert("Failed to submit application")}g(!1)},J=async()=>{if(!h||parseFloat(h)<=0){alert("Please enter a valid amount");return}try{const oe=await(await fetch(`${A}/ib/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:W._id,amount:parseFloat(h)})})).json();oe.status?(alert(oe.message),x(""),T()):alert(oe.message||"Failed to withdraw")}catch(P){console.error("Error withdrawing:",P),alert("Failed to process withdrawal")}},le=()=>{const P=`${window.location.origin}/user/signup?ref=${d==null?void 0:d.referralCode}`;navigator.clipboard.writeText(P),alert("Referral link copied!")},xe=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},ze=(P,oe=0)=>!P||P.length===0?null:P.map((Me,Ye)=>{var Et;return e.jsx("div",{className:"ml-4 border-l border-gray-700 pl-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${Me.isIB?"bg-accent-green/20":"bg-gray-700"}`,children:e.jsx("span",{className:Me.isIB?"text-accent-green":"text-gray-400",children:((Et=Me.firstName)==null?void 0:Et.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:Me.firstName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:Me.email})]}),e.jsx("div",{className:"ml-auto text-right",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${Me.isIB?"bg-accent-green/20 text-accent-green":"bg-gray-700 text-gray-400"}`,children:[Me.isIB?"IB":"User","  Level ",(Me.level||0)+1]})})]})},Me._id||Ye)});return e.jsxs("div",{className:`min-h-screen flex flex-col md:flex-row transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[C&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"IB Program"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!C&&e.jsxs("aside",{className:`${a?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:D.map(P=>e.jsxs("button",{onClick:()=>t(P.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${P.name==="IB"?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(P.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium",children:P.name})]},P.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),a&&e.jsx("span",{className:"text-sm",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:xe,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${C?"pt-14":""}`,children:[!C&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Introducing Broker (IB)"})}),e.jsx("div",{className:`${C?"p-4":"p-6"}`,children:N?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):d?d.status==="PENDING"||d.ibStatus==="PENDING"?e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(El,{size:C?32:40,className:"text-yellow-500"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Application Pending"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your IB application is under review. You will be notified once approved."})]}):d.status==="REJECTED"||d.ibStatus==="REJECTED"?e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(El,{size:C?32:40,className:"text-red-500"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Application Rejected"}),e.jsx("p",{className:"text-gray-400 mb-2 text-sm",children:"Unfortunately, your IB application was not approved."}),d.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Reason: ",d.rejectionReason]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:`grid ${C?"grid-cols-2 gap-3":"grid-cols-4 gap-4"} mb-4`,children:[e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-5"} border`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-accent-green/20 rounded-lg flex items-center justify-center`,children:e.jsx(wt,{size:C?16:20,className:"text-accent-green"})})}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Available Balance"}),e.jsxs("p",{className:`font-bold ${C?"text-lg":"text-2xl"} ${s?"text-white":"text-gray-900"}`,children:["$",((be=d.ibWalletBalance)==null?void 0:be.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-5"} border`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-blue-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(xt,{size:C?16:20,className:"text-blue-500"})})}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Total Earned"}),e.jsxs("p",{className:`font-bold ${C?"text-lg":"text-2xl"} ${s?"text-white":"text-gray-900"}`,children:["$",((ue=d.totalCommissionEarned)==null?void 0:ue.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-5"} border`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-purple-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(ot,{size:C?16:20,className:"text-purple-500"})})}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Direct Referrals"}),e.jsx("p",{className:`font-bold ${C?"text-lg":"text-2xl"} ${s?"text-white":"text-gray-900"}`,children:(($=d.stats)==null?void 0:$.directReferrals)||0})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-5"} border`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-orange-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(db,{size:C?16:20,className:"text-orange-500"})})}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Total Downline"}),e.jsx("p",{className:`font-bold ${C?"text-lg":"text-2xl"} ${s?"text-white":"text-gray-900"}`,children:((V=d.stats)==null?void 0:V.totalDownline)||0})]})]}),e.jsxs("div",{className:`grid ${C?"grid-cols-1 gap-3":"grid-cols-2 gap-4"} mb-4`,children:[e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-4":"p-5"} border`,children:[e.jsx("p",{className:`text-sm mb-2 ${s?"text-gray-400":"text-gray-600"}`,children:"Your Commission Rate"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`font-bold text-3xl ${s?"text-white":"text-gray-900"}`,children:["$",((de=G==null?void 0:G.currentLevel)==null?void 0:de.commissionRate)||2,e.jsx("span",{className:"text-lg font-normal text-gray-500",children:"/lot"})]}),e.jsxs("p",{className:`text-sm mt-1 ${s?"text-gray-500":"text-gray-600"}`,children:["Level: ",e.jsx("span",{className:s?"text-white":"text-gray-900",children:((fe=G==null?void 0:G.currentLevel)==null?void 0:fe.name)||"Standard"})]})]}),e.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:{backgroundColor:`${((me=G==null?void 0:G.currentLevel)==null?void 0:me.color)||"#10B981"}20`},children:e.jsx(wt,{size:28,style:{color:((ae=G==null?void 0:G.currentLevel)==null?void 0:ae.color)||"#10B981"}})})]}),e.jsx("p",{className:`text-xs mt-3 ${s?"text-gray-600":"text-gray-500"}`,children:"Earn commission on every trade your referrals make."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 rounded-xl p-5",children:[e.jsx("p",{className:"text-white/80 text-sm mb-1",children:"Your Referral Link"}),e.jsxs("p",{className:"text-white text-sm font-mono mb-1 truncate",children:[window.location.origin,"/user/signup?ref=",d.referralCode]}),e.jsxs("p",{className:"text-white/60 text-xs mb-3",children:["Code: ",e.jsx("span",{className:"text-white font-bold",children:d.referralCode})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:le,className:"flex-1 bg-white/20 hover:bg-white/30 text-white py-2 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Xt,{size:16}),"Copy Link"]}),e.jsx("button",{className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:e.jsx(ob,{size:18,className:"text-white"})})]})]})]}),G&&e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-4":"p-5"} border mb-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(El,{size:20,className:"text-accent-green"}),e.jsx("h3",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Level Unlock Progress"})]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-500/20 text-purple-400",children:[G.referralCount," Direct Referrals"]})]}),e.jsxs("div",{className:`grid ${C?"grid-cols-1 gap-4":"grid-cols-2 gap-6"}`,children:[e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Direct Income"}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Trade Commission Levels"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-accent-green font-bold text-lg",children:((ve=G.directIncome)==null?void 0:ve.unlockedLevels)||0}),e.jsxs("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:["of ",((Ve=G.directIncome)==null?void 0:Ve.maxLevels)||18," levels"]})]})]}),e.jsx("div",{className:`h-3 rounded-full overflow-hidden ${s?"bg-dark-600":"bg-gray-200"} mb-3`,children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-accent-green to-emerald-400 transition-all duration-500",style:{width:`${(((Le=G.directIncome)==null?void 0:Le.unlockedLevels)||0)/(((S=G.directIncome)==null?void 0:S.maxLevels)||18)*100}%`}})}),e.jsx("div",{className:"space-y-2",children:(ge=(ie=G.directIncome)==null?void 0:ie.tiers)==null?void 0:ge.map((P,oe)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${G.referralCount>=P.referralsRequired?"bg-accent-green/10 border border-accent-green/30":s?"bg-dark-600":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${G.referralCount>=P.referralsRequired?"bg-accent-green text-black":s?"bg-dark-500 text-gray-500":"bg-gray-300 text-gray-500"}`,children:G.referralCount>=P.referralsRequired?"":oe+1}),e.jsxs("span",{className:`text-sm ${G.referralCount>=P.referralsRequired?"text-accent-green":s?"text-gray-400":"text-gray-600"}`,children:[P.referralsRequired," Referral",P.referralsRequired>1?"s":""]})]}),e.jsxs("span",{className:`text-sm font-medium ${G.referralCount>=P.referralsRequired?"text-accent-green":"text-gray-500"}`,children:[P.levelsUnlocked," Levels"]})]},oe))}),!((Ee=G.directIncome)!=null&&Ee.isFullyUnlocked)&&e.jsxs("p",{className:`text-xs mt-3 ${s?"text-gray-500":"text-gray-600"}`,children:["Need ",(M=G.directIncome)==null?void 0:M.referralsNeeded," more referral",((Q=G.directIncome)==null?void 0:Q.referralsNeeded)>1?"s":""," to unlock next tier"]}),((Ae=G.directIncome)==null?void 0:Ae.isFullyUnlocked)&&e.jsx("p",{className:"text-xs mt-3 text-accent-green font-medium",children:" All levels unlocked!"})]}),e.jsxs("div",{className:`${s?"bg-dark-700":"bg-gray-50"} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:"Referral Income"}),e.jsx("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:"Downline Referral Bonus"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-blue-400 font-bold text-lg",children:((te=G.referralIncome)==null?void 0:te.unlockedLevels)||0}),e.jsxs("p",{className:`text-xs ${s?"text-gray-500":"text-gray-600"}`,children:["of ",((Ce=G.referralIncome)==null?void 0:Ce.maxLevels)||11," levels"]})]})]}),e.jsx("div",{className:`h-3 rounded-full overflow-hidden ${s?"bg-dark-600":"bg-gray-200"} mb-3`,children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",style:{width:`${((($e=G.referralIncome)==null?void 0:$e.unlockedLevels)||0)/(((et=G.referralIncome)==null?void 0:et.maxLevels)||11)*100}%`}})}),e.jsx("div",{className:"space-y-2",children:(Re=(qe=G.referralIncome)==null?void 0:qe.tiers)==null?void 0:Re.map((P,oe)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${G.referralCount>=P.referralsRequired?"bg-blue-500/10 border border-blue-500/30":s?"bg-dark-600":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${G.referralCount>=P.referralsRequired?"bg-blue-500 text-white":s?"bg-dark-500 text-gray-500":"bg-gray-300 text-gray-500"}`,children:G.referralCount>=P.referralsRequired?"":oe+1}),e.jsxs("span",{className:`text-sm ${G.referralCount>=P.referralsRequired?"text-blue-400":s?"text-gray-400":"text-gray-600"}`,children:[P.referralsRequired," Referral",P.referralsRequired>1?"s":""]})]}),e.jsxs("span",{className:`text-sm font-medium ${G.referralCount>=P.referralsRequired?"text-blue-400":"text-gray-500"}`,children:[P.levelsUnlocked," Levels"]})]},oe))}),!((Ke=G.referralIncome)!=null&&Ke.isFullyUnlocked)&&e.jsxs("p",{className:`text-xs mt-3 ${s?"text-gray-500":"text-gray-600"}`,children:["Need ",(gt=G.referralIncome)==null?void 0:gt.referralsNeeded," more referral",((ne=G.referralIncome)==null?void 0:ne.referralsNeeded)>1?"s":""," to unlock next tier"]}),((Fe=G.referralIncome)==null?void 0:Fe.isFullyUnlocked)&&e.jsx("p",{className:"text-xs mt-3 text-blue-400 font-medium",children:" All levels unlocked!"})]})]})]}),e.jsx("div",{className:`flex ${C?"gap-1 overflow-x-auto pb-2":"gap-4"} mb-4`,children:["overview","referrals","commissions","downline","withdraw"].map(P=>e.jsx("button",{onClick:()=>i(P),className:`${C?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2"} rounded-lg font-medium capitalize transition-colors ${l===P?"bg-accent-green text-black":s?"bg-dark-800 text-gray-400 hover:text-white":"bg-white text-gray-600 hover:text-gray-900 border border-gray-200"}`,children:P},P))}),l==="overview"&&e.jsx("div",{className:`grid ${C?"grid-cols-2 gap-2":"grid-cols-5 gap-4"}`,children:[1,2,3,4,5].map(P=>{var oe,Me;return e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-4"} border text-center`,children:[e.jsxs("p",{className:`text-xs mb-1 ${s?"text-gray-500":"text-gray-600"}`,children:["Level ",P," Commissions"]}),e.jsx("p",{className:`font-bold ${C?"text-lg":"text-xl"} ${s?"text-white":"text-gray-900"}`,children:((oe=d.stats)==null?void 0:oe[`level${P}Count`])||0}),e.jsx("p",{className:`text-xs ${s?"text-gray-600":"text-gray-500"}`,children:"trades"}),e.jsxs("p",{className:"text-accent-green text-sm mt-1",children:["$",(((Me=d.stats)==null?void 0:Me[`level${P}Commission`])||0).toFixed(2)]})]},P)})}),l==="referrals"&&e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:m.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No referrals yet"}):C?e.jsx("div",{className:`divide-y ${s?"divide-gray-800":"divide-gray-200"}`,children:m.map(P=>e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("p",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:[P.firstName," ",P.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(P.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:P.email})]},P._id))}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-dark-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"User"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Email"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Joined"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Volume"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Commission"})]})}),e.jsx("tbody",{children:m.map(P=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:[P.firstName," ",P.lastName]}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:P.email}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(P.createdAt).toLocaleDateString()}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:"-"}),e.jsx("td",{className:"px-4 py-3 text-accent-green text-sm",children:"-"})]},P._id))})]})}),l==="commissions"&&e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:f.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No commissions yet"}):C?e.jsx("div",{className:`divide-y ${s?"divide-gray-800":"divide-gray-200"}`,children:f.map(P=>{var oe,Me;return e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:`text-sm font-medium ${s?"text-white":"text-gray-900"}`,children:P.symbol}),e.jsxs("p",{className:"text-accent-green text-sm font-medium",children:["$",(oe=P.commissionAmount)==null?void 0:oe.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-xs",children:["Level ",P.level,"  ",(Me=P.tradeLotSize)==null?void 0:Me.toFixed(2)," lots"]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${P.status==="CREDITED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:P.status})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:new Date(P.createdAt).toLocaleDateString()})]},P._id)})}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-dark-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Date"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Trader"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Symbol"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Level"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Lots"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Commission"}),e.jsx("th",{className:`text-left text-xs font-medium px-4 py-3 ${s?"text-gray-400":"text-gray-600"}`,children:"Status"})]})}),e.jsx("tbody",{children:f.map(P=>{var oe,Me,Ye;return e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(P.createdAt).toLocaleDateString()}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:((oe=P.traderUserId)==null?void 0:oe.firstName)||"Unknown"}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:P.symbol}),e.jsxs("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["Level ",P.level]}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-white":"text-gray-900"}`,children:(Me=P.tradeLotSize)==null?void 0:Me.toFixed(2)}),e.jsxs("td",{className:"px-4 py-3 text-accent-green text-sm",children:["$",(Ye=P.commissionAmount)==null?void 0:Ye.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.status==="CREDITED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:P.status})})]},P._id)})})]})}),l==="downline"&&e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-3":"p-5"} border`,children:v.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No downline yet"}):e.jsx("div",{children:ze(v)})}),l==="withdraw"&&e.jsx("div",{className:C?"":"max-w-md",children:e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${C?"p-4":"p-6"} border`,children:[e.jsx("h3",{className:`font-semibold ${C?"mb-3 text-sm":"mb-4"} ${s?"text-white":"text-gray-900"}`,children:"Withdraw Commission"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Available Balance"}),e.jsxs("p",{className:`text-accent-green font-bold ${C?"text-xl":"text-2xl"}`,children:["$",((st=d.ibWalletBalance)==null?void 0:st.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Amount"}),e.jsx("input",{type:"number",value:h,onChange:P=>x(P.target.value),placeholder:"Enter amount",className:`w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white ${C?"text-sm":""}`})]}),e.jsx("button",{onClick:J,disabled:!h||parseFloat(h)<=0,className:`w-full bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 ${C?"text-sm":""}`,children:"Request Withdrawal"}),d.pendingWithdrawal>0&&e.jsxs("p",{className:"text-yellow-500 text-sm mt-3",children:["Pending withdrawal: $",d.pendingWithdrawal.toFixed(2)]})]})})]}):e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-accent-green/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(El,{size:C?32:40,className:"text-accent-green"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Become an Introducing Broker"}),e.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Earn commissions by referring traders. Get up to 5 levels of referral commissions!"}),ee.entryFeeEnabled&&ee.entryFee>0&&e.jsxs("div",{className:`${s?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"} border rounded-xl p-4 mb-4`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(wt,{size:20,className:"text-yellow-500"}),e.jsxs("span",{className:"text-yellow-500 font-semibold",children:["Entry Fee: $",ee.entryFee]})]}),F&&!F.eligible?e.jsxs("div",{children:[e.jsxs("p",{className:"text-red-400 text-sm mb-2",children:["Insufficient balance. You need $",(je=F.shortfall)==null?void 0:je.toFixed(2)," more."]}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["Your wallet: $",((H=F.walletBalance)==null?void 0:H.toFixed(2))||"0.00"]}),e.jsx("button",{onClick:()=>t("/wallet"),className:"mt-3 bg-yellow-500 text-black px-6 py-2 rounded-lg font-semibold hover:bg-yellow-400 text-sm",children:"Deposit Now"})]}):e.jsx("p",{className:"text-gray-400 text-xs",children:"This fee will be deducted from your wallet upon application."})]}),e.jsxs("div",{className:`${s?"bg-dark-800":"bg-gray-100"} rounded-xl ${C?"p-4":"p-6"} mb-4 text-left`,children:[e.jsx("h3",{className:`${s?"text-white":"text-gray-900"} font-semibold mb-3 text-sm`,children:"Benefits:"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Xs,{size:14,className:"text-accent-green flex-shrink-0"}),"Earn commission on every trade your referrals make"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Xs,{size:14,className:"text-accent-green flex-shrink-0"}),"Multi-level commissions (up to 5 levels)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Xs,{size:14,className:"text-accent-green flex-shrink-0"}),"Real-time commission tracking"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Xs,{size:16,className:"text-accent-green"}),"Easy withdrawal to your wallet"]})]})]}),e.jsx("button",{onClick:ce,disabled:p||ee.entryFeeEnabled&&F&&!F.eligible,className:"bg-accent-green text-black px-8 py-3 rounded-lg font-semibold hover:bg-accent-green/90 disabled:opacity-50",children:p?"Applying...":ee.entryFeeEnabled&&ee.entryFee>0?`Apply Now ($${ee.entryFee})`:"Apply Now"})]})})]})]})},$j=()=>{var je,H,be,ue,$,V,de,fe,me,ae,ve,Ve,Le,S,ie,ge,Ee,M,Q,Ae;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),a=JSON.parse(localStorage.getItem("user")||"{}"),[n,l]=o.useState(!1),[i,d]=o.useState(!1),[c,m]=o.useState(!1),[b,f]=o.useState(!1),[u,v]=o.useState(window.innerWidth<768),[k,N]=o.useState(null),[y,p]=o.useState(!1),[g,h]=o.useState(!1),[x,w]=o.useState({documentType:"aadhaar",documentNumber:"",frontImage:"",backImage:"",selfieImage:""}),[z,C]=o.useState([]),[B,G]=o.useState(!1),[K,ee]=o.useState("Bank Transfer"),[X,F]=o.useState({bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:"",upiId:""}),[R,W]=o.useState(!1);o.useEffect(()=>{const te=()=>v(window.innerWidth<768);return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),o.useEffect(()=>{Z(),q(),D()},[]);const D=async()=>{try{const Ce=await(await fetch(`${A}/payment-methods/user-banks/${a._id}`)).json();C(Ce.accounts||[])}catch(te){console.error("Error fetching bank accounts:",te)}},re=async()=>{if(K==="Bank Transfer"){if(!X.bankName||!X.accountNumber||!X.accountHolderName||!X.ifscCode){alert("Please fill all required bank details");return}}else if(!X.upiId){alert("Please enter UPI ID");return}W(!0);try{const Ce=await(await fetch(`${A}/payment-methods/user-banks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a._id,type:K,...X})})).json();Ce.success?(alert("Bank account submitted for approval!"),G(!1),F({bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:"",upiId:""}),D()):alert(Ce.message||"Failed to submit bank account")}catch(te){console.error("Error submitting bank account:",te),alert("Failed to submit bank account")}W(!1)},O=async te=>{if(confirm("Are you sure you want to delete this bank account?"))try{(await(await fetch(`${A}/payment-methods/user-banks/${te}`,{method:"DELETE"})).json()).success&&D()}catch(Ce){console.error("Error deleting bank account:",Ce)}},q=async()=>{try{const Ce=await(await fetch(`${A}/kyc/status/${a._id}`)).json();Ce.success&&Ce.hasKYC&&N(Ce.kyc)}catch(te){console.error("Error fetching KYC status:",te)}},T=(te,Ce)=>{const $e=te.target.files[0];if($e){if($e.size>5*1024*1024){alert("File size should be less than 5MB");return}const et=new FileReader;et.onloadend=()=>{w(qe=>({...qe,[Ce]:et.result}))},et.readAsDataURL($e)}},j=async()=>{if(!x.documentNumber||!x.frontImage){alert("Please fill document number and upload front image");return}p(!0);try{const Ce=await(await fetch(`${A}/kyc/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a._id,...x})})).json();Ce.success?(alert("KYC submitted successfully! Please wait for approval."),h(!1),q()):alert(Ce.message||"Failed to submit KYC")}catch(te){console.error("Error submitting KYC:",te),alert("Failed to submit KYC")}p(!1)},Z=async()=>{try{const Ce=await(await fetch(`${A}/prop/status`)).json();Ce.success&&f(Ce.enabled)}catch(te){console.error("Error fetching challenge status:",te)}},[I,ce]=o.useState({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",address:a.address||"",city:a.city||"",country:a.country||"",dateOfBirth:a.dateOfBirth||"",profileImage:a.profileImage||null,bankDetails:a.bankDetails||{bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:""},upiId:a.upiId||""}),J=te=>{const Ce=te.target.files[0];if(Ce){if(Ce.size>2*1024*1024){alert("Image size should be less than 2MB");return}const $e=new FileReader;$e.onloadend=()=>{ce(et=>({...et,profileImage:$e.result}))},$e.readAsDataURL(Ce)}},le=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}],xe=async()=>{m(!0);try{const Ce=await(await fetch(`${A}/auth/update-profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a._id,...I})})).json();Ce.user?(localStorage.setItem("user",JSON.stringify(Ce.user)),d(!1),alert("Profile updated successfully!")):alert(Ce.message||"Failed to update profile")}catch(te){console.error("Error updating profile:",te),alert("Failed to update profile")}m(!1)},ze=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:`min-h-screen flex flex-col md:flex-row transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[u&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Profile"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!u&&e.jsxs("aside",{className:`${n?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col transition-all duration-300`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:le.map(te=>e.jsxs("button",{onClick:()=>t(te.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${te.name==="Profile"?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(te.icon,{size:18,className:"flex-shrink-0"}),n&&e.jsx("span",{className:"text-sm font-medium",children:te.name})]},te.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),n&&e.jsx("span",{className:"text-sm",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:ze,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),n&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${u?"pt-14":""}`,children:[!u&&e.jsxs("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"My Profile"}),i?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>d(!1),className:"flex items-center gap-2 bg-dark-700 text-white px-4 py-2 rounded-lg hover:bg-dark-600",children:[e.jsx(Se,{size:16}),"Cancel"]}),e.jsxs("button",{onClick:xe,disabled:c,className:"flex items-center gap-2 bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50",children:[e.jsx(Wa,{size:16}),c?"Saving...":"Save"]})]}):e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90",children:[e.jsx(lb,{size:16}),"Edit Profile"]})]}),e.jsx("div",{className:`${u?"p-4":"p-6"}`,children:e.jsxs("div",{className:`${u?"":"max-w-3xl"}`,children:[e.jsx("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${u?"p-4":"p-6"} border mb-4`,children:e.jsxs("div",{className:`flex ${u?"flex-col":""} items-center gap-4`,children:[e.jsxs("div",{className:"relative",children:[I.profileImage?e.jsx("img",{src:I.profileImage,alt:"Profile",className:`${u?"w-16 h-16":"w-24 h-24"} rounded-full object-cover border-2 border-accent-green`}):e.jsx("div",{className:`${u?"w-16 h-16":"w-24 h-24"} bg-accent-green/20 rounded-full flex items-center justify-center`,children:e.jsxs("span",{className:`text-accent-green font-bold ${u?"text-xl":"text-3xl"}`,children:[(je=I.firstName)==null?void 0:je.charAt(0),(H=I.lastName)==null?void 0:H.charAt(0)]})}),i&&e.jsxs("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-accent-green rounded-full flex items-center justify-center cursor-pointer hover:bg-accent-green/80 transition-colors",children:[e.jsx(Gu,{size:14,className:"text-black"}),e.jsx("input",{type:"file",accept:"image/*",onChange:J,className:"hidden"})]})]}),e.jsxs("div",{className:u?"text-center":"",children:[e.jsxs("h2",{className:`font-bold ${u?"text-lg":"text-2xl"} ${s?"text-white":"text-gray-900"}`,children:[I.firstName," ",I.lastName]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:I.email}),e.jsxs("div",{className:`flex ${u?"justify-center flex-wrap":""} items-center gap-2 mt-2`,children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${((be=k==null?void 0:k.status)==null?void 0:be.toUpperCase())==="APPROVED"?"bg-green-500/20 text-green-500":((ue=k==null?void 0:k.status)==null?void 0:ue.toUpperCase())==="PENDING"?"bg-yellow-500/20 text-yellow-500":(($=k==null?void 0:k.status)==null?void 0:$.toUpperCase())==="REJECTED"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:((V=k==null?void 0:k.status)==null?void 0:V.toUpperCase())==="APPROVED"?"Verified":((de=k==null?void 0:k.status)==null?void 0:de.toUpperCase())==="PENDING"?"Pending":((fe=k==null?void 0:k.status)==null?void 0:fe.toUpperCase())==="REJECTED"?"Rejected":"Not Submitted"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-500",children:["Since ",new Date(a.createdAt).toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${u?"p-4":"p-6"} border`,children:[e.jsx("h3",{className:`font-semibold ${u?"mb-4 text-sm":"mb-6"} ${s?"text-white":"text-gray-900"}`,children:"Personal Information"}),e.jsxs("div",{className:`grid ${u?"grid-cols-1 gap-4":"grid-cols-2 gap-6"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm mb-2 block ${s?"text-gray-400":"text-gray-600"}`,children:"First Name"}),i?e.jsx("input",{type:"text",value:I.firstName,onChange:te=>ce({...I,firstName:te.target.value}),className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`}):e.jsx("p",{className:s?"text-white":"text-gray-900",children:I.firstName||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm mb-2 block ${s?"text-gray-400":"text-gray-600"}`,children:"Last Name"}),i?e.jsx("input",{type:"text",value:I.lastName,onChange:te=>ce({...I,lastName:te.target.value}),className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`}):e.jsx("p",{className:s?"text-white":"text-gray-900",children:I.lastName||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`text-sm mb-2 block flex items-center gap-2 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx(rr,{size:14})," Email"]}),e.jsx("p",{className:s?"text-white":"text-gray-900",children:I.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`text-sm mb-2 block flex items-center gap-2 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Ni,{size:14})," Phone"]}),i?e.jsx("input",{type:"text",value:I.phone,onChange:te=>ce({...I,phone:te.target.value}),className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`}):e.jsx("p",{className:s?"text-white":"text-gray-900",children:I.phone||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`text-sm mb-2 block flex items-center gap-2 ${s?"text-gray-400":"text-gray-600"}`,children:[e.jsx(wa,{size:14})," Date of Birth"]}),i?e.jsx("input",{type:"date",value:I.dateOfBirth,onChange:te=>ce({...I,dateOfBirth:te.target.value}),className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`}):e.jsx("p",{className:"text-white",children:I.dateOfBirth||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(Zu,{size:14})," Country"]}),i?e.jsx("input",{type:"text",value:I.country,onChange:te=>ce({...I,country:te.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:I.country||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(Zu,{size:14})," Address"]}),i?e.jsx("input",{type:"text",value:I.address,onChange:te=>ce({...I,address:te.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:I.address||"-"})]})]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-6 border mt-6`,children:[e.jsxs("h3",{className:`font-semibold mb-6 flex items-center gap-2 ${s?"text-white":"text-gray-900"}`,children:[e.jsx(ma,{size:18})," Bank Details (For Withdrawals)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Bank Name"}),i?e.jsx("input",{type:"text",value:((me=I.bankDetails)==null?void 0:me.bankName)||"",onChange:te=>ce({...I,bankDetails:{...I.bankDetails,bankName:te.target.value}}),placeholder:"e.g., HDFC Bank",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((ae=I.bankDetails)==null?void 0:ae.bankName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Account Holder Name"}),i?e.jsx("input",{type:"text",value:((ve=I.bankDetails)==null?void 0:ve.accountHolderName)||"",onChange:te=>ce({...I,bankDetails:{...I.bankDetails,accountHolderName:te.target.value}}),placeholder:"Name as per bank account",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((Ve=I.bankDetails)==null?void 0:Ve.accountHolderName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Account Number"}),i?e.jsx("input",{type:"text",value:((Le=I.bankDetails)==null?void 0:Le.accountNumber)||"",onChange:te=>ce({...I,bankDetails:{...I.bankDetails,accountNumber:te.target.value}}),placeholder:"Enter account number",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((S=I.bankDetails)==null?void 0:S.accountNumber)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"IFSC Code"}),i?e.jsx("input",{type:"text",value:((ie=I.bankDetails)==null?void 0:ie.ifscCode)||"",onChange:te=>ce({...I,bankDetails:{...I.bankDetails,ifscCode:te.target.value.toUpperCase()}}),placeholder:"e.g., HDFC0001234",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white uppercase"}):e.jsx("p",{className:"text-white",children:((ge=I.bankDetails)==null?void 0:ge.ifscCode)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Branch Name"}),i?e.jsx("input",{type:"text",value:((Ee=I.bankDetails)==null?void 0:Ee.branchName)||"",onChange:te=>ce({...I,bankDetails:{...I.bankDetails,branchName:te.target.value}}),placeholder:"e.g., Mumbai Main Branch",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((M=I.bankDetails)==null?void 0:M.branchName)||"-"})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-6 flex items-center gap-2",children:[e.jsx(Qr,{size:18})," UPI Details"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"UPI ID"}),i?e.jsx("input",{type:"text",value:I.upiId||"",onChange:te=>ce({...I,upiId:te.target.value}),placeholder:"e.g., yourname@upi",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:I.upiId||"-"})]}),!i&&!((Q=I.bankDetails)!=null&&Q.accountNumber)&&!I.upiId&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:' Please add your bank details or UPI ID to receive withdrawals. Click "Edit Profile" to add.'})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[e.jsx(tr,{size:18})," Withdrawal Accounts"]}),e.jsx("button",{onClick:()=>G(!0),className:"px-3 py-1.5 bg-green-500/20 text-green-500 rounded-lg text-sm hover:bg-green-500/30",children:"+ Add Account"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Add bank accounts or UPI IDs for withdrawals. Accounts require admin approval before use."}),z.length===0?e.jsx("div",{className:"p-4 bg-dark-700 rounded-lg text-center",children:e.jsx("p",{className:"text-gray-500",children:"No withdrawal accounts added yet"})}):e.jsx("div",{className:"space-y-3",children:z.map(te=>e.jsx("div",{className:"p-4 bg-dark-700 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[te.type==="Bank Transfer"?e.jsx(ma,{size:20,className:"text-blue-500"}):e.jsx(Qr,{size:20,className:"text-purple-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:te.type==="Bank Transfer"?te.bankName:"UPI"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${te.status==="Pending"?"bg-yellow-500/20 text-yellow-500":te.status==="Approved"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:te.status})]}),te.type==="Bank Transfer"?e.jsxs("p",{className:"text-gray-500 text-sm",children:["A/C: ",te.accountNumber," | IFSC: ",te.ifscCode]}):e.jsx("p",{className:"text-purple-400 text-sm font-mono",children:te.upiId}),te.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-xs mt-1",children:["Reason: ",te.rejectionReason]})]})]}),te.status!=="Approved"&&e.jsx("button",{onClick:()=>O(te._id),className:"text-gray-500 hover:text-red-500",children:e.jsx(Se,{size:16})})]})},te._id))})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Add Withdrawal Account"}),e.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>ee("Bank Transfer"),className:`p-3 rounded-lg border flex items-center justify-center gap-2 ${K==="Bank Transfer"?"border-blue-500 bg-blue-500/20 text-blue-500":"border-gray-700 text-gray-400"}`,children:[e.jsx(ma,{size:18})," Bank"]}),e.jsxs("button",{onClick:()=>ee("UPI"),className:`p-3 rounded-lg border flex items-center justify-center gap-2 ${K==="UPI"?"border-purple-500 bg-purple-500/20 text-purple-500":"border-gray-700 text-gray-400"}`,children:[e.jsx(Qr,{size:18})," UPI"]})]}),K==="Bank Transfer"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Bank Name *"}),e.jsx("input",{type:"text",value:X.bankName,onChange:te=>F({...X,bankName:te.target.value}),placeholder:"e.g., HDFC Bank",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Account Number *"}),e.jsx("input",{type:"text",value:X.accountNumber,onChange:te=>F({...X,accountNumber:te.target.value}),placeholder:"e.g., 1234567890",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Account Holder Name *"}),e.jsx("input",{type:"text",value:X.accountHolderName,onChange:te=>F({...X,accountHolderName:te.target.value}),placeholder:"e.g., John Doe",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"IFSC Code *"}),e.jsx("input",{type:"text",value:X.ifscCode,onChange:te=>F({...X,ifscCode:te.target.value.toUpperCase()}),placeholder:"e.g., HDFC0001234",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Branch Name"}),e.jsx("input",{type:"text",value:X.branchName,onChange:te=>F({...X,branchName:te.target.value}),placeholder:"e.g., Mumbai Main",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"UPI ID *"}),e.jsx("input",{type:"text",value:X.upiId,onChange:te=>F({...X,upiId:te.target.value}),placeholder:"e.g., yourname@upi",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsx("p",{className:"text-yellow-500 text-xs",children:" Your account will be reviewed by admin before it can be used for withdrawals."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-2 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:R,className:"flex-1 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:R?"Submitting...":"Submit for Approval"})]})]})]})}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ji,{size:18})," KYC Verification"]}),k?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg border ${k.status==="approved"?"bg-green-500/10 border-green-500/30":k.status==="pending"?"bg-yellow-500/10 border-yellow-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[k.status==="approved"&&e.jsx(xs,{size:24,className:"text-green-500"}),k.status==="pending"&&e.jsx(Wt,{size:24,className:"text-yellow-500"}),k.status==="rejected"&&e.jsx(pr,{size:24,className:"text-red-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:`font-medium ${k.status==="approved"?"text-green-500":k.status==="pending"?"text-yellow-500":"text-red-500"}`,children:[k.status==="approved"&&"KYC Verified",k.status==="pending"&&"KYC Under Review",k.status==="rejected"&&"KYC Rejected"]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Document: ",(Ae=k.documentType)==null?void 0:Ae.replace("_"," ").toUpperCase()]}),k.status==="rejected"&&k.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-sm mt-1",children:["Reason: ",k.rejectionReason]})]})]})}),k.status==="rejected"&&e.jsx("button",{onClick:()=>{w({documentType:"aadhaar",documentNumber:"",frontImage:"",backImage:"",selfieImage:""}),h(!0)},className:"w-full py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90",children:"Resubmit KYC"})]}):g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Document Type"}),e.jsxs("select",{value:x.documentType,onChange:te=>w({...x,documentType:te.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white",children:[e.jsx("option",{value:"aadhaar",children:"Aadhaar Card"}),e.jsx("option",{value:"pan_card",children:"PAN Card"}),e.jsx("option",{value:"passport",children:"Passport"}),e.jsx("option",{value:"driving_license",children:"Driving License"}),e.jsx("option",{value:"voter_id",children:"Voter ID"}),e.jsx("option",{value:"national_id",children:"National ID"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Document Number"}),e.jsx("input",{type:"text",value:x.documentNumber,onChange:te=>w({...x,documentNumber:te.target.value}),placeholder:"Enter document number",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Front Side of Document *"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:x.frontImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.frontImage,alt:"Front",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>w({...x,frontImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(Se,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(wi,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload front side"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Max 5MB, JPG/PNG"}),e.jsx("input",{type:"file",accept:"image/*",onChange:te=>T(te,"frontImage"),className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Back Side of Document (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:x.backImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.backImage,alt:"Back",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>w({...x,backImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(Se,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(wi,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload back side"}),e.jsx("input",{type:"file",accept:"image/*",onChange:te=>T(te,"backImage"),className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Selfie with Document (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:x.selfieImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.selfieImage,alt:"Selfie",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>w({...x,selfieImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(Se,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(Gu,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload selfie"}),e.jsx("input",{type:"file",accept:"image/*",onChange:te=>T(te,"selfieImage"),className:"hidden"})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:y,className:"flex-1 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:y?"Submitting...":"Submit KYC"})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ji,{size:32,className:"text-yellow-500"})}),e.jsx("p",{className:"text-white font-medium mb-2",children:"KYC Not Submitted"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Complete your KYC verification to unlock all features"}),e.jsx("button",{onClick:()=>h(!0),className:"px-6 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90",children:"Start KYC Verification"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ar,{size:18})," Security"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Password"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Last changed: Never"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Add an extra layer of security"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"Enable"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Login History"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"View recent login activity"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"View"})]})]})]})]})})]})]})},Aj=()=>{var Z;const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState(!1),[l,i]=o.useState("new"),[d,c]=o.useState([]),[m,b]=o.useState(!0),[f,u]=o.useState(""),[v,k]=o.useState(""),[N,y]=o.useState("general"),[p,g]=o.useState(!1),[h,x]=o.useState(!1),[w,z]=o.useState(null),[C,B]=o.useState(""),[G,K]=o.useState(!1),[ee,X]=o.useState(window.innerWidth<768),F=JSON.parse(localStorage.getItem("user")||"{}"),R=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}];o.useEffect(()=>{const I=()=>X(window.innerWidth<768);return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),o.useEffect(()=>{W(),D()},[]);const W=async()=>{try{const ce=await(await fetch(`${A}/prop/status`)).json();ce.success&&x(ce.enabled)}catch{}},D=async()=>{try{const ce=await(await fetch(`${A}/support/user/${F._id}`)).json();c(ce.tickets||[])}catch(I){console.error("Error fetching tickets:",I)}b(!1)},re=async I=>{if(I.preventDefault(),!f||!v){alert("Please fill in all fields");return}g(!0);try{const J=await(await fetch(`${A}/support/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:F._id,subject:f,message:v,category:N.toUpperCase()})})).json();J.success?(alert("Ticket submitted successfully!"),u(""),k(""),y("general"),i("history"),D()):alert(J.message||"Failed to submit ticket")}catch(ce){console.error("Error submitting ticket:",ce),alert("Failed to submit ticket")}g(!1)},O=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},q=I=>{switch(I){case"OPEN":return e.jsx(Wt,{size:16,className:"text-yellow-500"});case"IN_PROGRESS":return e.jsx($r,{size:16,className:"text-blue-500"});case"WAITING_USER":return e.jsx($r,{size:16,className:"text-orange-500"});case"RESOLVED":return e.jsx(xs,{size:16,className:"text-green-500"});case"CLOSED":return e.jsx(xs,{size:16,className:"text-gray-500"});default:return e.jsx(Wt,{size:16,className:"text-gray-500"})}},T=async I=>{try{const J=await(await fetch(`${A}/support/ticket/${I}`)).json();J.success&&z(J.ticket)}catch(ce){console.error("Error fetching ticket:",ce)}},j=async()=>{if(!(!C.trim()||!w)){K(!0);try{const ce=await(await fetch(`${A}/support/reply/${w.ticketId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:F._id,senderType:"USER",message:C})})).json();ce.success&&(z(ce.ticket),B(""),D())}catch(I){console.error("Error sending reply:",I)}K(!1)}};return e.jsxs("div",{className:`min-h-screen flex flex-col md:flex-row transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[ee&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-b border-gray-800":"bg-white border-b border-gray-200"}`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Support"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20}):e.jsx(Ct,{size:20})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!ee&&e.jsxs("aside",{className:`${a?"w-48":"w-16"} ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:R.map(I=>e.jsxs("button",{onClick:()=>t(I.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${I.name==="Support"?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(I.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium",children:I.name})]},I.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 ${s?"text-yellow-400 hover:bg-dark-700":"text-blue-500 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18}):e.jsx(Ct,{size:18}),a&&e.jsx("span",{className:"text-sm",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:O,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${ee?"pt-14":""}`,children:[!ee&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Support"})}),e.jsxs("div",{className:`${ee?"p-4":"p-6"}`,children:[e.jsxs("div",{className:`flex ${ee?"gap-2":"gap-4"} mb-4`,children:[e.jsxs("button",{onClick:()=>i("new"),className:`flex items-center gap-2 ${ee?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg font-medium transition-colors ${l==="new"?"bg-accent-green text-black":s?"bg-dark-800 text-gray-400 hover:text-white":"bg-white text-gray-600 hover:text-gray-900 border border-gray-200"}`,children:[e.jsx(ut,{size:ee?14:16}),"New Ticket"]}),e.jsxs("button",{onClick:()=>i("history"),className:`flex items-center gap-2 ${ee?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg font-medium transition-colors ${l==="history"?"bg-accent-green text-black":s?"bg-dark-800 text-gray-400 hover:text-white":"bg-white text-gray-600 hover:text-gray-900 border border-gray-200"}`,children:[e.jsx(Mc,{size:ee?14:16}),"Tickets (",d.length,")"]})]}),l==="new"?e.jsxs("div",{className:ee?"":"max-w-2xl",children:[e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl ${ee?"p-4":"p-6"} border`,children:[e.jsx("h2",{className:`font-semibold ${ee?"mb-4 text-sm":"mb-6"} ${s?"text-white":"text-gray-900"}`,children:"Submit a Support Ticket"}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm mb-2 block ${s?"text-gray-400":"text-gray-600"}`,children:"Category"}),e.jsxs("select",{value:N,onChange:I=>y(I.target.value),className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"general",children:"General Inquiry"}),e.jsx("option",{value:"deposit",children:"Deposit Issue"}),e.jsx("option",{value:"withdrawal",children:"Withdrawal Issue"}),e.jsx("option",{value:"trading",children:"Trading Issue"}),e.jsx("option",{value:"account",children:"Account Issue"}),e.jsx("option",{value:"technical",children:"Technical Problem"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm mb-2 block ${s?"text-gray-400":"text-gray-600"}`,children:"Subject"}),e.jsx("input",{type:"text",value:f,onChange:I=>u(I.target.value),placeholder:"Brief description of your issue",className:`w-full rounded-lg px-4 py-2 border ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm mb-2 block ${s?"text-gray-400":"text-gray-600"}`,children:"Message"}),e.jsx("textarea",{value:v,onChange:I=>k(I.target.value),placeholder:"Describe your issue in detail...",rows:6,className:`w-full rounded-lg px-4 py-2 border resize-none ${s?"bg-dark-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`})]}),e.jsxs("button",{type:"submit",disabled:p,className:"w-full bg-accent-green text-black py-3 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(el,{size:16}),p?"Submitting...":"Submit Ticket"]})]})]}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-6 border mt-6`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${s?"text-white":"text-gray-900"}`,children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`border-b pb-4 ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:"How long does a deposit take?"}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:"Deposits are usually processed within 24 hours after verification."})]}),e.jsxs("div",{className:`border-b pb-4 ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:"How do I withdraw funds?"}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:"Go to Wallet  Withdraw and follow the instructions. Withdrawals are processed within 1-3 business days."})]}),e.jsxs("div",{className:`border-b pb-4 ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:"What is the minimum deposit?"}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:"The minimum deposit depends on your account type. Check Account Types for details."})]}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:"How do I become an IB?"}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:'Go to the IB section and click "Apply Now" to submit your application.'})]})]})]})]}):e.jsx("div",{children:m?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading tickets..."}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Mc,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No support tickets yet"}),e.jsx("button",{onClick:()=>i("new"),className:"mt-4 text-accent-green hover:underline",children:"Create your first ticket "})]}):e.jsx("div",{className:"space-y-4",children:d.map(I=>{var ce,J,le;return e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-400 shadow-sm"} rounded-xl p-5 border cursor-pointer transition-colors`,onClick:()=>T(I.ticketId),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:I.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",I.ticketId,"  ",I.category]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[q(I.status),e.jsx("span",{className:`text-sm ${I.status==="OPEN"?"text-yellow-500":I.status==="IN_PROGRESS"?"text-blue-500":I.status==="WAITING_USER"?"text-orange-500":I.status==="RESOLVED"?"text-green-500":"text-gray-500"}`,children:I.status.replace("_"," ")})]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:((J=(ce=I.messages)==null?void 0:ce[0])==null?void 0:J.message)||"No message"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(I.createdAt).toLocaleString()]}),e.jsxs("span",{className:"text-accent-green",children:[((le=I.messages)==null?void 0:le.length)||0," messages  Click to view"]})]})]},I._id)})})})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-2xl max-h-[80vh] flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:w.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",w.ticketId,"  ",w.category]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${w.status==="OPEN"?"bg-yellow-500/20 text-yellow-500":w.status==="IN_PROGRESS"?"bg-blue-500/20 text-blue-500":w.status==="WAITING_USER"?"bg-orange-500/20 text-orange-500":w.status==="RESOLVED"?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:w.status.replace("_"," ")}),e.jsx("button",{onClick:()=>z(null),className:"text-gray-400 hover:text-white text-xl",children:""})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(Z=w.messages)==null?void 0:Z.map((I,ce)=>e.jsx("div",{className:`flex ${I.sender==="USER"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${I.sender==="USER"?"bg-accent-green/20 text-white":"bg-dark-700 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${I.sender==="USER"?"text-accent-green":"text-blue-400"}`,children:I.sender==="USER"?"You":"Support"}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(I.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:I.message})]})},ce))}),w.status!=="CLOSED"&&w.status!=="RESOLVED"&&e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:C,onChange:I=>B(I.target.value),placeholder:"Type your message...",className:"flex-1 bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-500",onKeyPress:I=>I.key==="Enter"&&j()}),e.jsxs("button",{onClick:j,disabled:G||!C.trim(),className:"bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(el,{size:16}),G?"Sending...":"Send"]})]})}),(w.status==="CLOSED"||w.status==="RESOLVED")&&e.jsxs("div",{className:"p-4 border-t border-gray-700 text-center text-gray-500 text-sm",children:["This ticket has been ",w.status.toLowerCase(),". Create a new ticket if you need further assistance."]})]})})]})},Dj=()=>{const t=Nt(),{isDarkMode:s,toggleDarkMode:r}=ks(),[a,n]=o.useState(!1),[l,i]=o.useState("getting-started"),[d,c]=o.useState(!1),[m,b]=o.useState(window.innerWidth<768);o.useEffect(()=>{const N=()=>b(window.innerWidth<768);return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]),o.useEffect(()=>{f()},[]);const f=async()=>{try{const y=await(await fetch(`${A}/prop/status`)).json();y.success&&c(y.enabled)}catch{}},u=[{name:"Dashboard",icon:Is,path:"/dashboard"},{name:"Account",icon:Gt,path:"/account"},{name:"Wallet",icon:ht,path:"/wallet"},{name:"Orders",icon:Ut,path:"/orders"},{name:"IB",icon:ot,path:"/ib"},{name:"Copytrade",icon:Xt,path:"/copytrade"},{name:"Profile",icon:er,path:"/profile"},{name:"Support",icon:br,path:"/support"},{name:"Instructions",icon:Ut,path:"/instructions"}],v=[{id:"getting-started",title:"Getting Started",icon:Xy,content:[{title:"Create an Account",text:"Sign up with your email and complete the verification process."},{title:"Complete KYC",text:"Submit your identity documents for verification. This is required for deposits and withdrawals."},{title:"Create Trading Account",text:"Go to Account section and create a new trading account. Choose your preferred account type."},{title:"Fund Your Account",text:"Deposit funds to your wallet and transfer to your trading account."}]},{id:"deposits",title:"Deposits & Withdrawals",icon:wt,content:[{title:"Making a Deposit",text:"Go to Wallet  Deposit. Select your payment method, enter the amount, and follow the instructions."},{title:"Deposit Processing",text:"Deposits are usually processed within 24 hours after admin verification."},{title:"Making a Withdrawal",text:"Go to Wallet  Withdraw. Enter the amount and your payment details. Minimum withdrawal may apply."},{title:"Withdrawal Processing",text:"Withdrawals are processed within 1-3 business days after approval."}]},{id:"trading",title:"Trading Guide",icon:xt,content:[{title:"Opening a Trade",text:"Select an instrument, set your volume (lot size), and click Buy or Sell to open a market order."},{title:"Pending Orders",text:"Use pending orders (Limit/Stop) to enter the market at a specific price."},{title:"Stop Loss & Take Profit",text:"Set SL/TP to automatically close your trade at a certain profit or loss level."},{title:"Closing a Trade",text:"Click the X button on your open position to close it at the current market price."},{title:"Understanding Margin",text:"Margin is the amount required to open a position. It depends on your leverage and position size."}]},{id:"copy-trading",title:"Copy Trading",icon:Xt,content:[{title:"What is Copy Trading?",text:"Copy trading allows you to automatically copy trades from experienced traders (Masters)."},{title:"Following a Master",text:"Go to Copytrade  Discover Masters. Select a master and click Follow."},{title:"Copy Settings",text:"Choose Fixed Lot (same lot size for all trades) or Lot Multiplier (proportional to master)."},{title:"Commission",text:"Masters charge a commission on profitable days only. This is deducted automatically."},{title:"Managing Subscriptions",text:"You can pause, resume, or stop following a master at any time."}]},{id:"ib-program",title:"IB Program",icon:ot,content:[{title:"What is IB?",text:"Introducing Broker (IB) program lets you earn commissions by referring traders."},{title:"Becoming an IB",text:"Go to IB section and click Apply Now. Your application will be reviewed by admin."},{title:"Referral Link",text:"Once approved, you get a unique referral link. Share it to invite new traders."},{title:"Commission Structure",text:"Earn commission on every trade your referrals make. Up to 5 levels of referrals."},{title:"Withdrawing Commission",text:"Your IB earnings are credited to your IB wallet. You can withdraw anytime."}]},{id:"security",title:"Security",icon:ar,content:[{title:"Password Security",text:"Use a strong password with letters, numbers, and symbols. Change it regularly."},{title:"Two-Factor Authentication",text:"Enable 2FA for an extra layer of security on your account."},{title:"Trading PIN",text:"Your trading account has a 4-digit PIN. Never share it with anyone."},{title:"Suspicious Activity",text:"If you notice any suspicious activity, contact support immediately."}]}],k=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:`min-h-screen flex flex-col md:flex-row transition-colors duration-300 ${s?"bg-dark-900":"bg-gray-100"}`,children:[m&&e.jsxs("header",{className:`fixed top-0 left-0 right-0 z-40 px-4 py-3 flex items-center gap-4 ${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200"} border-b`,children:[e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 -ml-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Dr,{size:22,className:s?"text-white":"text-gray-900"})}),e.jsx("h1",{className:`font-semibold text-lg flex-1 ${s?"text-white":"text-gray-900"}`,children:"Instructions"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:s?e.jsx(At,{size:20,className:"text-yellow-400"}):e.jsx(Ct,{size:20,className:"text-gray-600"})}),e.jsx("button",{onClick:()=>t("/mobile"),className:`p-2 rounded-lg ${s?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(sr,{size:20,className:"text-gray-400"})})]}),!m&&e.jsxs("aside",{className:`${a?"w-48":"w-16"} flex flex-col transition-all duration-300 ${s?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-12 object-contain"})}),e.jsx("nav",{className:"flex-1 px-2",children:u.map(N=>e.jsxs("button",{onClick:()=>t(N.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${N.name==="Instructions"?"bg-accent-green text-black":s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(N.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium",children:N.name})]},N.name))}),e.jsxs("div",{className:`p-2 border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 ${s?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[s?e.jsx(At,{size:18,className:"text-yellow-400"}):e.jsx(Ct,{size:18,className:"text-gray-600"}),a&&e.jsx("span",{className:"text-sm",children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:k,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg ${s?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})]})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${m?"pt-14":""}`,children:[!m&&e.jsx("header",{className:`flex items-center justify-between px-6 py-4 border-b ${s?"border-gray-800":"border-gray-200"}`,children:e.jsx("h1",{className:`text-xl font-semibold ${s?"text-white":"text-gray-900"}`,children:"Instructions & Guide"})}),e.jsx("div",{className:`${m?"p-4":"p-6"}`,children:e.jsxs("div",{className:m?"":"max-w-4xl",children:[e.jsx("div",{className:`bg-gradient-to-r from-accent-green/20 to-blue-500/20 rounded-xl ${m?"p-4":"p-6"} mb-4 border border-accent-green/30`,children:e.jsxs("div",{className:`flex items-center ${m?"gap-3":"gap-4"}`,children:[e.jsx("div",{className:`${m?"w-10 h-10":"w-14 h-14"} bg-accent-green/30 rounded-full flex items-center justify-center`,children:e.jsx(ol,{size:m?20:28,className:"text-accent-green"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-bold text-white ${m?"text-base":"text-xl"}`,children:"Welcome to ProfitVisionFX"}),e.jsx("p",{className:`text-gray-400 ${m?"text-xs":""}`,children:"Learn how to use our platform"})]})]})}),e.jsx("div",{className:`space-y-${m?"2":"4"}`,children:v.map(N=>e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl border overflow-hidden`,children:[e.jsxs("button",{onClick:()=>i(l===N.id?"":N.id),className:`w-full flex items-center justify-between ${m?"p-3":"p-5"} transition-colors ${s?"hover:bg-dark-700":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:`flex items-center ${m?"gap-3":"gap-4"}`,children:[e.jsx("div",{className:`${m?"w-8 h-8":"w-10 h-10"} bg-accent-green/20 rounded-lg flex items-center justify-center`,children:e.jsx(N.icon,{size:m?16:20,className:"text-accent-green"})}),e.jsx("span",{className:`font-semibold ${m?"text-sm":""} ${s?"text-white":"text-gray-900"}`,children:N.title})]}),l===N.id?e.jsx(Od,{size:m?16:20,className:"text-gray-400"}):e.jsx(Xs,{size:m?16:20,className:"text-gray-400"})]}),l===N.id&&e.jsx("div",{className:`${m?"px-3 pb-3":"px-5 pb-5"} border-t ${s?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:`pt-3 space-y-${m?"2":"4"}`,children:N.content.map((y,p)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 h-6 bg-accent-green/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-accent-green text-xs font-bold",children:p+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:y.title}),e.jsx("p",{className:`text-sm mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:y.text})]})]},p))})})]},N.id))}),e.jsxs("div",{className:`${s?"bg-dark-800 border-gray-800":"bg-white border-gray-200 shadow-sm"} rounded-xl p-6 border mt-6`,children:[e.jsx("h3",{className:`font-semibold mb-3 ${s?"text-white":"text-gray-900"}`,children:"Need More Help?"}),e.jsx("p",{className:`mb-4 ${s?"text-gray-400":"text-gray-600"}`,children:"If you couldn't find what you're looking for, our support team is here to help."}),e.jsx("button",{onClick:()=>t("/support"),className:"bg-accent-green text-black px-6 py-2 rounded-lg font-medium hover:bg-accent-green/90",children:"Contact Support"})]})]})})]})]})},Ij="http://localhost:5001/api",Mj=()=>{const t=Nt(),[s,r]=o.useState(!1),[a,n]=o.useState(""),[l,i]=o.useState(!1),[d,c]=o.useState({email:"",password:""}),m=f=>{c({...d,[f.target.name]:f.target.value}),n("")},b=async f=>{f.preventDefault(),r(!0),n("");try{const v=await(await fetch(`${Ij}/super-admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();v.success?(localStorage.setItem("adminToken",v.token),localStorage.setItem("adminUser",JSON.stringify(v.admin)),t("/admin/dashboard")):n(v.message||"Invalid admin credentials")}catch{n("Connection error. Please try again.")}r(!1)};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 sm:p-6 md:p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-red-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-purple-500/20 via-red-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-6 sm:p-8 w-full max-w-md border border-gray-800 mx-4 sm:mx-0",children:[e.jsx("button",{onClick:()=>t("/"),className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-32 object-contain"})}),e.jsx("div",{className:"flex items-center gap-2 mb-6",children:e.jsx("div",{className:"px-3 py-1 bg-red-500/20 text-red-500 rounded-full text-sm font-medium",children:"Admin Portal"})}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Enter your admin credentials to continue"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Admin email",value:d.email,onChange:m,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500/50 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:l?"text":"password",name:"password",placeholder:"Admin password",value:d.password,onChange:m,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500/50 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:l?e.jsx(cl,{size:18}):e.jsx(ms,{size:18})})]}),a&&e.jsx("p",{className:"text-red-500 text-sm",children:a}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600 transition-colors mt-2 disabled:opacity-50",children:s?"Signing in...":"Sign in as Admin"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Not an admin?"," ",e.jsx("button",{onClick:()=>t("/user/login"),className:"text-white hover:underline",children:"User Login"})]})]})]})},as=({children:t,title:s,subtitle:r})=>{const a=Nt(),n=sn(),{isDarkMode:l,toggleDarkMode:i}=ks(),[d,c]=o.useState(!0),[m,b]=o.useState(!1),[f,u]=o.useState({}),v=[{name:"Overview Dashboard",icon:Is,path:"/admin/dashboard"},{name:"User Management",icon:ot,path:"/admin/users"},{name:"Trade Management",icon:xt,path:"/admin/trades"},{name:"Book Management",icon:ol,path:"/admin/book-management"},{name:"Fund Management",icon:ht,path:"/admin/funds"},{name:"Bank Settings",icon:ma,path:"/admin/bank-settings"},{name:"IB Management",icon:Uh,path:"/admin/ib-management"},{name:"Forex Charges",icon:wt,path:"/admin/forex-charges"},{name:"Earnings Report",icon:xt,path:"/admin/earnings"},{name:"Copy Trade Management",icon:Xt,path:"/admin/copy-trade"},{name:"Prop Firm Challenges",icon:Ht,path:"/admin/prop-firm"},{name:"Account Types",icon:tr,path:"/admin/account-types"},{name:"Theme Settings",icon:Ih,path:"/admin/theme"},{name:"Admin Management",icon:ar,path:"/admin/admin-management"},{name:"KYC Verification",icon:ji,path:"/admin/kyc"},{name:"Support Tickets",icon:Vi,path:"/admin/support"}];o.useEffect(()=>{localStorage.getItem("adminToken")||a("/admin")},[a]);const k=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),a("/admin")},N=y=>n.pathname===y;return e.jsxs("div",{className:`min-h-screen flex ${l?"bg-dark-900":"bg-gray-50"}`,children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>b(!1)}),e.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          ${d?"w-64":"w-16"} 
          ${m?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          ${l?"bg-dark-900 border-gray-800":"bg-white border-gray-200"} border-r flex flex-col 
          transition-all duration-300 ease-in-out
        `,children:[e.jsxs("div",{className:`p-4 flex items-center justify-between border-b ${l?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-16 object-contain flex-shrink-0"}),d&&e.jsx("span",{className:`font-semibold text-sm ${l?"text-white":"text-gray-800"}`,children:"Admin"})]}),e.jsx("button",{onClick:()=>c(!d),className:`hidden lg:block p-1 rounded transition-colors ${l?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(em,{size:18,className:l?"text-gray-400":"text-gray-600"})}),e.jsx("button",{onClick:()=>b(!1),className:`lg:hidden p-1 rounded transition-colors ${l?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(Se,{size:18,className:l?"text-gray-400":"text-gray-600"})})]}),e.jsx("nav",{className:`flex-1 px-2 py-4 overflow-y-auto scrollbar-thin ${l?"scrollbar-thumb-gray-700":"scrollbar-thumb-gray-300"}`,children:v.map(y=>e.jsxs("button",{onClick:()=>{a(y.path),b(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${N(y.path)?"bg-red-500 text-white":l?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:d?"":y.name,children:[e.jsx(y.icon,{size:18,className:"flex-shrink-0"}),d&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap truncate",children:y.name})]},y.name))}),e.jsxs("div",{className:`p-2 border-t ${l?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("button",{onClick:i,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${l?"text-yellow-400 hover:text-yellow-300 hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:d?"":l?"Light Mode":"Dark Mode",children:[l?e.jsx(At,{size:18,className:"flex-shrink-0"}):e.jsx(Ct,{size:18,className:"flex-shrink-0"}),d&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:l?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:k,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${l?"text-gray-400 hover:text-white hover:bg-dark-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:d?"":"Log Out",children:[e.jsx(ws,{size:18,className:"flex-shrink-0"}),d&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-auto min-w-0",children:[e.jsxs("header",{className:`sticky top-0 z-30 backdrop-blur-sm flex items-center justify-between px-4 sm:px-6 py-4 border-b ${l?"bg-dark-900/95 border-gray-800":"bg-white/95 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>b(!0),className:`lg:hidden p-2 rounded-lg transition-colors ${l?"hover:bg-dark-700":"hover:bg-gray-100"}`,children:e.jsx(em,{size:20,className:l?"text-gray-400":"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-lg sm:text-xl font-semibold ${l?"text-white":"text-gray-900"}`,children:s||"Admin Dashboard"}),r&&e.jsx("p",{className:"text-gray-500 text-sm hidden sm:block",children:r})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-500/20 text-red-500 rounded-full text-xs sm:text-sm",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin Mode"})]})]}),e.jsx("div",{className:"p-4 sm:p-6",children:t})]})]})},Lj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState({totalUsers:0,activeToday:0,newThisWeek:0,totalDeposits:0,totalWithdrawals:0,pendingKYC:0});o.useEffect(()=>{i()},[]);const i=async()=>{a(!0);try{const m=await fetch(""+API_URL+"/admin/users");if(m.ok){const f=(await m.json()).users||[];s(f),l({totalUsers:f.length,activeToday:Math.floor(f.length*.7),newThisWeek:Math.floor(f.length*.3),totalDeposits:125e3,totalWithdrawals:45e3,pendingKYC:Math.floor(f.length*.2)})}}catch(m){console.error("Error fetching data:",m)}a(!1)},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=[{title:"Total Users",value:n.totalUsers,icon:ot,color:"blue",change:"+12%",positive:!0},{title:"Active Today",value:n.activeToday,icon:xt,color:"green",change:"+5%",positive:!0},{title:"Total Deposits",value:`$${n.totalDeposits.toLocaleString()}`,icon:ht,color:"purple",change:"+18%",positive:!0},{title:"Total Withdrawals",value:`$${n.totalWithdrawals.toLocaleString()}`,icon:tr,color:"orange",change:"-3%",positive:!1}];return e.jsxs(as,{title:"Overview Dashboard",subtitle:"Welcome back, Admin",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:c.map((m,b)=>e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 bg-${m.color}-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(m.icon,{size:20,className:`text-${m.color}-500`})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${m.positive?"text-green-500":"text-red-500"}`,children:[m.positive?e.jsx(jn,{size:14}):e.jsx(bn,{size:14}),m.change]})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:m.title}),e.jsx("p",{className:"text-white text-2xl font-bold",children:m.value})]},b))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-white font-semibold",children:"Recent Users"}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Je,{size:16,className:`text-gray-400 ${r?"animate-spin":""}`})})]}),e.jsx("div",{className:"space-y-3",children:r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Je,{size:20,className:"text-gray-500 animate-spin"})}):t.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No users registered yet"}):t.slice(0,5).map((m,b)=>{var f,u;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((u=(f=m.firstName)==null?void 0:f.charAt(0))==null?void 0:u.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:m.firstName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:m.email})]})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:d(m.createdAt)})]},b)})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-4",children:"Platform Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ot,{size:18,className:"text-blue-500"})}),e.jsx("span",{className:"text-gray-400",children:"New Users This Week"})]}),e.jsx("span",{className:"text-white font-semibold",children:n.newThisWeek})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wa,{size:18,className:"text-yellow-500"})}),e.jsx("span",{className:"text-gray-400",children:"Pending KYC"})]}),e.jsx("span",{className:"text-white font-semibold",children:n.pendingKYC})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(xt,{size:18,className:"text-green-500"})}),e.jsx("span",{className:"text-gray-400",children:"Active Trades"})]}),e.jsx("span",{className:"text-white font-semibold",children:"156"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ht,{size:18,className:"text-purple-500"})}),e.jsx("span",{className:"text-gray-400",children:"Pending Withdrawals"})]}),e.jsx("span",{className:"text-white font-semibold",children:"12"})]})]})]})]})]})},Uj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(""),[i,d]=o.useState(null),[c,m]=o.useState(!1),[b,f]=o.useState(null),[u,v]=o.useState(!1),[k,N]=o.useState({type:"",text:""}),[y,p]=o.useState("users"),[g,h]=o.useState([]),[x,w]=o.useState({pending:0,completed:0,rejected:0}),[z,C]=o.useState(null),[B,G]=o.useState(""),[K,ee]=o.useState(""),[X,F]=o.useState(""),[R,W]=o.useState(""),[D,re]=o.useState(""),[O,q]=o.useState(""),[T,j]=o.useState(""),[Z,I]=o.useState(""),[ce,J]=o.useState(""),[le,xe]=o.useState(""),[ze,je]=o.useState([]),[H,be]=o.useState(""),[ue,$]=o.useState(""),[V,de]=o.useState(""),[fe,me]=o.useState(0),ae=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{ve(),Ve()},[]);const ve=async()=>{a(!0);try{const P=await fetch(`${A}/admin/users`);if(P.ok){const oe=await P.json();s(oe.users||[])}}catch(P){console.error("Error fetching users:",P)}a(!1)},Ve=async()=>{try{const P=await fetch(`${A}/admin/password-reset-requests`);if(P.ok){const oe=await P.json();h(oe.requests||[]),w(oe.stats||{pending:0,completed:0,rejected:0})}}catch(P){console.error("Error fetching password reset requests:",P)}},Le=async(P,oe)=>{if(oe==="approve"&&(!B||B.length<6)){N({type:"error",text:"Password must be at least 6 characters"});return}v(!0);try{const Ye=await(await fetch(`${A}/admin/password-reset-requests/${P}/process`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:oe,newPassword:B,adminRemarks:oe==="approve"?"Password reset completed":"Request rejected"})})).json();Ye.success?(N({type:"success",text:Ye.message}),C(null),G(""),Ve()):N({type:"error",text:Ye.message})}catch{N({type:"error",text:"Error processing request"})}v(!1)},S=t.filter(P=>{var oe,Me,Ye;return((oe=P.firstName)==null?void 0:oe.toLowerCase().includes(n.toLowerCase()))||((Me=P.email)==null?void 0:Me.toLowerCase().includes(n.toLowerCase()))||((Ye=P.phone)==null?void 0:Ye.includes(n))}),ie=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ge=async P=>{var oe;try{const Me=await fetch(`' + API_URL + '/trading-accounts/user/${P}`);if(Me.ok){const Ye=await Me.json();je(Ye.accounts||[]),((oe=Ye.accounts)==null?void 0:oe.length)>0&&be(Ye.accounts[0]._id)}}catch(Me){console.error("Error fetching user accounts:",Me)}},Ee=async P=>{var oe;try{const Me=await fetch(`' + API_URL + '/wallet/${P}`);if(Me.ok){const Ye=await Me.json();me(((oe=Ye.wallet)==null?void 0:oe.balance)||0)}}catch(Me){console.error("Error fetching user wallet:",Me)}},M=async(P,oe)=>{d(oe),f(P),m(!0),N({type:"",text:""}),ee(""),F(""),W(""),re(""),q(""),j(""),I(""),J(""),xe(""),je([]),be(""),(P==="credit"||P==="view")&&(await ge(oe._id),await Ee(oe._id))},Q=()=>{m(!1),d(null),f(null)},Ae=async()=>{if(K!==X){N({type:"error",text:"Passwords do not match"});return}if(K.length<6){N({type:"error",text:"Password must be at least 6 characters"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}/password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:K})});if(P.ok)N({type:"success",text:"Password changed successfully"}),setTimeout(Q,1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to change password"})}}catch{N({type:"error",text:"Error changing password"})}v(!1)},te=async()=>{if(!R||parseFloat(R)<=0){N({type:"error",text:"Please enter a valid amount"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}/deduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(R),reason:D||"Admin deduction"})});if(P.ok)N({type:"success",text:`$${R} deducted successfully`}),await Ee(i._id),setTimeout(()=>{f("view"),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to deduct funds"})}}catch{N({type:"error",text:"Error deducting funds"})}v(!1)},Ce=async()=>{if(!O||parseFloat(O)<=0){N({type:"error",text:"Please enter a valid amount"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}/add-fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(O),reason:T||"Admin fund addition"})});if(P.ok)N({type:"success",text:`$${O} added successfully`}),await Ee(i._id),setTimeout(()=>{f("view"),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to add funds"})}}catch{N({type:"error",text:"Error adding funds"})}v(!1)},$e=async()=>{v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}/block`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({blocked:!i.isBlocked,reason:Z||"Blocked by admin"})});if(P.ok)N({type:"success",text:i.isBlocked?"User unblocked":"User blocked"}),setTimeout(()=>{Q(),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to update user status"})}}catch{N({type:"error",text:"Error updating user status"})}v(!1)},et=async()=>{v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}/ban`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({banned:!i.isBanned,reason:Z||"Banned by admin"})});if(P.ok)N({type:"success",text:i.isBanned?"User unbanned":"User banned permanently"}),setTimeout(()=>{Q(),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to update user status"})}}catch{N({type:"error",text:"Error updating user status"})}v(!1)},qe=async()=>{v(!0);try{const P=await fetch(`' + API_URL + '/admin/users/${i._id}`,{method:"DELETE"});if(P.ok)N({type:"success",text:"User deleted successfully"}),setTimeout(()=>{Q(),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to delete user"})}}catch{N({type:"error",text:"Error deleting user"})}v(!1)},Re=async()=>{if(!ce||parseFloat(ce)<=0){N({type:"error",text:"Please enter a valid amount"});return}if(!H){N({type:"error",text:"Please select a trading account"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/trading-account/${H}/add-credit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(ce),reason:le||"Admin credit/bonus",adminId:ae._id})});if(P.ok){const oe=await P.json();N({type:"success",text:`$${ce} credit added successfully`}),await ge(i._id),setTimeout(()=>{f("view"),ve()},1500)}else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to add credit"})}}catch{N({type:"error",text:"Error adding credit"})}v(!1)},Ke=async()=>{if(!ce||parseFloat(ce)<=0){N({type:"error",text:"Please enter a valid amount"});return}if(!H){N({type:"error",text:"Please select a trading account"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/trading-account/${H}/remove-credit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(ce),reason:le||"Admin credit removal",adminId:ae._id})});if(P.ok){const oe=await P.json();N({type:"success",text:`$${ce} credit removed successfully`}),await ge(i._id),setTimeout(()=>{J(""),xe(""),f("tradingAccounts"),ve()},1500)}else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to remove credit"})}}catch{N({type:"error",text:"Error removing credit"})}v(!1)},gt=async()=>{if(!ue||parseFloat(ue)<=0){N({type:"error",text:"Please enter a valid amount"});return}if(!H){N({type:"error",text:"No account selected"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/trading-account/${H}/add-fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(ue),reason:V||"Admin fund addition"})});if(P.ok)N({type:"success",text:`$${ue} added to account successfully`}),await ge(i._id),setTimeout(()=>{f("view"),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to add funds"})}}catch{N({type:"error",text:"Error adding funds to account"})}v(!1)},ne=async()=>{if(!ue||parseFloat(ue)<=0){N({type:"error",text:"Please enter a valid amount"});return}if(!H){N({type:"error",text:"No account selected"});return}v(!0);try{const P=await fetch(`' + API_URL + '/admin/trading-account/${H}/deduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(ue),reason:V||"Admin deduction"})});if(P.ok)N({type:"success",text:`$${ue} deducted from account successfully`}),await ge(i._id),setTimeout(()=>{f("view"),ve()},1500);else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to deduct funds"})}}catch{N({type:"error",text:"Error deducting funds from account"})}v(!1)},Fe=async()=>{v(!0);try{const P=await fetch(`' + API_URL + '/admin/login-as-user/${i._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:ae._id})});if(P.ok){const oe=await P.json();localStorage.setItem("token",oe.token),localStorage.setItem("user",JSON.stringify(oe.user)),window.open("/dashboard","_blank"),N({type:"success",text:"Logged in as user - opening in new tab"})}else{const oe=await P.json();N({type:"error",text:oe.message||"Failed to login as user"})}}catch{N({type:"error",text:"Error logging in as user"})}v(!1)},st=()=>{var P,oe,Me,Ye,Et,at,Ss,Mt,Ms,dt,Pt;return!c||!i?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((oe=(P=i.firstName)==null?void 0:P.charAt(0))==null?void 0:oe.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:i.firstName}),e.jsx("p",{className:"text-gray-500 text-sm",children:i.email})]})]}),e.jsx("button",{onClick:Q,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Se,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-4",children:[k.text&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-center gap-2 ${k.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:[k.type==="success"?e.jsx(nt,{size:18}):e.jsx(Wi,{size:18}),e.jsx("span",{className:"text-sm",children:k.text})]}),b==="view"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Full Name"}),e.jsx("p",{className:"text-white",children:i.firstName})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Phone"}),e.jsx("p",{className:"text-white",children:i.phone||"N/A"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Joined"}),e.jsx("p",{className:"text-white",children:ie(i.createdAt)})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Status"}),e.jsx("p",{className:`${i.isBanned?"text-red-500":i.isBlocked?"text-yellow-500":"text-green-500"}`,children:i.isBanned?"Banned":i.isBlocked?"Blocked":"Active"})]})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Email"}),e.jsx("p",{className:"text-white",children:i.email})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-500/10 to-teal-500/10 border border-green-500/30 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:" Main Wallet Balance"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(fe==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f("addFundWallet"),className:"p-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors",title:"Add to Wallet",children:e.jsx(ut,{size:16})}),e.jsx("button",{onClick:()=>f("deductWallet"),className:"p-2 bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors",title:"Deduct from Wallet",children:e.jsx(ur,{size:16})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[e.jsxs("button",{onClick:()=>f("password"),className:"flex items-center justify-center gap-2 p-3 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 transition-colors",children:[e.jsx(Os,{size:16}),e.jsx("span",{className:"text-sm",children:"Change Password"})]}),e.jsxs("button",{onClick:()=>f("addFund"),className:"flex items-center justify-center gap-2 p-3 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors",children:[e.jsx(ht,{size:16}),e.jsx("span",{className:"text-sm",children:"Add Fund"})]}),e.jsxs("button",{onClick:()=>f("deduct"),className:"flex items-center justify-center gap-2 p-3 bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors",children:[e.jsx(wt,{size:16}),e.jsx("span",{className:"text-sm",children:"Deduct Fund"})]}),e.jsxs("button",{onClick:()=>f("block"),className:`flex items-center justify-center gap-2 p-3 rounded-lg transition-colors ${i.isBlocked?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-yellow-500/20 text-yellow-500 hover:bg-yellow-500/30"}`,children:[e.jsx(ko,{size:16}),e.jsx("span",{className:"text-sm",children:i.isBlocked?"Unblock":"Block"})]}),e.jsxs("button",{onClick:()=>f("ban"),className:`flex items-center justify-center gap-2 p-3 rounded-lg transition-colors ${i.isBanned?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-red-500/20 text-red-500 hover:bg-red-500/30"}`,children:[e.jsx(ar,{size:16}),e.jsx("span",{className:"text-sm",children:i.isBanned?"Unban":"Ban"})]}),e.jsxs("button",{onClick:()=>f("tradingAccounts"),className:"flex items-center justify-center gap-2 p-3 bg-teal-500/20 text-teal-500 rounded-lg hover:bg-teal-500/30 transition-colors",children:[e.jsx(tr,{size:16}),e.jsx("span",{className:"text-sm",children:"Trading Accounts"})]}),e.jsxs("button",{onClick:Fe,disabled:u,className:"flex items-center justify-center gap-2 p-3 bg-cyan-500/20 text-cyan-500 rounded-lg hover:bg-cyan-500/30 transition-colors",children:[e.jsx(sb,{size:16}),e.jsx("span",{className:"text-sm",children:u?"Opening...":"Login as User"})]})]})]}),b==="tradingAccounts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-teal-500 mb-2",children:[e.jsx(tr,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Trading Accounts"})]}),ze.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm bg-dark-700 rounded-lg",children:"No trading accounts found"}):e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto",children:ze.map(Pe=>{var Y,we,Be;return e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:Pe.accountId}),e.jsxs("p",{className:"text-gray-500 text-xs",children:[((Y=Pe.accountTypeId)==null?void 0:Y.name)||"Standard","  Leverage: ",Pe.leverage]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white text-lg font-bold",children:["$",((we=Pe.balance)==null?void 0:we.toFixed(2))||"0.00"]}),Pe.credit>0&&e.jsxs("p",{className:"text-purple-400 text-xs",children:["Credit: $",(Be=Pe.credit)==null?void 0:Be.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{be(Pe._id),f("addFundAccount")},className:"flex-1 py-2 text-xs bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(ut,{size:14})," Add Fund"]}),e.jsxs("button",{onClick:()=>{be(Pe._id),f("deductAccount")},className:"flex-1 py-2 text-xs bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(ur,{size:14})," Deduct"]}),e.jsxs("button",{onClick:()=>{be(Pe._id),f("credit")},className:"flex-1 py-2 text-xs bg-purple-500/20 text-purple-500 rounded-lg hover:bg-purple-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(Ku,{size:14})," Add Credit"]}),e.jsxs("button",{onClick:()=>{be(Pe._id),f("removeCredit")},className:"flex-1 py-2 text-xs bg-pink-500/20 text-pink-500 rounded-lg hover:bg-pink-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(ur,{size:14})," Remove Credit"]})]})]},Pe._id)})}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"})})]}),b==="password"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-500 mb-2",children:[e.jsx(Os,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Change Password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"password",value:K,onChange:Pe=>ee(Pe.target.value),placeholder:"Enter new password",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Confirm Password"}),e.jsx("input",{type:"password",value:X,onChange:Pe=>F(Pe.target.value),placeholder:"Confirm new password",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Ae,disabled:u,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:u?"Updating...":"Update Password"})]})]}),b==="deduct"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(wt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct Funds"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(fe==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:R,onChange:Pe=>W(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:D,onChange:Pe=>re(Pe.target.value),placeholder:"Enter reason for deduction",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:te,disabled:u,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Deduct Fund"})]})]}),b==="addFund"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(ht,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(fe==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:O,onChange:Pe=>q(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:T,onChange:Pe=>j(Pe.target.value),placeholder:"Enter reason for adding funds",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Ce,disabled:u,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Add Fund"})]})]}),b==="block"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i.isBlocked?"text-green-500":"text-yellow-500"} mb-2`,children:[e.jsx(ko,{size:20}),e.jsx("h4",{className:"font-semibold",children:i.isBlocked?"Unblock User":"Block User"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:i.isBlocked?"This will allow the user to access their account again.":"Blocking will temporarily prevent the user from logging in and accessing their account."}),!i.isBlocked&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:Z,onChange:Pe=>I(Pe.target.value),placeholder:"Enter reason for blocking",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-yellow-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:$e,disabled:u,className:`flex-1 py-3 text-white rounded-lg transition-colors disabled:opacity-50 ${i.isBlocked?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600"}`,children:u?"Processing...":i.isBlocked?"Unblock User":"Block User"})]})]}),b==="ban"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i.isBanned?"text-green-500":"text-red-500"} mb-2`,children:[e.jsx(ar,{size:20}),e.jsx("h4",{className:"font-semibold",children:i.isBanned?"Unban User":"Ban User Permanently"})]}),e.jsx("div",{className:`p-3 rounded-lg ${i.isBanned?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsx("p",{className:`text-sm ${i.isBanned?"text-green-400":"text-red-400"}`,children:i.isBanned?"This will remove the permanent ban and restore user access.":" Warning: Banning is a permanent action. The user will lose all access to their account and funds."})}),!i.isBanned&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Required)"}),e.jsx("input",{type:"text",value:Z,onChange:Pe=>I(Pe.target.value),placeholder:"Enter reason for banning",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:et,disabled:u||!i.isBanned&&!Z,className:`flex-1 py-3 text-white rounded-lg transition-colors disabled:opacity-50 ${i.isBanned?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:u?"Processing...":i.isBanned?"Unban User":"Ban Permanently"})]})]}),b==="credit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-500 mb-2",children:[e.jsx(Ku,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Credit/Bonus"})]}),e.jsx("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:e.jsx("p",{className:"text-purple-400 text-sm",children:"Credit adds to equity for trading but cannot be withdrawn. Only profits made using credit can be withdrawn."})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Select Trading Account"}),e.jsxs("select",{value:H,onChange:Pe=>be(Pe.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500",children:[ze.length===0&&e.jsx("option",{value:"",children:"No accounts available"}),ze.map(Pe=>{var Y,we;return e.jsxs("option",{value:Pe._id,children:[Pe.accountId," - Balance: $",(Y=Pe.balance)==null?void 0:Y.toFixed(2)," | Credit: $",((we=Pe.credit)==null?void 0:we.toFixed(2))||"0.00"]},Pe._id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Credit Amount ($)"}),e.jsx("input",{type:"number",value:ce,onChange:Pe=>J(Pe.target.value),placeholder:"Enter credit amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:le,onChange:Pe=>xe(Pe.target.value),placeholder:"e.g., Deposit bonus, Promotion",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Re,disabled:u||!H,className:"flex-1 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Add Credit"})]})]}),b==="removeCredit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-500 mb-2",children:[e.jsx(ur,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Remove Credit"})]}),e.jsx("div",{className:"bg-pink-500/10 p-3 rounded-lg",children:e.jsx("p",{className:"text-pink-400 text-sm",children:"This will remove credit/bonus from the trading account. Cannot remove more than available credit."})}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Selected Account"}),e.jsx("p",{className:"text-white font-medium",children:((Me=ze.find(Pe=>Pe._id===H))==null?void 0:Me.accountId)||"N/A"}),e.jsxs("p",{className:"text-purple-400 text-sm",children:["Current Credit: $",((Et=(Ye=ze.find(Pe=>Pe._id===H))==null?void 0:Ye.credit)==null?void 0:Et.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Remove ($)"}),e.jsx("input",{type:"number",value:ce,onChange:Pe=>J(Pe.target.value),placeholder:"Enter amount to remove",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:le,onChange:Pe=>xe(Pe.target.value),placeholder:"e.g., Credit expired, Adjustment",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-pink-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{J(""),xe(""),f("tradingAccounts")},className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Ke,disabled:u||!H,className:"flex-1 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Remove Credit"})]})]}),b==="delete"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-2",children:[e.jsx(Vt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Delete User"})]}),e.jsx("div",{className:"bg-red-500/10 p-3 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:" This action cannot be undone. All user data, trading accounts, and transaction history will be permanently deleted."})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-white font-medium",children:i.firstName}),"'s account?"]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:Q,className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:qe,disabled:u,className:"flex-1 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:u?"Deleting...":"Delete User"})]})]}),b==="addFundWallet"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(ht,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds to Wallet"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(fe==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:O,onChange:Pe=>q(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:T,onChange:Pe=>j(Pe.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Ce,disabled:u,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Add to Wallet"})]})]}),b==="deductWallet"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(ht,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct from Wallet"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(fe==null?void 0:fe.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:R,onChange:Pe=>W(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:D,onChange:Pe=>re(Pe.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:te,disabled:u,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Deduct from Wallet"})]})]}),b==="addFundAccount"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(wt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds to Trading Account"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Selected Account"}),e.jsx("p",{className:"text-white font-medium",children:((at=ze.find(Pe=>Pe._id===H))==null?void 0:at.accountId)||"N/A"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Balance: $",((Mt=(Ss=ze.find(Pe=>Pe._id===H))==null?void 0:Ss.balance)==null?void 0:Mt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:ue,onChange:Pe=>$(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:V,onChange:Pe=>de(Pe.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{$(""),de(""),f("view")},className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:gt,disabled:u,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Add to Account"})]})]}),b==="deductAccount"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(wt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct from Trading Account"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Selected Account"}),e.jsx("p",{className:"text-white font-medium",children:((Ms=ze.find(Pe=>Pe._id===H))==null?void 0:Ms.accountId)||"N/A"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Balance: $",((Pt=(dt=ze.find(Pe=>Pe._id===H))==null?void 0:dt.balance)==null?void 0:Pt.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:ue,onChange:Pe=>$(Pe.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:V,onChange:Pe=>de(Pe.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{$(""),de(""),f("view")},className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:ne,disabled:u,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:u?"Processing...":"Deduct from Account"})]})]})]})]})})};return e.jsxs(as,{title:"User Management",subtitle:"Manage all registered users",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>p("users"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y==="users"?"bg-blue-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:["Users (",t.length,")"]}),e.jsxs("button",{onClick:()=>p("password-reset"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${y==="password-reset"?"bg-blue-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:[e.jsx(Ic,{size:16}),"Password Requests",x.pending>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:x.pending})]})]}),k.text&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${k.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:k.text}),y==="password-reset"?e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Password Reset Requests"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Pending: ",x.pending," | Completed: ",x.completed," | Rejected: ",x.rejected]})]}),e.jsx("button",{onClick:Ve,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",children:e.jsx(Je,{size:18,className:"text-gray-400"})})]}),e.jsx("div",{className:"p-4 space-y-3",children:g.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No password reset requests"}):g.map(P=>{var oe,Me;return e.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(Gt,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[(oe=P.userId)==null?void 0:oe.firstName," ",(Me=P.userId)==null?void 0:Me.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:P.email}),P.newEmail&&e.jsxs("p",{className:"text-yellow-500 text-xs mt-1",children:["Wants to change email to: ",P.newEmail]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${P.status==="Pending"?"bg-yellow-500/20 text-yellow-500":P.status==="Completed"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:P.status}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(P.createdAt).toLocaleDateString()})]})]}),P.status==="Pending"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-600",children:z===P._id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"text",value:B,onChange:Ye=>G(Ye.target.value),placeholder:"Enter new password (min 6 chars)",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{C(null),G("")},className:"px-4 py-2 bg-dark-600 text-gray-400 rounded-lg hover:bg-dark-500 text-sm",children:"Cancel"}),e.jsx("button",{onClick:()=>Le(P._id,"approve"),disabled:u,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:u?"Processing...":"Reset Password"}),e.jsx("button",{onClick:()=>Le(P._id,"reject"),disabled:u,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm disabled:opacity-50",children:"Reject"})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"After resetting, send the new password to user's email manually."})]}):e.jsx("button",{onClick:()=>C(P._id),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Process Request"})}),P.status!=="Pending"&&P.adminRemarks&&e.jsxs("p",{className:"mt-2 text-gray-500 text-xs",children:["Remarks: ",P.adminRemarks]})]},P._id)})})]}):e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Users"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.length," total users"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:P=>l(P.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("button",{onClick:ve,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Je,{size:18,className:`text-gray-400 ${r?"animate-spin":""}`}),e.jsx("span",{className:"sm:hidden text-gray-400 text-sm",children:"Refresh"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):S.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:n?"No users found matching your search":"No users registered yet"}):S.map(P=>{var oe,Me;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium text-lg",children:((Me=(oe=P.firstName)==null?void 0:oe.charAt(0))==null?void 0:Me.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:P.firstName||"Unknown"}),e.jsx("p",{className:`text-xs ${P.isBanned?"text-red-500":P.isBlocked?"text-yellow-500":"text-green-500"}`,children:P.isBanned?"Banned":P.isBlocked?"Blocked":"Active"})]})]}),e.jsx("button",{onClick:()=>M("view",P),className:"p-2 bg-dark-600 rounded-lg hover:bg-dark-500 transition-colors",children:e.jsx(bi,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(rr,{size:14}),e.jsx("span",{className:"truncate",children:P.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ni,{size:14}),e.jsx("span",{children:P.phone||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsxs("span",{children:["Joined ",ie(P.createdAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(ht,{size:14}),e.jsx("span",{className:"text-blue-400 text-sm",children:"Click View for balances"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>M("view",P),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:[e.jsx(ms,{size:14}),"View"]}),e.jsxs("button",{onClick:()=>M("password",P),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-purple-500/20 text-purple-500 rounded-lg text-sm hover:bg-purple-500/30 transition-colors",children:[e.jsx(Os,{size:14}),"Password"]}),e.jsxs("button",{onClick:()=>M("delete",P),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:[e.jsx(Vt,{size:14}),"Delete"]})]})]},P._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Email"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Phone"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Joined"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:n?"No users found matching your search":"No users registered yet"})}):S.map(P=>{var oe,Me;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((Me=(oe=P.firstName)==null?void 0:oe.charAt(0))==null?void 0:Me.toUpperCase())||"U"})}),e.jsx("span",{className:"text-white font-medium",children:P.firstName||"Unknown"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(rr,{size:14}),e.jsx("span",{children:P.email})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ni,{size:14}),e.jsx("span",{children:P.phone||"N/A"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{onClick:()=>M("view",P),className:"text-blue-400 hover:text-blue-300 text-sm underline",children:"View Balances"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P.isBanned?"bg-red-500/20 text-red-500":P.isBlocked?"bg-yellow-500/20 text-yellow-500":"bg-green-500/20 text-green-500"}`,children:P.isBanned?"Banned":P.isBlocked?"Blocked":"Active"})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:ie(P.createdAt)}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>M("view",P),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Details",children:e.jsx(ms,{size:16})}),e.jsx("button",{onClick:()=>M("password",P),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Change Password",children:e.jsx(Os,{size:16})}),e.jsx("button",{onClick:()=>M("deduct",P),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-orange-500",title:"Deduct Fund",children:e.jsx(wt,{size:16})}),e.jsx("button",{onClick:()=>M("block",P),className:`p-2 hover:bg-dark-600 rounded-lg transition-colors ${P.isBlocked?"text-yellow-500":"text-gray-400 hover:text-yellow-500"}`,title:P.isBlocked?"Unblock User":"Block User",children:e.jsx(ko,{size:16})}),e.jsx("button",{onClick:()=>M("delete",P),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Delete User",children:e.jsx(Vt,{size:16})})]})})]},P._id)})})]})})]}),st()]})},zj=()=>{var D,re;const t=Nt(),[s,r]=o.useState("Accounts"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[m,b]=o.useState(""),[f,u]=o.useState(!1),[v,k]=o.useState(!1),[N,y]=o.useState(null),[p,g]=o.useState(""),[h,x]=o.useState(""),[w,z]=o.useState({leverage:"",exposureLimit:"",status:""}),[C,B]=o.useState(""),G=[{name:"Dashboard",icon:Is,path:"/admin/dashboard"},{name:"User Management",icon:ot,path:"/admin/dashboard"},{name:"Accounts",icon:tr,path:"/admin/accounts"},{name:"Account Types",icon:tr,path:"/admin/account-types"},{name:"Transactions",icon:fr,path:"/admin/transactions"},{name:"Payment Methods",icon:fr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),K()},[t]);const K=async()=>{c(!0);try{const q=await(await fetch(`${A}/trading-accounts/all`)).json();i(q.accounts||[])}catch(O){console.error("Error:",O)}c(!1)},ee=async()=>{if(N)try{(await fetch(`${A}/trading-accounts/${N._id}/admin-update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok&&(x("Account updated successfully!"),u(!1),y(null),K(),setTimeout(()=>x(""),3e3))}catch{g("Error updating account")}},X=async()=>{if(!N||!C||C.length!==4){g("PIN must be exactly 4 digits");return}try{(await fetch(`${A}/trading-accounts/${N._id}/reset-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPin:C})})).ok&&(x("PIN reset successfully!"),k(!1),y(null),B(""),setTimeout(()=>x(""),3e3))}catch{g("Error resetting PIN")}},F=O=>{var q;y(O),z({leverage:O.leverage,exposureLimit:((q=O.exposureLimit)==null?void 0:q.toString())||"0",status:O.status}),u(!0),g("")},R=l.filter(O=>{var q,T,j,Z,I;return((q=O.accountId)==null?void 0:q.toLowerCase().includes(m.toLowerCase()))||((j=(T=O.userId)==null?void 0:T.firstName)==null?void 0:j.toLowerCase().includes(m.toLowerCase()))||((I=(Z=O.userId)==null?void 0:Z.email)==null?void 0:I.toLowerCase().includes(m.toLowerCase()))}),W=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:G.map(O=>e.jsxs("button",{onClick:()=>t(O.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===O.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(O.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:O.name})]},O.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:W,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Account Management"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage all user trading accounts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search accounts...",value:m,onChange:O=>b(O.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 w-64"})]}),e.jsx("button",{onClick:K,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600 transition-colors",children:e.jsx(Je,{size:18,className:`text-gray-400 ${d?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"p-6",children:[h&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(nt,{size:18})," ",h]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500",children:p}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Accounts"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:l.length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active"}),e.jsx("p",{className:"text-green-500 text-2xl font-bold",children:l.filter(O=>O.status==="Active").length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Suspended"}),e.jsx("p",{className:"text-red-500 text-2xl font-bold",children:l.filter(O=>O.status==="Suspended").length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Balance"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",l.reduce((O,q)=>O+(q.balance||0),0).toLocaleString()]})]})]}),e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Account ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Leverage"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:m?"No accounts found":"No trading accounts yet"})}):R.map(O=>{var q,T,j,Z;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-accent-green font-mono text-sm",children:O.accountId})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((q=O.userId)==null?void 0:q.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:(T=O.userId)==null?void 0:T.email})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:((j=O.accountTypeId)==null?void 0:j.name)||"N/A"}),e.jsxs("td",{className:"py-4 px-4 text-white font-medium",children:["$",((Z=O.balance)==null?void 0:Z.toLocaleString())||0]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:O.leverage}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${O.status==="Active"?"bg-green-500/20 text-green-500":O.status==="Suspended"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:O.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(O),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Edit",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>{y(O),k(!0),g("")},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-yellow-500",title:"Reset PIN",children:e.jsx(Os,{size:16})})]})})]},O._id)})})]})})]})]}),f&&N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Edit Account"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Account ID"}),e.jsx("p",{className:"text-accent-green font-mono",children:N.accountId})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Leverage"}),e.jsxs("select",{value:w.leverage,onChange:O=>z({...w,leverage:O.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"1:50",children:"1:50"}),e.jsx("option",{value:"1:100",children:"1:100"}),e.jsx("option",{value:"1:200",children:"1:200"}),e.jsx("option",{value:"1:500",children:"1:500"}),e.jsx("option",{value:"1:1000",children:"1:1000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Exposure Limit ($)"}),e.jsx("input",{type:"number",value:w.exposureLimit,onChange:O=>z({...w,exposureLimit:O.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Status"}),e.jsxs("select",{value:w.status,onChange:O=>z({...w,status:O.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Suspended",children:"Suspended"}),e.jsx("option",{value:"Closed",children:"Closed"})]})]})]}),p&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:p}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:ee,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:"Update"})]})]})}),v&&N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reset Account PIN"}),e.jsx("button",{onClick:()=>{k(!1),B("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Account ID"}),e.jsx("p",{className:"text-accent-green font-mono",children:N.accountId}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["User: ",((D=N.userId)==null?void 0:D.firstName)||((re=N.userId)==null?void 0:re.email)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"New 4-digit PIN"}),e.jsx("input",{type:"text",maxLength:4,value:C,onChange:O=>B(O.target.value.replace(/\D/g,"")),placeholder:"Enter new PIN",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white text-center text-2xl tracking-widest focus:outline-none focus:border-red-500"})]}),p&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:p}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{k(!1),B("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:X,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:"Reset PIN"})]})]})})]})},Fj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(!1),[i,d]=o.useState(null),[c,m]=o.useState(""),[b,f]=o.useState(""),[u,v]=o.useState({name:"",description:"",minDeposit:"",leverage:"1:100",exposureLimit:"",minSpread:"0",commission:"0",isActive:!0,isDemo:!1,demoBalance:"10000"});o.useEffect(()=>{k()},[]);const k=async()=>{a(!0);try{const w=await(await fetch(`${A}/account-types/all`)).json();s(w.accountTypes||[])}catch(x){console.error("Error fetching account types:",x)}a(!1)},N=async()=>{if(!u.name||!u.minDeposit||!u.leverage){m("Please fill in all required fields");return}try{const x=i?`${A}/account-types/${i._id}`:`${A}/account-types`,w=await fetch(x,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,minDeposit:parseFloat(u.minDeposit),exposureLimit:u.exposureLimit?parseFloat(u.exposureLimit):0,minSpread:parseFloat(u.minSpread)||0,commission:parseFloat(u.commission)||0,isDemo:u.isDemo,demoBalance:u.isDemo?parseFloat(u.demoBalance):0})}),z=await w.json();w.ok?(f(i?"Account type updated!":"Account type created!"),l(!1),g(),k(),setTimeout(()=>f(""),3e3)):m(z.message)}catch{m("Error saving account type")}},y=async x=>{if(confirm("Are you sure you want to delete this account type?"))try{(await fetch(`${A}/account-types/${x}`,{method:"DELETE"})).ok&&(f("Account type deleted!"),k(),setTimeout(()=>f(""),3e3))}catch{m("Error deleting account type")}},p=async x=>{try{(await fetch(`${A}/account-types/${x._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,isActive:!x.isActive})})).ok&&k()}catch{m("Error updating account type")}},g=()=>{v({name:"",description:"",minDeposit:"",leverage:"1:100",exposureLimit:"",minSpread:"0",commission:"0",isActive:!0,isDemo:!1,demoBalance:"10000"}),d(null),m("")},h=x=>{var w,z,C,B;d(x),v({name:x.name,description:x.description||"",minDeposit:x.minDeposit.toString(),leverage:x.leverage,exposureLimit:((w=x.exposureLimit)==null?void 0:w.toString())||"",minSpread:((z=x.minSpread)==null?void 0:z.toString())||"0",commission:((C=x.commission)==null?void 0:C.toString())||"0",isActive:x.isActive,isDemo:x.isDemo||!1,demoBalance:((B=x.demoBalance)==null?void 0:B.toString())||"10000"}),l(!0),m("")};return e.jsxs(as,{title:"Account Types",subtitle:"Manage trading account types",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{onClick:()=>{g(),l(!0)},className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(ut,{size:18})," Add Account Type"]})}),e.jsxs("div",{children:[b&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(nt,{size:18})," ",b]}),r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:[t.map(x=>e.jsxs("div",{className:`bg-dark-800 rounded-lg p-4 border ${x.isActive?"border-gray-700":"border-red-500/30 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-white font-medium text-sm",children:x.name}),x.isDemo&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] bg-yellow-500/20 text-yellow-500",children:"DEMO"})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${x.isActive?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:x.isActive?"Active":"Disabled"})]}),e.jsx("p",{className:"text-gray-500 text-xs mb-3 line-clamp-1",children:x.description||"No description"}),e.jsxs("div",{className:"space-y-1.5 mb-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Min Deposit"}),e.jsxs("span",{className:"text-white",children:["$",x.minDeposit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Leverage"}),e.jsx("span",{className:"text-white",children:x.leverage})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Exposure"}),e.jsxs("span",{className:"text-white",children:["$",x.exposureLimit||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Min Spread"}),e.jsxs("span",{className:"text-white",children:[x.minSpread||0," pips"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Commission"}),e.jsx("span",{className:"text-white",children:x.commission>0?`$${x.commission}`:"NO COMM"})]}),x.isDemo&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Demo Bal"}),e.jsxs("span",{className:"text-yellow-500",children:["$",x.demoBalance||1e4]})]})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsxs("button",{onClick:()=>h(x),className:"flex-1 flex items-center justify-center gap-1 bg-dark-700 text-white py-1.5 rounded text-xs hover:bg-dark-600 transition-colors",children:[e.jsx(Jt,{size:12})," Edit"]}),e.jsx("button",{onClick:()=>p(x),className:`flex-1 py-1.5 rounded transition-colors text-xs ${x.isActive?"bg-orange-500/20 text-orange-500 hover:bg-orange-500/30":"bg-green-500/20 text-green-500 hover:bg-green-500/30"}`,children:x.isActive?"Disable":"Enable"}),e.jsx("button",{onClick:()=>y(x._id),className:"px-2 py-1.5 bg-red-500/20 text-red-500 rounded hover:bg-red-500/30 transition-colors",children:e.jsx(Vt,{size:12})})]})]},x._id)),t.length===0&&e.jsxs("div",{className:"col-span-3 bg-dark-800 rounded-xl p-8 border border-gray-800 text-center",children:[e.jsx(tr,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No account types created yet"})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:i?"Edit Account Type":"Create Account Type"}),e.jsx("button",{onClick:()=>{l(!1),g()},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Account Name *"}),e.jsx("input",{type:"text",value:u.name,onChange:x=>v({...u,name:x.target.value}),placeholder:"e.g., Standard, Premium, VIP",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:u.description,onChange:x=>v({...u,description:x.target.value}),placeholder:"Account type description",rows:2,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Deposit ($) *"}),e.jsx("input",{type:"number",value:u.minDeposit,onChange:x=>v({...u,minDeposit:x.target.value}),placeholder:"100",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Leverage *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white",children:"1:"}),e.jsx("input",{type:"number",min:"1",value:u.leverage.replace("1:",""),onChange:x=>v({...u,leverage:`1:${x.target.value}`}),placeholder:"100",className:"flex-1 bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Enter any leverage value (e.g., 100, 500, 1000, 2000)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Exposure Limit ($)"}),e.jsx("input",{type:"number",value:u.exposureLimit,onChange:x=>v({...u,exposureLimit:x.target.value}),placeholder:"0 for unlimited",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Spread (pips)"}),e.jsx("input",{type:"number",step:"0.1",value:u.minSpread,onChange:x=>v({...u,minSpread:x.target.value}),placeholder:"0",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Commission ($)"}),e.jsx("input",{type:"number",step:"0.01",value:u.commission,onChange:x=>v({...u,commission:x.target.value}),placeholder:"0",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white font-medium",children:"Demo Account"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Enable this for practice/demo accounts with virtual funds"})]}),e.jsx("button",{type:"button",onClick:()=>v({...u,isDemo:!u.isDemo}),className:`w-12 h-6 rounded-full transition-colors ${u.isDemo?"bg-yellow-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${u.isDemo?"translate-x-6":"translate-x-0.5"}`})})]}),u.isDemo&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-600",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Demo Balance ($)"}),e.jsx("input",{type:"number",value:u.demoBalance,onChange:x=>v({...u,demoBalance:x.target.value}),placeholder:"10000",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Virtual balance users will receive when opening this account type"})]})]})]}),c&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:c}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{l(!1),g()},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600 transition-colors",children:i?"Update":"Create"})]})]})})]})},_j=()=>{const t=Nt(),[s,r]=o.useState("Transactions"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[m,b]=o.useState("all"),[f,u]=o.useState(""),[v,k]=o.useState(""),[N,y]=o.useState(!1),[p,g]=o.useState(null),[h,x]=o.useState(""),[w,z]=o.useState(""),C=[{name:"Dashboard",icon:Is,path:"/admin/dashboard"},{name:"User Management",icon:ot,path:"/admin/dashboard"},{name:"Account Types",icon:tr,path:"/admin/account-types"},{name:"Transactions",icon:fr,path:"/admin/transactions"},{name:"Payment Methods",icon:fr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),B()},[t]);const B=async()=>{c(!0);try{const R=await(await fetch(`${A}/wallet/admin/transactions`)).json();i(R.transactions||[])}catch(F){console.error("Error:",F)}c(!1)},G=async()=>{if(p)try{const F=h==="approve"?"approve":"reject";(await fetch(`${A}/wallet/transaction/${p._id}/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:w})})).ok&&(k(`Transaction ${h}d!`),y(!1),g(null),z(""),B(),setTimeout(()=>k(""),3e3))}catch{u("Error processing transaction")}},K=l.filter(F=>m==="all"?!0:m==="pending"?F.status==="Pending":m==="deposits"?F.type==="Deposit":m==="withdrawals"?F.type==="Withdrawal":!0),ee=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:C.map(F=>e.jsxs("button",{onClick:()=>t(F.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===F.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(F.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:F.name})]},F.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:X,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Transactions"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage deposits & withdrawals"})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","deposits","withdrawals"].map(F=>e.jsx("button",{onClick:()=>b(F),className:`px-4 py-2 rounded-lg text-sm capitalize ${m===F?"bg-red-500 text-white":"bg-dark-700 text-gray-400"}`,children:F},F))})]}),e.jsxs("div",{className:"p-6",children:[v&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(nt,{size:18})," ",v]}),e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:"No transactions found"})}):K.map(F=>{var R,W;return e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"py-4 px-4 text-white",children:((R=F.userId)==null?void 0:R.firstName)||((W=F.userId)==null?void 0:W.email)||"Unknown"}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[F.type==="Deposit"?e.jsx(Dn,{size:16,className:"text-green-500"}):e.jsx(In,{size:16,className:"text-red-500"}),e.jsx("span",{className:"text-white",children:F.type})]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${F.type==="Deposit"?"text-green-500":"text-red-500"}`,children:["$",F.amount]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:F.paymentMethod}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.status==="Approved"?"bg-green-500/20 text-green-500":F.status==="Rejected"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:F.status})}),e.jsx("td",{className:"py-4 px-4 text-gray-400 text-sm",children:ee(F.createdAt)}),e.jsx("td",{className:"py-4 px-4",children:F.status==="Pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{g(F),x("approve"),y(!0)},className:"p-2 bg-green-500/20 text-green-500 rounded hover:bg-green-500/30",children:e.jsx(nt,{size:14})}),e.jsx("button",{onClick:()=>{g(F),x("reject"),y(!0)},className:"p-2 bg-red-500/20 text-red-500 rounded hover:bg-red-500/30",children:e.jsx(Se,{size:14})})]})})]},F._id)})})]})})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg mb-4",children:[h==="approve"?"Approve":"Reject"," Transaction"]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Amount: ",e.jsxs("span",{className:"text-white font-medium",children:["$",p==null?void 0:p.amount]})]}),e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Admin Remarks (Optional)"}),e.jsx("textarea",{value:w,onChange:F=>z(F.target.value),placeholder:"Add remarks...",rows:3,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:G,className:`flex-1 font-medium py-3 rounded-lg ${h==="approve"?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} text-white`,children:h==="approve"?"Approve":"Reject"})]})]})})]})},Rj=()=>{const t=Nt(),[s,r]=o.useState("Payment Methods"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[m,b]=o.useState(!1),[f,u]=o.useState(null),[v,k]=o.useState(""),[N,y]=o.useState(""),[p,g]=o.useState({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),h=[{name:"Dashboard",icon:Is,path:"/admin/dashboard"},{name:"User Management",icon:ot,path:"/admin/dashboard"},{name:"Account Types",icon:tr,path:"/admin/account-types"},{name:"Transactions",icon:fr,path:"/admin/transactions"},{name:"Payment Methods",icon:fr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),x()},[t]);const x=async()=>{c(!0);try{const F=await(await fetch(`${A}/payment-methods/all`)).json();i(F.paymentMethods||[])}catch(X){console.error("Error:",X)}c(!1)},w=async()=>{if(!p.type){k("Please select a payment type");return}try{const X=f?`${A}/payment-methods/${f._id}`:`${A}/payment-methods`;(await fetch(X,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(y(f?"Payment method updated!":"Payment method created!"),b(!1),B(),x(),setTimeout(()=>y(""),3e3))}catch{k("Error saving payment method")}},z=async X=>{if(confirm("Delete this payment method?"))try{(await fetch(`${A}/payment-methods/${X}`,{method:"DELETE"})).ok&&(y("Payment method deleted!"),x(),setTimeout(()=>y(""),3e3))}catch{k("Error deleting")}},C=async X=>{try{await fetch(`${A}/payment-methods/${X._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...X,isActive:!X.isActive})}),x()}catch{k("Error updating")}},B=()=>{g({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),u(null),k("")},G=X=>{u(X),g({...X}),b(!0)},K=X=>X==="Bank Transfer"?e.jsx(Dh,{size:24}):X==="UPI"?e.jsx(Qr,{size:24}):e.jsx(vi,{size:24}),ee=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:h.map(X=>e.jsxs("button",{onClick:()=>t(X.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===X.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(X.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:X.name})]},X.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:ee,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(ws,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Payment Methods"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage deposit/withdrawal methods"})]}),e.jsxs("button",{onClick:()=>{B(),b(!0)},className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:[e.jsx(ut,{size:18})," Add Method"]})]}),e.jsxs("div",{className:"p-6",children:[N&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(nt,{size:18})," ",N]}),d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Je,{size:24,className:"text-gray-500 animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.map(X=>e.jsxs("div",{className:`bg-dark-800 rounded-xl p-5 border ${X.isActive?"border-gray-800":"border-red-500/30 opacity-60"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-700 rounded-lg flex items-center justify-center text-gray-400",children:K(X.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:X.type}),e.jsx("span",{className:`text-xs ${X.isActive?"text-green-500":"text-red-500"}`,children:X.isActive?"Active":"Disabled"})]})]})}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[X.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-400",children:["Bank: ",e.jsx("span",{className:"text-white",children:X.bankName||"N/A"})]}),e.jsxs("p",{className:"text-gray-400",children:["Account: ",e.jsx("span",{className:"text-white",children:X.accountNumber||"N/A"})]}),e.jsxs("p",{className:"text-gray-400",children:["Name: ",e.jsx("span",{className:"text-white",children:X.accountHolderName||"N/A"})]})]}),X.type==="UPI"&&e.jsxs("p",{className:"text-gray-400",children:["UPI ID: ",e.jsx("span",{className:"text-white",children:X.upiId||"N/A"})]}),X.type==="QR Code"&&e.jsxs("p",{className:"text-gray-400",children:["QR: ",e.jsx("span",{className:"text-white",children:X.qrCodeImage?"Uploaded":"Not set"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>G(X),className:"flex-1 flex items-center justify-center gap-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600 text-sm",children:[e.jsx(Jt,{size:14})," Edit"]}),e.jsx("button",{onClick:()=>C(X),className:`flex-1 py-2 rounded-lg text-sm ${X.isActive?"bg-orange-500/20 text-orange-500":"bg-green-500/20 text-green-500"}`,children:X.isActive?"Disable":"Enable"}),e.jsx("button",{onClick:()=>z(X._id),className:"p-2 bg-red-500/20 text-red-500 rounded-lg",children:e.jsx(Vt,{size:14})})]})]},X._id)),l.length===0&&e.jsxs("div",{className:"col-span-3 bg-dark-800 rounded-xl p-8 border border-gray-800 text-center",children:[e.jsx(tr,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No payment methods added yet"})]})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:[f?"Edit":"Add"," Payment Method"]}),e.jsx("button",{onClick:()=>{b(!1),B()},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Type"}),e.jsxs("select",{value:p.type,onChange:X=>g({...p,type:X.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"QR Code",children:"QR Code"})]})]}),p.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:p.bankName,onChange:X=>g({...p,bankName:X.target.value}),placeholder:"Bank Name",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.accountNumber,onChange:X=>g({...p,accountNumber:X.target.value}),placeholder:"Account Number",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.accountHolderName,onChange:X=>g({...p,accountHolderName:X.target.value}),placeholder:"Account Holder Name",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.ifscCode,onChange:X=>g({...p,ifscCode:X.target.value}),placeholder:"IFSC Code",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"})]}),p.type==="UPI"&&e.jsx("input",{type:"text",value:p.upiId,onChange:X=>g({...p,upiId:X.target.value}),placeholder:"UPI ID (e.g., name@upi)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),p.type==="QR Code"&&e.jsx("input",{type:"text",value:p.qrCodeImage,onChange:X=>g({...p,qrCodeImage:X.target.value}),placeholder:"QR Code Image URL",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"})]}),v&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:v}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{b(!1),B()},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:w,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:f?"Update":"Create"})]})]})})]})},Oj=()=>{var me,ae,ve,Ve,Le;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({total:0,open:0,volume:0,pnl:0}),[c,m]=o.useState(!0),[b,f]=o.useState(!1),[u,v]=o.useState(!1),[k,N]=o.useState(!1),[y,p]=o.useState(null),[g,h]=o.useState([]),[x,w]=o.useState([]),[z,C]=o.useState({userId:"",tradingAccountId:"",symbol:"XAUUSD",side:"BUY",orderType:"MARKET",quantity:.01,openPrice:0,stopLoss:"",takeProfit:""}),[B,G]=o.useState({openPrice:0,closePrice:"",quantity:0,stopLoss:"",takeProfit:"",realizedPnl:0}),[K,ee]=o.useState({}),[X,F]=o.useState(!1),[R,W]=o.useState(0),[D,re]=o.useState({}),[O,q]=o.useState(1),[T,j]=o.useState(0),Z=20;o.useEffect(()=>{$(),J()},[r,O]),o.useEffect(()=>{const S=Ji.subscribe("adminTradeManagement",(ie,ge,Ee)=>{!ie||Object.keys(ie).length===0||re(M=>{const Q={...M};return Object.entries(ie).forEach(([Ae,te])=>{te&&te.bid&&(Q[Ae]=te)}),Q})});return()=>S()},[]),o.useEffect(()=>{const S=async()=>{const ge=n.filter(Q=>Q.status==="OPEN");if(ge.length===0)return;const Ee=[...new Set(ge.map(Q=>Q.symbol))];if(Ee.filter(Q=>{var Ae;return!((Ae=D[Q])!=null&&Ae.bid)}).length!==0)try{const Ae=await(await fetch(`${A}/prices/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:Ee})})).json();Ae.success&&Ae.prices&&re(te=>{const Ce={...te};return Object.entries(Ae.prices).forEach(([$e,et])=>{et&&et.bid&&(Ce[$e]=et)}),Ce})}catch(Q){console.error("Error fetching prices:",Q)}};S();const ie=setInterval(S,3e3);return()=>clearInterval(ie)},[n]);const I=S=>{if(S.status!=="OPEN")return S.realizedPnl||0;const ie=D[S.symbol];if(!ie||!ie.bid)return S._lastPnl||0;const ge=S.side==="BUY"?ie.bid:ie.ask;if(!ge||ge<=0)return S._lastPnl||0;const Ee=S.contractSize||ce(S.symbol),Q=(S.side==="BUY"?(ge-S.openPrice)*S.quantity*Ee:(S.openPrice-ge)*S.quantity*Ee)-(S.commission||0)-(S.swap||0);return S._lastPnl=Q,Q},ce=S=>S==="XAUUSD"?100:S==="XAGUSD"?5e3:["BTCUSD","ETHUSD","LTCUSD","XRPUSD","BCHUSD","BNBUSD","SOLUSD","ADAUSD","DOGEUSD","DOTUSD","MATICUSD","AVAXUSD","LINKUSD"].includes(S)?1:1e5,J=async()=>{try{const ie=await(await fetch(`${A}/admin/users`)).json();ie.users&&h(ie.users)}catch(S){console.error("Error fetching users:",S)}},le=async S=>{try{const ge=await(await fetch(`${A}/trading-accounts/user/${S}`)).json();ge.accounts&&w(ge.accounts)}catch(ie){console.error("Error fetching accounts:",ie)}},xe=async(S,ie=null)=>{F(!0);try{const Ee=await(await fetch(`${A}/prices/${S}`)).json();if(Ee.success&&Ee.price&&Ee.price.bid&&Ee.price.ask){const M=Ee.price;ee(Ae=>({...Ae,[S]:M}));const Q=ie||z.side;if(z.orderType==="MARKET"){const Ae=Q==="BUY"?M.ask:M.bid;C(te=>({...te,openPrice:Ae}))}console.log(`Fetched ${S} price: Bid=${M.bid}, Ask=${M.ask}`)}else{console.warn("No price data received for",S,Ee);const Q=await(await fetch(`${A}/prices/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:[S]})})).json();if(Q.success&&Q.prices&&Q.prices[S]){const Ae=Q.prices[S];ee(Ce=>({...Ce,[S]:Ae}));const te=ie||z.side;if(z.orderType==="MARKET"){const Ce=te==="BUY"?Ae.ask:Ae.bid;C($e=>({...$e,openPrice:Ce}))}}}}catch(ge){console.error("Error fetching price:",ge)}F(!1)},ze=async()=>{try{const ie=await(await fetch(`${A}/admin/trade/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...z,quantity:parseFloat(z.quantity),openPrice:parseFloat(z.openPrice),stopLoss:z.stopLoss?parseFloat(z.stopLoss):null,takeProfit:z.takeProfit?parseFloat(z.takeProfit):null})})).json();ie.success?(alert("Trade created successfully!"),f(!1),$(),C({userId:"",tradingAccountId:"",symbol:"XAUUSD",side:"BUY",orderType:"MARKET",quantity:.01,openPrice:0,stopLoss:"",takeProfit:""})):alert(ie.message||"Failed to create trade")}catch{alert("Error creating trade")}},je=async()=>{if(y)try{const ie=await(await fetch(`${A}/admin/trade/edit/${y._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({openPrice:parseFloat(B.openPrice),closePrice:B.closePrice?parseFloat(B.closePrice):null,quantity:parseFloat(B.quantity),stopLoss:B.stopLoss?parseFloat(B.stopLoss):null,takeProfit:B.takeProfit?parseFloat(B.takeProfit):null,realizedPnl:B.realizedPnl?parseFloat(B.realizedPnl):null})})).json();ie.success?(alert("Trade updated successfully!"),v(!1),$()):alert(ie.message||"Failed to update trade")}catch{alert("Error updating trade")}},H=async()=>{var S;if(y)try{const ie=D[y.symbol];let ge=null;ie&&(ge=y.side==="BUY"?ie.bid:ie.ask);const M=await(await fetch(`${A}/admin/trade/close/${y._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({closePrice:R||null,marketPrice:ge})})).json();if(M.success){let Q=`Trade closed by Admin! P&L: $${(S=M.realizedPnl)==null?void 0:S.toFixed(2)}`;M.followersClosed>0&&(Q+=` | ${M.followersClosed} follower trades also closed`),alert(Q),N(!1),W(0),$()}else alert(M.message||"Failed to close trade")}catch{alert("Error closing trade")}},be=S=>{p(S),G({openPrice:S.openPrice||0,closePrice:S.closePrice||"",quantity:S.quantity||0,stopLoss:S.stopLoss||"",takeProfit:S.takeProfit||"",realizedPnl:S.realizedPnl||0}),v(!0)},ue=async S=>{p(S),N(!0);try{const ie=["BTCUSD","ETHUSD","BTCUSDT","ETHUSDT"];let ge=null;if(ie.includes(S.symbol)?ge=(await Cj.getAllPrices([S.symbol]))[S.symbol]:ge=await tl.getSymbolPrice(S.symbol),ge){const Ee=S.side==="BUY"?ge.bid:ge.ask;W(Ee)}}catch(ie){console.error("Error fetching close price:",ie)}},$=async()=>{m(!0);try{const S=(O-1)*Z,ie=r!=="all"?`&status=${r.toUpperCase()}`:"",Ee=await(await fetch(`${A}/admin/trade/all?limit=${Z}&offset=${S}${ie}`)).json();if(Ee.trades){l(Ee.trades),j(Ee.total||Ee.trades.length);const M=Ee.trades.filter(Ce=>Ce.status==="OPEN"),Q=Ee.trades.filter(Ce=>Ce.status==="CLOSED"),Ae=Ee.trades.reduce((Ce,$e)=>Ce+$e.quantity*$e.contractSize*$e.openPrice,0),te=Q.reduce((Ce,$e)=>Ce+($e.realizedPnl||0),0);d({total:Ee.total||Ee.trades.length,open:M.length,volume:Ae,pnl:te})}}catch(S){console.error("Error fetching trades:",S)}m(!1)},V=S=>{switch(S==null?void 0:S.toUpperCase()){case"OPEN":return"bg-green-500/20 text-green-500";case"CLOSED":return"bg-gray-500/20 text-gray-400";case"PENDING":return"bg-yellow-500/20 text-yellow-500";case"CANCELLED":return"bg-red-500/20 text-red-500";default:return"bg-gray-500/20 text-gray-400"}},de=n.filter(S=>{var ge,Ee,M,Q,Ae,te;return((ge=S.tradeId)==null?void 0:ge.toLowerCase().includes(t.toLowerCase()))||((Ee=S.symbol)==null?void 0:Ee.toLowerCase().includes(t.toLowerCase()))||((Q=(M=S.userId)==null?void 0:M.firstName)==null?void 0:Q.toLowerCase().includes(t.toLowerCase()))||((te=(Ae=S.userId)==null?void 0:Ae.email)==null?void 0:te.toLowerCase().includes(t.toLowerCase()))}),fe=S=>{switch(S==null?void 0:S.toUpperCase()){case"OPEN":return e.jsx(xs,{size:14});case"CLOSED":return e.jsx(pr,{size:14});case"PENDING":return e.jsx(Wt,{size:14});default:return null}};return e.jsxs(as,{title:"Trade Management",subtitle:"Monitor and manage all trading activities",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Trades"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.total.toLocaleString()})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Open Positions"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.open})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Volume"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(i.volume/1e6).toFixed(2),"M"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Platform P&L"}),e.jsxs("p",{className:`text-2xl font-bold ${i.pnl>=0?"text-green-500":"text-red-500"}`,children:[i.pnl>=0?"+":"","$",i.pnl.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Trades"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{onClick:()=>{f(!0),xe("XAUUSD")},className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(ut,{size:18})," Create Trade"]}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search trades...",value:t,onChange:S=>s(S.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:S=>a(S.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),c?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading trades..."}):de.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No trades found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:de.map(S=>{var ie,ge,Ee,M;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:S.symbol}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${S.side==="BUY"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:S.side}),S.closedBy==="ADMIN"&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-500",children:"Admin Close"})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${V(S.status)}`,children:[fe(S.status),S.status]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"User"}),e.jsx("p",{className:"text-white truncate",children:((ie=S.userId)==null?void 0:ie.firstName)||((ge=S.userId)==null?void 0:ge.email)}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono truncate",children:["ID: ",((Ee=S.userId)==null?void 0:Ee._id)||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Lots"}),e.jsx("p",{className:"text-white",children:S.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Open Price"}),e.jsxs("p",{className:"text-white",children:["$",(M=S.openPrice)==null?void 0:M.toFixed(5)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Live P&L"}),e.jsxs("p",{className:`font-semibold ${I(S)>=0?"text-green-500":"text-red-500"}`,children:[I(S)>=0?"+":"","$",I(S).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>be(S),className:"flex-1 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-500 rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(Jt,{size:14})," Edit"]}),S.status==="OPEN"&&e.jsxs("button",{onClick:()=>ue(S),className:"flex-1 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-500 rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(pr,{size:14})," Close"]})]})]},S._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Trade ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Side"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Lots"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Open Price"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"P&L"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:de.map(S=>{var ie,ge,Ee,M;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:S.tradeId}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white",children:((ie=S.userId)==null?void 0:ie.firstName)||((ge=S.userId)==null?void 0:ge.email)}),e.jsx("p",{className:"text-gray-500 text-xs font-mono",children:((Ee=S.userId)==null?void 0:Ee._id)||"N/A"})]}),e.jsx("td",{className:"py-4 px-4 text-white font-medium",children:S.symbol}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${S.side==="BUY"?"text-green-500":"text-red-500"}`,children:[S.side==="BUY"?e.jsx(xt,{size:14}):e.jsx(Mn,{size:14}),S.side]})}),e.jsx("td",{className:"py-4 px-4 text-white",children:S.quantity}),e.jsxs("td",{className:"py-4 px-4 text-gray-400",children:["$",(M=S.openPrice)==null?void 0:M.toFixed(5)]}),e.jsxs("td",{className:`py-4 px-4 font-medium ${I(S)>=0?"text-green-500":"text-red-500"}`,children:[I(S)>=0?"+":"","$",I(S).toFixed(2)]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${V(S.status)}`,children:[fe(S.status),S.status]}),S.closedBy==="ADMIN"&&e.jsx("span",{className:"text-xs text-yellow-500",children:"Admin Close"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>be(S),className:"p-2 hover:bg-blue-500/20 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Edit Trade",children:e.jsx(Jt,{size:16})}),S.status==="OPEN"&&e.jsx("button",{onClick:()=>ue(S),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Close Trade",children:e.jsx(pr,{size:16})})]})})]},S._id)})})]})}),T>Z&&e.jsxs("div",{className:"p-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing ",(O-1)*Z+1," - ",Math.min(O*Z,T)," of ",T," trades"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>q(S=>Math.max(1,S-1)),disabled:O===1,className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-white px-3",children:["Page ",O," of ",Math.ceil(T/Z)]}),e.jsx("button",{onClick:()=>q(S=>Math.min(Math.ceil(T/Z),S+1)),disabled:O>=Math.ceil(T/Z),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Trade"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"User"}),e.jsxs("select",{value:z.userId,onChange:S=>{C({...z,userId:S.target.value,tradingAccountId:""}),S.target.value&&le(S.target.value)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select User"}),g.map(S=>e.jsxs("option",{value:S._id,children:[S.firstName," - ",S.email]},S._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Trading Account"}),e.jsxs("select",{value:z.tradingAccountId,onChange:S=>C({...z,tradingAccountId:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select Account"}),x.map(S=>{var ie;return e.jsxs("option",{value:S._id,children:[S.accountId," - $",(ie=S.balance)==null?void 0:ie.toFixed(2)]},S._id)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Symbol"}),e.jsxs("select",{value:z.symbol,onChange:S=>{const ie=S.target.value;C({...z,symbol:ie}),xe(ie)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD"}),e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Order Type"}),e.jsxs("select",{value:z.orderType,onChange:S=>{const ie=S.target.value;C({...z,orderType:ie}),ie==="MARKET"&&xe(z.symbol)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"MARKET",children:"Market Order"}),e.jsx("option",{value:"LIMIT",children:"Limit Order"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Side"}),e.jsxs("select",{value:z.side,onChange:S=>{const ie=S.target.value;if(C({...z,side:ie}),z.orderType==="MARKET"){const ge=K[z.symbol];ge&&C(Ee=>({...Ee,side:ie,openPrice:ie==="BUY"?ge.ask:ge.bid}))}},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"BUY",children:"BUY"}),e.jsx("option",{value:"SELL",children:"SELL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Quantity (Lots)"}),e.jsx("input",{type:"number",step:"0.01",value:z.quantity,onChange:S=>C({...z,quantity:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),X?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 flex items-center justify-center",children:[e.jsx(Je,{size:16,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Fetching live price..."})]}):K[z.symbol]?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Live Market Price"}),e.jsx("p",{className:"text-white font-medium",children:z.symbol})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-red-500",children:["Bid: ",(me=K[z.symbol].bid)==null?void 0:me.toFixed(5)]}),e.jsxs("p",{className:"text-green-500",children:["Ask: ",(ae=K[z.symbol].ask)==null?void 0:ae.toFixed(5)]})]})]}):e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:"Click on symbol to fetch live price"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:z.orderType==="MARKET"?"Execution Price (auto)":"Limit Price"}),e.jsx("input",{type:"number",step:"0.00001",value:z.openPrice,onChange:S=>C({...z,openPrice:S.target.value}),disabled:z.orderType==="MARKET",className:`w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white ${z.orderType==="MARKET"?"opacity-60 cursor-not-allowed":""}`}),z.orderType==="MARKET"&&e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Price auto-filled from market (",z.side==="BUY"?"Ask":"Bid",")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Stop Loss (optional)"}),e.jsx("input",{type:"number",step:"0.00001",value:z.stopLoss,onChange:S=>C({...z,stopLoss:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Take Profit (optional)"}),e.jsx("input",{type:"number",step:"0.00001",value:z.takeProfit,onChange:S=>C({...z,takeProfit:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:ze,className:"flex-1 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg",children:"Create Trade"})]})]})]})}),u&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Trade"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Trade ID: ",y.tradeId]}),e.jsxs("p",{className:"text-white font-medium",children:[y.symbol," ",y.side]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${V(y.status)}`,children:y.status})]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["User: ",((ve=y.userId)==null?void 0:ve.firstName)||((Ve=y.userId)==null?void 0:Ve.email)]}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono",children:["User ID: ",((Le=y.userId)==null?void 0:Le._id)||"N/A"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Quantity (Lots)"}),e.jsx("input",{type:"number",step:"0.01",value:B.quantity,onChange:S=>G({...B,quantity:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Open Price"}),e.jsx("input",{type:"number",step:"0.00001",value:B.openPrice,onChange:S=>G({...B,openPrice:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Stop Loss"}),e.jsx("input",{type:"number",step:"0.00001",value:B.stopLoss,onChange:S=>G({...B,stopLoss:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Optional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Take Profit"}),e.jsx("input",{type:"number",step:"0.00001",value:B.takeProfit,onChange:S=>G({...B,takeProfit:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Optional"})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Close Trade Settings (for closed trades or to set P&L)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Close Price"}),e.jsx("input",{type:"number",step:"0.00001",value:B.closePrice,onChange:S=>G({...B,closePrice:S.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Enter close price"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Realized P&L"}),e.jsx("input",{type:"number",step:"0.01",value:B.realizedPnl,onChange:S=>G({...B,realizedPnl:S.target.value}),className:`w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg ${parseFloat(B.realizedPnl)>=0?"text-green-500":"text-red-500"}`})]})]}),e.jsxs("button",{type:"button",onClick:()=>{if(!y||!B.closePrice){alert("Please enter a close price first");return}const S=y.contractSize||ce(y.symbol),ge=(y.side==="BUY"?(parseFloat(B.closePrice)-parseFloat(B.openPrice))*parseFloat(B.quantity)*S:(parseFloat(B.openPrice)-parseFloat(B.closePrice))*parseFloat(B.quantity)*S)-(y.commission||0)-(y.swap||0);G(Ee=>({...Ee,realizedPnl:Math.round(ge*100)/100}))},className:"w-full mt-3 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium cursor-pointer flex items-center justify-center gap-2",children:[e.jsx(Je,{size:16}),"Calculate P&L from Close Price"]})]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:" Changes will be saved silently without notifying the user."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:je,className:"flex-1 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:"Save Changes"})]})]})]})}),k&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Close Trade"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Trade Details"}),e.jsx("p",{className:"text-white font-medium",children:y.tradeId}),e.jsxs("p",{className:"text-white",children:[y.symbol," ",y.side," ",y.quantity," lots"]}),e.jsxs("p",{className:"text-gray-400",children:["Open Price: $",y.openPrice]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Close Price (Current Market)"}),e.jsx("input",{type:"number",step:"0.00001",value:R,onChange:S=>W(parseFloat(S.target.value)||0),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white"})]}),R>0&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Estimated P&L:"}),(()=>{const S=y.contractSize||ce(y.symbol),ge=(y.side==="BUY"?(R-y.openPrice)*y.quantity*S:(y.openPrice-R)*y.quantity*S)-(y.commission||0)-(y.swap||0);return e.jsxs("p",{className:`text-lg font-bold ${ge>=0?"text-green-500":"text-red-500"}`,children:["$",ge.toFixed(2)]})})()]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:'This will close the trade as "Admin Close". The user will see this in their trade history.'})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{N(!1),W(0)},className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:H,className:"flex-1 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg",children:"Close Trade"})]})]})]})})]})},Bj=()=>{var B,G,K,ee,X,F,R;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({deposits:0,withdrawals:0,ibEntryFees:0,pending:0,net:0}),[c,m]=o.useState(!0),[b,f]=o.useState(null),[u,v]=o.useState(null),[k,N]=o.useState(!1);o.useEffect(()=>{y()},[r]);const y=async()=>{m(!0);try{const D=await(await fetch(`${A}/wallet/admin/transactions`)).json();if(D.transactions){let re=D.transactions;r!=="all"&&(r==="ib_entry_fee"?re=D.transactions.filter(Z=>Z.type==="IB_Entry_Fee"):re=D.transactions.filter(Z=>{var I;return((I=Z.type)==null?void 0:I.toLowerCase())===r})),l(re);const O=D.transactions.filter(Z=>{var I,ce;return((I=Z.type)==null?void 0:I.toUpperCase())==="DEPOSIT"&&((ce=Z.status)==null?void 0:ce.toUpperCase())==="APPROVED"}).reduce((Z,I)=>Z+(I.amount||0),0),q=D.transactions.filter(Z=>{var I,ce;return((I=Z.type)==null?void 0:I.toUpperCase())==="WITHDRAWAL"&&((ce=Z.status)==null?void 0:ce.toUpperCase())==="APPROVED"}).reduce((Z,I)=>Z+(I.amount||0),0),T=D.transactions.filter(Z=>Z.type==="IB_Entry_Fee").reduce((Z,I)=>Z+(I.amount||0),0),j=D.transactions.filter(Z=>{var I;return((I=Z.status)==null?void 0:I.toUpperCase())==="PENDING"}).length;d({deposits:O,withdrawals:q,ibEntryFees:T,pending:j,net:O-q+T})}}catch(W){console.error("Error fetching transactions:",W)}m(!1)},p=async W=>{try{const D=await fetch(`${A}/wallet/transaction/${W}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:""})}),re=await D.json();D.ok?(alert("Transaction approved successfully!"),y()):alert(re.message||"Error approving transaction")}catch(D){console.error("Error approving transaction:",D),alert("Error approving transaction")}},g=async W=>{const D=prompt("Enter rejection reason (optional):");try{const re=await fetch(`${A}/wallet/transaction/${W}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:D||""})}),O=await re.json();re.ok?(alert("Transaction rejected!"),y()):alert(O.message||"Error rejecting transaction")}catch(re){console.error("Error rejecting transaction:",re),alert("Error rejecting transaction")}},h=n.filter(W=>{var re,O,q,T,j;return((re=W.transactionId)==null?void 0:re.toLowerCase().includes(t.toLowerCase()))||((q=(O=W.userId)==null?void 0:O.firstName)==null?void 0:q.toLowerCase().includes(t.toLowerCase()))||((j=(T=W.userId)==null?void 0:T.email)==null?void 0:j.toLowerCase().includes(t.toLowerCase()))}),x=W=>{const D=W==null?void 0:W.toLowerCase();return D==="approved"?"bg-green-500/20 text-green-500":D==="pending"?"bg-yellow-500/20 text-yellow-500":D==="rejected"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-400"},w=W=>(W==null?void 0:W.toLowerCase())==="pending",z=async W=>{var D;f(W),N(!0);try{const O=await(await fetch(`${A}/auth/user/${((D=W.userId)==null?void 0:D._id)||W.userId}`)).json();O.user&&v(O.user)}catch(re){console.error("Error fetching user details:",re)}},C=()=>{N(!1),f(null),v(null)};return e.jsxs(as,{title:"Fund Management",subtitle:"Manage deposits and withdrawals",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bn,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Deposits"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.deposits.toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jn,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Withdrawals"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.withdrawals.toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wt,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Pending Requests"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.pending})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ht,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Net Balance"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.net.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Transactions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:t,onChange:W=>s(W.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:W=>a(W.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"deposit",children:"Deposits"}),e.jsx("option",{value:"withdrawal",children:"Withdrawals"}),e.jsx("option",{value:"ib_entry_fee",children:"IB Entry Fees"})]})]})]}),c?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading transactions..."}):h.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No transactions found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:h.map(W=>{var D,re,O,q,T,j;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${((D=W.type)==null?void 0:D.toUpperCase())==="DEPOSIT"?"bg-green-500/20":"bg-red-500/20"}`,children:((re=W.type)==null?void 0:re.toUpperCase())==="DEPOSIT"?e.jsx(bn,{size:16,className:"text-green-500"}):e.jsx(jn,{size:16,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((O=W.userId)==null?void 0:O.firstName)||((q=W.userId)==null?void 0:q.email)}),e.jsx("p",{className:"text-gray-500 text-xs",children:W.transactionId})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x(W.status)}`,children:W.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsxs("p",{className:((T=W.type)==null?void 0:T.toUpperCase())==="DEPOSIT"?"text-green-500 font-medium":"text-red-500 font-medium",children:[((j=W.type)==null?void 0:j.toUpperCase())==="DEPOSIT"?"+":"-","$",(W.amount||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Method"}),e.jsx("p",{className:"text-white",children:W.paymentMethod||"-"})]})]}),w(W.status)&&e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>p(W._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-sm",children:[e.jsx(nt,{size:14})," Approve"]}),e.jsxs("button",{onClick:()=>g(W._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm",children:[e.jsx(Se,{size:14})," Reject"]})]})]},W._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Transaction ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(W=>{var D,re,O,q,T,j;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:W.transactionId}),e.jsx("td",{className:"py-4 px-4 text-white",children:((D=W.userId)==null?void 0:D.firstName)||((re=W.userId)==null?void 0:re.email)}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${((O=W.type)==null?void 0:O.toUpperCase())==="DEPOSIT"?"text-green-500":"text-red-500"}`,children:[((q=W.type)==null?void 0:q.toUpperCase())==="DEPOSIT"?e.jsx(bn,{size:14}):e.jsx(jn,{size:14}),W.type]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${((T=W.type)==null?void 0:T.toUpperCase())==="DEPOSIT"?"text-green-500":"text-red-500"}`,children:[((j=W.type)==null?void 0:j.toUpperCase())==="DEPOSIT"?"+":"-","$",(W.amount||0).toLocaleString()]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:W.paymentMethod||"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x(W.status)}`,children:W.status})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(W.createdAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>z(W),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(ms,{size:16})}),w(W.status)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(W._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",children:e.jsx(nt,{size:16})}),e.jsx("button",{onClick:()=>g(W._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Se,{size:16})})]})]})})]},W._id)})})]})})]})]}),k&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Transaction Details"}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[((B=b.type)==null?void 0:B.toLowerCase())==="withdrawal"?e.jsx(jn,{size:18,className:"text-red-500"}):e.jsx(bn,{size:18,className:"text-green-500"}),b.type," Request"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsxs("p",{className:`text-lg font-bold ${((G=b.type)==null?void 0:G.toLowerCase())==="deposit"?"text-green-500":"text-red-500"}`,children:["$",(K=b.amount)==null?void 0:K.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x(b.status)}`,children:b.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"text-white",children:b.paymentMethod||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Date"}),e.jsx("p",{className:"text-white",children:new Date(b.createdAt).toLocaleString()})]}),b.transactionRef&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-gray-500",children:"Transaction Reference"}),e.jsx("p",{className:"text-white font-mono",children:b.transactionRef})]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"User Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Name"}),e.jsx("p",{className:"text-white",children:(u==null?void 0:u.firstName)||((ee=b.userId)==null?void 0:ee.firstName)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"text-white",children:(u==null?void 0:u.email)||((X=b.userId)==null?void 0:X.email)||"-"})]})]})]}),((F=b.type)==null?void 0:F.toLowerCase())==="withdrawal"&&e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(ma,{size:16})," Bank Details"]}),(R=u==null?void 0:u.bankDetails)!=null&&R.accountNumber?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Bank Name"}),e.jsx("span",{className:"text-white",children:u.bankDetails.bankName||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Account Holder"}),e.jsx("span",{className:"text-white",children:u.bankDetails.accountHolderName||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Account Number"}),e.jsx("span",{className:"text-white font-mono",children:u.bankDetails.accountNumber||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"IFSC Code"}),e.jsx("span",{className:"text-white font-mono",children:u.bankDetails.ifscCode||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Branch"}),e.jsx("span",{className:"text-white",children:u.bankDetails.branchName||"-"})]})]}):e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-red-400 text-sm",children:" User has not added bank details"})}),e.jsxs("h3",{className:"text-white font-semibold mt-4 mb-3 flex items-center gap-2",children:[e.jsx(Qr,{size:16})," UPI Details"]}),u!=null&&u.upiId?e.jsx("div",{className:"bg-dark-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"UPI ID"}),e.jsx("span",{className:"text-purple-400 font-mono",children:u.upiId})]})}):e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:" User has not added UPI ID"})})]}),w(b.status)&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsxs("button",{onClick:()=>{g(b._id),C()},className:"flex-1 py-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 flex items-center justify-center gap-2",children:[e.jsx(Se,{size:16})," Reject"]}),e.jsxs("button",{onClick:()=>{p(b._id),C()},className:"flex-1 py-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 flex items-center justify-center gap-2",children:[e.jsx(nt,{size:16})," Approve"]})]})]})]})})]})},Vj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(!1),[i,d]=o.useState(null),[c,m]=o.useState({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),[b,f]=o.useState([]),[u,v]=o.useState(!1),[k,N]=o.useState(null),[y,p]=o.useState({currency:"INR",symbol:"",rateToUSD:83,markup:0,isActive:!0}),[g,h]=o.useState("methods"),[x,w]=o.useState([]),[z,C]=o.useState({pending:0,approved:0,rejected:0}),[B,G]=o.useState("Pending");o.useEffect(()=>{I(),R(),K(),ee()},[]),o.useEffect(()=>{K()},[B]);const K=async()=>{try{const V=await(await fetch(`${A}/payment-methods/admin/bank-requests?status=${B}`)).json();w(V.requests||[])}catch($){console.error("Error fetching bank requests:",$)}},ee=async()=>{try{const V=await(await fetch(`${A}/payment-methods/admin/bank-requests/stats`)).json();C(V.stats||{pending:0,approved:0,rejected:0})}catch($){console.error("Error fetching stats:",$)}},X=async $=>{try{(await(await fetch(`${A}/payment-methods/admin/bank-requests/${$}/approve`,{method:"PUT"})).json()).success&&(alert("Bank account approved!"),K(),ee())}catch{alert("Error approving request")}},F=async $=>{const V=prompt("Enter rejection reason:");if(V)try{(await(await fetch(`${A}/payment-methods/admin/bank-requests/${$}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:V})})).json()).success&&(alert("Bank account rejected!"),K(),ee())}catch{alert("Error rejecting request")}},R=async()=>{try{const V=await(await fetch(`${A}/payment-methods/currencies`)).json();f(V.currencies||[])}catch($){console.error("Error fetching currencies:",$)}},W=[{currency:"INR",symbol:"",name:"Indian Rupee"},{currency:"EUR",symbol:"",name:"Euro"},{currency:"GBP",symbol:"",name:"British Pound"},{currency:"JPY",symbol:"",name:"Japanese Yen"},{currency:"AUD",symbol:"A$",name:"Australian Dollar"},{currency:"CAD",symbol:"C$",name:"Canadian Dollar"},{currency:"CHF",symbol:"Fr",name:"Swiss Franc"},{currency:"CNY",symbol:"",name:"Chinese Yuan"},{currency:"AED",symbol:".",name:"UAE Dirham"},{currency:"SGD",symbol:"S$",name:"Singapore Dollar"},{currency:"MYR",symbol:"RM",name:"Malaysian Ringgit"},{currency:"THB",symbol:"",name:"Thai Baht"},{currency:"IDR",symbol:"Rp",name:"Indonesian Rupiah"},{currency:"PHP",symbol:"",name:"Philippine Peso"},{currency:"BDT",symbol:"",name:"Bangladeshi Taka"},{currency:"PKR",symbol:"",name:"Pakistani Rupee"},{currency:"NGN",symbol:"",name:"Nigerian Naira"},{currency:"ZAR",symbol:"R",name:"South African Rand"},{currency:"BRL",symbol:"R$",name:"Brazilian Real"},{currency:"MXN",symbol:"$",name:"Mexican Peso"}],D=async()=>{try{const V=await(await fetch(`${A}/payment-methods/currencies/live-rates`)).json();V.success&&V.rates?(alert(`Live rates fetched! ${Object.keys(V.rates).length} currencies updated.`),R()):alert(V.message||"Failed to fetch live rates")}catch($){console.error("Error fetching live rates:",$),alert("Error fetching live rates")}},re=async()=>{if(confirm("This will add all common currencies with live exchange rates. Continue?"))try{const V=await(await fetch(`${A}/payment-methods/currencies/add-all`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currencies:W})})).json();V.success?(alert(`Added ${V.addedCount} currencies with live rates!`),R()):alert(V.message||"Failed to add currencies")}catch($){console.error("Error adding currencies:",$),alert("Error adding currencies")}},O=async $=>{try{const de=await(await fetch(`${A}/payment-methods/currencies/update-rate/${$}`,{method:"PUT"})).json();de.success?(alert(`${$} rate updated to ${de.rate}`),R()):alert(de.message||"Failed to update rate")}catch{alert("Error updating rate")}},q=async()=>{try{const $=k?`${A}/payment-methods/currencies/${k._id}`:`${A}/payment-methods/currencies`,de=await fetch($,{method:k?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),fe=await de.json();de.ok?(alert(k?"Currency updated!":"Currency added!"),v(!1),N(null),Z(),R()):alert(fe.message||"Error saving currency")}catch{alert("Error saving currency")}},T=async $=>{if(confirm("Are you sure you want to delete this currency?"))try{(await fetch(`${A}/payment-methods/currencies/${$}`,{method:"DELETE"})).ok&&(alert("Currency deleted!"),R())}catch{alert("Error deleting currency")}},j=$=>{N($),p({currency:$.currency,symbol:$.symbol,rateToUSD:$.rateToUSD,markup:$.markup||0,isActive:$.isActive}),v(!0)},Z=()=>{p({currency:"INR",symbol:"",rateToUSD:83,markup:0,isActive:!0})},I=async()=>{a(!0);try{const V=await(await fetch(`${A}/payment-methods/all`)).json();s(V.paymentMethods||[])}catch($){console.error("Error fetching payment methods:",$)}a(!1)},ce=async()=>{try{const $=i?`${A}/payment-methods/${i._id}`:`${A}/payment-methods`,de=await fetch($,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),fe=await de.json();de.ok?(alert(i?"Payment method updated!":"Payment method created!"),l(!1),d(null),ze(),I()):alert(fe.message||"Error saving payment method")}catch{alert("Error saving payment method")}},J=async $=>{if(confirm("Are you sure you want to delete this payment method?"))try{(await fetch(`${A}/payment-methods/${$}`,{method:"DELETE"})).ok&&(alert("Payment method deleted!"),I())}catch{alert("Error deleting payment method")}},le=async $=>{try{await fetch(`${A}/payment-methods/${$._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!$.isActive})}),I()}catch{alert("Error updating status")}},xe=$=>{d($),m({type:$.type,bankName:$.bankName||"",accountNumber:$.accountNumber||"",accountHolderName:$.accountHolderName||"",ifscCode:$.ifscCode||"",upiId:$.upiId||"",qrCodeImage:$.qrCodeImage||"",isActive:$.isActive}),l(!0)},ze=()=>{m({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0})},je=$=>{const V=$.target.files[0];if(V){const de=new FileReader;de.onloadend=()=>{m({...c,qrCodeImage:de.result})},de.readAsDataURL(V)}},H=t.filter($=>$.type==="Bank Transfer"),be=t.filter($=>$.type==="UPI"),ue=t.filter($=>$.type==="QR Code");return e.jsxs(as,{title:"Bank Settings",subtitle:"Manage bank accounts and payment methods",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>h("methods"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${g==="methods"?"bg-blue-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:"Payment Methods"}),e.jsxs("button",{onClick:()=>h("requests"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${g==="requests"?"bg-blue-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:["Bank Requests",z.pending>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:z.pending})]})]}),g==="requests"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"User Bank/UPI Requests"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Approve or reject user bank account submissions"})]}),e.jsx("div",{className:"flex gap-2",children:["Pending","Approved","Rejected"].map($=>e.jsxs("button",{onClick:()=>G($),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${B===$?$==="Pending"?"bg-yellow-500 text-black":$==="Approved"?"bg-green-500 text-white":"bg-red-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:[$," (",z[$.toLowerCase()]||0,")"]},$))})]}),e.jsx("div",{className:"p-4 space-y-3",children:x.length===0?e.jsxs("p",{className:"text-gray-500 text-center py-8",children:["No ",B.toLowerCase()," requests"]}):x.map($=>{var V,de,fe,me;return e.jsx("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${$.type==="Bank Transfer"?"bg-blue-500/20 text-blue-500":"bg-purple-500/20 text-purple-500"}`,children:$.type}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${$.status==="Pending"?"bg-yellow-500/20 text-yellow-500":$.status==="Approved"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:$.status})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-white font-medium",children:[(V=$.userId)==null?void 0:V.firstName," ",(de=$.userId)==null?void 0:de.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:(fe=$.userId)==null?void 0:fe.email}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono",children:["User ID: ",(me=$.userId)==null?void 0:me._id]})]}),$.type==="Bank Transfer"?e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Bank Name"}),e.jsx("p",{className:"text-white",children:$.bankName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Account Number"}),e.jsx("p",{className:"text-white font-mono",children:$.accountNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Account Holder"}),e.jsx("p",{className:"text-white",children:$.accountHolderName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"IFSC Code"}),e.jsx("p",{className:"text-white font-mono",children:$.ifscCode})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"UPI ID"}),e.jsx("p",{className:"text-purple-400 font-mono text-lg",children:$.upiId})]}),$.rejectionReason&&e.jsx("div",{className:"mt-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("p",{className:"text-red-400 text-sm",children:["Rejection Reason: ",$.rejectionReason]})}),e.jsxs("p",{className:"text-gray-500 text-xs mt-3",children:["Submitted: ",new Date($.createdAt).toLocaleString()]})]}),$.status==="Pending"&&e.jsxs("div",{className:"flex sm:flex-col gap-2",children:[e.jsxs("button",{onClick:()=>X($._id),className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(nt,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>F($._id),className:"flex-1 sm:flex-none px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(Se,{size:16})," Reject"]})]})]})},$._id)})})]}),g==="methods"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:I,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Je,{size:18,className:r?"animate-spin":""})}),e.jsxs("button",{onClick:()=>{ze(),d(null),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(ut,{size:16}),"Add Payment Method"]})]}),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Je,{size:24,className:"animate-spin text-gray-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ma,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Bank Accounts"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Bank transfer deposit methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:H.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No bank accounts added yet"}):H.map($=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(ma,{size:24,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:$.bankName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["A/C: ",$.accountNumber," | IFSC: ",$.ifscCode]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Holder: ",$.accountHolderName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>le($),className:`px-3 py-1 rounded-full text-xs ${$.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:$.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>xe($),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>J($._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})]},$._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Qr,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"UPI IDs"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"UPI payment methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:be.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No UPI IDs added yet"}):be.map($=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(Qr,{size:24,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"UPI ID"}),e.jsx("p",{className:"text-purple-400 text-lg font-mono",children:$.upiId})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>le($),className:`px-3 py-1 rounded-full text-xs ${$.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:$.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>xe($),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>J($._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})]},$._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(vi,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"QR Codes"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"QR code payment methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:ue.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No QR codes added yet"}):ue.map($=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[$.qrCodeImage?e.jsx("img",{src:$.qrCodeImage,alt:"QR Code",className:"w-16 h-16 rounded-lg object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(vi,{size:32,className:"text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"QR Code Payment"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Scan to pay"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>le($),className:`px-3 py-1 rounded-full text-xs ${$.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:$.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>xe($),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>J($._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})]},$._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wt,{size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Currency Markups"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Set exchange rates and markups for deposits"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:re,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 text-sm",children:[e.jsx(Dc,{size:14}),"Add All Currencies"]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-500/20 text-purple-500 rounded-lg hover:bg-purple-500/30 text-sm",children:[e.jsx(Je,{size:14}),"Fetch Live Rates"]}),e.jsxs("button",{onClick:()=>{Z(),N(null),v(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 text-sm",children:[e.jsx(ut,{size:14}),"Add Currency"]})]})]}),e.jsx("div",{className:"p-4 space-y-3",children:b.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Dc,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No currencies configured yet"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add All Common Currencies with Live Rates"})]}):b.map($=>{var V;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center text-2xl",children:$.symbol}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:$.currency}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Rate: 1 USD = ",$.symbol,(V=$.rateToUSD)==null?void 0:V.toFixed(2)," | Markup: ",e.jsxs("span",{className:"text-yellow-500",children:[$.markup,"%"]})]}),e.jsxs("p",{className:"text-green-400 text-xs",children:["Effective: 1 USD = ",$.symbol,(($.rateToUSD||0)*(1+($.markup||0)/100)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${$.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:$.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>O($.currency),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-purple-400 hover:text-purple-300",title:"Update live rate",children:e.jsx(Je,{size:16})}),e.jsx("button",{onClick:()=>j($),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>T($._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})]},$._id)})})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:k?"Edit Currency":"Add Currency"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Currency Code"}),e.jsx("input",{type:"text",value:y.currency,onChange:$=>p({...y,currency:$.target.value.toUpperCase()}),placeholder:"e.g., INR",maxLength:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Symbol"}),e.jsx("input",{type:"text",value:y.symbol,onChange:$=>p({...y,symbol:$.target.value}),placeholder:"e.g., ",maxLength:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Exchange Rate (1 USD = ?)"}),e.jsx("input",{type:"number",step:"0.01",value:y.rateToUSD,onChange:$=>p({...y,rateToUSD:parseFloat($.target.value)||0}),placeholder:"e.g., 83.50",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Base exchange rate without markup"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Markup Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",value:y.markup,onChange:$=>p({...y,markup:parseFloat($.target.value)||0}),placeholder:"e.g., 2.5",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Additional percentage added to the exchange rate"})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Conversion Preview"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:"$100 USD"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsxs("span",{className:"text-green-400 font-medium",children:[y.symbol,(100*y.rateToUSD*(1+y.markup/100)).toFixed(2)," ",y.currency]})]}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-2",children:["User pays ",y.symbol,(100*y.rateToUSD*(1+y.markup/100)).toFixed(2)," to deposit $100 USD"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Active Status"}),e.jsx("button",{onClick:()=>p({...y,isActive:!y.isActive}),className:`w-12 h-6 rounded-full transition-colors ${y.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${y.isActive?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:q,className:"flex-1 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg",children:k?"Update":"Add Currency"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i?"Edit Payment Method":"Add Payment Method"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Payment Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Bank Transfer","UPI","QR Code"].map($=>e.jsx("button",{onClick:()=>m({...c,type:$}),className:`p-3 rounded-lg border text-sm ${c.type===$?"border-blue-500 bg-blue-500/20 text-blue-500":"border-gray-700 text-gray-400 hover:border-gray-600"}`,children:$},$))})]}),c.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:c.bankName,onChange:$=>m({...c,bankName:$.target.value}),placeholder:"e.g., HDFC Bank",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:c.accountHolderName,onChange:$=>m({...c,accountHolderName:$.target.value}),placeholder:"e.g., John Doe",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:c.accountNumber,onChange:$=>m({...c,accountNumber:$.target.value}),placeholder:"e.g., 1234567890",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"IFSC Code"}),e.jsx("input",{type:"text",value:c.ifscCode,onChange:$=>m({...c,ifscCode:$.target.value}),placeholder:"e.g., HDFC0001234",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]})]}),c.type==="UPI"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"UPI ID"}),e.jsx("input",{type:"text",value:c.upiId,onChange:$=>m({...c,upiId:$.target.value}),placeholder:"e.g., yourname@upi",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),c.type==="QR Code"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"QR Code Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-6 text-center",children:c.qrCodeImage?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:c.qrCodeImage,alt:"QR Preview",className:"w-32 h-32 mx-auto rounded-lg"}),e.jsx("button",{onClick:()=>m({...c,qrCodeImage:""}),className:"text-red-500 text-sm",children:"Remove Image"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(wi,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload QR code image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:je,className:"hidden"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Active Status"}),e.jsx("button",{onClick:()=>m({...c,isActive:!c.isActive}),className:`w-12 h-6 rounded-full transition-colors ${c.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${c.isActive?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:ce,className:"flex-1 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:i?"Update":"Create"})]})]})]})})]})},Wj=()=>{var ve,Ve,Le,S,ie,ge,Ee;const[t,s]=o.useState(""),[r,a]=o.useState("ibs"),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,m]=o.useState(null),[b,f]=o.useState(!0),[u,v]=o.useState(null),[k,N]=o.useState(null),[y,p]=o.useState(!1),[g,h]=o.useState({type:"",text:""}),[x,w]=o.useState(0),[z,C]=o.useState(!1),[B,G]=o.useState([]),[K,ee]=o.useState([]),[X,F]=o.useState(""),[R,W]=o.useState(!1),[D,re]=o.useState("");o.useEffect(()=>{Z(),I(),ce(),j(),T(),O()},[]);const O=async()=>{try{const Q=await(await fetch(`${A}/ib/admin/entry-fee-settings`)).json();Q.success&&(w(Q.entryFee||0),C(Q.entryFeeEnabled||!1))}catch(M){console.error("Error fetching entry fee settings:",M)}},q=async()=>{p(!0);try{const Q=await(await fetch(`${A}/ib/admin/entry-fee-settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({entryFee:x,entryFeeEnabled:z})})).json();Q.success?h({type:"success",text:"Entry fee settings saved!"}):h({type:"error",text:Q.message||"Failed to save"})}catch{h({type:"error",text:"Error saving settings"})}p(!1),setTimeout(()=>h({type:"",text:""}),3e3)},T=async()=>{try{const[M,Q]=await Promise.all([fetch(`${A}/referral/admin/referral-income-plan`),fetch(`${A}/referral/admin/direct-joining-plan`)]),Ae=await M.json(),te=await Q.json();Ae.success&&v(Ae.plan),te.success&&N(te.plan)}catch(M){console.error("Error fetching referral plans:",M)}},j=async()=>{try{const Q=await(await fetch(`${A}/admin/users`)).json();G(Q.users||[])}catch(M){console.error("Error fetching users:",M)}},Z=async()=>{try{const Q=await(await fetch(`${A}/ib/admin/dashboard`)).json();Q.stats?m({ibs:{total:Q.stats.totalIBs,active:Q.stats.activeIBs,pending:Q.stats.pendingIBs},referrals:{total:0},commissions:{total:{totalCommission:Q.stats.totalCommissionPaid||0},today:{totalCommission:0}}}):Q.dashboard&&m(Q.dashboard)}catch(M){console.error("Error fetching dashboard:",M)}},I=async()=>{try{const Q=await(await fetch(`${A}/ib/admin/all`)).json();l(Q.ibs||[])}catch(M){console.error("Error fetching IBs:",M)}f(!1)},ce=async()=>{try{const Q=await(await fetch(`${A}/ib/admin/pending`)).json();d(Q.pending||[])}catch(M){console.error("Error fetching applications:",M)}},J=async M=>{try{const Ae=await(await fetch(`${A}/ib/admin/approve/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();Ae.success?(ce(),I(),Z()):alert(Ae.message||"Failed to approve IB")}catch(Q){console.error("Error approving IB:",Q),alert("Error approving IB")}},le=async M=>{try{const Ae=await(await fetch(`${A}/ib/admin/reject/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();Ae.success?ce():alert(Ae.message||"Failed to reject IB")}catch(Q){console.error("Error rejecting IB:",Q)}},xe=async M=>{if(confirm("Are you sure you want to block this IB?"))try{(await(await fetch(`${A}/ib/admin/block/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json()).success&&I()}catch(Q){console.error("Error blocking IB:",Q)}},ze=async()=>{if(K.length===0){alert("Please select at least one user to transfer");return}if(!X){alert("Please select a target IB");return}W(!0);try{const Q=await(await fetch(`${A}/ib/admin/transfer-referrals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:K,targetIBId:X})})).json();Q.success?(alert(`Successfully transferred ${Q.transferredCount} users`),ee([]),F(""),j(),I()):alert(Q.message||"Failed to transfer referrals")}catch(M){console.error("Error transferring referrals:",M),alert("Failed to transfer referrals")}W(!1)},je=async()=>{p(!0);try{const Q=await(await fetch(`${A}/referral/admin/referral-income-plan`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxLevels:u.maxLevels,levels:u.levels,commissionType:u.commissionType})})).json();Q.success?(h({type:"success",text:"Referral Income Plan saved!"}),v(Q.plan)):h({type:"error",text:Q.message||"Failed to save"})}catch{h({type:"error",text:"Error saving plan"})}p(!1),setTimeout(()=>h({type:"",text:""}),3e3)},H=async()=>{p(!0);try{const Q=await(await fetch(`${A}/referral/admin/direct-joining-plan`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxLevels:k.maxLevels,levels:k.levels,totalDistribution:k.totalDistribution,commissionType:k.commissionType})})).json();Q.success?(h({type:"success",text:"Direct Joining Plan saved!"}),N(Q.plan)):h({type:"error",text:Q.message||"Failed to save"})}catch{h({type:"error",text:"Error saving plan"})}p(!1),setTimeout(()=>h({type:"",text:""}),3e3)},be=(M,Q)=>{const Ae=[...u.levels];Ae[M]={...Ae[M],amount:parseFloat(Q)||0},v({...u,levels:Ae})},ue=(M,Q)=>{const Ae=[...k.levels];Ae[M]={...Ae[M],percentage:parseFloat(Q)||0},N({...k,levels:Ae})},$=()=>{const M=u.levels.length+1;v({...u,maxLevels:M,levels:[...u.levels,{level:M,amount:0}]})},V=()=>{if(u.levels.length>1){const M=u.levels.slice(0,-1);v({...u,maxLevels:M.length,levels:M})}},de=()=>{const M=k.levels.length+1;N({...k,maxLevels:M,levels:[...k.levels,{level:M,percentage:0}]})},fe=()=>{if(k.levels.length>1){const M=k.levels.slice(0,-1);N({...k,maxLevels:M.length,levels:M})}},me=n.filter(M=>{var Q,Ae,te;return((Q=M.firstName)==null?void 0:Q.toLowerCase().includes(t.toLowerCase()))||((Ae=M.email)==null?void 0:Ae.toLowerCase().includes(t.toLowerCase()))||((te=M.referralCode)==null?void 0:te.toLowerCase().includes(t.toLowerCase()))}),ae=B.filter(M=>{var Q,Ae;return((Q=M.firstName)==null?void 0:Q.toLowerCase().includes(D.toLowerCase()))||((Ae=M.email)==null?void 0:Ae.toLowerCase().includes(D.toLowerCase()))});return e.jsxs(as,{title:"IB Management",subtitle:"Manage Introducing Brokers and Referral Plans",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Uh,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total IBs"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((ve=c==null?void 0:c.ibs)==null?void 0:ve.total)||0}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-1",children:[((Ve=c==null?void 0:c.ibs)==null?void 0:Ve.pending)||0," pending"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ot,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Referrals"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((Le=c==null?void 0:c.referrals)==null?void 0:Le.total)||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wt,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Commissions"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(((ie=(S=c==null?void 0:c.commissions)==null?void 0:S.total)==null?void 0:ie.totalCommission)||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xt,{size:18,className:"text-orange-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Active IBs"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((ge=c==null?void 0:c.ibs)==null?void 0:ge.active)||0})]})]}),g.text&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-center gap-2 ${g.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[g.type==="success"?e.jsx(nt,{size:16}):e.jsx(Se,{size:16}),g.text]}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"ibs",label:"Active IBs",count:(Ee=c==null?void 0:c.ibs)==null?void 0:Ee.active},{id:"applications",label:"Applications",count:i.length},{id:"settings",label:"Entry Fee Settings",icon:fr},{id:"referral-income",label:"Referral Income Plan",icon:Zy},{id:"joining-income",label:"Direct Joining Plan",icon:wt},{id:"transfer",label:"Referral Transfer",icon:qu}].map(M=>e.jsxs("button",{onClick:()=>a(M.id),className:`px-4 py-2 rounded-lg whitespace-nowrap flex items-center gap-2 ${r===M.id?"bg-accent-green text-black":"bg-dark-800 text-gray-400 hover:text-white"}`,children:[M.icon&&e.jsx(M.icon,{size:16}),M.label,M.count!==void 0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${r===M.id?"bg-black/20":"bg-gray-700"}`,children:M.count})]},M.id))}),r==="ibs"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-white font-semibold",children:"Active IBs"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search IBs...",value:t,onChange:M=>s(M.target.value),className:"pl-9 pr-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white text-sm focus:outline-none focus:border-accent-green"})]})]}),b?e.jsx("div",{className:"p-8 text-center",children:e.jsx(Je,{className:"w-6 h-6 animate-spin mx-auto text-gray-500"})}):me.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No IBs found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"IB"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Referral Code"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Referrals"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Earnings"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:me.map(M=>{var Q;return e.jsxs("tr",{className:"hover:bg-dark-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-400 font-medium text-sm",children:(Q=M.firstName)==null?void 0:Q.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[M.firstName," ",M.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:M.email})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-accent-green/20 text-accent-green rounded text-sm font-mono",children:M.referralCode})}),e.jsx("td",{className:"px-4 py-3 text-center text-white",children:M.referralCount||0}),e.jsxs("td",{className:"px-4 py-3 text-right text-green-400",children:["$",(M.totalEarnings||0).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${M.ibStatus==="ACTIVE"?"bg-green-500/20 text-green-400":M.ibStatus==="BLOCKED"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:M.ibStatus})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-white",children:e.jsx(ms,{size:16})}),M.ibStatus==="ACTIVE"&&e.jsx("button",{onClick:()=>xe(M._id),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-red-400",children:e.jsx(Se,{size:16})})]})})]},M._id)})})]})})]}),r==="applications"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold",children:"Pending Applications"})}),i.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending applications"}):e.jsx("div",{className:"divide-y divide-gray-800",children:i.map(M=>{var Q;return e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-500 font-medium",children:(Q=M.firstName)==null?void 0:Q.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[M.firstName," ",M.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:M.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>J(M._id),className:"flex items-center gap-1 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:[e.jsx(nt,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>le(M._id),className:"flex items-center gap-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm",children:[e.jsx(Se,{size:16})," Reject"]})]})]},M._id)})})]}),r==="settings"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"IB Entry Fee Settings"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Configure the registration fee required to become an IB"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Enable Entry Fee"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Require users to pay a fee to become an IB"})]}),e.jsx("button",{onClick:()=>C(!z),className:`w-14 h-7 rounded-full transition-colors relative ${z?"bg-accent-green":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-1 transition-transform ${z?"translate-x-8":"translate-x-1"}`})})]}),e.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Entry Fee Amount (USD)"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",min:"0",step:"1",value:x,onChange:M=>w(parseFloat(M.target.value)||0),disabled:!z,className:"w-full pl-8 pr-4 py-3 bg-dark-600 border border-gray-600 rounded-lg text-white text-lg focus:outline-none focus:border-accent-green disabled:opacity-50"})]})}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:z?`Users will need to have $${x} in their wallet to apply as IB. The fee will be deducted upon application.`:"Entry fee is currently disabled. Users can apply for free."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:q,disabled:y,className:"flex items-center gap-2 px-6 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:[y?e.jsx(Je,{size:16,className:"animate-spin"}):e.jsx(Wa,{size:16}),"Save Settings"]})})]})]}),r==="referral-income"&&u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Referral Income Plan (Per Lot)"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Commission distributed to upline chain when referred users trade"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30",children:[e.jsx(ut,{size:16})," Add Level"]}),e.jsxs("button",{onClick:V,disabled:u.levels.length<=1,className:"flex items-center gap-2 px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 disabled:opacity-50",children:[e.jsx(ur,{size:16})," Remove"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:u.levels.map((M,Q)=>e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-700",children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2",children:["Level ",M.level]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.1",min:"0",value:M.amount,onChange:Ae=>be(Q,Ae.target.value),className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-accent-green"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"per lot"})]},M.level))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"font-medium text-white",children:u.levels.length})," levels | Total per lot: ",e.jsxs("span",{className:"font-medium text-accent-green",children:["$",u.levels.reduce((M,Q)=>M+Q.amount,0).toFixed(2)]})]}),e.jsxs("button",{onClick:je,disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:[y?e.jsx(Je,{size:16,className:"animate-spin"}):e.jsx(Wa,{size:16}),"Save Plan"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Commission Preview (1 lot trade)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.levels.map(M=>e.jsxs("div",{className:"px-3 py-2 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("span",{className:"text-blue-400 font-medium",children:["L",M.level,":"]}),e.jsxs("span",{className:"text-white ml-2",children:["$",M.amount]})]},M.level))})]})]}),r==="joining-income"&&k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Direct Joining Income Plan (%)"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Commission distributed to upline chain when new users deposit"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30",children:[e.jsx(ut,{size:16})," Add Level"]}),e.jsxs("button",{onClick:fe,disabled:k.levels.length<=1,className:"flex items-center gap-2 px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 disabled:opacity-50",children:[e.jsx(ur,{size:16})," Remove"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:k.levels.map((M,Q)=>e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-700",children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2",children:["Level ",M.level]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.5",min:"0",max:"100",value:M.percentage,onChange:Ae=>ue(Q,Ae.target.value),className:"w-full px-3 py-2 bg-dark-600 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-accent-green"}),e.jsx("span",{className:"text-gray-500",children:"%"})]})]},M.level))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"font-medium text-white",children:k.levels.length})," levels | Total: ",e.jsxs("span",{className:"font-medium text-purple-400",children:[k.levels.reduce((M,Q)=>M+Q.percentage,0).toFixed(1),"%"]})]}),e.jsxs("button",{onClick:H,disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:[y?e.jsx(Je,{size:16,className:"animate-spin"}):e.jsx(Wa,{size:16}),"Save Plan"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Commission Preview ($100 deposit)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.levels.map(M=>e.jsxs("div",{className:"px-3 py-2 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[e.jsxs("span",{className:"text-purple-400 font-medium",children:["L",M.level,":"]}),e.jsxs("span",{className:"text-white ml-2",children:["$",(100*M.percentage/100).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",M.percentage,"%)"]})]},M.level))})]})]}),r==="transfer"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold",children:"Transfer Referrals"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Move users from one IB to another"})]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-white font-medium",children:"Select Users"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ee(ae.map(M=>M._id)),className:"text-xs text-blue-400 hover:underline",children:"Select All"}),e.jsx("button",{onClick:()=>ee([]),className:"text-xs text-gray-400 hover:underline",children:"Clear"})]})]}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:D,onChange:M=>re(M.target.value),className:"w-full pl-9 pr-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white text-sm focus:outline-none"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:ae.slice(0,50).map(M=>e.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-dark-700 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K.includes(M._id),onChange:()=>{ee(Q=>Q.includes(M._id)?Q.filter(Ae=>Ae!==M._id):[...Q,M._id])},className:"rounded border-gray-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[M.firstName," ",M.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:M.email})]})]},M._id))}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:[K.length," users selected"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Select Target IB"}),e.jsxs("select",{value:X,onChange:M=>F(M.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white focus:outline-none mb-4",children:[e.jsx("option",{value:"",children:"Select an IB..."}),n.filter(M=>M.ibStatus==="ACTIVE").map(M=>e.jsxs("option",{value:M._id,children:[M.firstName," ",M.lastName," (",M.referralCode,")"]},M._id))]}),e.jsxs("button",{onClick:ze,disabled:R||K.length===0||!X,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:[R?e.jsx(Je,{size:16,className:"animate-spin"}):e.jsx(qu,{size:16}),"Transfer ",K.length," Users"]})]})]})]})]})},Yj=()=>{var W,D,re,O,q,T;const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(null),[i,d]=o.useState(null),[c,m]=o.useState([]),[b,f]=o.useState([]),[u,v]=o.useState(""),[k,N]=o.useState(!1),[y,p]=o.useState(null),[g,h]=o.useState(null),[x,w]=o.useState({level:"SEGMENT",segment:"Forex",instrumentSymbol:"",userId:"",accountTypeId:"",spreadType:"FIXED",spreadValue:0,commissionType:"PER_LOT",commissionValue:0,commissionOnBuy:!0,commissionOnSell:!0,commissionOnClose:!1,swapLong:0,swapShort:0});o.useEffect(()=>{B(),C(),z()},[]);const z=async()=>{try{const Z=await(await fetch(`${A}/account-types/all`)).json();f(Z.accountTypes||[])}catch(j){console.error("Error fetching account types:",j)}},C=async()=>{try{const Z=await(await fetch(`${A}/admin/users`)).json();Z.success&&m(Z.users||[])}catch(j){console.error("Error fetching users:",j)}},B=async()=>{a(!0);try{const Z=await(await fetch(`${A}/charges?segment=Forex`)).json();Z.success&&s(Z.charges||[])}catch(j){console.error("Error fetching charges:",j)}a(!1)},G=async()=>{try{const j=i?`${A}/charges/${i._id}`:`${A}/charges`,ce=await(await fetch(j,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();ce.success?(alert(i?"Updated!":"Created!"),l(null),d(null),X(),B()):alert(ce.message||"Error saving")}catch{alert("Error saving")}},K=async j=>{if(confirm("Are you sure you want to delete this charge?"))try{const I=await(await fetch(`${A}/charges/${j}`,{method:"DELETE"})).json();I.success?(alert("Charge deleted!"),B()):alert(I.message||"Error deleting charge")}catch{alert("Error deleting charge")}},ee=(j,Z)=>{var I,ce;if(d(j),w({level:j.level||"SEGMENT",segment:j.segment||"Forex",instrumentSymbol:j.instrumentSymbol||"",userId:((I=j.userId)==null?void 0:I._id)||j.userId||"",accountTypeId:((ce=j.accountTypeId)==null?void 0:ce._id)||j.accountTypeId||"",spreadType:j.spreadType||"FIXED",spreadValue:j.spreadValue||0,commissionType:j.commissionType||"PER_LOT",commissionValue:j.commissionValue||0,commissionOnBuy:j.commissionOnBuy!==!1,commissionOnSell:j.commissionOnSell!==!1,commissionOnClose:j.commissionOnClose||!1,swapLong:j.swapLong||0,swapShort:j.swapShort||0}),j.level==="USER"&&j.userId){const J=c.find(le=>{var xe;return le._id===(((xe=j.userId)==null?void 0:xe._id)||j.userId)});p(J||null)}else p(null);if(j.level==="ACCOUNT_TYPE"&&j.accountTypeId){const J=b.find(le=>{var xe;return le._id===(((xe=j.accountTypeId)==null?void 0:xe._id)||j.accountTypeId)});h(J||null)}else h(null);l(Z)},X=()=>{w({level:"SEGMENT",segment:"Forex",instrumentSymbol:"",userId:"",accountTypeId:"",spreadType:"FIXED",spreadValue:0,commissionType:"PER_LOT",commissionValue:0,commissionOnBuy:!0,commissionOnSell:!0,commissionOnClose:!1,swapLong:0,swapShort:0}),p(null),h(null),v("")},F=c.filter(j=>{var ce,J,le;const Z=`${j.firstName||""} ${j.lastName||""}`.toLowerCase(),I=u.toLowerCase();return Z.includes(I)||((ce=j.email)==null?void 0:ce.toLowerCase().includes(I))||((J=j.phone)==null?void 0:J.includes(u))||((le=j._id)==null?void 0:le.includes(u))}),R=j=>{var Z,I;return j.level==="USER"?`${(Z=j.userId)!=null&&Z.firstName?`${j.userId.firstName} ${j.userId.lastName||""}`.trim():((I=j.userId)==null?void 0:I.email)||"Unknown User"} - ${j.instrumentSymbol||"All Instruments"}`:j.level==="INSTRUMENT"?j.instrumentSymbol:j.level==="SEGMENT"?j.segment:j.level==="GLOBAL"?"Global":j.level};return e.jsxs(as,{title:"Forex Charges",subtitle:"Manage trading fees and spreads",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx(wt,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Commission"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Trading fees per lot/trade"})]})]}),e.jsxs("button",{onClick:()=>{X(),d(null),l("commission")},className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[e.jsx(ut,{size:16}),e.jsx("span",{children:"Add Commission"})]})]}),e.jsx("div",{className:"p-4",children:r?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Loading..."}):t.filter(j=>j.commissionValue>0).length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No commission charges configured"}):e.jsx("div",{className:"space-y-2",children:t.filter(j=>j.commissionValue>0).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-gray-300 text-xs rounded",children:j.level}),e.jsx("span",{className:"text-white",children:R(j)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-white font-medium",children:["$",j.commissionValue," ",e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",j.commissionType,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>ee(j,"commission"),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-white",children:e.jsx(Jt,{size:14})}),e.jsx("button",{onClick:()=>K(j._id),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-red-400",children:e.jsx(Vt,{size:14})})]})]})]},j._id))})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx(xt,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Spread"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Bid/Ask price difference"})]})]}),e.jsxs("button",{onClick:()=>{X(),d(null),l("spread")},className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[e.jsx(ut,{size:16}),e.jsx("span",{children:"Add Spread"})]})]}),e.jsx("div",{className:"p-4",children:r?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Loading..."}):t.filter(j=>j.spreadValue>0).length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No spread charges configured"}):e.jsx("div",{className:"space-y-2",children:t.filter(j=>j.spreadValue>0).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-gray-300 text-xs rounded",children:j.level}),e.jsx("span",{className:"text-white",children:R(j)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-white font-medium",children:[j.spreadValue," ",e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",j.spreadType,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>ee(j,"spread"),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-white",children:e.jsx(Jt,{size:14})}),e.jsx("button",{onClick:()=>K(j._id),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-red-400",children:e.jsx(Vt,{size:14})})]})]})]},j._id))})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx(Ct,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Swap"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Overnight holding fees"})]})]}),e.jsxs("button",{onClick:()=>{X(),d(null),l("swap")},className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[e.jsx(ut,{size:16}),e.jsx("span",{children:"Add Swap"})]})]}),e.jsx("div",{className:"p-4",children:r?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Loading..."}):t.filter(j=>j.swapLong!==0||j.swapShort!==0).length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No swap charges configured"}):e.jsx("div",{className:"space-y-2",children:t.filter(j=>j.swapLong!==0||j.swapShort!==0).map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-0.5 bg-gray-600 text-gray-300 text-xs rounded",children:j.level}),e.jsx("span",{className:"text-white",children:R(j)})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-white font-medium",children:["Long: ",j.swapLong," | Short: ",j.swapShort]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>ee(j,"swap"),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-white",children:e.jsx(Jt,{size:14})}),e.jsx("button",{onClick:()=>K(j._id),className:"p-1.5 hover:bg-dark-600 rounded text-gray-400 hover:text-red-400",children:e.jsx(Vt,{size:14})})]})]})]},j._id))})})]})]}),n==="commission"&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:i?"Edit Commission":"Add Commission"}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["1. Account Type ",e.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),e.jsxs("select",{value:x.accountTypeId,onChange:j=>w({...x,accountTypeId:j.target.value,level:j.target.value?"ACCOUNT_TYPE":"GLOBAL"}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Account Types (Global)"}),b.map(j=>e.jsx("option",{value:j._id,children:j.name},j._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["2. Segment ",e.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),e.jsxs("select",{value:x.segment,onChange:j=>w({...x,segment:j.target.value,level:j.target.value?"SEGMENT":x.level}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Segments"}),e.jsx("option",{value:"Forex",children:"Forex"}),e.jsx("option",{value:"Metals",children:"Metals"}),e.jsx("option",{value:"Crypto",children:"Crypto"}),e.jsx("option",{value:"Indices",children:"Indices"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["3. Instrument ",e.jsxs("span",{className:"text-gray-600",children:["(optional",x.segment?` - showing ${x.segment} only`:"",")"]})]}),e.jsxs("select",{value:x.instrumentSymbol,onChange:j=>w({...x,instrumentSymbol:j.target.value,level:j.target.value?"INSTRUMENT":x.level}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Instruments"}),(!x.segment||x.segment==="Forex")&&e.jsxs("optgroup",{label:"Forex",children:[e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"USDJPY",children:"USDJPY"}),e.jsx("option",{value:"USDCHF",children:"USDCHF"}),e.jsx("option",{value:"AUDUSD",children:"AUDUSD"}),e.jsx("option",{value:"NZDUSD",children:"NZDUSD"}),e.jsx("option",{value:"USDCAD",children:"USDCAD"}),e.jsx("option",{value:"EURGBP",children:"EURGBP"}),e.jsx("option",{value:"EURJPY",children:"EURJPY"}),e.jsx("option",{value:"GBPJPY",children:"GBPJPY"})]}),(!x.segment||x.segment==="Metals")&&e.jsxs("optgroup",{label:"Metals",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Gold)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Silver)"})]}),(!x.segment||x.segment==="Crypto")&&e.jsxs("optgroup",{label:"Crypto",children:[e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"}),e.jsx("option",{value:"LTCUSD",children:"LTCUSD"}),e.jsx("option",{value:"XRPUSD",children:"XRPUSD"})]}),(!x.segment||x.segment==="Indices")&&e.jsxs("optgroup",{label:"Indices",children:[e.jsx("option",{value:"US30",children:"US30 (Dow Jones)"}),e.jsx("option",{value:"US500",children:"US500 (S&P 500)"}),e.jsx("option",{value:"NAS100",children:"NAS100 (Nasdaq)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["4. Specific User ",e.jsx("span",{className:"text-gray-600",children:"(optional - highest priority)"})]}),y?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-dark-700 border border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(W=y.firstName)==null?void 0:W.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:y.email})]})]}),e.jsx("button",{onClick:()=>{p(null),w({...x,userId:"",level:x.instrumentSymbol?"INSTRUMENT":x.segment?"SEGMENT":x.accountTypeId?"ACCOUNT_TYPE":"GLOBAL"})},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search user to override...",value:u,onChange:j=>{v(j.target.value),N(!0)},onFocus:()=>N(!0),className:"w-full pl-9 pr-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm"}),k&&u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-dark-700 border border-gray-600 rounded-lg max-h-40 overflow-y-auto",children:F.length===0?e.jsx("p",{className:"p-2 text-gray-500 text-sm",children:"No users found"}):F.slice(0,10).map(j=>{var Z;return e.jsxs("button",{onClick:()=>{p(j),w({...x,userId:j._id,level:"USER"}),N(!1),v("")},className:"w-full flex items-center gap-2 p-2 hover:bg-dark-600 text-left",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(Z=j.firstName)==null?void 0:Z.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[j.firstName," ",j.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:j.email})]})]},j._id)})})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Applies to: "}),e.jsxs("span",{className:"text-white font-medium",children:[x.userId?`User: ${(y==null?void 0:y.firstName)||"Selected"}`:"",x.userId&&x.instrumentSymbol?"  ":"",x.instrumentSymbol?`${x.instrumentSymbol}`:"",(x.userId||x.instrumentSymbol)&&x.segment?"  ":"",x.segment?`${x.segment}`:"",(x.userId||x.instrumentSymbol||x.segment)&&x.accountTypeId?"  ":"",x.accountTypeId?(D=b.find(j=>j._id===x.accountTypeId))==null?void 0:D.name:"",!x.userId&&!x.instrumentSymbol&&!x.segment&&!x.accountTypeId?"Global (All)":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Commission Type"}),e.jsxs("select",{value:x.commissionType,onChange:j=>w({...x,commissionType:j.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"PER_LOT",children:"Per Lot ($)"}),e.jsx("option",{value:"PER_TRADE",children:"Per Trade ($)"}),e.jsx("option",{value:"PERCENTAGE",children:"Percentage (%)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Value"}),e.jsx("input",{type:"number",step:"0.01",value:x.commissionValue,onChange:j=>w({...x,commissionValue:parseFloat(j.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-2",children:"Charge on:"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.commissionOnBuy,onChange:j=>w({...x,commissionOnBuy:j.target.checked}),className:"w-4 h-4 rounded bg-dark-600 border-gray-600"}),e.jsx("span",{className:"text-white text-sm",children:"Buy"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.commissionOnSell,onChange:j=>w({...x,commissionOnSell:j.target.checked}),className:"w-4 h-4 rounded bg-dark-600 border-gray-600"}),e.jsx("span",{className:"text-white text-sm",children:"Sell"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.commissionOnClose,onChange:j=>w({...x,commissionOnClose:j.target.checked}),className:"w-4 h-4 rounded bg-dark-600 border-gray-600"}),e.jsx("span",{className:"text-white text-sm",children:"Close"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>l(null),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{onClick:G,className:"flex-1 py-2 bg-white text-black hover:bg-gray-200 rounded-lg text-sm font-medium",children:"Save"})]})]})]})}),n==="spread"&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:i?"Edit Spread":"Add Spread"}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["1. Account Type ",e.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),e.jsxs("select",{value:x.accountTypeId,onChange:j=>w({...x,accountTypeId:j.target.value,level:j.target.value?"ACCOUNT_TYPE":"GLOBAL"}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Account Types (Global)"}),b.map(j=>e.jsx("option",{value:j._id,children:j.name},j._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["2. Segment ",e.jsx("span",{className:"text-gray-600",children:"(filter instruments)"})]}),e.jsxs("select",{value:x.segment,onChange:j=>w({...x,segment:j.target.value,instrumentSymbol:""}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Segments"}),e.jsx("option",{value:"Forex",children:"Forex"}),e.jsx("option",{value:"Metals",children:"Metals"}),e.jsx("option",{value:"Crypto",children:"Crypto"}),e.jsx("option",{value:"Indices",children:"Indices"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["3. Instrument ",e.jsxs("span",{className:"text-gray-600",children:["(optional",x.segment?` - showing ${x.segment} only`:"",")"]})]}),e.jsxs("select",{value:x.instrumentSymbol,onChange:j=>w({...x,instrumentSymbol:j.target.value,level:j.target.value?"INSTRUMENT":x.level}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Instruments"}),(!x.segment||x.segment==="Forex")&&e.jsxs("optgroup",{label:"Forex",children:[e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"USDJPY",children:"USDJPY"}),e.jsx("option",{value:"USDCHF",children:"USDCHF"}),e.jsx("option",{value:"AUDUSD",children:"AUDUSD"}),e.jsx("option",{value:"NZDUSD",children:"NZDUSD"}),e.jsx("option",{value:"USDCAD",children:"USDCAD"}),e.jsx("option",{value:"EURGBP",children:"EURGBP"}),e.jsx("option",{value:"EURJPY",children:"EURJPY"}),e.jsx("option",{value:"GBPJPY",children:"GBPJPY"})]}),(!x.segment||x.segment==="Metals")&&e.jsxs("optgroup",{label:"Metals",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Gold)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Silver)"})]}),(!x.segment||x.segment==="Crypto")&&e.jsxs("optgroup",{label:"Crypto",children:[e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"}),e.jsx("option",{value:"LTCUSD",children:"LTCUSD"}),e.jsx("option",{value:"XRPUSD",children:"XRPUSD"})]}),(!x.segment||x.segment==="Indices")&&e.jsxs("optgroup",{label:"Indices",children:[e.jsx("option",{value:"US30",children:"US30 (Dow Jones)"}),e.jsx("option",{value:"US500",children:"US500 (S&P 500)"}),e.jsx("option",{value:"NAS100",children:"NAS100 (Nasdaq)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["4. User Override ",e.jsx("span",{className:"text-gray-600",children:"(optional - for specific user only)"})]}),y?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-dark-700 border border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(re=y.firstName)==null?void 0:re.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:y.email})]})]}),e.jsx("button",{onClick:()=>{p(null),w({...x,userId:"",level:x.instrumentSymbol?"INSTRUMENT":x.accountTypeId?"ACCOUNT_TYPE":"GLOBAL"})},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search user for custom spread...",value:u,onChange:j=>{v(j.target.value),N(!0)},onFocus:()=>N(!0),className:"w-full pl-9 pr-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm"}),k&&u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-dark-700 border border-gray-600 rounded-lg max-h-40 overflow-y-auto",children:F.length===0?e.jsx("p",{className:"p-2 text-gray-500 text-sm",children:"No users found"}):F.slice(0,10).map(j=>{var Z;return e.jsxs("button",{onClick:()=>{p(j),w({...x,userId:j._id,level:"USER"}),N(!1),v("")},className:"w-full flex items-center gap-2 p-2 hover:bg-dark-600 text-left",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(Z=j.firstName)==null?void 0:Z.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[j.firstName," ",j.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:j.email})]})]},j._id)})})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Applies to: "}),e.jsxs("span",{className:"text-white font-medium",children:[x.userId?`User: ${(y==null?void 0:y.firstName)||"Selected"}`:"",x.userId&&x.instrumentSymbol?"  ":"",x.instrumentSymbol?`${x.instrumentSymbol}`:"",(x.userId||x.instrumentSymbol)&&x.accountTypeId?"  ":"",x.accountTypeId?(O=b.find(j=>j._id===x.accountTypeId))==null?void 0:O.name:"",!x.userId&&!x.instrumentSymbol&&!x.accountTypeId?"Global (All)":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Spread Type"}),e.jsxs("select",{value:x.spreadType,onChange:j=>w({...x,spreadType:j.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"FIXED",children:"Fixed (Pips/Cents)"}),e.jsx("option",{value:"PERCENTAGE",children:"Percentage (%)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Spread Value"}),e.jsx("input",{type:"number",step:"0.01",value:x.spreadValue,onChange:j=>w({...x,spreadValue:parseFloat(j.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",placeholder:"0"})]})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Forex: pips (e.g., 1.5) | Gold: cents (e.g., 50) | Crypto: USD (e.g., 10)"}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>l(null),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{onClick:G,className:"flex-1 py-2 bg-white text-black hover:bg-gray-200 rounded-lg text-sm font-medium",children:"Save"})]})]})]})}),n==="swap"&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg border border-gray-700 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:i?"Edit Swap":"Add Swap"}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["1. Account Type ",e.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),e.jsxs("select",{value:x.accountTypeId,onChange:j=>w({...x,accountTypeId:j.target.value,level:j.target.value?"ACCOUNT_TYPE":"GLOBAL"}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Account Types (Global)"}),b.map(j=>e.jsx("option",{value:j._id,children:j.name},j._id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["2. Segment ",e.jsx("span",{className:"text-gray-600",children:"(filter instruments)"})]}),e.jsxs("select",{value:x.segment,onChange:j=>w({...x,segment:j.target.value,instrumentSymbol:""}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Segments"}),e.jsx("option",{value:"Forex",children:"Forex"}),e.jsx("option",{value:"Metals",children:"Metals"}),e.jsx("option",{value:"Crypto",children:"Crypto"}),e.jsx("option",{value:"Indices",children:"Indices"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["3. Instrument ",e.jsxs("span",{className:"text-gray-600",children:["(optional",x.segment?` - showing ${x.segment} only`:"",")"]})]}),e.jsxs("select",{value:x.instrumentSymbol,onChange:j=>w({...x,instrumentSymbol:j.target.value,level:j.target.value?"INSTRUMENT":x.level}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"",children:"All Instruments"}),(!x.segment||x.segment==="Forex")&&e.jsxs("optgroup",{label:"Forex",children:[e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"USDJPY",children:"USDJPY"}),e.jsx("option",{value:"USDCHF",children:"USDCHF"}),e.jsx("option",{value:"AUDUSD",children:"AUDUSD"}),e.jsx("option",{value:"NZDUSD",children:"NZDUSD"}),e.jsx("option",{value:"USDCAD",children:"USDCAD"}),e.jsx("option",{value:"EURGBP",children:"EURGBP"}),e.jsx("option",{value:"EURJPY",children:"EURJPY"}),e.jsx("option",{value:"GBPJPY",children:"GBPJPY"})]}),(!x.segment||x.segment==="Metals")&&e.jsxs("optgroup",{label:"Metals",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Gold)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Silver)"})]}),(!x.segment||x.segment==="Crypto")&&e.jsxs("optgroup",{label:"Crypto",children:[e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"}),e.jsx("option",{value:"LTCUSD",children:"LTCUSD"}),e.jsx("option",{value:"XRPUSD",children:"XRPUSD"})]}),(!x.segment||x.segment==="Indices")&&e.jsxs("optgroup",{label:"Indices",children:[e.jsx("option",{value:"US30",children:"US30 (Dow Jones)"}),e.jsx("option",{value:"US500",children:"US500 (S&P 500)"}),e.jsx("option",{value:"NAS100",children:"NAS100 (Nasdaq)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-xs mb-1",children:["4. User Override ",e.jsx("span",{className:"text-gray-600",children:"(optional - for specific user only)"})]}),y?e.jsxs("div",{className:"flex items-center justify-between p-2 bg-dark-700 border border-gray-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(q=y.firstName)==null?void 0:q.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:y.email})]})]}),e.jsx("button",{onClick:()=>{p(null),w({...x,userId:"",level:x.instrumentSymbol?"INSTRUMENT":x.accountTypeId?"ACCOUNT_TYPE":"GLOBAL"})},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search user for custom swap...",value:u,onChange:j=>{v(j.target.value),N(!0)},onFocus:()=>N(!0),className:"w-full pl-9 pr-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm"}),k&&u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-dark-700 border border-gray-600 rounded-lg max-h-40 overflow-y-auto",children:F.length===0?e.jsx("p",{className:"p-2 text-gray-500 text-sm",children:"No users found"}):F.slice(0,10).map(j=>{var Z;return e.jsxs("button",{onClick:()=>{p(j),w({...x,userId:j._id,level:"USER"}),N(!1),v("")},className:"w-full flex items-center gap-2 p-2 hover:bg-dark-600 text-left",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full flex items-center justify-center text-white text-xs",children:(Z=j.firstName)==null?void 0:Z.charAt(0)}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm",children:[j.firstName," ",j.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:j.email})]})]},j._id)})})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Applies to: "}),e.jsxs("span",{className:"text-white font-medium",children:[x.userId?`User: ${(y==null?void 0:y.firstName)||"Selected"}`:"",x.userId&&x.instrumentSymbol?"  ":"",x.instrumentSymbol?`${x.instrumentSymbol}`:"",(x.userId||x.instrumentSymbol)&&x.accountTypeId?"  ":"",x.accountTypeId?(T=b.find(j=>j._id===x.accountTypeId))==null?void 0:T.name:"",!x.userId&&!x.instrumentSymbol&&!x.accountTypeId?"Global (All)":""]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Swap Long (points)"}),e.jsx("input",{type:"number",step:"0.01",value:x.swapLong,onChange:j=>w({...x,swapLong:parseFloat(j.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"Swap Short (points)"}),e.jsx("input",{type:"number",step:"0.01",value:x.swapShort,onChange:j=>w({...x,swapShort:parseFloat(j.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white text-sm",placeholder:"0"})]})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Overnight fees charged for holding positions (negative = charge, positive = credit)"}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>l(null),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg text-sm",children:"Cancel"}),e.jsx("button",{onClick:G,className:"flex-1 py-2 bg-white text-black hover:bg-gray-200 rounded-lg text-sm font-medium",children:"Save"})]})]})]})})]})},Hj=()=>{const[t,s]=o.useState([{id:1,name:"UPI Deposit Fee",value:"0",type:"%",description:"Fee for UPI deposits"},{id:2,name:"UPI Withdrawal Fee",value:"1.5",type:"%",description:"Fee for UPI withdrawals"},{id:3,name:"Bank Transfer Deposit",value:"0",type:"INR",description:"NEFT/RTGS/IMPS deposit fee"},{id:4,name:"Bank Transfer Withdrawal",value:"25",type:"INR",description:"NEFT/RTGS withdrawal fee"},{id:5,name:"GST on Services",value:"18",type:"%",description:"Applicable GST rate"},{id:6,name:"TDS on Withdrawals",value:"1",type:"%",description:"Tax deducted at source"},{id:7,name:"Min Deposit (INR)",value:"500",type:"INR",description:"Minimum deposit amount"},{id:8,name:"Max Withdrawal/Day",value:"500000",type:"INR",description:"Daily withdrawal limit"}]),[r,a]=o.useState(null),[n,l]=o.useState(""),i=c=>{a(c.id),l(c.value)},d=c=>{s(t.map(m=>m.id===c?{...m,value:n}:m)),a(null)};return e.jsx(as,{title:"Indian Charges",subtitle:"Manage INR payment fees and limits",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Qy,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Indian Payment Charges"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure INR payment fees and limits"})]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[e.jsx(ut,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Charge"})]})]}),e.jsx("div",{className:"p-4 space-y-3",children:t.map(c=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:c.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:c.description})]}),e.jsx("div",{className:"flex items-center gap-3",children:r===c.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:m=>l(m.target.value),className:"w-24 bg-dark-600 border border-gray-600 rounded-lg px-3 py-2 text-white text-right focus:outline-none focus:border-orange-500"}),e.jsx("span",{className:"text-gray-400 text-sm",children:c.type}),e.jsx("button",{onClick:()=>d(c.id),className:"p-2 bg-orange-500 rounded-lg text-white hover:bg-orange-600 transition-colors",children:e.jsx(Wa,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold text-lg",children:c.value}),e.jsx("p",{className:"text-gray-500 text-sm",children:c.type})]}),e.jsx("button",{onClick:()=>i(c),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})})]},c.id))})]})})},Jj=()=>{var ce,J,le,xe,ze,je,H,be,ue,$;const[t,s]=o.useState(""),[r,a]=o.useState("masters"),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,m]=o.useState([]),[b,f]=o.useState([]),[u,v]=o.useState(null),[k,N]=o.useState(null),[y,p]=o.useState(!0),[g,h]=o.useState(null),[x,w]=o.useState(!1),[z,C]=o.useState(!1),[B,G]=o.useState({approvedCommissionPercentage:10,adminSharePercentage:30}),[K,ee]=o.useState({approvedCommissionPercentage:10,adminSharePercentage:30}),X=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{F(),R(),W(),D(),re()},[]);const F=async()=>{try{const de=await(await fetch(`${A}/copy/admin/dashboard`)).json();N(de.dashboard)}catch(V){console.error("Error fetching dashboard:",V)}},R=async()=>{try{const de=await(await fetch(`${A}/copy/admin/masters`)).json();l(de.masters||[])}catch(V){console.error("Error fetching masters:",V)}p(!1)},W=async()=>{try{const de=await(await fetch(`${A}/copy/admin/applications`)).json();d(de.applications||[])}catch(V){console.error("Error fetching applications:",V)}},D=async()=>{try{const de=await(await fetch(`${A}/copy/admin/followers`)).json();m(de.followers||[])}catch(V){console.error("Error fetching followers:",V)}},re=async()=>{try{const de=await(await fetch(`${A}/copy/admin/commissions?limit=100`)).json();f(de.commissions||[]),v(de.totals)}catch(V){console.error("Error fetching commissions:",V)}},O=async()=>{if(g)try{(await(await fetch(`${A}/copy/admin/approve/${g._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:X._id,...B})})).json()).master&&(alert("Master approved successfully!"),w(!1),h(null),R(),W(),F())}catch(V){console.error("Error approving master:",V),alert("Failed to approve master")}},q=async()=>{if(g)try{const de=await(await fetch(`${A}/copy/admin/update-commission/${g._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:X._id,...K})})).json();de.success?(alert("Commission updated successfully!"),C(!1),h(null),R()):alert(de.message||"Failed to update commission")}catch(V){console.error("Error updating commission:",V),alert("Failed to update commission")}},T=async V=>{const de=prompt("Enter rejection reason:");if(de)try{(await(await fetch(`${A}/copy/admin/reject/${V}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:X._id,rejectionReason:de})})).json()).master&&(alert("Master rejected"),R(),W(),F())}catch(fe){console.error("Error rejecting master:",fe)}},j=async V=>{if(confirm("Are you sure you want to suspend this master?"))try{(await(await fetch(`${A}/copy/admin/suspend/${V}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:X._id})})).json()).master&&(alert("Master suspended"),R(),F())}catch(de){console.error("Error suspending master:",de)}},Z=V=>{switch(V){case"ACTIVE":return"bg-green-500/20 text-green-500";case"PENDING":return"bg-yellow-500/20 text-yellow-500";case"SUSPENDED":return"bg-red-500/20 text-red-500";case"REJECTED":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},I=n.filter(V=>{var de,fe,me,ae,ve;return((de=V.displayName)==null?void 0:de.toLowerCase().includes(t.toLowerCase()))||((me=(fe=V.userId)==null?void 0:fe.firstName)==null?void 0:me.toLowerCase().includes(t.toLowerCase()))||((ve=(ae=V.userId)==null?void 0:ae.email)==null?void 0:ve.toLowerCase().includes(t.toLowerCase()))});return e.jsxs(as,{title:"Copy Trade Management",subtitle:"Manage master traders and copy trading",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ba,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Master Traders"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((ce=k==null?void 0:k.masters)==null?void 0:ce.active)||0}),e.jsxs("p",{className:"text-yellow-500 text-xs",children:[((J=k==null?void 0:k.masters)==null?void 0:J.pending)||0," pending"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ot,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Followers"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((le=k==null?void 0:k.followers)==null?void 0:le.active)||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xt,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Copied Trades"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((xe=k==null?void 0:k.copyTrades)==null?void 0:xe.total)||0}),e.jsxs("p",{className:"text-blue-500 text-xs",children:[((ze=k==null?void 0:k.copyTrades)==null?void 0:ze.open)||0," open"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wt,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Admin Pool"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",((je=k==null?void 0:k.adminPool)==null?void 0:je.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:[{key:"applications",label:`Applications (${i.length})`},{key:"masters",label:"All Masters"},{key:"followers",label:"Followers"},{key:"commissions",label:"Commissions"}].map(V=>e.jsx("button",{onClick:()=>a(V.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r===V.key?"bg-purple-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:V.label},V.key))}),r==="applications"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Pending Applications"})}),i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No pending applications"}):e.jsx("div",{className:"divide-y divide-gray-800",children:i.map(V=>{var de,fe,me;return e.jsxs("div",{className:"p-4 hover:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-500 font-bold",children:(de=V.displayName)==null?void 0:de.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:V.displayName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[(fe=V.userId)==null?void 0:fe.firstName," (",(me=V.userId)==null?void 0:me.email,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-semibold",children:[V.requestedCommissionPercentage,"%"]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Requested Commission"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 justify-end",children:[e.jsx("button",{onClick:()=>T(V._id),className:"px-4 py-2 bg-red-500/20 text-red-500 rounded-lg",children:"Reject"}),e.jsx("button",{onClick:()=>{h(V),w(!0)},className:"px-4 py-2 bg-green-500 text-white rounded-lg",children:"Approve"})]})]},V._id)})})]}),r==="masters"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Masters"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search...",value:t,onChange:V=>s(V.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white"})]})]}),y?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):I.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No masters found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Trader"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Followers"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Commission"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:I.map(V=>{var de,fe,me,ae;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-500 font-medium",children:(de=V.displayName)==null?void 0:de.charAt(0)})}),e.jsx("span",{className:"text-white font-medium",children:V.displayName})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:(fe=V.userId)==null?void 0:fe.firstName}),e.jsx("p",{className:"text-gray-500 text-xs",children:(me=V.userId)==null?void 0:me.email})]}),e.jsx("td",{className:"py-4 px-4 text-white",children:((ae=V.stats)==null?void 0:ae.activeFollowers)||0}),e.jsxs("td",{className:"py-4 px-4 text-white",children:[V.approvedCommissionPercentage||V.requestedCommissionPercentage,"%"]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Z(V.status)}`,children:V.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[V.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{h(V),w(!0)},className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-green-500",title:"Approve",children:e.jsx(nt,{size:16})}),e.jsx("button",{onClick:()=>T(V._id),className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-red-500",title:"Reject",children:e.jsx(Se,{size:16})})]}),V.status==="ACTIVE"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{h(V),ee({approvedCommissionPercentage:V.approvedCommissionPercentage||10,adminSharePercentage:V.adminSharePercentage||30}),C(!0)},className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-blue-500",title:"Edit Commission",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>j(V._id),className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-red-500",title:"Suspend",children:e.jsx(Vt,{size:16})})]})]})})]},V._id)})})]})]}),r==="followers"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Followers"})}),c.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No followers yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Follower"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Following"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Copy Mode"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Trades"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Status"})]})}),e.jsx("tbody",{children:c.map(V=>{var de,fe,me,ae;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:(de=V.followerId)==null?void 0:de.firstName}),e.jsx("p",{className:"text-gray-500 text-xs",children:(fe=V.followerId)==null?void 0:fe.email})]}),e.jsx("td",{className:"py-4 px-4 text-white",children:(me=V.masterId)==null?void 0:me.displayName}),e.jsx("td",{className:"py-4 px-4 text-white",children:V.copyMode==="FIXED_LOT"?`Fixed: ${V.copyValue}`:`${V.copyValue}x`}),e.jsx("td",{className:"py-4 px-4 text-white",children:((ae=V.stats)==null?void 0:ae.totalCopiedTrades)||0}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${V.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:V.status})})]},V._id)})})]})]}),r==="commissions"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Commission"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",((H=u==null?void 0:u.totalCommission)==null?void 0:H.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Admin Share"}),e.jsxs("p",{className:"text-purple-400 text-2xl font-bold",children:["$",((be=u==null?void 0:u.totalAdminShare)==null?void 0:be.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Master Share"}),e.jsxs("p",{className:"text-green-400 text-2xl font-bold",children:["$",((ue=u==null?void 0:u.totalMasterShare)==null?void 0:ue.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Profit Generated"}),e.jsxs("p",{className:"text-blue-400 text-2xl font-bold",children:["$",(($=u==null?void 0:u.totalDailyProfit)==null?void 0:$.toFixed(2))||"0.00"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Commission Records"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Daily commission breakdown from copy trading"})]}),b.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No commission records yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Master"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Follower"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Daily Profit"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Rate"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Total Commission"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Admin Share"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Master Share"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Status"})]})}),e.jsx("tbody",{children:b.map(V=>{var de,fe,me,ae,ve,Ve,Le;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white text-sm",children:V.tradingDay}),e.jsx("td",{className:"py-4 px-4 text-white text-sm",children:((de=V.masterId)==null?void 0:de.displayName)||"-"}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:((fe=V.followerUserId)==null?void 0:fe.firstName)||"User"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(me=V.followerUserId)==null?void 0:me.email})]}),e.jsxs("td",{className:"py-4 px-4 text-green-400 font-medium",children:["$",(ae=V.dailyProfit)==null?void 0:ae.toFixed(2)]}),e.jsxs("td",{className:"py-4 px-4 text-gray-400",children:[V.commissionPercentage,"%"]}),e.jsxs("td",{className:"py-4 px-4 text-white font-medium",children:["$",(ve=V.totalCommission)==null?void 0:ve.toFixed(2)]}),e.jsxs("td",{className:"py-4 px-4 text-purple-400 font-medium",children:["$",(Ve=V.adminShare)==null?void 0:Ve.toFixed(2)]}),e.jsxs("td",{className:"py-4 px-4 text-green-400 font-medium",children:["$",(Le=V.masterShare)==null?void 0:Le.toFixed(2)]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${V.status==="DEDUCTED"?"bg-green-500/20 text-green-500":V.status==="SETTLED"?"bg-blue-500/20 text-blue-500":V.status==="FAILED"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:V.status})})]},V._id)})})]})})]}),e.jsxs("div",{className:"mt-6 bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("h4",{className:"text-white font-semibold mb-3",children:"Commission Split Logic"}),e.jsxs("ul",{className:"text-gray-400 text-sm space-y-2",children:[e.jsxs("li",{children:[" User sees ",e.jsx("span",{className:"text-white",children:"Total Commission %"})," = Master % + Admin %"]}),e.jsx("li",{children:" Example: Master sets 10%, Admin share is 30%  User pays ~14.3% total"}),e.jsx("li",{children:" Commission is calculated daily from followers' profits only"}),e.jsx("li",{children:" Admin share goes to Admin Pool, Master share to Master's pending balance"})]})]})]}),x&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Approve: ",g.displayName]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Commission (%)"}),e.jsx("input",{type:"number",value:B.approvedCommissionPercentage,onChange:V=>G(de=>({...de,approvedCommissionPercentage:parseFloat(V.target.value)||0})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Admin Share (%)"}),e.jsx("input",{type:"number",value:B.adminSharePercentage,onChange:V=>G(de=>({...de,adminSharePercentage:parseFloat(V.target.value)||0})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-dark-700 text-white py-2 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:O,className:"flex-1 bg-green-500 text-white py-2 rounded-lg",children:"Approve"})]})]})}),z&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Edit Commission: ",g.displayName]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-blue-400 text-sm",children:"You can change the master's commission percentage and admin share at any time. Changes will apply to future commission calculations."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Master Commission (%)"}),e.jsx("input",{type:"number",value:K.approvedCommissionPercentage,onChange:V=>ee(de=>({...de,approvedCommissionPercentage:parseFloat(V.target.value)||0})),min:"0",max:"50",step:"0.5",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Percentage of follower's profit paid as commission"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Admin Share (%)"}),e.jsx("input",{type:"number",value:K.adminSharePercentage,onChange:V=>ee(de=>({...de,adminSharePercentage:parseFloat(V.target.value)||0})),min:"0",max:"100",step:"1",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Admin's share of the total commission"})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Commission Split Preview:"}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("span",{className:"text-purple-400",children:["Admin gets: ",(K.approvedCommissionPercentage*K.adminSharePercentage/100).toFixed(2),"%"]}),e.jsxs("span",{className:"text-green-400",children:["Master gets: ",(K.approvedCommissionPercentage*(100-K.adminSharePercentage)/100).toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{C(!1),h(null)},className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:q,className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600",children:"Update Commission"})]})]})})]})},qj=()=>{const[t,s]=o.useState(""),[r,a]=o.useState("challenges"),[n,l]=o.useState(!1),[i,d]=o.useState([]),[c,m]=o.useState([]),[b,f]=o.useState({}),[u,v]=o.useState(!0),[k,N]=o.useState(!1),[y,p]=o.useState(!1),[g,h]=o.useState(null),[x,w]=o.useState({displayName:"Prop Trading Challenge",description:"Trade with our capital. Pass the challenge and get funded.",termsAndConditions:""}),z={name:"",description:"",stepsCount:2,fundSize:1e4,challengeFee:99,rules:{maxDailyDrawdownPercent:5,maxOverallDrawdownPercent:10,profitTargetPhase1Percent:8,profitTargetPhase2Percent:5,minLotSize:.01,maxLotSize:100,minTradesRequired:1,maxTradesPerDay:null,maxTotalTrades:null,maxConcurrentTrades:null,stopLossMandatory:!0,takeProfitMandatory:!1,minTradeHoldTimeSeconds:0,maxLeverage:100,allowWeekendHolding:!1,allowNewsTrading:!0,tradingDaysRequired:null,challengeExpiryDays:30,allowedSegments:["FOREX","CRYPTO","STOCKS","COMMODITIES","INDICES"]},fundedSettings:{profitSplitPercent:80,withdrawalFrequencyDays:14},isActive:!0},[C,B]=o.useState(z);o.useEffect(()=>{G()},[]);const G=async()=>{v(!0);try{const j=await(await fetch(`${A}/prop/admin/settings`)).json();j.success&&(l(j.settings.challengeModeEnabled),w({displayName:j.settings.displayName||"Prop Trading Challenge",description:j.settings.description||"",termsAndConditions:j.settings.termsAndConditions||""}));const I=await(await fetch(`${A}/prop/admin/challenges`)).json();I.success&&d(I.challenges||[]);const J=await(await fetch(`${A}/prop/admin/accounts?limit=50`)).json();J.success&&m(J.accounts||[]);const xe=await(await fetch(`${A}/prop/admin/dashboard`)).json();xe.success&&f(xe.stats||{})}catch(T){console.error("Error fetching prop data:",T)}v(!1)},K=async()=>{try{const T=!n;(await(await fetch(`${A}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:T})})).json()).success&&(l(T),alert(T?"Challenge mode enabled! Users can now buy challenges.":"Challenge mode disabled."))}catch(T){console.error("Error toggling challenge mode:",T),alert("Failed to update challenge mode")}},ee=async()=>{try{(await(await fetch(`${A}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:n,...x})})).json()).success&&(alert("Settings saved successfully!"),N(!1))}catch(T){console.error("Error saving settings:",T),alert("Failed to save settings")}},X=()=>{h(null),B(z),p(!0)},F=T=>{h(T),B({name:T.name||"",description:T.description||"",stepsCount:T.stepsCount||2,fundSize:T.fundSize||1e4,challengeFee:T.challengeFee||99,rules:{...z.rules,...T.rules},fundedSettings:{...z.fundedSettings,...T.fundedSettings},isActive:T.isActive!==!1}),p(!0)},R=async()=>{if(!C.name){alert("Please enter a challenge name");return}try{const T=g?`${A}/prop/admin/challenges/${g._id}`:`${A}/prop/admin/challenges`,I=await(await fetch(T,{method:g?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();I.success?(alert(g?"Challenge updated!":"Challenge created!"),p(!1),G()):alert(I.message||"Failed to save challenge")}catch(T){console.error("Error saving challenge:",T),alert("Failed to save challenge")}},W=async T=>{if(confirm("Are you sure you want to delete this challenge?"))try{const Z=await(await fetch(`${A}/prop/admin/challenges/${T}`,{method:"DELETE"})).json();Z.success?(alert("Challenge deleted!"),G()):alert(Z.message||"Failed to delete challenge")}catch(j){console.error("Error deleting challenge:",j),alert("Failed to delete challenge")}},D=(T,j)=>{B({...C,rules:{...C.rules,[T]:j}})},re=(T,j)=>{B({...C,fundedSettings:{...C.fundedSettings,[T]:j}})},O=T=>{switch(T==null?void 0:T.toUpperCase()){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-orange-500/20 text-orange-500";default:return"bg-gray-500/20 text-gray-400"}},q=T=>{switch(T==null?void 0:T.toUpperCase()){case"ACTIVE":return e.jsx(Wt,{size:14});case"PASSED":case"FUNDED":return e.jsx(xs,{size:14});case"FAILED":case"EXPIRED":return e.jsx(pr,{size:14});default:return null}};return e.jsxs(as,{title:"Prop Firm Challenges",subtitle:"Manage trading challenges and funded accounts",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n?"bg-green-500/20":"bg-gray-500/20"}`,children:e.jsx(Ht,{size:24,className:n?"text-green-500":"text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Challenge Mode"}),e.jsx("p",{className:"text-gray-500 text-sm",children:n?"Users can buy and participate in challenges":"Challenge purchases are disabled for users"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>N(!0),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Settings",children:e.jsx(fr,{size:20})}),e.jsxs("button",{onClick:K,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:[n?e.jsx(Lh,{size:20}):e.jsx(Mh,{size:20}),n?"ON":"OFF"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Challenges"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:b.totalChallenges||i.length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ot,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Participants"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:b.totalAccounts||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xs,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Passed"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:b.passedAccounts||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pr,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Failed"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:b.failedAccounts||0})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>a("challenges"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="challenges"?"bg-yellow-500 text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Challenges"}),e.jsx("button",{onClick:()=>a("participants"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="participants"?"bg-yellow-500 text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Participants"})]}),r==="challenges"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Challenge Types"}),e.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition-colors",children:[e.jsx(ut,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Challenge"})]})]}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:i.length===0?e.jsxs("div",{className:"col-span-2 text-center py-12",children:[e.jsx(Ht,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No challenges created yet"}),e.jsx("p",{className:"text-gray-600 text-sm",children:'Click "Add Challenge" to create your first challenge'})]}):i.map(T=>e.jsxs("div",{className:"bg-dark-700 rounded-xl p-5 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:T.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:T.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Account Size"}),e.jsxs("p",{className:"text-white font-medium",children:["$",(T.fundSize||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Profit Target"}),e.jsxs("p",{className:"text-green-500 font-medium",children:[T.profitTarget||8,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Max Drawdown"}),e.jsxs("p",{className:"text-red-500 font-medium",children:[T.maxDrawdown||10,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Duration"}),e.jsxs("p",{className:"text-white font-medium",children:[T.durationDays||30," days"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-yellow-500 font-bold text-xl",children:["$",(T.challengeFee||0).toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm",children:T.stepsCount===0?"Instant Fund":T.stepsCount===1?"1-Step":"2-Step"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(T),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>W(T._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Vt,{size:16})})]})]})]},T._id))})]}),r==="participants"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Challenge Participants"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search participants...",value:t,onChange:T=>s(T.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No participants yet"})]}):c.map(T=>{var j,Z,I;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((j=T.userId)==null?void 0:j.firstName)||((Z=T.userId)==null?void 0:Z.email)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((I=T.challengeId)==null?void 0:I.name)||"Challenge"})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${O(T.status)}`,children:[q(T.status),T.status]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"Balance"}),e.jsxs("span",{className:"text-white",children:["$",(T.currentBalance||0).toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-dark-600 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${T.status==="FAILED"?"bg-red-500":T.status==="PASSED"?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min((T.currentBalance-T.initialBalance)/T.initialBalance*100+50,100)}%`}})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"P&L"}),e.jsxs("span",{className:T.currentBalance-T.initialBalance>=0?"text-green-500":"text-red-500",children:[T.currentBalance-T.initialBalance>=0?"+":"","$",((T.currentBalance||0)-(T.initialBalance||0)).toLocaleString()]})]})]},T._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Challenge"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"P&L"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Start Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-12 text-center text-gray-500",children:"No participants yet"})}):c.map(T=>{var Z,I,ce;const j=(T.currentBalance||0)-(T.initialBalance||0);return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-medium",children:((Z=T.userId)==null?void 0:Z.firstName)||((I=T.userId)==null?void 0:I.email)||"Unknown"}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:((ce=T.challengeId)==null?void 0:ce.name)||"Challenge"}),e.jsxs("td",{className:"py-4 px-4 text-white",children:["$",(T.currentBalance||0).toLocaleString()]}),e.jsxs("td",{className:`py-4 px-4 font-medium ${j>=0?"text-green-500":"text-red-500"}`,children:[j>=0?"+":"","$",j.toLocaleString()]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${O(T.status)}`,children:[q(T.status),T.status]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(T.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(ms,{size:16})})})]},T._id)})})]})})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Challenge Settings"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:x.displayName,onChange:T=>w({...x,displayName:T.target.value}),placeholder:"Prop Trading Challenge",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:T=>w({...x,description:T.target.value}),placeholder:"Trade with our capital...",rows:3,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Terms & Conditions"}),e.jsx("textarea",{value:x.termsAndConditions,onChange:T=>w({...x,termsAndConditions:T.target.value}),placeholder:"Enter terms and conditions...",rows:5,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:ee,className:"flex-1 py-3 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400",children:"Save Settings"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800 z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:g?"Edit Challenge":"Create New Challenge"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Name *"}),e.jsx("input",{type:"text",value:C.name,onChange:T=>B({...C,name:T.target.value}),placeholder:"e.g., Starter Challenge",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:C.description,onChange:T=>B({...C,description:T.target.value}),placeholder:"Challenge description...",rows:2,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Challenge Type & Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Type"}),e.jsxs("select",{value:C.stepsCount,onChange:T=>B({...C,stepsCount:parseInt(T.target.value)}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white",children:[e.jsx("option",{value:0,children:"Instant Fund (0-Step)"}),e.jsx("option",{value:1,children:"1-Step Challenge"}),e.jsx("option",{value:2,children:"2-Step Challenge"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Account Size ($)"}),e.jsx("input",{type:"number",value:C.fundSize,onChange:T=>B({...C,fundSize:parseFloat(T.target.value)||0}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Fee ($)"}),e.jsx("input",{type:"number",value:C.challengeFee,onChange:T=>B({...C,challengeFee:parseFloat(T.target.value)||0}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Drawdown & Profit Rules"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Daily Drawdown %"}),e.jsx("input",{type:"number",value:C.rules.maxDailyDrawdownPercent,onChange:T=>D("maxDailyDrawdownPercent",parseFloat(T.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Overall Drawdown %"}),e.jsx("input",{type:"number",value:C.rules.maxOverallDrawdownPercent,onChange:T=>D("maxOverallDrawdownPercent",parseFloat(T.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Phase 1 Target %"}),e.jsx("input",{type:"number",value:C.rules.profitTargetPhase1Percent,onChange:T=>D("profitTargetPhase1Percent",parseFloat(T.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Phase 2 Target %"}),e.jsx("input",{type:"number",value:C.rules.profitTargetPhase2Percent,onChange:T=>D("profitTargetPhase2Percent",parseFloat(T.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white",disabled:C.stepsCount<2})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lot Size & Trade Limits"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Lot Size"}),e.jsx("input",{type:"number",step:"0.01",value:C.rules.minLotSize,onChange:T=>D("minLotSize",parseFloat(T.target.value)||.01),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Lot Size"}),e.jsx("input",{type:"number",value:C.rules.maxLotSize,onChange:T=>D("maxLotSize",parseFloat(T.target.value)||100),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Trades Required"}),e.jsx("input",{type:"number",value:C.rules.minTradesRequired||"",onChange:T=>D("minTradesRequired",parseInt(T.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Trades/Day"}),e.jsx("input",{type:"number",value:C.rules.maxTradesPerDay||"",onChange:T=>D("maxTradesPerDay",parseInt(T.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Total Trades"}),e.jsx("input",{type:"number",value:C.rules.maxTotalTrades||"",onChange:T=>D("maxTotalTrades",parseInt(T.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Concurrent"}),e.jsx("input",{type:"number",value:C.rules.maxConcurrentTrades||"",onChange:T=>D("maxConcurrentTrades",parseInt(T.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Leverage"}),e.jsx("input",{type:"number",value:C.rules.maxLeverage,onChange:T=>D("maxLeverage",parseInt(T.target.value)||100),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Hold Time (sec)"}),e.jsx("input",{type:"number",value:C.rules.minTradeHoldTimeSeconds,onChange:T=>D("minTradeHoldTimeSeconds",parseInt(T.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Time & Duration"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Duration (days)"}),e.jsx("input",{type:"number",value:C.rules.challengeExpiryDays,onChange:T=>D("challengeExpiryDays",parseInt(T.target.value)||30),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Trading Days"}),e.jsx("input",{type:"number",value:C.rules.tradingDaysRequired||"",onChange:T=>D("tradingDaysRequired",parseInt(T.target.value)||null),placeholder:"No minimum",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Profit Split %"}),e.jsx("input",{type:"number",value:C.fundedSettings.profitSplitPercent,onChange:T=>re("profitSplitPercent",parseInt(T.target.value)||80),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Rules"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.rules.stopLossMandatory,onChange:T=>D("stopLossMandatory",T.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Stop Loss Required"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.rules.takeProfitMandatory,onChange:T=>D("takeProfitMandatory",T.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Take Profit Required"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.rules.allowWeekendHolding,onChange:T=>D("allowWeekendHolding",T.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Weekend Holding"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.rules.allowNewsTrading,onChange:T=>D("allowNewsTrading",T.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"News Trading"})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.isActive,onChange:T=>B({...C,isActive:T.target.checked}),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white",children:"Active (visible to users)"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:R,className:"flex-1 py-3 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400",children:g?"Update Challenge":"Create Challenge"})]})]})]})})]})},Gj=()=>{var ce;const[t,s]=o.useState(""),[r,a]=o.useState([]),[n,l]=o.useState(!0),[i,d]=o.useState(!1),[c,m]=o.useState(!1),[b,f]=o.useState(!1),[u,v]=o.useState(!1),[k,N]=o.useState(!1),[y,p]=o.useState(null),[g,h]=o.useState(""),[x,w]=o.useState(null),[z,C]=o.useState({email:"",password:"",firstName:"",lastName:"",phone:"",urlSlug:"",brandName:"",permissions:{}}),[B,G]=o.useState(""),[K,ee]=o.useState(""),X=[{key:"canManageUsers",label:"Manage Users",category:"Users"},{key:"canCreateUsers",label:"Create Users",category:"Users"},{key:"canDeleteUsers",label:"Delete Users",category:"Users"},{key:"canViewUsers",label:"View Users",category:"Users"},{key:"canManageTrades",label:"Manage Trades",category:"Trading"},{key:"canCloseTrades",label:"Close Trades",category:"Trading"},{key:"canModifyTrades",label:"Modify Trades",category:"Trading"},{key:"canManageAccounts",label:"Manage Accounts",category:"Accounts"},{key:"canCreateAccounts",label:"Create Accounts",category:"Accounts"},{key:"canDeleteAccounts",label:"Delete Accounts",category:"Accounts"},{key:"canModifyLeverage",label:"Modify Leverage",category:"Accounts"},{key:"canManageDeposits",label:"Manage Deposits",category:"Finance"},{key:"canApproveDeposits",label:"Approve Deposits",category:"Finance"},{key:"canManageWithdrawals",label:"Manage Withdrawals",category:"Finance"},{key:"canApproveWithdrawals",label:"Approve Withdrawals",category:"Finance"},{key:"canManageKYC",label:"Manage KYC",category:"KYC"},{key:"canApproveKYC",label:"Approve KYC",category:"KYC"},{key:"canManageIB",label:"Manage IB",category:"IB"},{key:"canApproveIB",label:"Approve IB",category:"IB"},{key:"canManageCopyTrading",label:"Manage Copy Trading",category:"Copy Trade"},{key:"canApproveMasters",label:"Approve Masters",category:"Copy Trade"},{key:"canManageSymbols",label:"Manage Symbols",category:"Settings"},{key:"canManageGroups",label:"Manage Groups",category:"Settings"},{key:"canManageSettings",label:"Manage Settings",category:"Settings"},{key:"canManageTheme",label:"Manage Theme",category:"Settings"},{key:"canViewReports",label:"View Reports",category:"Reports"},{key:"canExportReports",label:"Export Reports",category:"Reports"}];o.useEffect(()=>{F()},[]);const F=async()=>{try{const le=await(await fetch(`${A}/admin-mgmt/admins`)).json();le.success&&a(le.admins||[])}catch(J){console.error("Error fetching admins:",J)}l(!1)},R=async()=>{try{const le=await(await fetch(`${A}/admin-mgmt/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();le.success?(alert("Admin created successfully!"),d(!1),C({email:"",password:"",firstName:"",lastName:"",phone:"",urlSlug:"",brandName:"",permissions:{}}),F()):alert(le.message||"Failed to create admin")}catch{alert("Error creating admin")}},W=async()=>{try{const le=await(await fetch(`${A}/admin-mgmt/admins/${y._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:y.firstName,lastName:y.lastName,phone:y.phone,brandName:y.brandName,status:y.status})})).json();le.success?(alert("Admin updated successfully!"),m(!1),F()):alert(le.message||"Failed to update admin")}catch{alert("Error updating admin")}},D=async()=>{try{const le=await(await fetch(`${A}/admin-mgmt/admins/${y._id}/permissions`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissions:y.permissions})})).json();le.success?(alert("Permissions updated successfully!"),v(!1),F()):alert(le.message||"Failed to update permissions")}catch{alert("Error updating permissions")}},re=async()=>{try{const le=await(await fetch(`${A}/admin-mgmt/wallet/fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:y._id,amount:parseFloat(B),description:K})})).json();le.success?(alert(le.message),f(!1),G(""),ee(""),F()):alert(le.message||"Failed to fund admin")}catch{alert("Error funding admin")}},O=async J=>{const le=J.status==="ACTIVE"?"SUSPENDED":"ACTIVE";try{(await(await fetch(`${A}/admin-mgmt/admins/${J._id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:le})})).json()).success&&F()}catch{alert("Error updating status")}},q=async J=>{if(confirm(`Are you sure you want to delete ${J.firstName} ${J.lastName}?`))try{const xe=await(await fetch(`${A}/admin-mgmt/admins/${J._id}`,{method:"DELETE"})).json();xe.success?(alert("Admin deleted successfully!"),F()):alert(xe.message||"Failed to delete admin")}catch{alert("Error deleting admin")}},T=async()=>{if(!g||g.length<6){alert("Password must be at least 6 characters");return}try{const le=await(await fetch(`${A}/admin-mgmt/admins/${y._id}/reset-password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:g})})).json();le.success?(alert("Password reset successfully!"),N(!1),h("")):alert(le.message||"Failed to reset password")}catch{alert("Error resetting password")}},j=J=>{const le=`${window.location.origin}/${J}/login`;navigator.clipboard.writeText(le),w(J),setTimeout(()=>w(null),2e3)},Z=r.filter(J=>{var le,xe,ze,je;return((le=J.firstName)==null?void 0:le.toLowerCase().includes(t.toLowerCase()))||((xe=J.lastName)==null?void 0:xe.toLowerCase().includes(t.toLowerCase()))||((ze=J.email)==null?void 0:ze.toLowerCase().includes(t.toLowerCase()))||((je=J.urlSlug)==null?void 0:je.toLowerCase().includes(t.toLowerCase()))}),I=J=>J?Object.values(J).filter(le=>le===!0).length:0;return e.jsxs(as,{title:"Admin Management",subtitle:"Manage sub-admins, permissions, and wallets",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ar,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Admins"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.length})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(nt,{size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Admins"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.filter(J=>J.status==="ACTIVE").length})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ot,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Users"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.reduce((J,le)=>J+(le.userCount||0),0)})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ht,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",r.reduce((J,le)=>J+(le.walletBalance||0),0).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Sub-Admins"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search admins...",value:t,onChange:J=>s(J.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-accent-green text-black rounded-lg hover:bg-accent-green/90 transition-colors font-medium",children:[e.jsx(ut,{size:16}),e.jsx("span",{children:"Add Admin"})]})]})]}),n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading admins..."}):Z.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ar,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No admins found"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Create your first sub-admin to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:Z.map(J=>{var le,xe;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:(le=J.firstName)==null?void 0:le.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[J.firstName," ",J.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:J.brandName})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${J.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:J.status})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(rr,{size:14}),e.jsx("span",{children:J.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(tb,{size:14}),e.jsxs("span",{children:["/",J.urlSlug,"/login"]}),e.jsx("button",{onClick:()=>j(J.urlSlug),className:"text-blue-500",children:x===J.urlSlug?e.jsx(nt,{size:14}):e.jsx(Xt,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(ht,{size:14}),e.jsxs("span",{children:["Balance: $",((xe=J.walletBalance)==null?void 0:xe.toLocaleString())||0]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(ot,{size:14}),e.jsxs("span",{children:[J.userCount||0," users"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 pt-3 border-t border-gray-600",children:[e.jsx("button",{onClick:()=>{p(J),f(!0)},className:"flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-xs",children:e.jsx(wt,{size:14})}),e.jsx("button",{onClick:()=>{p({...J}),v(!0)},className:"flex items-center justify-center gap-1 py-2 bg-purple-500/20 text-purple-500 rounded-lg text-xs",children:e.jsx(Ic,{size:14})}),e.jsx("button",{onClick:()=>{p(J),N(!0)},className:"flex items-center justify-center gap-1 py-2 bg-yellow-500/20 text-yellow-500 rounded-lg text-xs",children:e.jsx(Os,{size:14})}),e.jsx("button",{onClick:()=>{p({...J}),m(!0)},className:"flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-xs",children:e.jsx(Jt,{size:14})}),e.jsx("button",{onClick:()=>q(J),className:"flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-xs",children:e.jsx(Vt,{size:14})})]})]},J._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Admin"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"URL Slug"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Wallet"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Users"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Permissions"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:Z.map(J=>{var le,xe,ze;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:(le=J.firstName)==null?void 0:le.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[J.firstName," ",J.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:J.email})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:["/",J.urlSlug]}),e.jsx("button",{onClick:()=>j(J.urlSlug),className:"text-blue-500 hover:text-blue-400",children:x===J.urlSlug?e.jsx(nt,{size:14}):e.jsx(Xt,{size:14})})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("p",{className:"text-white font-medium",children:["$",((xe=J.walletBalance)==null?void 0:xe.toLocaleString())||0]}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Given: $",((ze=J.totalGivenToUsers)==null?void 0:ze.toLocaleString())||0]})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-white",children:J.userCount||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-400",children:[I(J.permissions)," permissions"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{onClick:()=>O(J),className:`px-3 py-1 rounded-full text-xs ${J.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:J.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{p(J),f(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Fund Wallet",children:e.jsx(wt,{size:16})}),e.jsx("button",{onClick:()=>{p({...J}),v(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-purple-500",title:"Permissions",children:e.jsx(Ic,{size:16})}),e.jsx("button",{onClick:()=>{p(J),N(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-yellow-500",title:"Reset Password",children:e.jsx(Os,{size:16})}),e.jsx("button",{onClick:()=>{p({...J}),m(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Edit",children:e.jsx(Jt,{size:16})}),e.jsx("button",{onClick:()=>q(J),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Delete",children:e.jsx(Vt,{size:16})})]})})]},J._id)})})]})})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Create New Admin"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"First Name *"}),e.jsx("input",{type:"text",value:z.firstName,onChange:J=>C({...z,firstName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Last Name *"}),e.jsx("input",{type:"text",value:z.lastName,onChange:J=>C({...z,lastName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Email *"}),e.jsx("input",{type:"email",value:z.email,onChange:J=>C({...z,email:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"admin@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Password *"}),e.jsx("input",{type:"password",value:z.password,onChange:J=>C({...z,password:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"URL Slug * (unique identifier)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 bg-dark-600 px-3 py-2 rounded-l-lg border border-r-0 border-gray-700",children:"/"}),e.jsx("input",{type:"text",value:z.urlSlug,onChange:J=>C({...z,urlSlug:J.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"flex-1 bg-dark-700 border border-gray-700 rounded-r-lg px-3 py-2 text-white",placeholder:"my-trading"})]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Users will access: ",window.location.origin,"/",z.urlSlug||"slug","/login"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Brand Name"}),e.jsx("input",{type:"text",value:z.brandName,onChange:J=>C({...z,brandName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"My Trading Platform"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Phone"}),e.jsx("input",{type:"text",value:z.phone,onChange:J=>C({...z,phone:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"+1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Default Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto bg-dark-700 rounded-lg p-3",children:X.slice(0,10).map(J=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:z.permissions[J.key]||!1,onChange:le=>C({...z,permissions:{...z.permissions,[J.key]:le.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-gray-300",children:J.label})]},J.key))})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:R,className:"flex-1 py-2 bg-accent-green text-black rounded-lg font-medium hover:bg-accent-green/90",children:"Create Admin"})]})]})}),c&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Edit Admin"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"First Name"}),e.jsx("input",{type:"text",value:y.firstName,onChange:J=>p({...y,firstName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Last Name"}),e.jsx("input",{type:"text",value:y.lastName,onChange:J=>p({...y,lastName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Brand Name"}),e.jsx("input",{type:"text",value:y.brandName,onChange:J=>p({...y,brandName:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Phone"}),e.jsx("input",{type:"text",value:y.phone||"",onChange:J=>p({...y,phone:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Status"}),e.jsxs("select",{value:y.status,onChange:J=>p({...y,status:J.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"PENDING",children:"Pending"})]})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:W,className:"flex-1 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600",children:"Save Changes"})]})]})}),b&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Fund Admin Wallet"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Admin"}),e.jsxs("p",{className:"text-white font-medium",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:y.email})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Current Balance"}),e.jsxs("p",{className:"text-green-500 text-2xl font-bold",children:["$",((ce=y.walletBalance)==null?void 0:ce.toLocaleString())||0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:B,onChange:J=>G(J.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"1000",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Description (optional)"}),e.jsx("input",{type:"text",value:K,onChange:J=>ee(J.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Monthly allocation"})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:!B||parseFloat(B)<=0,className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:opacity-50",children:"Add Funds"})]})]})}),u&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:["Permissions - ",y.firstName," ",y.lastName]}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsx("div",{className:"p-5",children:["Users","Trading","Accounts","Finance","KYC","IB","Copy Trade","Settings","Reports"].map(J=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:J}),e.jsx("div",{className:"grid grid-cols-2 gap-2 bg-dark-700 rounded-lg p-3",children:X.filter(le=>le.category===J).map(le=>{var xe;return e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:((xe=y.permissions)==null?void 0:xe[le.key])||!1,onChange:ze=>p({...y,permissions:{...y.permissions,[le.key]:ze.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-gray-300",children:le.label})]},le.key)})})]},J))}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:D,className:"flex-1 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600",children:"Save Permissions"})]})]})}),k&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reset Password"}),e.jsx("button",{onClick:()=>{N(!1),h("")},className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Admin"}),e.jsxs("p",{className:"text-white font-medium",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:y.email})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500",children:[e.jsx($r,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Warning"})]}),e.jsx("p",{className:"text-yellow-500/80 text-sm mt-1",children:"This will immediately change the admin's password. They will need to use the new password to login."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"password",value:g,onChange:J=>h(J.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Enter new password (min 6 characters)",minLength:6})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>{N(!1),h("")},className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:!g||g.length<6,className:"flex-1 py-2 bg-yellow-500 text-black rounded-lg font-medium hover:bg-yellow-600 disabled:opacity-50",children:"Reset Password"})]})]})})]})},Xj=()=>{var X,F;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({total:0,pending:0,approved:0,rejected:0}),[c,m]=o.useState(!0),[b,f]=o.useState(null),[u,v]=o.useState(!1),[k,N]=o.useState(""),[y,p]=o.useState(!1),[g,h]=o.useState(!1);o.useEffect(()=>{x()},[r]);const x=async()=>{try{const W=await(await fetch(`${A}/kyc/all?status=${r}`)).json();W.success&&(l(W.kycList||[]),d(W.stats||{total:0,pending:0,approved:0,rejected:0}))}catch(R){console.error("Error fetching KYC requests:",R)}m(!1)},w=async R=>{h(!0);try{const D=await(await fetch(`${A}/kyc/approve/${R}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();D.success?(alert("KYC approved successfully"),x(),v(!1)):alert(D.message||"Failed to approve KYC")}catch(W){console.error("Error approving KYC:",W),alert("Failed to approve KYC")}h(!1)},z=async()=>{if(b){h(!0);try{const W=await(await fetch(`${A}/kyc/reject/${b._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:k||"Documents not acceptable"})})).json();W.success?(alert("KYC rejected"),x(),p(!1),v(!1),N("")):alert(W.message||"Failed to reject KYC")}catch(R){console.error("Error rejecting KYC:",R),alert("Failed to reject KYC")}h(!1)}},C=async R=>{f(R),v(!0)},B=R=>(R==null?void 0:R.replace(/_/g," ").replace(/\b\w/g,W=>W.toUpperCase()))||"Unknown",G=R=>{switch(R){case"approved":return"bg-green-500/20 text-green-500";case"pending":return"bg-yellow-500/20 text-yellow-500";case"rejected":return"bg-red-500/20 text-red-500";default:return"bg-gray-500/20 text-gray-400"}},K=R=>{switch(R){case"approved":return e.jsx(nt,{size:14});case"pending":return e.jsx(Wt,{size:14});case"rejected":return e.jsx(Se,{size:14});default:return null}},ee=n.filter(R=>{var O,q;const W=((O=R.user)==null?void 0:O.name)||"",D=((q=R.user)==null?void 0:q.email)||"";return W.toLowerCase().includes(t.toLowerCase())||D.toLowerCase().includes(t.toLowerCase())});return e.jsxs(as,{title:"KYC Verification",subtitle:"Verify user identity documents",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ji,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Submissions"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.total})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wt,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Pending Review"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.pending})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(nt,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Approved"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.approved})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Se,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Rejected"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.rejected})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"KYC Requests"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:t,onChange:R=>s(R.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:R=>a(R.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):ee.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No KYC requests found"}):ee.map(R=>{var W,D;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(Gt,{size:18,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((W=R.user)==null?void 0:W.name)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((D=R.user)==null?void 0:D.email)||"N/A"})]})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${G(R.status)}`,children:[K(R.status),R.status]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ut,{size:14}),e.jsx("span",{children:B(R.documentType)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsx("span",{children:new Date(R.submittedAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>C(R),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm",children:[e.jsx(ms,{size:14})," View"]}),R.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>w(R._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-sm",children:[e.jsx(nt,{size:14})," Approve"]}),e.jsxs("button",{onClick:()=>{f(R),p(!0)},className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm",children:[e.jsx(Se,{size:14})," Reject"]})]})]})]},R._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Document Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Submitted"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"Loading..."})}):ee.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"No KYC requests found"})}):ee.map(R=>{var W,D;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(Gt,{size:18,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((W=R.user)==null?void 0:W.name)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((D=R.user)==null?void 0:D.email)||"N/A"})]})]})}),e.jsx("td",{className:"py-4 px-4 text-white",children:B(R.documentType)}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(R.submittedAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${G(R.status)}`,children:[K(R.status),R.status]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>C(R),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Documents",children:e.jsx(ms,{size:16})}),R.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(R._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Approve",children:e.jsx(nt,{size:16})}),e.jsx("button",{onClick:()=>{f(R),p(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Reject",children:e.jsx(Se,{size:16})})]})]})})]},R._id)})})]})})]}),u&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"KYC Documents"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(Se,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(Gt,{size:24,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((X=b.user)==null?void 0:X.name)||"Unknown"}),e.jsx("p",{className:"text-gray-400 text-sm",children:(F=b.user)==null?void 0:F.email})]}),e.jsx("span",{className:`ml-auto px-3 py-1 rounded-full text-sm ${G(b.status)}`,children:b.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Document Type"}),e.jsx("p",{className:"text-white",children:B(b.documentType)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Document Number"}),e.jsx("p",{className:"text-white",children:b.documentNumber})]})]}),e.jsxs("div",{className:"space-y-4",children:[b.frontImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Front Side"}),e.jsx("img",{src:b.frontImage,alt:"Front",className:"max-w-full rounded-lg border border-gray-700"})]}),b.backImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Back Side"}),e.jsx("img",{src:b.backImage,alt:"Back",className:"max-w-full rounded-lg border border-gray-700"})]}),b.selfieImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Selfie with Document"}),e.jsx("img",{src:b.selfieImage,alt:"Selfie",className:"max-w-full rounded-lg border border-gray-700"})]})]}),b.status==="pending"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>w(b._id),disabled:g,className:"flex-1 py-3 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 disabled:opacity-50",children:g?"Processing...":"Approve KYC"}),e.jsx("button",{onClick:()=>p(!0),disabled:g,className:"flex-1 py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 disabled:opacity-50",children:"Reject KYC"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reject KYC"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Rejection Reason"}),e.jsx("textarea",{value:k,onChange:R=>N(R.target.value),placeholder:"Enter reason for rejection...",rows:3,className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white resize-none"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{p(!1),N("")},className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:g,className:"flex-1 py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 disabled:opacity-50",children:g?"Rejecting...":"Reject"})]})]})]})})]})},Kj=()=>{var K,ee,X;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState(null),[i,d]=o.useState([]),[c,m]=o.useState({total:0,open:0,inProgress:0,resolved:0}),[b,f]=o.useState(!0),[u,v]=o.useState(""),[k,N]=o.useState(!1),y=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{p(),g()},[r]);const p=async()=>{try{const F=r!=="all"?`?status=${r.toUpperCase()}`:"",W=await(await fetch(`${A}/support/admin/all${F}`)).json();d(W.tickets||[])}catch(F){console.error("Error fetching tickets:",F)}f(!1)},g=async()=>{try{const R=await(await fetch(`${A}/support/admin/stats`)).json();R.stats&&m(R.stats)}catch(F){console.error("Error fetching stats:",F)}},h=async F=>{try{const W=await(await fetch(`${A}/support/ticket/${F}`)).json();W.success&&l(W.ticket)}catch(R){console.error("Error fetching ticket:",R)}},x=async()=>{var F;if(!(!u.trim()||!n)){N(!0);try{const W=await(await fetch(`${A}/support/reply/${n.ticketId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:((F=n.userId)==null?void 0:F._id)||n.userId,senderType:"ADMIN",senderName:(y==null?void 0:y.username)||(y==null?void 0:y.email)||"Support Team",message:u})})).json();W.success?(l(W.ticket),v(""),p()):alert(W.message||"Failed to send reply")}catch(R){console.error("Error sending reply:",R),alert("Failed to send reply")}N(!1)}},w=async(F,R)=>{try{const D=await(await fetch(`${A}/support/admin/status/${F}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:R})})).json();D.success&&(p(),g(),(n==null?void 0:n.ticketId)===F&&l(D.ticket))}catch(W){console.error("Error updating status:",W)}},z=F=>{switch(F){case"OPEN":return"bg-red-500/20 text-red-500";case"IN_PROGRESS":return"bg-yellow-500/20 text-yellow-500";case"WAITING_USER":return"bg-orange-500/20 text-orange-500";case"RESOLVED":return"bg-green-500/20 text-green-500";case"CLOSED":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},C=F=>{switch(F){case"URGENT":return"bg-red-500/20 text-red-500";case"HIGH":return"bg-orange-500/20 text-orange-500";case"MEDIUM":return"bg-yellow-500/20 text-yellow-500";case"LOW":return"bg-blue-500/20 text-blue-500";default:return"bg-gray-500/20 text-gray-400"}},B=F=>{switch(F){case"OPEN":return e.jsx($r,{size:14});case"IN_PROGRESS":return e.jsx(Wt,{size:14});case"WAITING_USER":return e.jsx(Wt,{size:14});case"RESOLVED":return e.jsx(xs,{size:14});case"CLOSED":return e.jsx(xs,{size:14});default:return null}},G=i.filter(F=>{var re,O;const R=((re=F.userId)==null?void 0:re.firstName)||"",W=((O=F.userId)==null?void 0:O.email)||"";return R.toLowerCase().includes(t.toLowerCase())||F.subject.toLowerCase().includes(t.toLowerCase())||F.ticketId.toLowerCase().includes(t.toLowerCase())||W.toLowerCase().includes(t.toLowerCase())});return e.jsxs(as,{title:"Support Tickets",subtitle:"Manage customer support requests",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vi,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Tickets"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.total})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($r,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Open"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.open})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Wt,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"In Progress"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.inProgress})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xs,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Resolved"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.resolved})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Support Tickets"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:t,onChange:F=>s(F.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:F=>a(F.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"OPEN",children:"Open"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"WAITING_USER",children:"Waiting User"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:G.map(F=>{var R,W;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-gray-500 text-sm font-mono",children:F.ticketId}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C(F.priority)}`,children:F.priority})]}),e.jsx("p",{className:"text-white font-medium",children:F.subject})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${z(F.status)}`,children:[B(F.status),F.status.replace("_"," ")]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Gt,{size:14}),e.jsx("span",{children:((R=F.userId)==null?void 0:R.firstName)||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsx("span",{children:new Date(F.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(rb,{size:14}),e.jsxs("span",{children:[((W=F.messages)==null?void 0:W.length)||0," messages"]})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:e.jsxs("button",{onClick:()=>h(F.ticketId),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm",children:[e.jsx(ms,{size:14})," View"]})})]},F._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Ticket ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Subject"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Priority"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Created"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:b?"Loading tickets...":"No tickets found"})}):G.map(F=>{var R,W,D;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50 cursor-pointer",onClick:()=>h(F.ticketId),children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:F.ticketId}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((R=F.userId)==null?void 0:R.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((W=F.userId)==null?void 0:W.email)||""})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white",children:F.subject}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",((D=F.messages)==null?void 0:D.length)||0,")"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${C(F.priority)}`,children:F.priority})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${z(F.status)}`,children:[B(F.status),F.status.replace("_"," ")]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(F.createdAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:re=>re.stopPropagation(),children:[e.jsx("button",{onClick:()=>h(F.ticketId),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Ticket",children:e.jsx(ms,{size:16})}),F.status!=="RESOLVED"&&F.status!=="CLOSED"&&e.jsx("button",{onClick:()=>w(F.ticketId,"RESOLVED"),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Mark Resolved",children:e.jsx(xs,{size:16})})]})})]},F._id)})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-3xl max-h-[85vh] flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:n.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",n.ticketId,"  ",(K=n.userId)==null?void 0:K.firstName," (",(ee=n.userId)==null?void 0:ee.email,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:n.status,onChange:F=>w(n.ticketId,F.target.value),className:`px-2 py-1 rounded text-xs border-0 ${z(n.status)}`,children:[e.jsx("option",{value:"OPEN",children:"Open"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"WAITING_USER",children:"Waiting User"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(X=n.messages)==null?void 0:X.map((F,R)=>e.jsx("div",{className:`flex ${F.sender==="ADMIN"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${F.sender==="ADMIN"?"bg-red-500/20 text-white":"bg-dark-700 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${F.sender==="ADMIN"?"text-red-400":"text-blue-400"}`,children:F.sender==="ADMIN"?"Support":F.senderName||"User"}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(F.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:F.message})]})},R))}),n.status!=="CLOSED"&&e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:F=>v(F.target.value),placeholder:"Type your reply...",className:"flex-1 bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-500",onKeyPress:F=>F.key==="Enter"&&x()}),e.jsxs("button",{onClick:x,disabled:k||!u.trim(),className:"bg-red-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(el,{size:16}),k?"Sending...":"Send"]})]})})]})})]})};function Qj(){var R,W,D,re,O,q,T,j,Z,I,ce,J,le,xe,ze;const t=Nt(),[s,r]=o.useState([]),[a,n]=o.useState(!0),[l,i]=o.useState(!1),[d,c]=o.useState({}),[m,b]=o.useState(!1),[f,u]=o.useState(""),[v,k]=o.useState(!1),[N,y]=o.useState(!1),[p,g]=o.useState(null),[h,x]=o.useState(null),[w,z]=o.useState(null),C=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{B(),G()},[]);const B=async()=>{try{const H=await(await fetch(`${A}/prop/challenges`)).json();H.success&&(r(H.challenges||[]),i(H.enabled))}catch(je){console.error("Error fetching challenges:",je)}n(!1)},G=async()=>{try{const H=await(await fetch(`${A}/prop/status`)).json();H.success&&c(H)}catch(je){console.error("Error fetching settings:",je)}},K=[...new Set(s.map(je=>je.stepsCount))].sort(),ee=p!==null?[...new Set(s.filter(je=>je.stepsCount===p).map(je=>je.fundSize))].sort((je,H)=>je-H):[];o.useEffect(()=>{if(p!==null&&h!==null){const je=s.find(H=>H.stepsCount===p&&H.fundSize===h);z(je||null)}else z(null)},[p,h,s]);const X=async()=>{if(!C._id){alert("Please login to buy a challenge");return}if(!w){alert("Please select a challenge");return}if(!v){alert("Please agree to the terms and conditions");return}b(!0);try{const H=await(await fetch(`${A}/prop/buy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:C._id,challengeId:w._id,paymentId:`PAY${Date.now()}`,couponCode:f||void 0})})).json();H.success?(alert("Challenge purchased successfully!"),t("/account")):alert(H.message||"Failed to purchase challenge")}catch(je){console.error("Error buying challenge:",je),alert("Error purchasing challenge")}b(!1)},F=je=>je===0?"Instant Fund":je===1?"One Step":"Two Step";return a?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent-green"})}):l?e.jsxs("div",{className:"min-h-screen bg-dark-900",children:[e.jsx("div",{className:"bg-dark-800 border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/dashboard"),className:"text-gray-400 hover:text-white",children:e.jsx(Dr,{size:24})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{size:28,className:"text-accent-green"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"New Challenge"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Choose the type of challenge you want to take"})]})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 lg:p-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-2",children:"Challenge Type"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Choose the type of challenge you want to take"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:K.map(je=>e.jsx("button",{onClick:()=>{g(je),x(null)},className:`p-4 rounded-xl border-2 transition-all ${p===je?"border-accent-green bg-accent-green/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${p===je?"bg-accent-green":"bg-gray-600"}`}),e.jsx("span",{className:"text-white font-medium",children:F(je)})]})},je))})]}),p!==null&&e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-2",children:"Account Size"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Choose your preferred account size"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ee.map(je=>e.jsx("button",{onClick:()=>x(je),className:`p-4 rounded-xl border-2 transition-all ${h===je?"border-accent-green bg-accent-green/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h===je?"bg-accent-green":"bg-gray-600"}`}),e.jsxs("span",{className:"text-white font-medium",children:["$",je.toLocaleString()]})]})},je))})]}),w&&e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-lg flex items-center justify-center",children:e.jsx(Ut,{size:20,className:"text-accent-green"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Trading Rules"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Challenge parameters you must follow"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Daily Drawdown"}),e.jsxs("p",{className:"text-red-500 font-bold text-lg",children:[((R=w.rules)==null?void 0:R.maxDailyDrawdownPercent)||5,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Drawdown"}),e.jsxs("p",{className:"text-red-500 font-bold text-lg",children:[((W=w.rules)==null?void 0:W.maxOverallDrawdownPercent)||10,"%"]})]}),w.stepsCount>0&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Profit Target"}),e.jsxs("p",{className:"text-green-500 font-bold text-lg",children:[((D=w.rules)==null?void 0:D.profitTargetPhase1Percent)||8,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Time Limit"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:[((re=w.rules)==null?void 0:re.challengeExpiryDays)||30," days"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Min Lot Size"}),e.jsx("p",{className:"text-white font-bold text-lg",children:((O=w.rules)==null?void 0:O.minLotSize)||.01})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Lot Size"}),e.jsx("p",{className:"text-white font-bold text-lg",children:((q=w.rules)==null?void 0:q.maxLotSize)||100})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Leverage"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:["1:",((T=w.rules)==null?void 0:T.maxLeverage)||100]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Profit Split"}),e.jsxs("p",{className:"text-accent-green font-bold text-lg",children:[((j=w.fundedSettings)==null?void 0:j.profitSplitPercent)||80,"%"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(Z=w.rules)!=null&&Z.stopLossMandatory?"bg-yellow-500/10 text-yellow-500":"bg-dark-700 text-gray-400"}`,children:[(I=w.rules)!=null&&I.stopLossMandatory?e.jsx(nt,{size:16}):e.jsx(Se,{size:16}),e.jsx("span",{className:"text-sm",children:"Stop Loss Required"})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(ce=w.rules)!=null&&ce.allowWeekendHolding?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[(J=w.rules)!=null&&J.allowWeekendHolding?e.jsx(nt,{size:16}):e.jsx(Se,{size:16}),e.jsx("span",{className:"text-sm",children:"Weekend Holding"})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(le=w.rules)!=null&&le.allowNewsTrading?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[(xe=w.rules)!=null&&xe.allowNewsTrading?e.jsx(nt,{size:16}):e.jsx(Se,{size:16}),e.jsx("span",{className:"text-sm",children:"News Trading"})]}),((ze=w.rules)==null?void 0:ze.minTradeHoldTimeSeconds)>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-yellow-500/10 text-yellow-500",children:[e.jsx(Wt,{size:16}),e.jsxs("span",{className:"text-sm",children:["Min Hold: ",w.rules.minTradeHoldTimeSeconds,"s"]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 sticky top-4",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Coupon Code"}),e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"Enter a coupon code to get a discount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:je=>u(je.target.value),placeholder:"Enter coupon code",className:"flex-1 bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white placeholder-gray-500"}),e.jsx("button",{className:"px-4 py-2 bg-dark-700 text-gray-400 rounded-lg hover:text-white",children:"Apply"})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Order Summary"}),w?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:["$",w.fundSize.toLocaleString(),"  ",F(w.stepsCount)]}),e.jsx("p",{className:"text-gray-500 text-sm",children:w.name})]}),e.jsxs("p",{className:"text-white font-bold",children:["$",w.challengeFee.toLocaleString()]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-700 flex justify-between",children:[e.jsx("span",{className:"text-white font-semibold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["$",w.challengeFee.toLocaleString()]})]})]}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Select a challenge type and account size"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer mb-4",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:je=>k(je.target.checked),className:"w-5 h-5 mt-0.5 rounded bg-dark-700 border-gray-600 text-accent-green"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["I agree with all the following terms:",e.jsxs("ul",{className:"mt-2 space-y-1 text-gray-500",children:[e.jsxs("li",{children:[" I have read and agreed to the ",e.jsx("button",{onClick:()=>y(!0),className:"text-accent-green hover:underline",children:"Terms of Use"})]}),e.jsx("li",{children:" All information provided is correct"}),e.jsxs("li",{children:[" I have read and agree with the ",e.jsx("button",{onClick:()=>y(!0),className:"text-accent-green hover:underline",children:"Terms & Conditions"})]}),e.jsx("li",{children:" I understand the trading rules and risks"})]})]})]}),e.jsxs("button",{onClick:X,disabled:!w||!v||m,className:"w-full py-4 bg-accent-green text-black font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m?"Processing...":"Continue to Payment",e.jsx(Xs,{size:20})]})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6 text-center",children:"How It Works"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{step:1,title:"Buy Challenge",desc:"Choose your account size and pay the one-time fee."},{step:2,title:"Pass Evaluation",desc:"Trade within the rules and hit your profit target."},{step:3,title:"Get Funded",desc:"Receive your funded account and start earning."}].map(je=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-accent-green font-bold text-lg",children:je.step})}),e.jsx("h3",{className:"text-white font-bold mb-2",children:je.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:je.desc})]},je.step))})]}),e.jsxs("div",{className:"mt-6 bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Wi,{size:20,className:"text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-500 font-medium",children:"Important Rules"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Breaking any rule will result in immediate account failure. All trades must follow the challenge rules. Make sure to review all trading parameters before starting."})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Terms & Conditions"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:24})})]}),e.jsxs("div",{className:"p-6 text-gray-400 space-y-4",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Challenge Rules"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"You must not exceed the maximum daily drawdown limit"}),e.jsx("li",{children:"You must not exceed the maximum overall drawdown limit"}),e.jsx("li",{children:"All trades must have a stop loss if required by the challenge"}),e.jsx("li",{children:"You must reach the profit target within the time limit"}),e.jsx("li",{children:"Lot sizes must be within the specified range"}),e.jsx("li",{children:"Weekend holding rules must be followed"}),e.jsx("li",{children:"News trading restrictions apply if specified"})]}),e.jsx("h3",{className:"text-white font-semibold mt-6",children:"Account Termination"}),e.jsx("p",{children:"Your challenge account will be terminated if you break any of the above rules. No refunds will be provided for terminated accounts."}),e.jsx("h3",{className:"text-white font-semibold mt-6",children:"Funded Account"}),e.jsx("p",{children:"Upon successfully completing the challenge, you will receive a funded account with the specified profit split. Withdrawals are subject to the withdrawal frequency rules."})]}),e.jsx("div",{className:"p-6 border-t border-gray-800",children:e.jsx("button",{onClick:()=>{k(!0),y(!1)},className:"w-full py-3 bg-accent-green text-black font-medium rounded-lg",children:"I Agree to Terms"})})]})})]}):e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ht,{size:64,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Challenges Coming Soon"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Prop trading challenges are not available at the moment."}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"px-6 py-3 bg-accent-green text-black font-medium rounded-lg",children:"Back to Dashboard"})]})})}function Zj(){var k,N,y,p,g;const t=Nt(),[s,r]=o.useState([]),[a,n]=o.useState(null),[l,i]=o.useState(null),[d,c]=o.useState(!0),m=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{m._id&&b()},[m._id]),o.useEffect(()=>{a&&f(a._id)},[a]);const b=async()=>{try{const x=await(await fetch(`${A}/prop/my-accounts/${m._id}`)).json();x.success&&x.accounts.length>0&&(r(x.accounts),n(x.accounts[0]))}catch(h){console.error("Error fetching accounts:",h)}c(!1)},f=async h=>{try{const w=await(await fetch(`${A}/prop/account/${h}`)).json();w.success&&i(w)}catch(x){console.error("Error fetching dashboard:",x)}},u=h=>{switch(h){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-gray-500/20 text-gray-500";default:return"bg-gray-500/20 text-gray-500"}},v=h=>{switch(h){case"ACTIVE":return xr;case"PASSED":return xs;case"FUNDED":return Ht;case"FAILED":return pr;case"EXPIRED":return Wt;default:return $r}};return d?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):s.length===0?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ht,{size:64,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Challenge Accounts"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"You haven't purchased any challenges yet."}),e.jsx("button",{onClick:()=>t("/buy-challenge"),className:"px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-colors",children:"Buy Challenge"})]})}):e.jsx("div",{className:"min-h-screen bg-dark-900 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Challenge Dashboard"}),e.jsx("p",{className:"text-gray-400",children:"Monitor your prop trading progress"})]}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Ht,{size:18}),"New Challenge"]})]}),s.length>1&&e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:s.map(h=>{const x=v(h.status);return e.jsxs("button",{onClick:()=>n(h),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${(a==null?void 0:a._id)===h._id?"bg-primary-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700"}`,children:[e.jsx(x,{size:16}),h.accountId]},h._id)})}),l&&e.jsxs(e.Fragment,{children:[l.account.status==="FAILED"&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(pr,{size:24,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-500 font-bold",children:"Challenge Failed"}),e.jsx("p",{className:"text-gray-400 text-sm",children:((N=(k=l.violations)==null?void 0:k.find(h=>h.severity==="FAIL"))==null?void 0:N.description)||"Rule violation detected"})]})]}),l.account.status==="PASSED"&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(xs,{size:24,className:"text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-500 font-bold",children:"Challenge Passed!"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Congratulations! Your funded account is being prepared."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Equity"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",l.balance.equity.toLocaleString()]}),e.jsxs("p",{className:`text-sm ${l.balance.profitLoss>=0?"text-green-500":"text-red-500"}`,children:[l.balance.profitLoss>=0?"+":"","$",l.balance.profitLoss.toFixed(2)]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Phase"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.account.totalPhases===0?"Funded":`${l.account.currentPhase}/${l.account.totalPhases}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u(l.account.status)}`,children:l.account.status})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Days Left"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.time.remainingDays}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["of ",l.challenge.stepsCount===0?"":"30"," days"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Trading Days"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.trades.tradingDays}),e.jsx("p",{className:"text-gray-500 text-sm",children:l.trades.requiredDays?`min ${l.trades.requiredDays} required`:"No minimum"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ar,{size:20,className:"text-red-500"}),"Drawdown Limits"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Drawdown"}),e.jsxs("span",{className:"text-white",children:[l.drawdown.dailyUsed.toFixed(2),"% / ",l.drawdown.dailyMax,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${l.drawdown.dailyUsed>=l.drawdown.dailyMax*.8?"bg-red-500":l.drawdown.dailyUsed>=l.drawdown.dailyMax*.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,l.drawdown.dailyUsed/l.drawdown.dailyMax*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.drawdown.dailyRemaining.toFixed(2),"% remaining"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Drawdown"}),e.jsxs("span",{className:"text-white",children:[l.drawdown.overallUsed.toFixed(2),"% / ",l.drawdown.overallMax,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${l.drawdown.overallUsed>=l.drawdown.overallMax*.8?"bg-red-500":l.drawdown.overallUsed>=l.drawdown.overallMax*.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,l.drawdown.overallUsed/l.drawdown.overallMax*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.drawdown.overallRemaining.toFixed(2),"% remaining"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(cb,{size:20,className:"text-green-500"}),"Profit Target"]}),l.profit.targetPercent>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Progress"}),e.jsxs("span",{className:"text-white",children:[l.profit.currentPercent.toFixed(2),"% / ",l.profit.targetPercent,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all",style:{width:`${Math.min(100,l.profit.targetProgress)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",Math.max(0,l.profit.amountToTarget).toFixed(2)," to target"]}),e.jsxs("div",{className:"mt-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Target Amount"}),e.jsxs("p",{className:"text-xl font-bold text-green-500",children:["$",(l.profit.targetPercent/100*l.balance.initial).toLocaleString()]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ht,{size:32,className:"text-purple-500 mx-auto mb-2"}),e.jsx("p",{className:"text-white font-medium",children:"Instant Funded Account"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No profit target - just follow the rules"})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Rd,{size:20,className:"text-primary-500"}),"Trade Limits"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Trades Today"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[l.trades.today,l.trades.maxPerDay&&e.jsxs("span",{className:"text-gray-500",children:["/",l.trades.maxPerDay]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Open Trades"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[l.trades.openCount,l.trades.maxConcurrent&&e.jsxs("span",{className:"text-gray-500",children:["/",l.trades.maxConcurrent]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Trades"}),e.jsx("p",{className:"text-xl font-bold text-white",children:l.trades.total})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Min Hold Time"}),e.jsx("p",{className:"text-xl font-bold text-white",children:l.rules.minHoldTimeSeconds>0?`${l.rules.minHoldTimeSeconds}s`:"None"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Active Rules"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l.rules.stopLossMandatory?"bg-red-500/20":"bg-gray-700"}`,children:e.jsx(ar,{size:16,className:l.rules.stopLossMandatory?"text-red-500":"text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:"Stop Loss Mandatory"}),e.jsx("p",{className:"text-gray-500 text-xs",children:l.rules.stopLossMandatory?"Required on all trades":"Not required"})]})]}),((y=l.rules.allowedSymbols)==null?void 0:y.length)>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(xr,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:"Allowed Symbols"}),e.jsx("p",{className:"text-gray-500 text-xs",children:l.rules.allowedSymbols.join(", ")})]})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Wi,{size:20,className:"text-yellow-500"}),"Violations (",((p=l.violations)==null?void 0:p.length)||0,")"]}),((g=l.violations)==null?void 0:g.length)>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:l.violations.map((h,x)=>e.jsxs("div",{className:`p-3 rounded-lg ${h.severity==="FAIL"?"bg-red-500/10 border border-red-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[e.jsx("p",{className:`text-sm font-medium ${h.severity==="FAIL"?"text-red-500":"text-yellow-500"}`,children:h.rule}),e.jsx("p",{className:"text-gray-400 text-xs",children:h.description})]},x))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(xs,{size:32,className:"text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No violations - keep it up!"})]})]})]}),l.account.status==="ACTIVE"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>t("/trading"),className:"w-full py-4 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(xt,{size:20}),"Start Trading"]})})]})]})})}function eN(){const[t,s]=o.useState("dashboard"),[r,a]=o.useState(null),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,m]=o.useState(null),[b,f]=o.useState(!0),[u,v]=o.useState(!1),[k,N]=o.useState(null),[y,p]=o.useState(""),[g,h]=o.useState("all");o.useEffect(()=>{x()},[]);const x=async()=>{f(!0),await Promise.all([w(),z(),C(),B()]),f(!1)},w=async()=>{try{const re=await(await fetch(`${A}/prop/admin/settings`)).json();re.success&&a(re.settings)}catch(D){console.error("Error fetching settings:",D)}},z=async()=>{try{const re=await(await fetch(`${A}/prop/admin/challenges`)).json();re.success&&l(re.challenges||[])}catch(D){console.error("Error fetching challenges:",D)}},C=async()=>{try{const re=await(await fetch(`${A}/prop/admin/accounts?limit=100`)).json();re.success&&d(re.accounts||[])}catch(D){console.error("Error fetching accounts:",D)}},B=async()=>{try{const re=await(await fetch(`${A}/prop/admin/dashboard`)).json();re.success&&m(re.stats)}catch(D){console.error("Error fetching stats:",D)}},G=async()=>{try{const re=await(await fetch(`${A}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:!(r!=null&&r.challengeModeEnabled)})})).json();re.success&&(a(re.settings),B())}catch(D){console.error("Error toggling challenge mode:",D)}},K=async D=>{if(confirm("Are you sure you want to force pass this challenge?"))try{(await(await fetch(`${A}/prop/admin/force-pass/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin"})})).json()).success&&(alert("Challenge force passed!"),C(),B())}catch(re){console.error("Error:",re)}},ee=async D=>{const re=prompt("Enter reason for failing this challenge:");if(re)try{(await(await fetch(`${A}/prop/admin/force-fail/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin",reason:re})})).json()).success&&(alert("Challenge force failed!"),C(),B())}catch(O){console.error("Error:",O)}},X=async D=>{const re=prompt("Enter number of days to extend:");if(!(!re||isNaN(re)))try{(await(await fetch(`${A}/prop/admin/extend-time/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin",days:parseInt(re)})})).json()).success&&(alert(`Extended by ${re} days!`),C())}catch(O){console.error("Error:",O)}},F=async D=>{if(confirm("Are you sure you want to reset this challenge? All progress will be lost."))try{(await(await fetch(`${A}/prop/admin/reset/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin"})})).json()).success&&(alert("Challenge reset!"),C(),B())}catch(re){console.error("Error:",re)}},R=D=>{switch(D){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-gray-500/20 text-gray-500";default:return"bg-gray-500/20 text-gray-500"}},W=i.filter(D=>{var q,T,j,Z,I;const re=((q=D.accountId)==null?void 0:q.toLowerCase().includes(y.toLowerCase()))||((j=(T=D.userId)==null?void 0:T.firstName)==null?void 0:j.toLowerCase().includes(y.toLowerCase()))||((I=(Z=D.userId)==null?void 0:Z.email)==null?void 0:I.toLowerCase().includes(y.toLowerCase())),O=g==="all"||D.status===g;return re&&O});return b?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsx("div",{className:"min-h-screen bg-dark-900 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ht,{className:"text-primary-500"}),"Prop Trading Management"]}),e.jsx("p",{className:"text-gray-400",children:"Manage challenges and funded accounts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:G,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${r!=null&&r.challengeModeEnabled?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-red-500/20 text-red-500 border border-red-500/30"}`,children:[r!=null&&r.challengeModeEnabled?e.jsx(nt,{size:18}):e.jsx(Se,{size:18}),r!=null&&r.challengeModeEnabled?"Enabled":"Disabled"]}),e.jsx("button",{onClick:x,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Je,{size:18})})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-800 pb-2",children:["dashboard","challenges","accounts"].map(D=>e.jsx("button",{onClick:()=>s(D),className:`px-4 py-2 rounded-lg font-medium transition-colors capitalize ${t===D?"bg-primary-500 text-white":"text-gray-400 hover:bg-dark-800"}`,children:D},D))}),t==="dashboard"&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Challenges"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:c.totalChallenges})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Active Accounts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-500",children:c.activeAccounts})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Passed"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:c.passedAccounts})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:c.failedAccounts})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Account Distribution"}),e.jsx("div",{className:"space-y-3",children:[{label:"Active",value:c.activeAccounts,color:"bg-blue-500"},{label:"Passed",value:c.passedAccounts,color:"bg-green-500"},{label:"Funded",value:c.fundedAccounts,color:"bg-purple-500"},{label:"Failed",value:c.failedAccounts,color:"bg-red-500"}].map(D=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${D.color}`}),e.jsx("span",{className:"text-gray-400 flex-1",children:D.label}),e.jsx("span",{className:"text-white font-medium",children:D.value})]},D.label))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Challenge Mode"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${c.challengeModeEnabled?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:c.challengeModeEnabled?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Accounts"}),e.jsx("span",{className:"text-white font-medium",children:c.totalAccounts})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Pass Rate"}),e.jsxs("span",{className:"text-white font-medium",children:[c.totalAccounts>0?(c.passedAccounts/c.totalAccounts*100).toFixed(1):0,"%"]})]})]})]})]})]}),t==="challenges"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Challenge Products"}),e.jsxs("button",{onClick:()=>{N(null),v(!0)},className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(ut,{size:18}),"Add Challenge"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(D=>{var re,O,q;return e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${D.stepsCount===0?"bg-green-500/20 text-green-500":D.stepsCount===1?"bg-blue-500/20 text-blue-500":"bg-purple-500/20 text-purple-500"}`,children:D.stepsCount===0?"Instant":`${D.stepsCount}-Step`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${D.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:D.isActive?"Active":"Inactive"})]}),e.jsxs("h3",{className:"text-xl font-bold text-white",children:["$",D.fundSize.toLocaleString()]}),e.jsx("p",{className:"text-gray-400 text-sm",children:D.name})]}),e.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Fee"}),e.jsxs("span",{className:"text-white",children:["$",D.challengeFee]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Daily DD"}),e.jsxs("span",{className:"text-white",children:[(re=D.rules)==null?void 0:re.maxDailyDrawdownPercent,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Max DD"}),e.jsxs("span",{className:"text-white",children:[(O=D.rules)==null?void 0:O.maxOverallDrawdownPercent,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Profit Split"}),e.jsxs("span",{className:"text-white",children:[(q=D.fundedSettings)==null?void 0:q.profitSplitPercent,"%"]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-800 flex gap-2",children:e.jsxs("button",{onClick:()=>{N(D),v(!0)},className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg text-sm flex items-center justify-center gap-1",children:[e.jsx(Jt,{size:14})," Edit"]})})]},D._id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ht,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No challenges created yet."})]})]}),t==="accounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by account ID, name, or email...",value:y,onChange:D=>p(D.target.value),className:"w-full pl-10 pr-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("select",{value:g,onChange:D=>h(D.target.value),className:"px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"PASSED",children:"Passed"}),e.jsx("option",{value:"FUNDED",children:"Funded"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"EXPIRED",children:"Expired"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Account"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Challenge"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Phase"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Equity"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"DD%"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Profit%"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:W.map(D=>{var re,O,q,T,j,Z,I,ce;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-3 px-4 text-white font-mono text-sm",children:D.accountId}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:((re=D.userId)==null?void 0:re.firstName)||"N/A"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(O=D.userId)==null?void 0:O.email})]}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsxs("p",{className:"text-white text-sm",children:["$",(T=(q=D.challengeId)==null?void 0:q.fundSize)==null?void 0:T.toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-xs",children:(j=D.challengeId)==null?void 0:j.name})]}),e.jsx("td",{className:"py-3 px-4 text-white",children:D.totalPhases===0?"Funded":`${D.currentPhase}/${D.totalPhases}`}),e.jsxs("td",{className:"py-3 px-4 text-white",children:["$",(Z=D.currentEquity)==null?void 0:Z.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:D.currentOverallDrawdownPercent>5?"text-red-500":"text-white",children:[(I=D.currentOverallDrawdownPercent)==null?void 0:I.toFixed(2),"%"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:D.currentProfitPercent>=0?"text-green-500":"text-red-500",children:[(ce=D.currentProfitPercent)==null?void 0:ce.toFixed(2),"%"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R(D.status)}`,children:D.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[D.status==="ACTIVE"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>K(D._id),className:"p-1.5 hover:bg-green-500/20 rounded text-gray-400 hover:text-green-500",title:"Force Pass",children:e.jsx(nt,{size:14})}),e.jsx("button",{onClick:()=>ee(D._id),className:"p-1.5 hover:bg-red-500/20 rounded text-gray-400 hover:text-red-500",title:"Force Fail",children:e.jsx(Se,{size:14})}),e.jsx("button",{onClick:()=>X(D._id),className:"p-1.5 hover:bg-blue-500/20 rounded text-gray-400 hover:text-blue-500",title:"Extend Time",children:e.jsx(Wt,{size:14})})]}),e.jsx("button",{onClick:()=>F(D._id),className:"p-1.5 hover:bg-yellow-500/20 rounded text-gray-400 hover:text-yellow-500",title:"Reset",children:e.jsx(Je,{size:14})})]})})]},D._id)})})]})}),W.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No accounts found."})]})]})]}),u&&e.jsx(tN,{challenge:k,onClose:()=>{v(!1),N(null)},onSave:()=>{v(!1),N(null),z()}})]})})}function tN({challenge:t,onClose:s,onSave:r}){var c,m,b,f,u,v,k,N,y,p;const[a,n]=o.useState({name:(t==null?void 0:t.name)||"",stepsCount:(t==null?void 0:t.stepsCount)??2,fundSize:(t==null?void 0:t.fundSize)||1e4,challengeFee:(t==null?void 0:t.challengeFee)||100,isActive:(t==null?void 0:t.isActive)??!0,rules:{maxDailyDrawdownPercent:((c=t==null?void 0:t.rules)==null?void 0:c.maxDailyDrawdownPercent)||5,maxOverallDrawdownPercent:((m=t==null?void 0:t.rules)==null?void 0:m.maxOverallDrawdownPercent)||10,profitTargetPhase1Percent:((b=t==null?void 0:t.rules)==null?void 0:b.profitTargetPhase1Percent)||8,profitTargetPhase2Percent:((f=t==null?void 0:t.rules)==null?void 0:f.profitTargetPhase2Percent)||5,stopLossMandatory:((u=t==null?void 0:t.rules)==null?void 0:u.stopLossMandatory)??!0,maxTradesPerDay:((v=t==null?void 0:t.rules)==null?void 0:v.maxTradesPerDay)||null,maxConcurrentTrades:((k=t==null?void 0:t.rules)==null?void 0:k.maxConcurrentTrades)||null,minTradeHoldTimeSeconds:((N=t==null?void 0:t.rules)==null?void 0:N.minTradeHoldTimeSeconds)||0,challengeExpiryDays:((y=t==null?void 0:t.rules)==null?void 0:y.challengeExpiryDays)||30},fundedSettings:{profitSplitPercent:((p=t==null?void 0:t.fundedSettings)==null?void 0:p.profitSplitPercent)||80}}),[l,i]=o.useState(!1),d=async g=>{g.preventDefault(),i(!0);try{const h=t?`${A}/prop/admin/challenges/${t._id}`:`${A}/prop/admin/challenges`,z=await(await fetch(h,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();z.success?r():alert(z.message||"Error saving challenge")}catch(h){console.error("Error:",h),alert("Error saving challenge")}i(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit Challenge":"Create Challenge"})}),e.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:g=>n({...a,name:g.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Steps"}),e.jsxs("select",{value:a.stepsCount,onChange:g=>n({...a,stepsCount:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:0,children:"Instant Fund (0 Steps)"}),e.jsx("option",{value:1,children:"1-Step"}),e.jsx("option",{value:2,children:"2-Step"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Fund Size ($)"}),e.jsx("input",{type:"number",value:a.fundSize,onChange:g=>n({...a,fundSize:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Challenge Fee ($)"}),e.jsx("input",{type:"number",value:a.challengeFee,onChange:g=>n({...a,challengeFee:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Risk Rules"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Daily Drawdown (%)"}),e.jsx("input",{type:"number",value:a.rules.maxDailyDrawdownPercent,onChange:g=>n({...a,rules:{...a.rules,maxDailyDrawdownPercent:parseFloat(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Overall Drawdown (%)"}),e.jsx("input",{type:"number",value:a.rules.maxOverallDrawdownPercent,onChange:g=>n({...a,rules:{...a.rules,maxOverallDrawdownPercent:parseFloat(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Phase 1 Target (%)"}),e.jsx("input",{type:"number",value:a.rules.profitTargetPhase1Percent,onChange:g=>n({...a,rules:{...a.rules,profitTargetPhase1Percent:parseFloat(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Phase 2 Target (%)"}),e.jsx("input",{type:"number",value:a.rules.profitTargetPhase2Percent,onChange:g=>n({...a,rules:{...a.rules,profitTargetPhase2Percent:parseFloat(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Expiry Days"}),e.jsx("input",{type:"number",value:a.rules.challengeExpiryDays,onChange:g=>n({...a,rules:{...a.rules,challengeExpiryDays:parseInt(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Profit Split (%)"}),e.jsx("input",{type:"number",value:a.fundedSettings.profitSplitPercent,onChange:g=>n({...a,fundedSettings:{...a.fundedSettings,profitSplitPercent:parseInt(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Trade Rules"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Max Trades/Day (0 = unlimited)"}),e.jsx("input",{type:"number",value:a.rules.maxTradesPerDay||0,onChange:g=>n({...a,rules:{...a.rules,maxTradesPerDay:parseInt(g.target.value)||null}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Max Concurrent (0 = unlimited)"}),e.jsx("input",{type:"number",value:a.rules.maxConcurrentTrades||0,onChange:g=>n({...a,rules:{...a.rules,maxConcurrentTrades:parseInt(g.target.value)||null}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Min Hold Time (seconds)"}),e.jsx("input",{type:"number",value:a.rules.minTradeHoldTimeSeconds,onChange:g=>n({...a,rules:{...a.rules,minTradeHoldTimeSeconds:parseInt(g.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"slMandatory",checked:a.rules.stopLossMandatory,onChange:g=>n({...a,rules:{...a.rules,stopLossMandatory:g.target.checked}}),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"slMandatory",className:"text-gray-400",children:"Stop Loss Mandatory"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:g=>n({...a,isActive:g.target.checked}),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isActive",className:"text-gray-400",children:"Challenge Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"flex-1 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg disabled:opacity-50",children:l?"Saving...":"Save Challenge"})]})]})]})})}const sN=()=>{var w,z,C,B,G,K,ee,X,F,R,W,D,re,O,q,T,j,Z,I,ce,J,le,xe,ze,je,H,be;const[t,s]=o.useState(null),[r,a]=o.useState([]),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,m]=o.useState(!0),[b,f]=o.useState("overview"),[u,v]=o.useState("30");o.useEffect(()=>{k()},[u]);const k=async()=>{m(!0),await Promise.all([N(),y(),p(),g()]),m(!1)},N=async()=>{try{const $=await(await fetch(`${A}/earnings/summary`)).json();$.success&&s($.earnings)}catch(ue){console.error("Error fetching summary:",ue)}},y=async()=>{try{const $=await(await fetch(`${A}/earnings/daily?days=${u}`)).json();$.success&&a($.earnings||[])}catch(ue){console.error("Error fetching daily earnings:",ue)}},p=async()=>{try{const $=await(await fetch(`${A}/earnings/by-user?days=${u}`)).json();$.success&&l($.earnings||[])}catch(ue){console.error("Error fetching user earnings:",ue)}},g=async()=>{try{const $=await(await fetch(`${A}/earnings/by-symbol?days=${u}`)).json();$.success&&d($.earnings||[])}catch(ue){console.error("Error fetching symbol earnings:",ue)}},h=ue=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(ue||0),x=({title:ue,value:$,subtitle:V,icon:de,color:fe})=>e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-4 sm:p-5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:ue}),e.jsx("p",{className:`text-xl sm:text-2xl font-bold mt-1 ${fe||"text-white"}`,children:h($)}),V&&e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:V})]}),e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${fe!=null&&fe.includes("green")?"bg-green-500/20":"bg-blue-500/20"}`,children:e.jsx(de,{size:20,className:fe!=null&&fe.includes("green")?"text-green-500":"text-blue-500"})})]})});return e.jsxs(as,{title:"Earnings Report",subtitle:"Track commission, spread, and swap earnings",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:u,onChange:ue=>v(ue.target.value),className:"px-3 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"7",children:"Last 7 Days"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]}),e.jsx("button",{onClick:k,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Je,{size:18})})]})}),c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Je,{size:24,className:"animate-spin text-gray-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx(x,{title:"Today",value:(w=t==null?void 0:t.today)==null?void 0:w.total,subtitle:`${((z=t==null?void 0:t.today)==null?void 0:z.trades)||0} trades`,icon:wt,color:"text-green-500"}),e.jsx(x,{title:"This Week",value:(C=t==null?void 0:t.thisWeek)==null?void 0:C.total,subtitle:`${((B=t==null?void 0:t.thisWeek)==null?void 0:B.trades)||0} trades`,icon:wa,color:"text-blue-500"}),e.jsx(x,{title:"This Month",value:(G=t==null?void 0:t.thisMonth)==null?void 0:G.total,subtitle:`${((K=t==null?void 0:t.thisMonth)==null?void 0:K.trades)||0} trades`,icon:xt,color:"text-purple-500"}),e.jsx(x,{title:"This Year",value:(ee=t==null?void 0:t.thisYear)==null?void 0:ee.total,subtitle:`${((X=t==null?void 0:t.thisYear)==null?void 0:X.trades)||0} trades`,icon:Rd,color:"text-orange-500"}),e.jsx(x,{title:"All Time",value:(F=t==null?void 0:t.allTime)==null?void 0:F.total,subtitle:`${((R=t==null?void 0:t.allTime)==null?void 0:R.trades)||0} trades`,icon:wt,color:"text-green-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Commission Earnings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:h((W=t==null?void 0:t.today)==null?void 0:W.commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:h((D=t==null?void 0:t.thisWeek)==null?void 0:D.commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:h((re=t==null?void 0:t.thisMonth)==null?void 0:re.commission)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-green-500 font-mono font-bold",children:h((O=t==null?void 0:t.allTime)==null?void 0:O.commission)})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Swap Earnings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:h((q=t==null?void 0:t.today)==null?void 0:q.swap)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:h((T=t==null?void 0:t.thisWeek)==null?void 0:T.swap)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:h((j=t==null?void 0:t.thisMonth)==null?void 0:j.swap)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-blue-500 font-mono font-bold",children:h((Z=t==null?void 0:t.allTime)==null?void 0:Z.swap)})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"IB Subscription Fees"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:h((I=t==null?void 0:t.today)==null?void 0:I.ibSubscriptionFees)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:h((ce=t==null?void 0:t.thisWeek)==null?void 0:ce.ibSubscriptionFees)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:h((J=t==null?void 0:t.thisMonth)==null?void 0:J.ibSubscriptionFees)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-yellow-500 font-mono font-bold",children:h((le=t==null?void 0:t.allTime)==null?void 0:le.ibSubscriptionFees)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Total IBs"}),e.jsx("span",{className:"text-gray-400",children:((xe=t==null?void 0:t.allTime)==null?void 0:xe.ibSubscriptionCount)||0})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Volume (Lots)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:(((ze=t==null?void 0:t.today)==null?void 0:ze.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:(((je=t==null?void 0:t.thisWeek)==null?void 0:je.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:(((H=t==null?void 0:t.thisMonth)==null?void 0:H.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-purple-500 font-mono font-bold",children:(((be=t==null?void 0:t.allTime)==null?void 0:be.volume)||0).toFixed(2)})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-800 pb-2",children:[e.jsx("button",{onClick:()=>f("daily"),className:`px-4 py-2 rounded-lg text-sm ${b==="daily"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"Daily Breakdown"}),e.jsx("button",{onClick:()=>f("users"),className:`px-4 py-2 rounded-lg text-sm ${b==="users"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"By User"}),e.jsx("button",{onClick:()=>f("symbols"),className:`px-4 py-2 rounded-lg text-sm ${b==="symbols"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"By Symbol"})]}),b==="daily"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Date"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):r.map((ue,$)=>{var V;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:ue.date}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ue.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ue.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(V=ue.volume)==null?void 0:V.toFixed(2)})]},$)})})]})})}),b==="users"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"User"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):n.map((ue,$)=>{var V;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:ue.userName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:ue.userEmail})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ue.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ue.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(V=ue.volume)==null?void 0:V.toFixed(2)})]},$)})})]})})}),b==="symbols"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Symbol"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):i.map((ue,$)=>{var V;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3 text-white text-sm font-medium",children:ue.symbol}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ue.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ue.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ue.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(V=ue.volume)==null?void 0:V.toFixed(2)})]},$)})})]})})})]})]})},rN=()=>{const[t,s]=o.useState(""),[r,a]=o.useState(""),[n,l]=o.useState(!1),[i,d]=o.useState(!1),[c,m]=o.useState(""),[b,f]=o.useState(!1),u=async v=>{if(v.preventDefault(),!t){m("Please enter your email address");return}l(!0),m("");try{const N=await(await fetch(`${A}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,newEmail:b?r:null})})).json();N.success?d(!0):m(N.message||"Failed to submit request")}catch{m("Error submitting request. Please try again.")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx(bs,{to:"/user/login",className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:rs,alt:"ProfitVisionFX",className:"h-32 object-contain"})}),i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(nt,{size:32,className:"text-green-500"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Request Submitted"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your password reset request has been sent to the admin. You will receive a new password on your registered email shortly."}),e.jsx(bs,{to:"/user/login",className:"inline-block bg-white text-black font-medium px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors",children:"Back to Login"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Enter your email address and we'll send your request to the admin. A new password will be sent to your email."}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Registered Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",placeholder:"Enter your registered email",value:t,onChange:v=>{s(v.target.value),m("")},className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"changeEmail",checked:b,onChange:v=>f(v.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-blue-500 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"changeEmail",className:"text-gray-400 text-sm",children:"I want to change my email address"})]}),b&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"New Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",placeholder:"Enter new email address",value:r,onChange:v=>a(v.target.value),className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-2 flex items-start gap-1",children:[e.jsx($r,{size:14,className:"shrink-0 mt-0.5"}),"Admin will verify and update your email. Password will be sent to the new email."]})]}),c&&e.jsx("p",{className:"text-red-500 text-sm",children:c}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:n?"Submitting...":"Submit Request"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Remember your password?"," ",e.jsx(bs,{to:"/user/login",className:"text-white hover:underline",children:"Sign in"})]})]})]})]})},aN=()=>{const[t,s]=o.useState([]),[r,a]=o.useState([]),[n,l]=o.useState(!0),[i,d]=o.useState(null),[c,m]=o.useState(!1),[b,f]=o.useState(!1),[u,v]=o.useState(null),[k,N]=o.useState({type:"",text:""}),[y,p]=o.useState(""),[g,h]=o.useState({});o.useEffect(()=>{x(),w()},[]);const x=async()=>{var R;l(!0);try{const D=await(await fetch(`${A}/theme/all`)).json();if(D.success){s(D.themes||[]);const re=(R=D.themes)==null?void 0:R.find(O=>O.isActive);d(re)}}catch(W){console.error("Error fetching themes:",W)}l(!1)},w=async()=>{try{const W=await(await fetch(`${A}/theme/presets`)).json();W.success&&a(W.presets||[])}catch(R){console.error("Error fetching presets:",R)}},z=async R=>{try{const D=await(await fetch(`${A}/theme/apply-preset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presetName:R})})).json();D.success?(N({type:"success",text:D.message}),x()):N({type:"error",text:D.message})}catch{N({type:"error",text:"Error applying preset"})}},C=async R=>{try{const D=await(await fetch(`${A}/theme/${R}/activate`,{method:"PUT"})).json();D.success?(N({type:"success",text:D.message}),x()):N({type:"error",text:D.message})}catch{N({type:"error",text:"Error activating theme"})}},B=async R=>{if(confirm("Are you sure you want to delete this theme?"))try{const D=await(await fetch(`${A}/theme/${R}`,{method:"DELETE"})).json();D.success?(N({type:"success",text:D.message}),x()):N({type:"error",text:D.message})}catch{N({type:"error",text:"Error deleting theme"})}},G=async()=>{if(!y.trim()){N({type:"error",text:"Theme name is required"});return}try{const W=await(await fetch(`${A}/theme/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y,isActive:!1})})).json();W.success?(N({type:"success",text:W.message}),m(!1),p(""),x()):N({type:"error",text:W.message})}catch{N({type:"error",text:"Error creating theme"})}},K=R=>{v(R),h(R.colors||{}),f(!0)},ee=async()=>{try{const W=await(await fetch(`${A}/theme/${u._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({colors:g})})).json();W.success?(N({type:"success",text:"Theme updated successfully"}),f(!1),x()):N({type:"error",text:W.message})}catch{N({type:"error",text:"Error updating theme"})}},X=[{title:"Primary Colors",colors:["primary","primaryHover","secondary","secondaryHover","accent","accentHover"]},{title:"Background Colors",colors:["bgPrimary","bgSecondary","bgCard","bgHover"]},{title:"Text Colors",colors:["textPrimary","textSecondary","textMuted"]},{title:"Border Colors",colors:["border","borderLight"]},{title:"Status Colors",colors:["success","error","warning","info"]},{title:"Trading Colors",colors:["buyColor","sellColor","profitColor","lossColor"]},{title:"Sidebar Colors",colors:["sidebarBg","sidebarText","sidebarActive"]},{title:"Button Colors",colors:["buttonPrimary","buttonSecondary","buttonDanger"]}],F=R=>R.replace(/([A-Z])/g," $1").replace(/^./,W=>W.toUpperCase());return e.jsxs(as,{title:"Theme Settings",subtitle:"Customize user dashboard appearance",children:[k.text&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg ${k.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:[k.text,e.jsx("button",{onClick:()=>N({type:"",text:""}),className:"float-right",children:e.jsx(Se,{size:16})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ih,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Quick Theme Presets"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Click to apply a preset theme instantly"})]})]}),e.jsx("button",{onClick:x,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",children:e.jsx(Je,{size:18,className:"text-gray-400"})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3",children:r.map(R=>e.jsxs("button",{onClick:()=>z(R.name),className:`p-3 rounded-xl border transition-all hover:scale-105 ${(i==null?void 0:i.name)===R.name?"border-green-500 bg-green-500/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"w-full h-8 rounded-lg mb-2 flex overflow-hidden",style:{backgroundColor:R.colors.bgPrimary},children:[e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:R.colors.primary}}),e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:R.colors.accent}}),e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:R.colors.secondary}})]}),e.jsx("p",{className:"text-white text-xs font-medium truncate",children:R.name}),(i==null?void 0:i.name)===R.name&&e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx(nt,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text-green-500 text-[10px]",children:"Active"})]})]},R.name))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Custom Themes"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.length," themes configured"]})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(ut,{size:16}),"Create Theme"]})]}),n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading themes..."}):t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No custom themes yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Apply a preset or create a new theme."})]}):e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(R=>{var W,D,re,O,q;return e.jsxs("div",{className:`p-4 rounded-xl border ${R.isActive?"border-green-500 bg-green-500/5":"border-gray-700 bg-dark-700"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-white font-medium",children:R.name}),R.isActive&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-500 text-xs rounded-full",children:"Active"})]})}),e.jsxs("div",{className:"w-full h-12 rounded-lg mb-3 flex overflow-hidden border border-gray-600",style:{backgroundColor:((W=R.colors)==null?void 0:W.bgPrimary)||"#000"},children:[e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((D=R.colors)==null?void 0:D.primary)||"#3B82F6"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((re=R.colors)==null?void 0:re.accent)||"#F59E0B"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((O=R.colors)==null?void 0:O.secondary)||"#10B981"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((q=R.colors)==null?void 0:q.error)||"#EF4444"}})]}),e.jsxs("div",{className:"flex gap-2",children:[!R.isActive&&e.jsxs("button",{onClick:()=>C(R._id),className:"flex-1 py-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 text-sm flex items-center justify-center gap-1",children:[e.jsx(nt,{size:14}),"Activate"]}),e.jsxs("button",{onClick:()=>K(R),className:"flex-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 text-sm flex items-center justify-center gap-1",children:[e.jsx(ms,{size:14}),"Edit"]}),!R.isActive&&e.jsx("button",{onClick:()=>B(R._id),className:"py-2 px-3 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30",children:e.jsx(Vt,{size:14})})]})]},R._id)})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-700 w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Create New Theme"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Theme Name"}),e.jsx("input",{type:"text",value:y,onChange:R=>p(R.target.value),placeholder:"e.g., My Custom Theme",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:G,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Create Theme"})]})]})}),b&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-700 w-full max-w-4xl p-6 my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:["Edit Theme: ",u.name]}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Se,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[60vh] overflow-y-auto pr-2",children:X.map(R=>e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:R.title}),e.jsx("div",{className:"space-y-3",children:R.colors.map(W=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:F(W)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:g[W]||"#000000",onChange:D=>h({...g,[W]:D.target.value}),className:"w-10 h-8 rounded cursor-pointer border-0"}),e.jsx("input",{type:"text",value:g[W]||"",onChange:D=>h({...g,[W]:D.target.value}),className:"w-24 bg-dark-600 border border-gray-600 rounded px-2 py-1 text-white text-xs"})]})]},W))})]},R.title))}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsxs("button",{onClick:ee,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center justify-center gap-2",children:[e.jsx(Wa,{size:18}),"Save Changes"]})]})]})})]})},nN=()=>{const{isDarkMode:t}=ks(),[s,r]=o.useState("book-management"),[a,n]=o.useState("positions"),[l,i]=o.useState([]),[d,c]=o.useState([]),[m,b]=o.useState([]),[f,u]=o.useState({totalVolume:0,totalExposure:0,count:0}),[v,k]=o.useState({totalPnl:0,totalVolume:0,count:0,winCount:0,lossCount:0}),[N,y]=o.useState({aBook:{users:0,openTrades:0,volume:0},bBook:{users:0,openTrades:0,volume:0}}),[p,g]=o.useState(!0),[h,x]=o.useState(""),[w,z]=o.useState(""),[C,B]=o.useState(1),[G,K]=o.useState({total:0,pages:1}),[ee,X]=o.useState([]),[F,R]=o.useState({}),[W,D]=o.useState({total:0,pages:1}),[re,O]=o.useState({total:0,pages:1}),[q,T]=o.useState(1),[j,Z]=o.useState(1);o.useEffect(()=>{ce(),s==="book-management"?J():s==="a-book"&&(a==="positions"?le():xe())},[s,a,C,w,h,q,j]),o.useEffect(()=>{const me=Ji.subscribe("adminBookManagement",ae=>{ae&&Object.keys(ae).length>0&&R(ve=>({...ve,...ae}))});return()=>me()},[]);const I=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`}),ce=async()=>{try{const ae=await(await fetch(`${A}/book-management/stats`,{headers:I()})).json();ae.success&&y(ae.stats)}catch(me){console.error("Error fetching stats:",me)}},J=async()=>{g(!0);try{const me=new URLSearchParams({page:C,limit:20,...h&&{search:h},...w&&{bookType:w}}),ve=await(await fetch(`${A}/book-management/users?${me}`,{headers:I()})).json();ve.success&&(i(ve.users),K(ve.pagination))}catch(me){console.error("Error fetching users:",me)}g(!1)},le=async()=>{g(!0);try{const me=new URLSearchParams({page:q,limit:100}),ve=await(await fetch(`${A}/book-management/a-book/positions?${me}`,{headers:I()})).json();ve.success&&(c(ve.positions),u(ve.summary),D(ve.pagination))}catch(me){console.error("Error fetching positions:",me)}g(!1)},xe=async()=>{g(!0);try{const me=new URLSearchParams({page:j,limit:100}),ve=await(await fetch(`${A}/book-management/a-book/history?${me}`,{headers:I()})).json();ve.success&&(b(ve.history),k(ve.summary),O(ve.pagination))}catch(me){console.error("Error fetching history:",me)}g(!1)},ze=async(me,ae)=>{const ve=ae==="A"?"B":"A";try{(await(await fetch(`${A}/book-management/users/${me}/book-type`,{method:"PUT",headers:I(),body:JSON.stringify({bookType:ve})})).json()).success&&(J(),ce())}catch(Ve){console.error("Error toggling book type:",Ve)}},je=async me=>{if(ee.length!==0)try{(await(await fetch(`${A}/book-management/users/bulk-book-type`,{method:"PUT",headers:I(),body:JSON.stringify({userIds:ee,bookType:me})})).json()).success&&(X([]),J(),ce())}catch(ae){console.error("Error bulk updating book type:",ae)}},H=me=>{X(ae=>ae.includes(me)?ae.filter(ve=>ve!==me):[...ae,me])},be=()=>{ee.length===l.length?X([]):X(l.map(me=>me._id))},ue=me=>{const ae=F[me.symbol];if(!ae||me.status!=="OPEN")return me.realizedPnl||0;const ve=me.side==="BUY"?ae.bid:ae.ask;return(me.side==="BUY"?(ve-me.openPrice)*me.quantity*me.contractSize:(me.openPrice-ve)*me.quantity*me.contractSize)-(me.commission||0)-(me.swap||0)},$=()=>{var me,ae,ve,Ve;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"A-Book Users"}),e.jsx("p",{className:"text-xl font-bold text-white",children:((me=N.aBook)==null?void 0:me.users)||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"B-Book Users"}),e.jsx("p",{className:"text-xl font-bold text-white",children:((ae=N.bBook)==null?void 0:ae.users)||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(xr,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"A-Book Open Trades"}),e.jsx("p",{className:"text-xl font-bold text-white",children:((ve=N.aBook)==null?void 0:ve.openTrades)||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(xr,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"B-Book Open Trades"}),e.jsx("p",{className:"text-xl font-bold text-white",children:((Ve=N.bBook)==null?void 0:Ve.openTrades)||0})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:h,onChange:Le=>{x(Le.target.value),B(1)},className:"w-full pl-10 pr-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"})]}),e.jsxs("select",{value:w,onChange:Le=>{z(Le.target.value),B(1)},className:"px-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-accent-green",children:[e.jsx("option",{value:"",children:"All Books"}),e.jsx("option",{value:"A",children:"A-Book Only"}),e.jsx("option",{value:"B",children:"B-Book Only"})]}),e.jsx("button",{onClick:()=>{J(),ce()},className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white hover:border-accent-green transition-colors",children:e.jsx(Je,{className:"w-5 h-5"})})]}),ee.length>0&&e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-dark-700 rounded-lg border border-gray-700",children:[e.jsxs("span",{className:"text-gray-400",children:[ee.length," users selected"]}),e.jsx("button",{onClick:()=>je("A"),className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Move to A-Book"}),e.jsx("button",{onClick:()=>je("B"),className:"px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Move to B-Book"}),e.jsx("button",{onClick:()=>X([]),className:"px-4 py-1.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Clear Selection"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:ee.length===l.length&&l.length>0,onChange:be,className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-accent-green focus:ring-accent-green"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Accounts"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Total Trades"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Open Trades"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Book Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:p?e.jsx("tr",{children:e.jsxs("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-400",children:[e.jsx(Je,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading users..."]})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-400",children:"No users found"})}):l.map(Le=>{var S;return e.jsxs("tr",{className:"hover:bg-dark-700/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:ee.includes(Le._id),onChange:()=>H(Le._id),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-accent-green focus:ring-accent-green"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-accent-green to-blue-500 flex items-center justify-center text-white font-medium text-sm",children:((S=Le.firstName)==null?void 0:S.charAt(0))||"U"}),e.jsx("span",{className:"text-white font-medium",children:Le.firstName||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:Le.email}),e.jsx("td",{className:"px-4 py-3 text-center text-white",children:Le.accountCount||0}),e.jsx("td",{className:"px-4 py-3 text-center text-white",children:Le.totalTrades||0}),e.jsx("td",{className:"px-4 py-3 text-center text-white",children:Le.openTrades||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Le.bookType==="A"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:[Le.bookType||"B","-Book"]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>ze(Le._id,Le.bookType||"B"),className:`p-2 rounded-lg transition-colors ${Le.bookType==="A"?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,title:`Switch to ${Le.bookType==="A"?"B":"A"}-Book`,children:Le.bookType==="A"?e.jsx(Lh,{className:"w-5 h-5"}):e.jsx(Mh,{className:"w-5 h-5"})})})]},Le._id)})})]})}),G.pages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Showing ",(C-1)*20+1," to ",Math.min(C*20,G.total)," of ",G.total," users"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B(Le=>Math.max(1,Le-1)),disabled:C===1,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(To,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-white",children:["Page ",C," of ",G.pages]}),e.jsx("button",{onClick:()=>B(Le=>Math.min(G.pages,Le+1)),disabled:C===G.pages,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Xs,{className:"w-4 h-4"})})]})]})]})]})},V=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>n("positions"),className:`pb-3 px-1 font-medium transition-colors relative ${a==="positions"?"text-blue-400":"text-gray-400 hover:text-white"}`,children:["Positions (",f.count||0,")",a==="positions"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-400"})]}),e.jsxs("button",{onClick:()=>n("history"),className:`pb-3 px-1 font-medium transition-colors relative ${a==="history"?"text-blue-400":"text-gray-400 hover:text-white"}`,children:["History (",v.count||0,")",a==="history"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-400"})]})]}),a==="positions"?de():fe()]}),de=()=>{var me;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(xr,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Open Positions"}),e.jsx("p",{className:"text-xl font-bold text-white",children:f.count||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(wt,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Volume"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[(f.totalVolume||0).toFixed(2)," lots"]})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(xt,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Exposure"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:["$",(f.totalExposure||0).toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"A-Book Users"}),e.jsx("p",{className:"text-xl font-bold text-white",children:((me=N.aBook)==null?void 0:me.users)||0})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white hover:border-accent-green transition-colors",children:[e.jsx(Je,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"ID"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Symbol"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Side"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Volume"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Open"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Current"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"PnL"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"SL/TP"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Time"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:p?e.jsx("tr",{children:e.jsxs("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-400",children:[e.jsx(Je,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading positions..."]})}):d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-400",children:"No open A-Book positions"})}):d.map(ae=>{var Le,S,ie;const ve=ue(ae),Ve=F[ae.symbol]?ae.side==="BUY"?F[ae.symbol].bid:F[ae.symbol].ask:ae.openPrice;return e.jsxs("tr",{className:"hover:bg-dark-700/50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 text-white font-mono text-xs",children:ae.tradeId}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("p",{className:"text-white text-sm",children:((Le=ae.userId)==null?void 0:Le.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(S=ae.userId)==null?void 0:S.email})]}),e.jsx("td",{className:"px-3 py-2 text-white font-medium",children:ae.symbol}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${ae.side==="BUY"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:ae.side})}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:ae.quantity}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:(ie=ae.openPrice)==null?void 0:ie.toFixed(5)}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:Ve==null?void 0:Ve.toFixed(5)}),e.jsxs("td",{className:`px-3 py-2 text-right font-medium ${ve>=0?"text-blue-400":"text-red-400"}`,children:[ve>=0?"+":"","$",ve.toFixed(2)]}),e.jsxs("td",{className:"px-3 py-2 text-right text-xs",children:[e.jsx("span",{className:"text-red-400",children:ae.stopLoss||"-"}),e.jsx("span",{className:"text-gray-500",children:" / "}),e.jsx("span",{className:"text-green-400",children:ae.takeProfit||"-"})]}),e.jsx("td",{className:"px-3 py-2 text-gray-400 text-xs",children:new Date(ae.openedAt).toLocaleString()})]},ae._id)})})]})}),W.pages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",q," of ",W.pages," (",W.total," positions)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(ae=>Math.max(1,ae-1)),disabled:q===1,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50",children:e.jsx(To,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(ae=>Math.min(W.pages,ae+1)),disabled:q===W.pages,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50",children:e.jsx(Xs,{className:"w-4 h-4"})})]})]})]})]})},fe=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Wt,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Trades"}),e.jsx("p",{className:"text-xl font-bold text-white",children:v.count||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${(v.totalPnl||0)>=0?"bg-blue-500/20":"bg-red-500/20"}`,children:e.jsx(wt,{className:`w-5 h-5 ${(v.totalPnl||0)>=0?"text-blue-400":"text-red-400"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total PnL"}),e.jsxs("p",{className:`text-xl font-bold ${(v.totalPnl||0)>=0?"text-blue-400":"text-red-400"}`,children:[(v.totalPnl||0)>=0?"+":"","$",(v.totalPnl||0).toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(xr,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Volume"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[(v.totalVolume||0).toFixed(2)," lots"]})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Wins"}),e.jsx("p",{className:"text-xl font-bold text-green-400",children:v.winCount||0})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg",children:e.jsx(Mn,{className:"w-5 h-5 text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Losses"}),e.jsx("p",{className:"text-xl font-bold text-red-400",children:v.lossCount||0})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:xe,className:"flex items-center gap-2 px-4 py-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white hover:border-accent-green transition-colors",children:[e.jsx(Je,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"ID"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Symbol"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Side"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Volume"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Open"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Close"}),e.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"PnL"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:"Closed By"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Closed At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:p?e.jsx("tr",{children:e.jsxs("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-400",children:[e.jsx(Je,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading history..."]})}):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"px-4 py-8 text-center text-gray-400",children:"No A-Book trade history"})}):m.map(me=>{var ae,ve,Ve,Le;return e.jsxs("tr",{className:"hover:bg-dark-700/50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 text-white font-mono text-xs",children:me.tradeId}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("p",{className:"text-white text-sm",children:((ae=me.userId)==null?void 0:ae.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(ve=me.userId)==null?void 0:ve.email})]}),e.jsx("td",{className:"px-3 py-2 text-white font-medium",children:me.symbol}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${me.side==="BUY"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:me.side})}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:me.quantity}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:(Ve=me.openPrice)==null?void 0:Ve.toFixed(5)}),e.jsx("td",{className:"px-3 py-2 text-right text-white",children:(Le=me.closePrice)==null?void 0:Le.toFixed(5)}),e.jsxs("td",{className:`px-3 py-2 text-right font-medium ${(me.realizedPnl||0)>=0?"text-blue-400":"text-red-400"}`,children:[(me.realizedPnl||0)>=0?"+":"","$",(me.realizedPnl||0).toFixed(2)]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.closedBy==="SL"?"bg-red-500/20 text-red-400":me.closedBy==="TP"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:me.closedBy||"USER"})}),e.jsx("td",{className:"px-3 py-2 text-gray-400 text-xs",children:new Date(me.closedAt).toLocaleString()})]},me._id)})})]})}),re.pages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",j," of ",re.pages," (",re.total," trades)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Z(me=>Math.max(1,me-1)),disabled:j===1,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50",children:e.jsx(To,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Z(me=>Math.min(re.pages,me+1)),disabled:j===re.pages,className:"p-2 bg-dark-700 border border-gray-700 rounded-lg text-gray-400 hover:text-white disabled:opacity-50",children:e.jsx(Xs,{className:"w-4 h-4"})})]})]})]})]});return e.jsx(as,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(ol,{className:"w-7 h-7 text-accent-green"}),"Book Management"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage A-Book and B-Book user assignments and view trades"})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-gray-800",children:[e.jsxs("button",{onClick:()=>r("book-management"),className:`pb-3 px-1 font-medium transition-colors relative ${s==="book-management"?"text-accent-green":"text-gray-400 hover:text-white"}`,children:["Book Management",s==="book-management"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent-green"})]}),e.jsxs("button",{onClick:()=>r("a-book"),className:`pb-3 px-1 font-medium transition-colors relative ${s==="a-book"?"text-accent-green":"text-gray-400 hover:text-white"}`,children:["A-Book Trades",s==="a-book"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-accent-green"})]})]}),s==="book-management"?$():V()]})})},lN=()=>{const{slug:t}=_d(),s=Nt(),[r,a]=o.useState("signin"),[n,l]=o.useState(!1),[i,d]=o.useState(""),[c,m]=o.useState(!1),[b,f]=o.useState(null),[u,v]=o.useState(!0),[k,N]=o.useState(""),[y,p]=o.useState({email:"",password:""}),[g,h]=o.useState(window.innerWidth<768);o.useEffect(()=>{const C=()=>h(window.innerWidth<768);return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),o.useEffect(()=>{x()},[t]);const x=async()=>{try{const B=await(await fetch(`${A}/admin-mgmt/brand/${t}`)).json();B.success?(f(B.brand),localStorage.setItem("adminSlug",t),localStorage.setItem("adminId",B.brand.adminId)):N(B.message||"Brand not found")}catch{N("Failed to load brand information")}v(!1)},w=C=>{p({...y,[C.target.name]:C.target.value}),d("")},z=async C=>{C.preventDefault(),l(!0),d("");try{const B=await fetch(`${A}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,adminSlug:t})}),G=await B.json();if(!B.ok)throw new Error(G.message||"Login failed");localStorage.setItem("token",G.token),localStorage.setItem("user",JSON.stringify(G.user)),s(g?"/mobile":"/dashboard")}catch(B){d(B.message)}finally{l(!1)}};return u?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):k?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800 text-center",children:[e.jsx($r,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-white mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-gray-400 mb-6",children:k}),e.jsx(bs,{to:"/user/login",className:"text-accent-green hover:underline",children:"Go to main login"})]})}):e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),(b==null?void 0:b.brandName)&&e.jsx("div",{className:"text-center mb-6",children:e.jsx("h2",{className:"text-accent-green text-lg font-bold",children:b.brandName})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx(bs,{to:`/${t}/signup`,className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign up"}),e.jsx("button",{onClick:()=>a("signin"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${r==="signin"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Welcome back"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:y.email,onChange:w,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:c?"text":"password",name:"password",placeholder:"Enter your password",value:y.password,onChange:w,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>m(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:c?e.jsx(cl,{size:18}):e.jsx(ms,{size:18})})]}),e.jsx("div",{className:"text-right",children:e.jsx(bs,{to:`/${t}/forgot-password`,className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Forgot password?"})}),i&&e.jsx("p",{className:"text-red-500 text-sm",children:i}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:n?"Signing in...":"Sign in"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Don't have an account?"," ",e.jsx(bs,{to:`/${t}/signup`,className:"text-white hover:underline",children:"Sign up"})]})]})]})},iN=()=>{const{slug:t}=_d(),s=Nt(),[r,a]=o.useState(!1),[n,l]=o.useState(""),[i,d]=o.useState(!1),[c,m]=o.useState(null),[b,f]=o.useState(!0),[u,v]=o.useState(""),[k,N]=o.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""});o.useEffect(()=>{y()},[t]);const y=async()=>{try{const x=await(await fetch(`${A}/admin-mgmt/brand/${t}`)).json();x.success?(m(x.brand),localStorage.setItem("adminSlug",t),localStorage.setItem("adminId",x.brand.adminId)):v(x.message||"Brand not found")}catch{v("Failed to load brand information")}f(!1)},p=h=>{N({...k,[h.target.name]:h.target.value}),l("")},g=async h=>{if(h.preventDefault(),a(!0),l(""),k.password!==k.confirmPassword){l("Passwords do not match"),a(!1);return}try{const x=await fetch(`${A}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:k.firstName,lastName:k.lastName,email:k.email,phone:k.phone,password:k.password,adminSlug:t,adminId:c==null?void 0:c.adminId})}),w=await x.json();if(!x.ok)throw new Error(w.message||"Signup failed");localStorage.setItem("token",w.token),localStorage.setItem("user",JSON.stringify(w.user)),s("/dashboard")}catch(x){l(x.message)}finally{a(!1)}};return b?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):u?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800 text-center",children:[e.jsx($r,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-white mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-gray-400 mb-6",children:u}),e.jsx(bs,{to:"/user/signup",className:"text-accent-green hover:underline",children:"Go to main signup"})]})}):e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(Se,{size:16,className:"text-gray-400"})}),(c==null?void 0:c.brandName)&&e.jsx("div",{className:"text-center mb-6",children:e.jsx("h2",{className:"text-accent-green text-lg font-bold",children:c.brandName})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx("button",{className:"px-6 py-2 rounded-full text-sm font-medium bg-dark-500 text-white",children:"Sign up"}),e.jsx(bs,{to:`/${t}/login`,className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Create account"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First name",value:k.firstName,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",name:"lastName",placeholder:"Last name",value:k.lastName,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:k.email,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ni,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:k.phone,onChange:p,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:i?"text":"password",name:"password",placeholder:"Create password",value:k.password,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>d(!i),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:i?e.jsx(cl,{size:18}):e.jsx(ms,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:i?"text":"password",name:"confirmPassword",placeholder:"Confirm password",value:k.confirmPassword,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),n&&e.jsx("p",{className:"text-red-500 text-sm",children:n}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:r?"Creating account...":"Sign up"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Already have an account?"," ",e.jsx(bs,{to:`/${t}/login`,className:"text-white hover:underline",children:"Sign in"})]})]})]})},lm=[{keywords:["deposit","add money","fund","add funds","payment"],category:"wallet",question:"How do I deposit money?",answer:`To deposit money:
1. Go to Wallet section
2. Click "Deposit"
3. Choose your payment method (UPI, Bank Transfer, Card)
4. Enter the amount and complete payment

Deposits are usually instant but may take up to 24 hours.`},{keywords:["withdraw","withdrawal","cash out","take money"],category:"wallet",question:"How do I withdraw money?",answer:`To withdraw funds:
1. Go to Wallet section
2. Click "Withdraw"
3. Enter the amount (minimum $10)
4. Add your bank details if not already added
5. Submit request

Withdrawals are processed within 24-48 hours.`},{keywords:["account","trading account","create account","new account","open account"],category:"account",question:"How do I create a trading account?",answer:`To create a trading account:
1. Go to "Account" section
2. Click "Create New Account"
3. Choose account type (Standard/ECN)
4. Select leverage (1:100, 1:200, etc.)
5. Fund your account from wallet

You can have multiple trading accounts.`},{keywords:["trade","trading","buy","sell","order","place order"],category:"trading",question:"How do I place a trade?",answer:`To place a trade:
1. Go to Trading section
2. Select an instrument (EUR/USD, Gold, etc.)
3. Choose BUY or SELL
4. Enter lot size (volume)
5. Set Stop Loss & Take Profit (optional)
6. Click "Execute Trade"

You can also set pending orders.`},{keywords:["copy","copytrade","copy trading","follow trader"],category:"copytrade",question:"What is Copy Trading?",answer:`Copy Trading lets you automatically copy trades from expert traders:
1. Go to "Copytrade" section
2. Browse available master traders
3. Check their performance & stats
4. Click "Copy" and set your investment amount
5. Their trades will be copied to your account automatically!`},{keywords:["ib","affiliate","referral","commission","partner","introduce"],category:"ib",question:"How does the IB Program work?",answer:`Our Introducing Broker (IB) program lets you earn commissions:
1. Go to "IB" section
2. Get your unique referral link
3. Share with friends & traders
4. Earn commission on their trading volume

Commission rates vary based on your tier level.`},{keywords:["leverage","margin","lot","lot size"],category:"trading",question:"What is leverage and lot size?",answer:`Leverage: Allows you to control larger positions with less capital. Example: 1:100 means $100 controls $10,000.

Lot Size: Trading volume unit.
- 1 Standard Lot = 100,000 units
- 0.1 Lot = 10,000 units
- 0.01 Lot = 1,000 units

Higher leverage = Higher risk & reward.`},{keywords:["spread","commission","fee","charges","cost"],category:"trading",question:"What are the trading fees?",answer:`Our fee structure:
- Spread: Variable (from 0.1 pips on ECN)
- Commission: $3-7 per lot depending on account type
- Swap: Overnight holding fee (varies by instrument)
- No deposit/withdrawal fees!

Check each instrument for specific spreads.`},{keywords:["kyc","verify","verification","document","identity"],category:"account",question:"How do I verify my account?",answer:`To complete KYC verification:
1. Go to Profile section
2. Click "Verify Account"
3. Upload ID proof (Passport/Aadhar/License)
4. Upload address proof (Utility bill/Bank statement)
5. Wait for approval (usually 24-48 hours)

Verification is required for withdrawals.`},{keywords:["password","reset","forgot","login issue","cant login"],category:"account",question:"I forgot my password",answer:`To reset your password:
1. Go to login page
2. Click "Forgot Password"
3. Enter your registered email
4. Check email for reset link
5. Create new password

If you still have issues, contact support.`},{keywords:["hello","hi","hey","good morning","good evening"],category:"greeting",question:"Greeting",answer:`Hello!  Welcome to our trading platform! I'm here to help you with any questions about:

 Deposits & Withdrawals
 Trading & Orders
 Account Management
 Copy Trading
 IB Program

How can I assist you today?`},{keywords:["thank","thanks","thank you","thx"],category:"greeting",question:"Thanks",answer:"You're welcome!  Is there anything else I can help you with? Feel free to ask any questions about the platform."}],oN=[{id:"deposit",label:"How to Deposit?",icon:ht,keywords:["deposit"]},{id:"trade",label:"How to Trade?",icon:xt,keywords:["trade"]},{id:"withdraw",label:"How to Withdraw?",icon:ht,keywords:["withdraw"]},{id:"copytrade",label:"Copy Trading",icon:ot,keywords:["copy"]},{id:"verify",label:"Account Verification",icon:ar,keywords:["kyc"]},{id:"human",label:"Talk to Human",icon:Vi,keywords:["human"]}],cN=()=>{const{isDarkMode:t}=ks(),[s,r]=o.useState(!1),[a,n]=o.useState([]),[l,i]=o.useState(""),[d,c]=o.useState(!1),[m,b]=o.useState(!1),f=o.useRef(null),u=o.useRef(null),v=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{var h;(h=f.current)==null||h.scrollIntoView({behavior:"smooth"})},[a]),o.useEffect(()=>{if(s&&a.length===0){const h={id:Date.now(),type:"bot",text:`Hi ${v.name||"there"}! 

Welcome to ProfitVisionFX Support! I'm your virtual assistant and I'm here to help you navigate our trading platform.

You can ask me about:
 Deposits & Withdrawals
 Trading & Orders
 Account Setup
 Copy Trading
 IB Program

Or choose from the quick options below!`,timestamp:new Date};n([h])}},[s]);const k=h=>{const x=h.toLowerCase().trim();if(x.includes("human")||x.includes("support")||x.includes("agent")||x.includes("person")||x.includes("talk to someone"))return{found:!0,isHumanRequest:!0,answer:`I understand you'd like to speak with a human support agent. 

Please wait while I connect you with our support team. A human agent will respond to your query shortly.

In the meantime, feel free to describe your issue and I'll make sure it reaches our team.`};for(const w of lm)for(const z of w.keywords)if(x.includes(z))return{found:!0,answer:w.answer,category:w.category};return{found:!1}},N=async()=>{if(!l.trim())return;const h={id:Date.now(),type:"user",text:l,timestamp:new Date};n(w=>[...w,h]),i(""),c(!0),await new Promise(w=>setTimeout(w,800+Math.random()*500));const x=k(l);if(x.found){if(x.isHumanRequest){b(!0);try{await fetch(`${A}/support/chat-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,userName:v.name||v.email,message:l,type:"human_request"})})}catch(z){console.error("Failed to save support request:",z)}}const w={id:Date.now()+1,type:"bot",text:x.answer,timestamp:new Date};n(z=>[...z,w])}else{const w={id:Date.now()+1,type:"bot",text:`I'm not sure I understand your question completely. 

Would you like me to connect you with a human support agent? They can help you with more specific queries.

Or you can try rephrasing your question, and I'll do my best to help!`,showHumanOption:!0,timestamp:new Date};n(z=>[...z,w]);try{await fetch(`${A}/support/chat-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,userName:v.name||v.email,message:l,type:"unknown_question"})})}catch(z){console.error("Failed to save question:",z)}}c(!1)},y=h=>{if(h.id==="human")i("I want to talk to human support"),setTimeout(()=>N(),100);else{const x=lm.find(w=>h.keywords.some(z=>w.keywords.includes(z)));if(x){const w={id:Date.now(),type:"user",text:h.label,timestamp:new Date};n(z=>[...z,w]),setTimeout(()=>{const z={id:Date.now()+1,type:"bot",text:x.answer,timestamp:new Date};n(C=>[...C,z])},500)}}},p=async()=>{b(!0),c(!0),await new Promise(x=>setTimeout(x,1e3));const h={id:Date.now(),type:"bot",text:`I've notified our support team about your request. 

A human agent will review your conversation and respond shortly. You'll receive a notification when they reply.

Thank you for your patience!`,timestamp:new Date};n(x=>[...x,h]),c(!1);try{await fetch(`${A}/support/chat-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,userName:v.name||v.email,messages:a,type:"human_escalation"})})}catch(x){console.error("Failed to escalate:",x)}},g=h=>new Date(h).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(!s),className:`fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 z-50 ${s?"bg-red-500 hover:bg-red-600 rotate-0":"bg-accent-green hover:bg-green-600 animate-bounce"}`,style:{animationDuration:"2s"},children:s?e.jsx(Se,{size:24,className:"text-white"}):e.jsx(Mc,{size:24,className:"text-black"})}),s&&e.jsxs("div",{className:`fixed bottom-24 right-6 w-96 h-[550px] rounded-2xl shadow-2xl flex flex-col overflow-hidden z-50 transition-all duration-300 ${t?"bg-dark-800 border border-gray-700":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-accent-green to-green-600 px-4 py-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(So,{size:22,className:"text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold",children:"ProfitVisionFX Support"}),e.jsxs("p",{className:"text-white/80 text-xs flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),m?"Waiting for human agent...":"Online - Ready to help"]})]}),e.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white transition-colors",children:e.jsx(Se,{size:20})})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto p-4 space-y-4 ${t?"bg-dark-900":"bg-gray-50"}`,children:[a.map(h=>e.jsx("div",{className:`flex ${h.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-2 max-w-[85%] ${h.type==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${h.type==="user"?"bg-accent-green":t?"bg-dark-700":"bg-gray-200"}`,children:h.type==="user"?e.jsx(Gt,{size:16,className:"text-black"}):e.jsx(So,{size:16,className:t?"text-accent-green":"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:`rounded-2xl px-4 py-3 ${h.type==="user"?"bg-accent-green text-black rounded-br-md":t?"bg-dark-700 text-white rounded-bl-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:h.text})}),e.jsx("p",{className:`text-xs mt-1 ${h.type==="user"?"text-right":""} ${t?"text-gray-500":"text-gray-400"}`,children:g(h.timestamp)}),h.showHumanOption&&!m&&e.jsxs("button",{onClick:p,className:"mt-2 flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors",children:[e.jsx(Vi,{size:16}),"Connect to Human Support"]})]})]})},h.id)),d&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t?"bg-dark-700":"bg-gray-200"}`,children:e.jsx(So,{size:16,className:t?"text-accent-green":"text-gray-600"})}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${t?"bg-dark-700":"bg-white shadow-sm"}`,children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),e.jsx("div",{ref:f})]}),a.length<=1&&e.jsxs("div",{className:`px-4 py-3 border-t ${t?"border-gray-700 bg-dark-800":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:`text-xs mb-2 ${t?"text-gray-400":"text-gray-500"}`,children:"Quick Actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:oN.map(h=>e.jsxs("button",{onClick:()=>y(h),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${h.id==="human"?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":t?"bg-dark-700 text-gray-300 hover:bg-dark-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(h.icon,{size:14}),h.label]},h.id))})]}),e.jsx("div",{className:`p-4 border-t ${t?"border-gray-700 bg-dark-800":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:`flex items-center gap-2 rounded-xl px-4 py-2 ${t?"bg-dark-700":"bg-gray-100"}`,children:[e.jsx("input",{ref:u,type:"text",value:l,onChange:h=>i(h.target.value),onKeyPress:h=>h.key==="Enter"&&N(),placeholder:"Type your message...",className:`flex-1 bg-transparent outline-none text-sm ${t?"text-white placeholder-gray-500":"text-gray-800 placeholder-gray-400"}`}),e.jsx("button",{onClick:N,disabled:!l.trim(),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${l.trim()?"bg-accent-green text-black hover:bg-green-600":t?"bg-dark-600 text-gray-500":"bg-gray-200 text-gray-400"}`,children:e.jsx(el,{size:16})})]})})]})]})};function dN(){return e.jsxs(By,{children:[e.jsx(cN,{}),e.jsxs(My,{children:[e.jsx(Ge,{path:"/",element:e.jsx(mb,{})}),e.jsx(Ge,{path:"/user/signup",element:e.jsx(bb,{})}),e.jsx(Ge,{path:"/user/login",element:e.jsx(yb,{})}),e.jsx(Ge,{path:"/user/forgot-password",element:e.jsx(rN,{})}),e.jsx(Ge,{path:"/dashboard",element:e.jsx(Nb,{})}),e.jsx(Ge,{path:"/mobile",element:e.jsx(Nj,{})}),e.jsx(Ge,{path:"/account",element:e.jsx(vj,{})}),e.jsx(Ge,{path:"/wallet",element:e.jsx(wj,{})}),e.jsx(Ge,{path:"/orders",element:e.jsx(kj,{})}),e.jsx(Ge,{path:"/trade/:accountId",element:e.jsx(Tj,{})}),e.jsx(Ge,{path:"/copytrade",element:e.jsx(Ej,{})}),e.jsx(Ge,{path:"/ib",element:e.jsx(Pj,{})}),e.jsx(Ge,{path:"/profile",element:e.jsx($j,{})}),e.jsx(Ge,{path:"/support",element:e.jsx(Aj,{})}),e.jsx(Ge,{path:"/instructions",element:e.jsx(Dj,{})}),e.jsx(Ge,{path:"/admin",element:e.jsx(Mj,{})}),e.jsx(Ge,{path:"/admin/dashboard",element:e.jsx(Lj,{})}),e.jsx(Ge,{path:"/admin/users",element:e.jsx(Uj,{})}),e.jsx(Ge,{path:"/admin/accounts",element:e.jsx(zj,{})}),e.jsx(Ge,{path:"/admin/account-types",element:e.jsx(Fj,{})}),e.jsx(Ge,{path:"/admin/transactions",element:e.jsx(_j,{})}),e.jsx(Ge,{path:"/admin/payment-methods",element:e.jsx(Rj,{})}),e.jsx(Ge,{path:"/admin/trades",element:e.jsx(Oj,{})}),e.jsx(Ge,{path:"/admin/funds",element:e.jsx(Bj,{})}),e.jsx(Ge,{path:"/admin/bank-settings",element:e.jsx(Vj,{})}),e.jsx(Ge,{path:"/admin/ib-management",element:e.jsx(Wj,{})}),e.jsx(Ge,{path:"/admin/forex-charges",element:e.jsx(Yj,{})}),e.jsx(Ge,{path:"/admin/indian-charges",element:e.jsx(Hj,{})}),e.jsx(Ge,{path:"/admin/copy-trade",element:e.jsx(Jj,{})}),e.jsx(Ge,{path:"/admin/prop-firm",element:e.jsx(qj,{})}),e.jsx(Ge,{path:"/admin/admin-management",element:e.jsx(Gj,{})}),e.jsx(Ge,{path:"/admin/kyc",element:e.jsx(Xj,{})}),e.jsx(Ge,{path:"/admin/support",element:e.jsx(Kj,{})}),e.jsx(Ge,{path:"/admin/prop-trading",element:e.jsx(eN,{})}),e.jsx(Ge,{path:"/admin/earnings",element:e.jsx(sN,{})}),e.jsx(Ge,{path:"/admin/theme",element:e.jsx(aN,{})}),e.jsx(Ge,{path:"/admin/book-management",element:e.jsx(nN,{})}),e.jsx(Ge,{path:"/buy-challenge",element:e.jsx(Qj,{})}),e.jsx(Ge,{path:"/challenge-dashboard",element:e.jsx(Zj,{})}),e.jsx(Ge,{path:"/:slug/login",element:e.jsx(lN,{})}),e.jsx(Ge,{path:"/:slug/signup",element:e.jsx(iN,{})})]})]})}Mo.createRoot(document.getElementById("root")).render(e.jsx(fm.StrictMode,{children:e.jsx(jb,{children:e.jsx(dN,{})})}));
